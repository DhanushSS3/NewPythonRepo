2025-07-16 06:13:11,381 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-16 06:13:11,432 - INFO - app.core.config - .env file loaded successfully.
2025-07-16 06:13:11,452 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-16 06:13:11,452 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-16 06:13:11,939 - INFO - app - Application starting up - Trading system initialized
2025-07-16 06:13:11,940 - INFO - app - SL/TP Epsilon accuracy configured: 0.00001
2025-07-16 06:13:11,940 - INFO - app - Environment: DEVELOPMENT
2025-07-16 06:13:11,999 - INFO - app - Application startup initiated
2025-07-16 06:13:11,999 - INFO - app - Initializing core services...
2025-07-16 06:13:12,066 - INFO - app - Firebase initialized
2025-07-16 06:13:12,066 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-07-16 06:13:12,105 - INFO - app - Redis initialized
2025-07-16 06:13:12,106 - ERROR - app - Error caching all group settings at startup: name 'cache_all_groups_and_symbols' is not defined
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 781, in startup_event
    await cache_all_groups_and_symbols(global_redis_client_instance, db)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'cache_all_groups_and_symbols' is not defined
2025-07-16 06:13:12,117 - INFO - app - [SWAP] daily_swap_charge_job triggered
2025-07-16 06:13:12,117 - INFO - app - [AUTO-CUTOFF] Scheduled update_all_users_dynamic_portfolio job to run every 1 minute.
2025-07-16 06:13:12,118 - INFO - app - Scheduler initialized
2025-07-16 06:13:12,123 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-16 06:13:12,124 - DEBUG - app.firebase_stream - Successfully got running event loop in process_firebase_events task.
2025-07-16 06:13:12,124 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-07-16 06:13:13,378 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-16 06:13:13,415 - DEBUG - app.firebase_stream - Firebase listener triggered (1). Event Type: put, Path: /. Timestamp: 1752671593.38242
2025-07-16 06:13:13,415 - DEBUG - app.firebase_stream - Prepared batch update for 48 symbols from root path for queue. Preview: {'AUDCAD': {'b': '0.8946400000', 'o': '0.8946000000'}, 'AUDCHF': {'b': '0.5240000000', 'o': '0.5239400000'}, 'AUDJPY': {'b': '96.9240000000', 'o': '96.9180000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'
2025-07-16 06:13:13,416 - INFO - app - Starting stale cache cleanup task
2025-07-16 06:13:13,417 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'AUDCAD': {'b': '0.8946400000', 'o': '0.8946000000'}, 'AUDCHF': {'b': '0.5240000000', 'o': '0.5239400000'}, 'AUDJPY': {'b': '96.9240000000', 'o': '96.9180000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'...
2025-07-16 06:13:13,417 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type put at path /.
2025-07-16 06:13:13,467 - INFO - app - Cleaned up pending order stream for new trigger price format
2025-07-16 06:13:13,467 - INFO - app - Background tasks initialized
2025-07-16 06:13:13,672 - DEBUG - app.firebase_stream - Firebase listener triggered (2). Event Type: patch, Path: /. Timestamp: 1752671593.6725132
2025-07-16 06:13:13,672 - DEBUG - app.firebase_stream - Prepared batch update for 13 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0792000000', 'o': '13.0766000000'}, 'GBPAUD': {'b': '2.0544700000', 'o': '2.0543100000'}, 'USDJPY': {'b': '148.7380000000', 'o': '148.7380000000'}, 'USDCNH': {'b': '7.1838600000',
2025-07-16 06:13:13,673 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0792000000', 'o': '13.0766000000'}, 'GBPAUD': {'b': '2.0544700000', 'o': '2.0543100000'}, 'USDJPY': {'b': '148.7380000000', 'o': '148.7380000000'}, 'USDCNH': {'b': '7.1838600000',...
2025-07-16 06:13:13,674 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 06:13:14,214 - INFO - app - Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-07-16 06:13:14,214 - INFO - app - Application startup completed successfully
2025-07-16 06:13:14,215 - INFO - app - Starting cache validation task
2025-07-16 06:13:14,220 - INFO - app - Starting Barclays pending order margin checker task.
2025-07-16 06:13:14,221 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:14,225 - INFO - app - Starting auto-cutoff order monitoring task.
2025-07-16 06:13:14,234 - INFO - app - Found 7 static orders cache entries to check
2025-07-16 06:13:14,236 - WARNING - app - Found stale cache entry for user 13, will be refreshed on next access
2025-07-16 06:13:14,238 - WARNING - app - Found stale cache entry for user 4, will be refreshed on next access
2025-07-16 06:13:14,244 - WARNING - app - Found stale cache entry for user 12, will be refreshed on next access
2025-07-16 06:13:14,245 - INFO - app - Completed stale cache cleanup task
2025-07-16 06:13:14,455 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:14,459 - INFO - app - Validating cache for 30 users
2025-07-16 06:13:14,474 - WARNING - app - User 4: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,494 - WARNING - app - User 5: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,500 - WARNING - app - User 8: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,529 - WARNING - app - User 9: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,540 - WARNING - app - User 10: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,549 - WARNING - app - User 11: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,560 - WARNING - app - User 12: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,569 - WARNING - app - User 13: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,580 - WARNING - app - User 16: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,593 - WARNING - app - User 17: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,604 - WARNING - app - User 18: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,615 - WARNING - app - User 19: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,625 - WARNING - app - User 20: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,635 - WARNING - app - User 21: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,647 - WARNING - app - User 22: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,658 - WARNING - app - User 23: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,669 - WARNING - app - User 25: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,677 - WARNING - app - User 26: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,686 - WARNING - app - User 1: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,700 - WARNING - app - User 2: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,710 - WARNING - app - User 3: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,722 - WARNING - app - User 5: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,732 - WARNING - app - User 6: Missing balance/margin cache, refreshing...
2025-07-16 06:13:14,762 - INFO - app - Cache validation completed
2025-07-16 06:13:15,475 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:15,478 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:15,569 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-16 06:13:15,768 - INFO - app.core.config - .env file loaded successfully.
2025-07-16 06:13:15,779 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-16 06:13:15,779 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-16 06:13:16,024 - DEBUG - app.firebase_stream - Firebase listener triggered (3). Event Type: patch, Path: /. Timestamp: 1752671596.0242558
2025-07-16 06:13:16,024 - DEBUG - app.firebase_stream - Prepared batch update for 15 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.2860000000', 'o': '88.2820000000'}, 'GBPAUD': {'b': '2.0544500000', 'o': '2.0543100000'}, 'USDJPY': {'b': '148.7400000000', 'o': '148.7380000000'}, 'USDCNH': {'b': '7.1838700000',
2025-07-16 06:13:16,025 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.2860000000', 'o': '88.2820000000'}, 'GBPAUD': {'b': '2.0544500000', 'o': '2.0543100000'}, 'USDJPY': {'b': '148.7400000000', 'o': '148.7380000000'}, 'USDCNH': {'b': '7.1838700000',...
2025-07-16 06:13:16,026 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 06:13:16,488 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:16,493 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:17,502 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:17,508 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:18,395 - DEBUG - app.firebase_stream - Firebase listener triggered (4). Event Type: patch, Path: /. Timestamp: 1752671598.3951483
2025-07-16 06:13:18,395 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0789000000', 'o': '13.0766500000'}, 'XAGUSD': {'b': '37.8880000000', 'o': '37.8780000000'}, 'GBPAUD': {'b': '2.0544200000', 'o': '2.0542600000'}, 'BTCUSD': {'b': '118691.900000000
2025-07-16 06:13:18,396 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0789000000', 'o': '13.0766500000'}, 'XAGUSD': {'b': '37.8880000000', 'o': '37.8780000000'}, 'GBPAUD': {'b': '2.0544200000', 'o': '2.0542600000'}, 'BTCUSD': {'b': '118691.900000000...
2025-07-16 06:13:18,396 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 06:13:18,510 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:18,512 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:19,524 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:19,527 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:20,533 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:20,536 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:20,634 - DEBUG - app.firebase_stream - Firebase listener triggered (5). Event Type: patch, Path: /. Timestamp: 1752671600.6342888
2025-07-16 06:13:20,634 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.8880000000', 'o': '37.8730000000'}, 'NZDJPY': {'b': '88.2920000000', 'o': '88.2830000000'}, 'GBPAUD': {'b': '2.0544200000', 'o': '2.0542400000'}, 'BTCUSD': {'b': '118670.500000000
2025-07-16 06:13:20,635 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'XAGUSD': {'b': '37.8880000000', 'o': '37.8730000000'}, 'NZDJPY': {'b': '88.2920000000', 'o': '88.2830000000'}, 'GBPAUD': {'b': '2.0544200000', 'o': '2.0542400000'}, 'BTCUSD': {'b': '118670.500000000...
2025-07-16 06:13:20,635 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 06:13:21,546 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:21,550 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:22,556 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:22,559 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:23,001 - DEBUG - app.firebase_stream - Firebase listener triggered (6). Event Type: patch, Path: /. Timestamp: 1752671603.0017989
2025-07-16 06:13:23,002 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0792000000', 'o': '13.0766500000'}, 'XAGUSD': {'b': '37.8880000000', 'o': '37.8740000000'}, 'NZDJPY': {'b': '88.2890000000', 'o': '88.2810000000'}, 'GBPAUD': {'b': '2.0544300000',
2025-07-16 06:13:23,002 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0792000000', 'o': '13.0766500000'}, 'XAGUSD': {'b': '37.8880000000', 'o': '37.8740000000'}, 'NZDJPY': {'b': '88.2890000000', 'o': '88.2810000000'}, 'GBPAUD': {'b': '2.0544300000',...
2025-07-16 06:13:23,003 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 06:13:23,565 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:23,567 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:24,572 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:24,574 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:25,242 - DEBUG - app.firebase_stream - Firebase listener triggered (7). Event Type: patch, Path: /. Timestamp: 1752671605.2419813
2025-07-16 06:13:25,242 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.2920000000', 'o': '88.2880000000'}, 'GBPAUD': {'b': '2.0545000000', 'o': '2.0543300000'}, 'BTCUSD': {'b': '118675.2000000000', 'o': '118675.1000000000'}, 'USDJPY': {'b': '148.7480
2025-07-16 06:13:25,242 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.2920000000', 'o': '88.2880000000'}, 'GBPAUD': {'b': '2.0545000000', 'o': '2.0543300000'}, 'BTCUSD': {'b': '118675.2000000000', 'o': '118675.1000000000'}, 'USDJPY': {'b': '148.7480...
2025-07-16 06:13:25,242 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 06:13:25,588 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:25,591 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:26,598 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:26,600 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:27,605 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:27,608 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:27,918 - DEBUG - app.firebase_stream - Firebase listener triggered (8). Event Type: patch, Path: /. Timestamp: 1752671607.9187696
2025-07-16 06:13:27,919 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.8830000000', 'o': '37.8710000000'}, 'NZDJPY': {'b': '88.2950000000', 'o': '88.2890000000'}, 'USDJPY': {'b': '148.7560000000', 'o': '148.7530000000'}, 'USDCNH': {'b': '7.1839200000
2025-07-16 06:13:27,919 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '37.8830000000', 'o': '37.8710000000'}, 'NZDJPY': {'b': '88.2950000000', 'o': '88.2890000000'}, 'USDJPY': {'b': '148.7560000000', 'o': '148.7530000000'}, 'USDCNH': {'b': '7.1839200000...
2025-07-16 06:13:27,920 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 06:13:28,618 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:28,621 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:29,217 - INFO - app - Starting stale cache cleanup task
2025-07-16 06:13:29,219 - INFO - app - Found 7 static orders cache entries to check
2025-07-16 06:13:29,220 - WARNING - app - Found stale cache entry for user 13, will be refreshed on next access
2025-07-16 06:13:29,221 - WARNING - app - Found stale cache entry for user 4, will be refreshed on next access
2025-07-16 06:13:29,229 - WARNING - app - Found stale cache entry for user 12, will be refreshed on next access
2025-07-16 06:13:29,230 - INFO - app - Completed stale cache cleanup task
2025-07-16 06:13:29,633 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:29,636 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:30,175 - DEBUG - app.firebase_stream - Firebase listener triggered (9). Event Type: patch, Path: /. Timestamp: 1752671610.175147
2025-07-16 06:13:30,176 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.2900000000', 'o': '88.2810000000'}, 'GBPAUD': {'b': '2.0544200000', 'o': '2.0542700000'}, 'USDJPY': {'b': '148.7440000000', 'o': '148.7400000000'}, 'USDCNH': {'b': '7.1839600000',
2025-07-16 06:13:30,177 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'NZDJPY': {'b': '88.2900000000', 'o': '88.2810000000'}, 'GBPAUD': {'b': '2.0544200000', 'o': '2.0542700000'}, 'USDJPY': {'b': '148.7440000000', 'o': '148.7400000000'}, 'USDCNH': {'b': '7.1839600000',...
2025-07-16 06:13:30,177 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 06:13:30,641 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:30,644 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:31,653 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:31,657 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:32,532 - DEBUG - app.firebase_stream - Firebase listener triggered (10). Event Type: patch, Path: /. Timestamp: 1752671612.5322478
2025-07-16 06:13:32,532 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0792800000', 'o': '13.0768000000'}, 'NZDJPY': {'b': '88.2930000000', 'o': '88.2890000000'}, 'GBPAUD': {'b': '2.0544400000', 'o': '2.0542800000'}, 'USDJPY': {'b': '148.7560000000',
2025-07-16 06:13:32,532 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0792800000', 'o': '13.0768000000'}, 'NZDJPY': {'b': '88.2930000000', 'o': '88.2890000000'}, 'GBPAUD': {'b': '2.0544400000', 'o': '2.0542800000'}, 'USDJPY': {'b': '148.7560000000',...
2025-07-16 06:13:32,532 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 06:13:32,660 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:32,663 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:33,672 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:33,677 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:34,690 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:34,694 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:34,772 - DEBUG - app.firebase_stream - Firebase listener triggered (11). Event Type: patch, Path: /. Timestamp: 1752671614.772752
2025-07-16 06:13:34,773 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0795000000', 'o': '13.0769000000'}, 'XAGUSD': {'b': '37.8720000000', 'o': '37.8610000000'}, 'NZDJPY': {'b': '88.2930000000', 'o': '88.2850000000'}, 'GBPAUD': {'b': '2.0544700000',
2025-07-16 06:13:34,774 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0795000000', 'o': '13.0769000000'}, 'XAGUSD': {'b': '37.8720000000', 'o': '37.8610000000'}, 'NZDJPY': {'b': '88.2930000000', 'o': '88.2850000000'}, 'GBPAUD': {'b': '2.0544700000',...
2025-07-16 06:13:34,774 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 06:13:35,697 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:35,701 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:36,069 - INFO - app - Application shutdown initiated
2025-07-16 06:13:36,069 - INFO - app - Scheduler shutdown completed
2025-07-16 06:13:36,070 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-07-16 06:13:37,117 - INFO - app.firebase_stream - Firebase listener closed.
2025-07-16 06:13:37,117 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-07-16 06:13:37,130 - INFO - app - Redis connection closed
2025-07-16 06:13:37,131 - INFO - app - Application shutdown completed
2025-07-16 06:13:39,482 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-16 06:13:39,510 - INFO - app.core.config - .env file loaded successfully.
2025-07-16 06:13:39,525 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-16 06:13:39,525 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-16 06:13:39,982 - INFO - app - Application starting up - Trading system initialized
2025-07-16 06:13:39,983 - INFO - app - SL/TP Epsilon accuracy configured: 0.00001
2025-07-16 06:13:39,983 - INFO - app - Environment: DEVELOPMENT
2025-07-16 06:13:40,039 - INFO - app - Application startup initiated
2025-07-16 06:13:40,039 - INFO - app - Initializing core services...
2025-07-16 06:13:40,075 - INFO - app - Firebase initialized
2025-07-16 06:13:40,075 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-07-16 06:13:40,186 - INFO - app - Redis initialized
2025-07-16 06:13:41,434 - INFO - app - All group settings and group-symbol settings cached in Redis at startup.
2025-07-16 06:13:41,437 - INFO - app - [SWAP] daily_swap_charge_job triggered
2025-07-16 06:13:41,437 - INFO - app - [AUTO-CUTOFF] Scheduled update_all_users_dynamic_portfolio job to run every 1 minute.
2025-07-16 06:13:41,438 - INFO - app - Scheduler initialized
2025-07-16 06:13:41,439 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-16 06:13:41,439 - DEBUG - app.firebase_stream - Successfully got running event loop in process_firebase_events task.
2025-07-16 06:13:41,440 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-07-16 06:13:42,335 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-16 06:13:42,354 - DEBUG - app.firebase_stream - Firebase listener triggered (1). Event Type: put, Path: /. Timestamp: 1752671622.3546898
2025-07-16 06:13:42,354 - DEBUG - app.firebase_stream - Prepared batch update for 48 symbols from root path for queue. Preview: {'AUDCAD': {'b': '0.8946200000', 'o': '0.8946000000'}, 'AUDCHF': {'b': '0.5240200000', 'o': '0.5239600000'}, 'AUDJPY': {'b': '96.9330000000', 'o': '96.9270000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'
2025-07-16 06:13:42,356 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'AUDCAD': {'b': '0.8946200000', 'o': '0.8946000000'}, 'AUDCHF': {'b': '0.5240200000', 'o': '0.5239600000'}, 'AUDJPY': {'b': '96.9330000000', 'o': '96.9270000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'...
2025-07-16 06:13:42,356 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type put at path /.
2025-07-16 06:13:42,361 - INFO - app - Starting stale cache cleanup task
2025-07-16 06:13:42,451 - INFO - app - Cleaned up pending order stream for new trigger price format
2025-07-16 06:13:42,451 - INFO - app - Background tasks initialized
2025-07-16 06:13:43,365 - INFO - app - Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-07-16 06:13:43,365 - INFO - app - Application startup completed successfully
2025-07-16 06:13:43,365 - INFO - app - Starting cache validation task
2025-07-16 06:13:43,368 - INFO - app - Starting Barclays pending order margin checker task.
2025-07-16 06:13:43,368 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:43,370 - INFO - app - Starting auto-cutoff order monitoring task.
2025-07-16 06:13:43,421 - INFO - app - Found 7 static orders cache entries to check
2025-07-16 06:13:43,459 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:43,463 - INFO - app - Validating cache for 30 users
2025-07-16 06:13:43,465 - WARNING - app - Found stale cache entry for user 13, will be refreshed on next access
2025-07-16 06:13:43,476 - WARNING - app - Found stale cache entry for user 4, will be refreshed on next access
2025-07-16 06:13:43,486 - WARNING - app - User 5: Missing static orders cache, refreshing...
2025-07-16 06:13:43,499 - WARNING - app - Found stale cache entry for user 12, will be refreshed on next access
2025-07-16 06:13:43,499 - INFO - app - Completed stale cache cleanup task
2025-07-16 06:13:43,527 - WARNING - app - User 8: Missing static orders cache, refreshing...
2025-07-16 06:13:43,565 - WARNING - app - User 16: Missing static orders cache, refreshing...
2025-07-16 06:13:43,587 - WARNING - app - User 17: Missing static orders cache, refreshing...
2025-07-16 06:13:43,603 - WARNING - app - User 18: Missing static orders cache, refreshing...
2025-07-16 06:13:43,618 - WARNING - app - User 19: Missing static orders cache, refreshing...
2025-07-16 06:13:43,632 - WARNING - app - User 20: Missing static orders cache, refreshing...
2025-07-16 06:13:43,647 - WARNING - app - User 21: Missing static orders cache, refreshing...
2025-07-16 06:13:43,663 - WARNING - app - User 22: Missing static orders cache, refreshing...
2025-07-16 06:13:43,680 - WARNING - app - User 23: Missing static orders cache, refreshing...
2025-07-16 06:13:43,694 - WARNING - app - User 25: Missing static orders cache, refreshing...
2025-07-16 06:13:43,709 - WARNING - app - User 26: Missing static orders cache, refreshing...
2025-07-16 06:13:43,722 - WARNING - app - User 1: Missing static orders cache, refreshing...
2025-07-16 06:13:43,744 - WARNING - app - User 2: Missing static orders cache, refreshing...
2025-07-16 06:13:43,756 - WARNING - app - User 3: Missing static orders cache, refreshing...
2025-07-16 06:13:43,772 - WARNING - app - User 6: Missing static orders cache, refreshing...
2025-07-16 06:13:43,799 - INFO - app - Cache validation completed
2025-07-16 06:13:43,989 - DEBUG - app.firebase_stream - Firebase listener triggered (2). Event Type: patch, Path: /. Timestamp: 1752671623.9890857
2025-07-16 06:13:43,989 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.2920000000', 'o': '88.2830000000'}, 'GBPAUD': {'b': '2.0544400000', 'o': '2.0543900000'}, 'USDJPY': {'b': '148.7350000000', 'o': '148.7300000000'}, 'USDCNH': {'b': '7.1840300000',
2025-07-16 06:13:43,989 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'NZDJPY': {'b': '88.2920000000', 'o': '88.2830000000'}, 'GBPAUD': {'b': '2.0544400000', 'o': '2.0543900000'}, 'USDJPY': {'b': '148.7350000000', 'o': '148.7300000000'}, 'USDCNH': {'b': '7.1840300000',...
2025-07-16 06:13:43,990 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 06:13:44,471 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:44,473 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:44,597 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-16 06:13:44,781 - INFO - app.core.config - .env file loaded successfully.
2025-07-16 06:13:44,792 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-16 06:13:44,793 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-16 06:13:45,475 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:45,479 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:46,348 - DEBUG - app.firebase_stream - Firebase listener triggered (3). Event Type: patch, Path: /. Timestamp: 1752671626.3481085
2025-07-16 06:13:46,348 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0796000000', 'o': '13.0770000000'}, 'XAGUSD': {'b': '37.8880000000', 'o': '37.8730000000'}, 'GBPAUD': {'b': '2.0545500000', 'o': '2.0544100000'}, 'BTCUSD': {'b': '118619.600000000
2025-07-16 06:13:46,349 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0796000000', 'o': '13.0770000000'}, 'XAGUSD': {'b': '37.8880000000', 'o': '37.8730000000'}, 'GBPAUD': {'b': '2.0545500000', 'o': '2.0544100000'}, 'BTCUSD': {'b': '118619.600000000...
2025-07-16 06:13:46,350 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 06:13:46,488 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:46,507 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:47,512 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:47,515 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:48,516 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:48,519 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:48,595 - DEBUG - app.firebase_stream - Firebase listener triggered (4). Event Type: patch, Path: /. Timestamp: 1752671628.5954657
2025-07-16 06:13:48,595 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.8780000000', 'o': '37.8650000000'}, 'NZDJPY': {'b': '88.2910000000', 'o': '88.2830000000'}, 'GBPAUD': {'b': '2.0544100000', 'o': '2.0543700000'}, 'BTCUSD': {'b': '118630.000000000
2025-07-16 06:13:48,596 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '37.8780000000', 'o': '37.8650000000'}, 'NZDJPY': {'b': '88.2910000000', 'o': '88.2830000000'}, 'GBPAUD': {'b': '2.0544100000', 'o': '2.0543700000'}, 'BTCUSD': {'b': '118630.000000000...
2025-07-16 06:13:48,596 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 06:13:49,530 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:49,533 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:50,540 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:50,544 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:50,962 - DEBUG - app.firebase_stream - Firebase listener triggered (5). Event Type: patch, Path: /. Timestamp: 1752671630.9626386
2025-07-16 06:13:50,963 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0789900000', 'o': '13.0764000000'}, 'XAGUSD': {'b': '37.8750000000', 'o': '37.8630000000'}, 'NZDJPY': {'b': '88.2900000000', 'o': '88.2810000000'}, 'GBPAUD': {'b': '2.0544200000',
2025-07-16 06:13:50,964 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0789900000', 'o': '13.0764000000'}, 'XAGUSD': {'b': '37.8750000000', 'o': '37.8630000000'}, 'NZDJPY': {'b': '88.2900000000', 'o': '88.2810000000'}, 'GBPAUD': {'b': '2.0544200000',...
2025-07-16 06:13:50,964 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 06:13:51,548 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:51,552 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:52,560 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:52,564 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:53,197 - DEBUG - app.firebase_stream - Firebase listener triggered (6). Event Type: patch, Path: /. Timestamp: 1752671633.197557
2025-07-16 06:13:53,197 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.2900000000', 'o': '88.2830000000'}, 'GBPAUD': {'b': '2.0542700000', 'o': '2.0542200000'}, 'BTCUSD': {'b': '118628.9300000000', 'o': '118621.3000000000'}, 'CADCHF': {'b': '0.585720
2025-07-16 06:13:53,198 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.2900000000', 'o': '88.2830000000'}, 'GBPAUD': {'b': '2.0542700000', 'o': '2.0542200000'}, 'BTCUSD': {'b': '118628.9300000000', 'o': '118621.3000000000'}, 'CADCHF': {'b': '0.585720...
2025-07-16 06:13:53,198 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 06:13:53,577 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:53,580 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:54,586 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:54,589 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:55,556 - DEBUG - app.firebase_stream - Firebase listener triggered (7). Event Type: patch, Path: /. Timestamp: 1752671635.556661
2025-07-16 06:13:55,556 - DEBUG - app.firebase_stream - Prepared batch update for 38 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0794000000', 'o': '13.0768000000'}, 'XAGUSD': {'b': '37.8780000000', 'o': '37.8650000000'}, 'NZDJPY': {'b': '88.2920000000', 'o': '88.2840000000'}, 'GBPAUD': {'b': '2.0543000000',
2025-07-16 06:13:55,557 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0794000000', 'o': '13.0768000000'}, 'XAGUSD': {'b': '37.8780000000', 'o': '37.8650000000'}, 'NZDJPY': {'b': '88.2920000000', 'o': '88.2840000000'}, 'GBPAUD': {'b': '2.0543000000',...
2025-07-16 06:13:55,557 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 06:13:55,591 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:55,595 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:56,609 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:56,613 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:57,617 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:57,620 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:57,908 - DEBUG - app.firebase_stream - Firebase listener triggered (8). Event Type: patch, Path: /. Timestamp: 1752671637.908754
2025-07-16 06:13:57,909 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0793000000', 'o': '13.0767000000'}, 'NZDJPY': {'b': '88.2900000000', 'o': '88.2840000000'}, 'GBPAUD': {'b': '2.0544200000', 'o': '2.0542700000'}, 'BTCUSD': {'b': '118621.400000000
2025-07-16 06:13:57,909 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0793000000', 'o': '13.0767000000'}, 'NZDJPY': {'b': '88.2900000000', 'o': '88.2840000000'}, 'GBPAUD': {'b': '2.0544200000', 'o': '2.0542700000'}, 'BTCUSD': {'b': '118621.400000000...
2025-07-16 06:13:57,909 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 06:13:58,379 - INFO - app - Starting stale cache cleanup task
2025-07-16 06:13:58,381 - INFO - app - Found 23 static orders cache entries to check
2025-07-16 06:13:58,383 - WARNING - app - Found stale cache entry for user 6, will be refreshed on next access
2025-07-16 06:13:58,384 - WARNING - app - Found stale cache entry for user 23, will be refreshed on next access
2025-07-16 06:13:58,385 - WARNING - app - Found stale cache entry for user 18, will be refreshed on next access
2025-07-16 06:13:58,386 - WARNING - app - Found stale cache entry for user 19, will be refreshed on next access
2025-07-16 06:13:58,386 - WARNING - app - Found stale cache entry for user 13, will be refreshed on next access
2025-07-16 06:13:58,387 - WARNING - app - Found stale cache entry for user 21, will be refreshed on next access
2025-07-16 06:13:58,388 - WARNING - app - Found stale cache entry for user 25, will be refreshed on next access
2025-07-16 06:13:58,389 - WARNING - app - Found stale cache entry for user 3, will be refreshed on next access
2025-07-16 06:13:58,390 - WARNING - app - Found stale cache entry for user 22, will be refreshed on next access
2025-07-16 06:13:58,393 - WARNING - app - Found stale cache entry for user 2, will be refreshed on next access
2025-07-16 06:13:58,394 - WARNING - app - Found stale cache entry for user 17, will be refreshed on next access
2025-07-16 06:13:58,395 - WARNING - app - Found stale cache entry for user 8, will be refreshed on next access
2025-07-16 06:13:58,396 - WARNING - app - Found stale cache entry for user 4, will be refreshed on next access
2025-07-16 06:13:58,397 - WARNING - app - Found stale cache entry for user 20, will be refreshed on next access
2025-07-16 06:13:58,404 - WARNING - app - Found stale cache entry for user 16, will be refreshed on next access
2025-07-16 06:13:58,405 - WARNING - app - Found stale cache entry for user 5, will be refreshed on next access
2025-07-16 06:13:58,406 - WARNING - app - Found stale cache entry for user 12, will be refreshed on next access
2025-07-16 06:13:58,406 - INFO - app - Completed stale cache cleanup task
2025-07-16 06:13:58,633 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:58,637 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:13:59,650 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:13:59,653 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 06:14:00,172 - DEBUG - app.firebase_stream - Firebase listener triggered (9). Event Type: patch, Path: /. Timestamp: 1752671640.1722546
2025-07-16 06:14:00,172 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.8790000000', 'o': '37.8680000000'}, 'NZDJPY': {'b': '88.2830000000', 'o': '88.2780000000'}, 'GBPAUD': {'b': '2.0543400000', 'o': '2.0542500000'}, 'BTCUSD': {'b': '118675.200000000
2025-07-16 06:14:00,172 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '37.8790000000', 'o': '37.8680000000'}, 'NZDJPY': {'b': '88.2830000000', 'o': '88.2780000000'}, 'GBPAUD': {'b': '2.0543400000', 'o': '2.0542500000'}, 'BTCUSD': {'b': '118675.200000000...
2025-07-16 06:14:00,173 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 06:14:00,555 - INFO - app - Application shutdown initiated
2025-07-16 06:14:00,555 - INFO - app - Scheduler shutdown completed
2025-07-16 06:14:00,698 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 06:14:00,701 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-07-16 06:14:02,399 - INFO - app.firebase_stream - Firebase listener closed.
2025-07-16 06:14:02,399 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-07-16 06:14:02,405 - INFO - app - Redis connection closed
2025-07-16 06:14:02,405 - INFO - app - Application shutdown completed
2025-07-16 21:19:33,694 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-16 21:19:33,750 - INFO - app.core.config - .env file loaded successfully.
2025-07-16 21:19:33,764 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-16 21:19:33,764 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-16 21:19:34,097 - INFO - app - Application starting up - Trading system initialized
2025-07-16 21:19:34,097 - INFO - app - SL/TP Epsilon accuracy configured: 0.00001
2025-07-16 21:19:34,097 - INFO - app - Environment: DEVELOPMENT
2025-07-16 21:19:34,155 - INFO - app - Application startup initiated
2025-07-16 21:19:34,155 - INFO - app - Initializing core services...
2025-07-16 21:19:49,783 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-16 21:19:49,805 - INFO - app.core.config - .env file loaded successfully.
2025-07-16 21:19:49,817 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-16 21:19:49,817 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-16 21:19:50,070 - INFO - app - Application starting up - Trading system initialized
2025-07-16 21:19:50,070 - INFO - app - SL/TP Epsilon accuracy configured: 0.00001
2025-07-16 21:19:50,071 - INFO - app - Environment: DEVELOPMENT
2025-07-16 21:19:50,112 - INFO - app - Application startup initiated
2025-07-16 21:19:50,112 - INFO - app - Initializing core services...
2025-07-16 21:19:50,234 - INFO - app - Firebase initialized
2025-07-16 21:19:50,234 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-07-16 21:19:52,269 - INFO - app - Redis initialized
2025-07-16 21:19:52,885 - INFO - app - All group settings and group-symbol settings cached in Redis at startup.
2025-07-16 21:19:52,888 - INFO - app - [SWAP] daily_swap_charge_job triggered
2025-07-16 21:19:52,888 - INFO - app - [AUTO-CUTOFF] Scheduled update_all_users_dynamic_portfolio job to run every 1 minute.
2025-07-16 21:19:52,889 - INFO - app - Scheduler initialized
2025-07-16 21:19:52,891 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-16 21:19:52,891 - DEBUG - app.firebase_stream - Successfully got running event loop in process_firebase_events task.
2025-07-16 21:19:52,891 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-07-16 21:19:53,991 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-16 21:19:54,001 - DEBUG - app.firebase_stream - Firebase listener triggered (1). Event Type: put, Path: /. Timestamp: 1752725994.0013678
2025-07-16 21:19:54,002 - DEBUG - app.firebase_stream - Prepared batch update for 48 symbols from root path for queue. Preview: {'AUDCAD': {'b': '0.8893200000', 'o': '0.8893200000'}, 'AUDCHF': {'b': '0.5206100000', 'o': '0.5205500000'}, 'AUDJPY': {'b': '96.3460000000', 'o': '96.3390000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'
2025-07-16 21:19:54,003 - INFO - app - Starting stale cache cleanup task
2025-07-16 21:19:54,003 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'AUDCAD': {'b': '0.8893200000', 'o': '0.8893200000'}, 'AUDCHF': {'b': '0.5206100000', 'o': '0.5205500000'}, 'AUDJPY': {'b': '96.3460000000', 'o': '96.3390000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'...
2025-07-16 21:19:54,003 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type put at path /.
2025-07-16 21:19:54,714 - DEBUG - app.firebase_stream - Firebase listener triggered (2). Event Type: patch, Path: /. Timestamp: 1752725994.7148979
2025-07-16 21:19:54,715 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9890000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0652100000', 'o': '2.0651000000'}, 'USDJPY': {'b': '148.5990000000', 'o': '148.5940000000'}, 'USDCNH': {'b': '7.1820600000',
2025-07-16 21:19:54,715 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9890000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0652100000', 'o': '2.0651000000'}, 'USDJPY': {'b': '148.5990000000', 'o': '148.5940000000'}, 'USDCNH': {'b': '7.1820600000',...
2025-07-16 21:19:54,715 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:19:57,082 - DEBUG - app.firebase_stream - Firebase listener triggered (3). Event Type: patch, Path: /. Timestamp: 1752725997.0823667
2025-07-16 21:19:57,083 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'GBPAUD': {'b': '2.0654200000', 'o': '2.0652300000'}, 'USDJPY': {'b': '148.6020000000', 'o': '148.5970000000'}, 'USDCNH': {'b': '7.1819600000',
2025-07-16 21:19:57,083 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 2. Data preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'GBPAUD': {'b': '2.0654200000', 'o': '2.0652300000'}, 'USDJPY': {'b': '148.6020000000', 'o': '148.5970000000'}, 'USDCNH': {'b': '7.1819600000',...
2025-07-16 21:19:57,083 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:19:58,058 - INFO - app - Cleaned up pending order stream for new trigger price format
2025-07-16 21:19:58,058 - INFO - app - Background tasks initialized
2025-07-16 21:19:59,669 - INFO - app - Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-07-16 21:19:59,675 - DEBUG - app.firebase_stream - Firebase listener triggered (4). Event Type: patch, Path: /. Timestamp: 1752725999.6757648
2025-07-16 21:19:59,675 - INFO - app - Application startup completed successfully
2025-07-16 21:19:59,676 - DEBUG - app.firebase_stream - Prepared batch update for 33 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0504000000', 'o': '13.0449000000'}, 'XAGUSD': {'b': '37.9970000000', 'o': '37.9900000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9800000000'}, 'GBPAUD': {'b': '2.0654000000',
2025-07-16 21:19:59,676 - INFO - app - Starting cache validation task
2025-07-16 21:19:59,676 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 2. Data preview: {'GBPSEK': {'b': '13.0504000000', 'o': '13.0449000000'}, 'XAGUSD': {'b': '37.9970000000', 'o': '37.9900000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9800000000'}, 'GBPAUD': {'b': '2.0654000000',...
2025-07-16 21:19:59,677 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:19:59,678 - INFO - app - Starting Barclays pending order margin checker task.
2025-07-16 21:19:59,678 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:19:59,680 - INFO - app - Starting auto-cutoff order monitoring task.
2025-07-16 21:19:59,703 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:19:59,708 - INFO - app - Validating cache for 30 users
2025-07-16 21:20:00,721 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:00,725 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:01,679 - DEBUG - app.firebase_stream - Firebase listener triggered (5). Event Type: patch, Path: /. Timestamp: 1752726001.6799502
2025-07-16 21:20:01,680 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0503000000', 'o': '13.0448000000'}, 'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '87.9900000000', 'o': '87.9830000000'}, 'GBPAUD': {'b': '2.0653800000',
2025-07-16 21:20:01,680 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 3. Data preview: {'GBPSEK': {'b': '13.0503000000', 'o': '13.0448000000'}, 'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '87.9900000000', 'o': '87.9830000000'}, 'GBPAUD': {'b': '2.0653800000',...
2025-07-16 21:20:01,680 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:01,710 - INFO - app - Found 0 static orders cache entries to check
2025-07-16 21:20:01,710 - INFO - app - Completed stale cache cleanup task
2025-07-16 21:20:01,738 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:01,741 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:02,746 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:02,748 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:03,731 - WARNING - app - User 4: Missing balance/margin cache, refreshing...
2025-07-16 21:20:03,753 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:03,757 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:04,034 - DEBUG - app.firebase_stream - Firebase listener triggered (6). Event Type: patch, Path: /. Timestamp: 1752726004.0346148
2025-07-16 21:20:04,035 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9890000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0651500000'}, 'USDCNH': {'b': '7.1820300000', 'o': '7.1819200000'}, 'CADCHF': {'b': '0.5853500000', 'o'
2025-07-16 21:20:04,035 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 4. Data preview: {'NZDJPY': {'b': '87.9890000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0651500000'}, 'USDCNH': {'b': '7.1820300000', 'o': '7.1819200000'}, 'CADCHF': {'b': '0.5853500000', 'o'...
2025-07-16 21:20:04,035 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:04,767 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:04,769 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:05,782 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:05,784 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:06,264 - DEBUG - app.firebase_stream - Firebase listener triggered (7). Event Type: patch, Path: /. Timestamp: 1752726006.2641933
2025-07-16 21:20:06,264 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'GBPAUD': {'b': '2.0653900000', 'o': '2.0652000000'}, 'BTCUSD': {'b': '118207.5000000000', 'o': '118207.4000000000'}, 'USDJPY': {'b': '148.6030
2025-07-16 21:20:06,264 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 4. Data preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'GBPAUD': {'b': '2.0653900000', 'o': '2.0652000000'}, 'BTCUSD': {'b': '118207.5000000000', 'o': '118207.4000000000'}, 'USDJPY': {'b': '148.6030...
2025-07-16 21:20:06,264 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:06,791 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:06,792 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:07,803 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:07,814 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:08,721 - DEBUG - app.firebase_stream - Firebase listener triggered (8). Event Type: patch, Path: /. Timestamp: 1752726008.7218199
2025-07-16 21:20:08,722 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.9990000000', 'o': '37.9910000000'}, 'NZDJPY': {'b': '87.9870000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0653900000', 'o': '2.0652300000'}, 'USDJPY': {'b': '148.6020000000',
2025-07-16 21:20:08,722 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 3. Data preview: {'XAGUSD': {'b': '37.9990000000', 'o': '37.9910000000'}, 'NZDJPY': {'b': '87.9870000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0653900000', 'o': '2.0652300000'}, 'USDJPY': {'b': '148.6020000000',...
2025-07-16 21:20:08,723 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:08,826 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:08,829 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:09,837 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:09,842 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:09,986 - WARNING - app - User 5: Missing balance/margin cache, refreshing...
2025-07-16 21:20:10,015 - WARNING - app - User 8: Missing balance/margin cache, refreshing...
2025-07-16 21:20:10,851 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:10,858 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:11,022 - DEBUG - app.firebase_stream - Firebase listener triggered (9). Event Type: patch, Path: /. Timestamp: 1752726011.0224533
2025-07-16 21:20:11,023 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0504000000', 'o': '13.0450000000'}, 'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '87.9870000000', 'o': '87.9800000000'}, 'GBPAUD': {'b': '2.0653600000',
2025-07-16 21:20:11,023 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0504000000', 'o': '13.0450000000'}, 'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '87.9870000000', 'o': '87.9800000000'}, 'GBPAUD': {'b': '2.0653600000',...
2025-07-16 21:20:11,024 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:11,870 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:11,876 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:12,127 - WARNING - app - User 9: Missing balance/margin cache, refreshing...
2025-07-16 21:20:12,162 - WARNING - app - User 10: Missing balance/margin cache, refreshing...
2025-07-16 21:20:12,884 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:12,887 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:13,323 - DEBUG - app.firebase_stream - Firebase listener triggered (10). Event Type: patch, Path: /. Timestamp: 1752726013.3236954
2025-07-16 21:20:13,324 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.9970000000', 'o': '37.9900000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9770000000'}, 'GBPAUD': {'b': '2.0654100000', 'o': '2.0652200000'}, 'BTCUSD': {'b': '118193.300000000
2025-07-16 21:20:13,324 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'XAGUSD': {'b': '37.9970000000', 'o': '37.9900000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9770000000'}, 'GBPAUD': {'b': '2.0654100000', 'o': '2.0652200000'}, 'BTCUSD': {'b': '118193.300000000...
2025-07-16 21:20:13,324 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:13,889 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:13,894 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:14,227 - WARNING - app - User 11: Missing balance/margin cache, refreshing...
2025-07-16 21:20:14,264 - WARNING - app - User 12: Missing balance/margin cache, refreshing...
2025-07-16 21:20:14,276 - WARNING - app - User 13: Missing balance/margin cache, refreshing...
2025-07-16 21:20:14,305 - WARNING - app - User 14: Missing balance/margin cache, refreshing...
2025-07-16 21:20:14,341 - WARNING - app - User 16: Missing balance/margin cache, refreshing...
2025-07-16 21:20:14,366 - WARNING - app - User 17: Missing balance/margin cache, refreshing...
2025-07-16 21:20:14,390 - WARNING - app - User 18: Missing balance/margin cache, refreshing...
2025-07-16 21:20:14,406 - WARNING - app - User 19: Missing balance/margin cache, refreshing...
2025-07-16 21:20:14,426 - WARNING - app - User 20: Missing balance/margin cache, refreshing...
2025-07-16 21:20:14,462 - WARNING - app - User 21: Missing balance/margin cache, refreshing...
2025-07-16 21:20:14,487 - WARNING - app - User 22: Missing balance/margin cache, refreshing...
2025-07-16 21:20:14,504 - WARNING - app - User 23: Missing balance/margin cache, refreshing...
2025-07-16 21:20:14,535 - WARNING - app - User 25: Missing balance/margin cache, refreshing...
2025-07-16 21:20:14,573 - WARNING - app - User 26: Missing balance/margin cache, refreshing...
2025-07-16 21:20:14,596 - WARNING - app - User 1: Missing balance/margin cache, refreshing...
2025-07-16 21:20:14,626 - WARNING - app - User 2: Missing balance/margin cache, refreshing...
2025-07-16 21:20:14,646 - WARNING - app - User 3: Missing balance/margin cache, refreshing...
2025-07-16 21:20:14,663 - WARNING - app - User 4: Missing static orders cache, refreshing...
2025-07-16 21:20:14,678 - INFO - app - Starting stale cache cleanup task
2025-07-16 21:20:14,679 - INFO - app - Found 1 static orders cache entries to check
2025-07-16 21:20:14,682 - WARNING - app - Found stale cache entry for user 4, will be refreshed on next access
2025-07-16 21:20:14,682 - INFO - app - Completed stale cache cleanup task
2025-07-16 21:20:14,705 - WARNING - app - User 5: Missing balance/margin cache, refreshing...
2025-07-16 21:20:14,716 - WARNING - app - User 6: Missing balance/margin cache, refreshing...
2025-07-16 21:20:14,721 - WARNING - app - User 9: Missing static orders cache, refreshing...
2025-07-16 21:20:14,736 - WARNING - app - User 10: Missing static orders cache, refreshing...
2025-07-16 21:20:14,747 - WARNING - app - User 11: Missing static orders cache, refreshing...
2025-07-16 21:20:14,764 - WARNING - app - User 12: Missing static orders cache, refreshing...
2025-07-16 21:20:14,780 - WARNING - app - User 13: Missing static orders cache, refreshing...
2025-07-16 21:20:14,795 - INFO - app - Cache validation completed
2025-07-16 21:20:14,898 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:14,900 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:15,641 - DEBUG - app.firebase_stream - Firebase listener triggered (11). Event Type: patch, Path: /. Timestamp: 1752726015.64106
2025-07-16 21:20:15,641 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0000000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9760000000'}, 'GBPAUD': {'b': '2.0653900000', 'o': '2.0652100000'}, 'USDCNH': {'b': '7.1821900000', '
2025-07-16 21:20:15,641 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'XAGUSD': {'b': '38.0000000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9760000000'}, 'GBPAUD': {'b': '2.0653900000', 'o': '2.0652100000'}, 'USDCNH': {'b': '7.1821900000', '...
2025-07-16 21:20:15,641 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:15,912 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:15,914 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:16,915 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:16,921 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:17,934 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:17,947 - DEBUG - app.firebase_stream - Firebase listener triggered (12). Event Type: patch, Path: /. Timestamp: 1752726017.9475553
2025-07-16 21:20:17,948 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0511000000', 'o': '13.0449000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0653000000', 'o': '2.0651400000'}, 'USDJPY': {'b': '148.6030000000',
2025-07-16 21:20:17,949 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:17,949 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0511000000', 'o': '13.0449000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0653000000', 'o': '2.0651400000'}, 'USDJPY': {'b': '148.6030000000',...
2025-07-16 21:20:17,950 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:18,953 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:18,956 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:19,964 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:19,966 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:20,230 - DEBUG - app.firebase_stream - Firebase listener triggered (13). Event Type: patch, Path: /. Timestamp: 1752726020.2304525
2025-07-16 21:20:20,230 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9880000000', 'o': '87.9770000000'}, 'GBPAUD': {'b': '2.0653900000', 'o': '2.0652000000'}, 'USDJPY': {'b': '148.6020000000', 'o': '148.5940000000'}, 'EURNZD': {'b': '1.9621800000',
2025-07-16 21:20:20,230 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9880000000', 'o': '87.9770000000'}, 'GBPAUD': {'b': '2.0653900000', 'o': '2.0652000000'}, 'USDJPY': {'b': '148.6020000000', 'o': '148.5940000000'}, 'EURNZD': {'b': '1.9621800000',...
2025-07-16 21:20:20,230 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:20,973 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:20,975 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:21,989 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:21,992 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:22,565 - DEBUG - app.firebase_stream - Firebase listener triggered (14). Event Type: patch, Path: /. Timestamp: 1752726022.5655994
2025-07-16 21:20:22,565 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0510000000', 'o': '13.0448000000'}, 'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0652800000',
2025-07-16 21:20:22,565 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0510000000', 'o': '13.0448000000'}, 'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0652800000',...
2025-07-16 21:20:22,566 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:22,995 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:22,999 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:24,015 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:24,017 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:24,926 - DEBUG - app.firebase_stream - Firebase listener triggered (15). Event Type: patch, Path: /. Timestamp: 1752726024.9261446
2025-07-16 21:20:24,926 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9880000000', 'o': '87.9760000000'}, 'GBPAUD': {'b': '2.0653000000', 'o': '2.0651700000'}, 'BTCUSD': {'b': '118207.5000000000', 'o': '118207.4000000000'}, 'USDJPY': {'b': '148.6030
2025-07-16 21:20:24,927 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9880000000', 'o': '87.9760000000'}, 'GBPAUD': {'b': '2.0653000000', 'o': '2.0651700000'}, 'BTCUSD': {'b': '118207.5000000000', 'o': '118207.4000000000'}, 'USDJPY': {'b': '148.6030...
2025-07-16 21:20:24,927 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:25,028 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:25,030 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:26,041 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:26,043 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:27,053 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:27,056 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:27,175 - DEBUG - app.firebase_stream - Firebase listener triggered (16). Event Type: patch, Path: /. Timestamp: 1752726027.1751966
2025-07-16 21:20:27,175 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0511000000', 'o': '13.0449000000'}, 'XAGUSD': {'b': '38.0000000000', 'o': '37.9920000000'}, 'GBPAUD': {'b': '2.0653100000', 'o': '2.0651600000'}, 'BTCUSD': {'b': '118213.000000000
2025-07-16 21:20:27,175 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0511000000', 'o': '13.0449000000'}, 'XAGUSD': {'b': '38.0000000000', 'o': '37.9920000000'}, 'GBPAUD': {'b': '2.0653100000', 'o': '2.0651600000'}, 'BTCUSD': {'b': '118213.000000000...
2025-07-16 21:20:27,175 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:28,061 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:28,063 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:29,072 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:29,075 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:29,530 - DEBUG - app.firebase_stream - Firebase listener triggered (17). Event Type: patch, Path: /. Timestamp: 1752726029.5301652
2025-07-16 21:20:29,530 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0504000000', 'o': '13.0450000000'}, 'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0653200000',
2025-07-16 21:20:29,530 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0504000000', 'o': '13.0450000000'}, 'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0653200000',...
2025-07-16 21:20:29,530 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:30,083 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:30,086 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:31,087 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:31,091 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:31,784 - DEBUG - app.firebase_stream - Firebase listener triggered (18). Event Type: patch, Path: /. Timestamp: 1752726031.7840698
2025-07-16 21:20:31,784 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0510000000', 'o': '13.0448000000'}, 'XAGUSD': {'b': '37.9930000000', 'o': '37.9860000000'}, 'NZDJPY': {'b': '87.9860000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0653000000',
2025-07-16 21:20:31,784 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0510000000', 'o': '13.0448000000'}, 'XAGUSD': {'b': '37.9930000000', 'o': '37.9860000000'}, 'NZDJPY': {'b': '87.9860000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0653000000',...
2025-07-16 21:20:31,784 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:32,099 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:32,101 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:33,105 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:33,107 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:34,122 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:34,124 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:34,136 - DEBUG - app.firebase_stream - Firebase listener triggered (19). Event Type: patch, Path: /. Timestamp: 1752726034.1362293
2025-07-16 21:20:34,136 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.9980000000', 'o': '37.9900000000'}, 'NZDJPY': {'b': '87.9860000000', 'o': '87.9760000000'}, 'GBPAUD': {'b': '2.0652800000', 'o': '2.0651400000'}, 'USDJPY': {'b': '148.6010000000',
2025-07-16 21:20:34,136 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '37.9980000000', 'o': '37.9900000000'}, 'NZDJPY': {'b': '87.9860000000', 'o': '87.9760000000'}, 'GBPAUD': {'b': '2.0652800000', 'o': '2.0651400000'}, 'USDJPY': {'b': '148.6010000000',...
2025-07-16 21:20:34,136 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:35,131 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:35,134 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:36,138 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:36,143 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:36,390 - DEBUG - app.firebase_stream - Firebase listener triggered (20). Event Type: patch, Path: /. Timestamp: 1752726036.3899586
2025-07-16 21:20:36,390 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.9970000000', 'o': '37.9900000000'}, 'NZDJPY': {'b': '87.9860000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0652900000', 'o': '2.0651100000'}, 'BTCUSD': {'b': '118213.000000000
2025-07-16 21:20:36,390 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '37.9970000000', 'o': '37.9900000000'}, 'NZDJPY': {'b': '87.9860000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0652900000', 'o': '2.0651100000'}, 'BTCUSD': {'b': '118213.000000000...
2025-07-16 21:20:36,390 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:37,147 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:37,149 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:38,153 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:38,154 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:38,742 - DEBUG - app.firebase_stream - Firebase listener triggered (21). Event Type: patch, Path: /. Timestamp: 1752726038.7427776
2025-07-16 21:20:38,742 - DEBUG - app.firebase_stream - Prepared batch update for 19 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0510000000', 'o': '13.0447000000'}, 'XAGUSD': {'b': '37.9950000000', 'o': '37.9880000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9770000000'}, 'USDSGD': {'b': '1.2857500000',
2025-07-16 21:20:38,743 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0510000000', 'o': '13.0447000000'}, 'XAGUSD': {'b': '37.9950000000', 'o': '37.9880000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9770000000'}, 'USDSGD': {'b': '1.2857500000',...
2025-07-16 21:20:38,743 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:39,168 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:39,171 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:40,173 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:40,175 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:40,954 - DEBUG - app.firebase_stream - Firebase listener triggered (22). Event Type: patch, Path: /. Timestamp: 1752726040.9540052
2025-07-16 21:20:40,954 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0510000000', 'o': '13.0448000000'}, 'XAGUSD': {'b': '37.9960000000', 'o': '37.9880000000'}, 'NZDJPY': {'b': '87.9860000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0653300000',
2025-07-16 21:20:40,954 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0510000000', 'o': '13.0448000000'}, 'XAGUSD': {'b': '37.9960000000', 'o': '37.9880000000'}, 'NZDJPY': {'b': '87.9860000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0653300000',...
2025-07-16 21:20:40,954 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:41,178 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:41,183 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:42,186 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:42,190 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:43,192 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:43,194 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:43,272 - DEBUG - app.firebase_stream - Firebase listener triggered (23). Event Type: patch, Path: /. Timestamp: 1752726043.2719297
2025-07-16 21:20:43,272 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0510000000', 'o': '13.0447000000'}, 'NZDJPY': {'b': '87.9870000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0653000000', 'o': '2.0651400000'}, 'BTCUSD': {'b': '118213.000000000
2025-07-16 21:20:43,272 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0510000000', 'o': '13.0447000000'}, 'NZDJPY': {'b': '87.9870000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0653000000', 'o': '2.0651400000'}, 'BTCUSD': {'b': '118213.000000000...
2025-07-16 21:20:43,272 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:44,208 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:44,209 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:45,215 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:45,217 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:45,582 - DEBUG - app.firebase_stream - Firebase listener triggered (24). Event Type: patch, Path: /. Timestamp: 1752726045.5826437
2025-07-16 21:20:45,582 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.9980000000', 'o': '37.9900000000'}, 'NZDJPY': {'b': '87.9900000000', 'o': '87.9800000000'}, 'GBPAUD': {'b': '2.0653200000', 'o': '2.0651400000'}, 'BTCUSD': {'b': '118218.300000000
2025-07-16 21:20:45,583 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '37.9980000000', 'o': '37.9900000000'}, 'NZDJPY': {'b': '87.9900000000', 'o': '87.9800000000'}, 'GBPAUD': {'b': '2.0653200000', 'o': '2.0651400000'}, 'BTCUSD': {'b': '118218.300000000...
2025-07-16 21:20:45,583 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:46,219 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:46,223 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:47,236 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:47,238 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:47,897 - DEBUG - app.firebase_stream - Firebase listener triggered (25). Event Type: patch, Path: /. Timestamp: 1752726047.8973808
2025-07-16 21:20:47,897 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0506000000', 'o': '13.0452000000'}, 'NZDJPY': {'b': '87.9900000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0652900000', 'o': '2.0651400000'}, 'BTCUSD': {'b': '118218.300000000
2025-07-16 21:20:47,897 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0506000000', 'o': '13.0452000000'}, 'NZDJPY': {'b': '87.9900000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0652900000', 'o': '2.0651400000'}, 'BTCUSD': {'b': '118218.300000000...
2025-07-16 21:20:47,897 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:48,246 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:48,248 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:49,263 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:49,265 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:50,275 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:50,276 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:51,281 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:51,285 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:52,301 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:52,303 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:52,589 - DEBUG - app.firebase_stream - Firebase listener triggered (26). Event Type: patch, Path: /. Timestamp: 1752726052.5899456
2025-07-16 21:20:52,590 - DEBUG - app.firebase_stream - Prepared batch update for 3 symbols from root path for queue. Preview: {'EURNZD': {'b': '1.9621200000', 'o': '1.9619200000'}, 'GBPUSD': {'b': '1.3389100000', 'o': '1.3389000000'}, 'EURCAD': {'b': '1.5936400000', 'o': '1.5936500000'}}
2025-07-16 21:20:52,590 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'EURNZD': {'b': '1.9621200000', 'o': '1.9619200000'}, 'GBPUSD': {'b': '1.3389100000', 'o': '1.3389000000'}, 'EURCAD': {'b': '1.5936400000', 'o': '1.5936500000'}, '_timestamp': 1752726052.5901263}...
2025-07-16 21:20:52,590 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:52,898 - INFO - app - [AUTO-CUTOFF] Starting update_all_users_dynamic_portfolio job...
2025-07-16 21:20:52,899 - INFO - app - [AUTO-CUTOFF] update_all_users_dynamic_portfolio heartbeat: task is alive and running.
2025-07-16 21:20:52,899 - INFO - app - [AUTO-CUTOFF] Fetching all active users (live and demo)...
2025-07-16 21:20:52,908 - INFO - app - [AUTO-CUTOFF] Found 19 live users and 11 demo users.
2025-07-16 21:20:52,908 - INFO - app - [AUTO-CUTOFF] Processing 30 users for dynamic portfolio update...
2025-07-16 21:20:52,908 - INFO - app - [AUTO-CUTOFF] Processing user 4 (live), group: Group B
2025-07-16 21:20:52,908 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 4 (live) from cache/DB...
2025-07-16 21:20:52,911 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:20:52,911 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:20:52,911 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:20:52,924 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F76347CD10>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347D260>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347E250>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347C490>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347E030>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F763095BF0>, <app.database.models.Group object at 0x000001F763096250>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F763096580>, <app.database.models.Group object at 0x000001F763096690>, <app.database.models.Group object at 0x000001F7630967A0>, <app.database.models.Group object at 0x000001F763095590>, <app.database.models.Group object at 0x000001F763095370>, <app.database.models.Group object at 0x000001F763096470>, <app.database.models.Group object at 0x000001F763096360>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F763094E20>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763095D00>, <app.database.models.Group object at 0x000001F763096030>, <app.database.models.Group object at 0x000001F763095AE0>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F763095E10>, <app.database.models.Group object at 0x000001F763097460>, <app.database.models.Group object at 0x000001F763097570>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F763097790>, <app.database.models.Group object at 0x000001F7630978A0>, <app.database.models.Group object at 0x000001F7630979B0>, <app.database.models.Group object at 0x000001F763097AC0>, <app.database.models.Group object at 0x000001F763097BD0>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763097F00>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F7630958C0>, <app.database.models.Group object at 0x000001F762EB18C0>, <app.database.models.Group object at 0x000001F762EB3790>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763493020>]
2025-07-16 21:20:52,925 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:20:52,925 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 4...
2025-07-16 21:20:52,927 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 open orders.
2025-07-16 21:20:52,927 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 4...
2025-07-16 21:20:52,929 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 pending orders.
2025-07-16 21:20:52,929 - WARNING - app - [AUTO-CUTOFF] User 4 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:20:52,929 - INFO - app - [AUTO-CUTOFF] Processing user 5 (live), group: Admin
2025-07-16 21:20:52,929 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 5 (live) from cache/DB...
2025-07-16 21:20:52,934 - WARNING - app - [AUTO-CUTOFF] No user data found for user 5 (live). Skipping portfolio update.
2025-07-16 21:20:52,934 - INFO - app - [AUTO-CUTOFF] Processing user 8 (live), group: string
2025-07-16 21:20:52,934 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 8 (live) from cache/DB...
2025-07-16 21:20:52,937 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group string...
2025-07-16 21:20:52,938 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'string' from cache: None
2025-07-16 21:20:52,938 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'string', fetching from DB.
2025-07-16 21:20:52,941 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'string': []
2025-07-16 21:20:52,941 - ERROR - app - [AUTO-CUTOFF] Group symbol settings not found in DB for group 'string'. Skipping portfolio update for user 8.
2025-07-16 21:20:52,941 - INFO - app - [AUTO-CUTOFF] Processing user 9 (live), group: Standard
2025-07-16 21:20:52,941 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 9 (live) from cache/DB...
2025-07-16 21:20:52,945 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:20:52,946 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:20:52,946 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:20:52,951 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x000001F7630967A0>, <app.database.models.Group object at 0x000001F763096690>, <app.database.models.Group object at 0x000001F763096580>, <app.database.models.Group object at 0x000001F763095590>, <app.database.models.Group object at 0x000001F763095370>, <app.database.models.Group object at 0x000001F763096470>, <app.database.models.Group object at 0x000001F763096360>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F763094E20>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763095D00>, <app.database.models.Group object at 0x000001F763096030>, <app.database.models.Group object at 0x000001F763095AE0>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F763095E10>, <app.database.models.Group object at 0x000001F763097460>, <app.database.models.Group object at 0x000001F763097570>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F763097790>, <app.database.models.Group object at 0x000001F7630978A0>, <app.database.models.Group object at 0x000001F7630979B0>, <app.database.models.Group object at 0x000001F763097AC0>, <app.database.models.Group object at 0x000001F763097BD0>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763097F00>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F7630958C0>, <app.database.models.Group object at 0x000001F762EB18C0>, <app.database.models.Group object at 0x000001F762EB3790>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F76347CD10>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347D260>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347E250>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347C490>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347E030>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634906B0>]
2025-07-16 21:20:52,952 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:20:52,952 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 9...
2025-07-16 21:20:52,954 - DEBUG - app - [AUTO-CUTOFF] User 9 has 1 open orders.
2025-07-16 21:20:52,954 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 9...
2025-07-16 21:20:52,956 - DEBUG - app - [AUTO-CUTOFF] User 9 has 0 pending orders.
2025-07-16 21:20:52,956 - DEBUG - app - [AUTO-CUTOFF] User 9 total positions for portfolio calculation: 1
2025-07-16 21:20:52,956 - DEBUG - app - [AUTO-CUTOFF] User 9 adjusted market prices: {}
2025-07-16 21:20:52,956 - DEBUG - app - [AUTO-CUTOFF] User 9 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:20:52,956 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 9...
2025-07-16 21:20:53,256 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol BTCUSD
2025-07-16 21:20:53,257 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 99.90738313495848051220798402% which is below threshold 100.0%
2025-07-16 21:20:53,257 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 9: {'balance': '9794.75000000', 'equity': '9794.75000000', 'margin': '9803.83000000', 'free_margin': '-9.08000000', 'profit_loss': '0.0', 'margin_level': '99.90738313495848051220798402', 'positions': [{'order_id': '1000341-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.41000000'), 'order_price': Decimal('141921.60000000'), 'margin': Decimal('9773.83000000'), 'contract_value': Decimal('0.41000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('244.35000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': True}
2025-07-16 21:20:53,257 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 9: {'balance': '9794.75000000', 'equity': '9794.75000000', 'margin': '9803.83000000', 'free_margin': '-9.08000000', 'profit_loss': '0.0', 'margin_level': '99.90738313495848051220798402', 'positions_with_pnl': [{'order_id': '1000341-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.41000000'), 'order_price': Decimal('141921.60000000'), 'margin': Decimal('9773.83000000'), 'contract_value': Decimal('0.41000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('244.35000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': True}
2025-07-16 21:20:53,257 - INFO - app - [AUTO-CUTOFF] User 9 margin_level: 99.90738313495848051220798402
2025-07-16 21:20:57,256 - INFO - app - [AUTO-CUTOFF] Sent margin call warning email (HTML) to user 9 at kodideladinesh123@gmail.com
2025-07-16 21:20:57,257 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:57,259 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 9
2025-07-16 21:20:57,259 - INFO - app - [AUTO-CUTOFF] Processing user 10 (live), group: Group B
2025-07-16 21:20:57,259 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 10 (live) from cache/DB...
2025-07-16 21:20:57,260 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:57,268 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:20:57,269 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:20:57,269 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:20:57,278 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F76347C7C0>, <app.database.models.Group object at 0x000001F7634919D0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F7634905A0>, <app.database.models.Group object at 0x000001F763492AD0>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F763492360>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F7634917B0>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F7634938A0>, <app.database.models.Group object at 0x000001F7634939B0>, <app.database.models.Group object at 0x000001F763493AC0>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F7630BC050>, <app.database.models.Group object at 0x000001F7630BC160>, <app.database.models.Group object at 0x000001F7630BC270>, <app.database.models.Group object at 0x000001F7630BC380>, <app.database.models.Group object at 0x000001F7630BC490>, <app.database.models.Group object at 0x000001F7630BC5A0>, <app.database.models.Group object at 0x000001F7630BC6B0>, <app.database.models.Group object at 0x000001F7630BC7C0>, <app.database.models.Group object at 0x000001F7630BC8D0>, <app.database.models.Group object at 0x000001F7630BC9E0>, <app.database.models.Group object at 0x000001F7630BCAF0>, <app.database.models.Group object at 0x000001F7630BCC00>, <app.database.models.Group object at 0x000001F7630BCD10>, <app.database.models.Group object at 0x000001F7630BCE20>, <app.database.models.Group object at 0x000001F7630BCF30>, <app.database.models.Group object at 0x000001F7630BD040>, <app.database.models.Group object at 0x000001F7630BD150>, <app.database.models.Group object at 0x000001F7630BD260>, <app.database.models.Group object at 0x000001F7630BD370>, <app.database.models.Group object at 0x000001F7630BD480>, <app.database.models.Group object at 0x000001F7630BD590>, <app.database.models.Group object at 0x000001F7630BD6A0>, <app.database.models.Group object at 0x000001F7630BD7B0>, <app.database.models.Group object at 0x000001F7630BD8C0>, <app.database.models.Group object at 0x000001F7630BD9D0>, <app.database.models.Group object at 0x000001F7630BDAE0>, <app.database.models.Group object at 0x000001F7630BDBF0>, <app.database.models.Group object at 0x000001F7630BDD00>, <app.database.models.Group object at 0x000001F7630BDE10>, <app.database.models.Group object at 0x000001F7630BDF20>, <app.database.models.Group object at 0x000001F7630BE030>, <app.database.models.Group object at 0x000001F7630BE140>, <app.database.models.Group object at 0x000001F7630BE250>, <app.database.models.Group object at 0x000001F7630BE360>, <app.database.models.Group object at 0x000001F7630BE470>, <app.database.models.Group object at 0x000001F7630BE580>, <app.database.models.Group object at 0x000001F7630BE690>, <app.database.models.Group object at 0x000001F7630BE7A0>, <app.database.models.Group object at 0x000001F7630BE8B0>, <app.database.models.Group object at 0x000001F7630BE9C0>, <app.database.models.Group object at 0x000001F7630BEAD0>, <app.database.models.Group object at 0x000001F7630BEBE0>, <app.database.models.Group object at 0x000001F7630BECF0>, <app.database.models.Group object at 0x000001F7630BEE00>, <app.database.models.Group object at 0x000001F7630BEF10>]
2025-07-16 21:20:57,280 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:20:57,280 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 10...
2025-07-16 21:20:57,284 - DEBUG - app - [AUTO-CUTOFF] User 10 has 0 open orders.
2025-07-16 21:20:57,284 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 10...
2025-07-16 21:20:57,286 - DEBUG - app - [AUTO-CUTOFF] User 10 has 0 pending orders.
2025-07-16 21:20:57,286 - WARNING - app - [AUTO-CUTOFF] User 10 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:20:57,286 - INFO - app - [AUTO-CUTOFF] Processing user 11 (live), group: Group B
2025-07-16 21:20:57,286 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 11 (live) from cache/DB...
2025-07-16 21:20:57,292 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:20:57,293 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:20:57,293 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:20:57,300 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F76347CD10>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347D260>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347E250>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347C490>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347E030>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F7630967A0>, <app.database.models.Group object at 0x000001F763096690>, <app.database.models.Group object at 0x000001F763096580>, <app.database.models.Group object at 0x000001F763095590>, <app.database.models.Group object at 0x000001F763095370>, <app.database.models.Group object at 0x000001F763096470>, <app.database.models.Group object at 0x000001F763096360>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F763094E20>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763095D00>, <app.database.models.Group object at 0x000001F763096030>, <app.database.models.Group object at 0x000001F763095AE0>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F763095E10>, <app.database.models.Group object at 0x000001F763097460>, <app.database.models.Group object at 0x000001F763097570>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F763097790>, <app.database.models.Group object at 0x000001F7630978A0>, <app.database.models.Group object at 0x000001F7630979B0>, <app.database.models.Group object at 0x000001F763097AC0>, <app.database.models.Group object at 0x000001F763097BD0>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763097F00>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F7630958C0>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F763096250>, <app.database.models.Group object at 0x000001F7630BF020>, <app.database.models.Group object at 0x000001F7630BF130>]
2025-07-16 21:20:57,301 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:20:57,301 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 11...
2025-07-16 21:20:57,305 - DEBUG - app - [AUTO-CUTOFF] User 11 has 0 open orders.
2025-07-16 21:20:57,305 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 11...
2025-07-16 21:20:57,308 - DEBUG - app - [AUTO-CUTOFF] User 11 has 0 pending orders.
2025-07-16 21:20:57,308 - WARNING - app - [AUTO-CUTOFF] User 11 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:20:57,308 - INFO - app - [AUTO-CUTOFF] Processing user 12 (live), group: Standard
2025-07-16 21:20:57,308 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 12 (live) from cache/DB...
2025-07-16 21:20:57,313 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:20:57,314 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:20:57,314 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:20:57,322 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F7634919D0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F7634905A0>, <app.database.models.Group object at 0x000001F763492AD0>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F763492360>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F7634917B0>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F7634938A0>, <app.database.models.Group object at 0x000001F7634939B0>, <app.database.models.Group object at 0x000001F763493AC0>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F762EB18C0>, <app.database.models.Group object at 0x000001F762EB3790>, <app.database.models.Group object at 0x000001F7630BC050>, <app.database.models.Group object at 0x000001F7630BC160>, <app.database.models.Group object at 0x000001F7630BC270>, <app.database.models.Group object at 0x000001F7630BC380>, <app.database.models.Group object at 0x000001F7630BC490>, <app.database.models.Group object at 0x000001F7630BC5A0>, <app.database.models.Group object at 0x000001F7630BC6B0>, <app.database.models.Group object at 0x000001F7630BC7C0>, <app.database.models.Group object at 0x000001F7630BC8D0>, <app.database.models.Group object at 0x000001F7630BC9E0>, <app.database.models.Group object at 0x000001F7630BCAF0>, <app.database.models.Group object at 0x000001F7630BCC00>, <app.database.models.Group object at 0x000001F7630BCD10>, <app.database.models.Group object at 0x000001F7630BCE20>, <app.database.models.Group object at 0x000001F7630BCF30>, <app.database.models.Group object at 0x000001F7630BD040>, <app.database.models.Group object at 0x000001F7630BD150>, <app.database.models.Group object at 0x000001F7630BD260>, <app.database.models.Group object at 0x000001F7630BD370>, <app.database.models.Group object at 0x000001F7630BD480>, <app.database.models.Group object at 0x000001F7630BD590>, <app.database.models.Group object at 0x000001F7630BD6A0>, <app.database.models.Group object at 0x000001F7630BD7B0>, <app.database.models.Group object at 0x000001F7630BD8C0>, <app.database.models.Group object at 0x000001F7630BD9D0>, <app.database.models.Group object at 0x000001F7630BDAE0>, <app.database.models.Group object at 0x000001F7630BDBF0>, <app.database.models.Group object at 0x000001F7630BDD00>, <app.database.models.Group object at 0x000001F7630BDE10>, <app.database.models.Group object at 0x000001F7630BDF20>, <app.database.models.Group object at 0x000001F7630BE030>, <app.database.models.Group object at 0x000001F7630BE140>, <app.database.models.Group object at 0x000001F7630BE250>, <app.database.models.Group object at 0x000001F7630BE360>, <app.database.models.Group object at 0x000001F7630BE470>, <app.database.models.Group object at 0x000001F7630BE580>, <app.database.models.Group object at 0x000001F7630BE690>, <app.database.models.Group object at 0x000001F7630BE7A0>, <app.database.models.Group object at 0x000001F7630BE8B0>, <app.database.models.Group object at 0x000001F7630BE9C0>, <app.database.models.Group object at 0x000001F7630BEAD0>, <app.database.models.Group object at 0x000001F7630BEBE0>, <app.database.models.Group object at 0x000001F7630BECF0>]
2025-07-16 21:20:57,324 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:20:57,324 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 12...
2025-07-16 21:20:57,327 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 open orders.
2025-07-16 21:20:57,327 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 12...
2025-07-16 21:20:57,328 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 pending orders.
2025-07-16 21:20:57,329 - WARNING - app - [AUTO-CUTOFF] User 12 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:20:57,329 - INFO - app - [AUTO-CUTOFF] Processing user 13 (live), group: Group B
2025-07-16 21:20:57,329 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 13 (live) from cache/DB...
2025-07-16 21:20:57,334 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:20:57,335 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:20:57,335 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:20:57,340 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F7630967A0>, <app.database.models.Group object at 0x000001F763096690>, <app.database.models.Group object at 0x000001F763096580>, <app.database.models.Group object at 0x000001F763095590>, <app.database.models.Group object at 0x000001F763095370>, <app.database.models.Group object at 0x000001F763096470>, <app.database.models.Group object at 0x000001F763096360>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F763094E20>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763095D00>, <app.database.models.Group object at 0x000001F763096030>, <app.database.models.Group object at 0x000001F763095AE0>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F763095E10>, <app.database.models.Group object at 0x000001F763097460>, <app.database.models.Group object at 0x000001F763097570>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F763097790>, <app.database.models.Group object at 0x000001F7630978A0>, <app.database.models.Group object at 0x000001F7630979B0>, <app.database.models.Group object at 0x000001F763097AC0>, <app.database.models.Group object at 0x000001F763097BD0>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763097F00>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F7630958C0>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F763096250>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F76347CD10>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347D260>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347E250>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347C490>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347E030>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C7C0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F7630BF020>, <app.database.models.Group object at 0x000001F7630BF130>]
2025-07-16 21:20:57,342 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:20:57,342 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 13...
2025-07-16 21:20:57,345 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 open orders.
2025-07-16 21:20:57,345 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 13...
2025-07-16 21:20:57,348 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 pending orders.
2025-07-16 21:20:57,348 - WARNING - app - [AUTO-CUTOFF] User 13 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:20:57,348 - INFO - app - [AUTO-CUTOFF] Processing user 14 (live), group: Standard
2025-07-16 21:20:57,348 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 14 (live) from cache/DB...
2025-07-16 21:20:57,353 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:20:57,354 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:20:57,354 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:20:57,360 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F7634905A0>, <app.database.models.Group object at 0x000001F763492AD0>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F763492360>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F7634917B0>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F7634938A0>, <app.database.models.Group object at 0x000001F7634939B0>, <app.database.models.Group object at 0x000001F763493AC0>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F7630BC050>, <app.database.models.Group object at 0x000001F7630BC160>, <app.database.models.Group object at 0x000001F7630BC270>, <app.database.models.Group object at 0x000001F7630BC380>, <app.database.models.Group object at 0x000001F7630BC490>, <app.database.models.Group object at 0x000001F7630BC5A0>, <app.database.models.Group object at 0x000001F7630BC6B0>, <app.database.models.Group object at 0x000001F7630BC7C0>, <app.database.models.Group object at 0x000001F7630BC8D0>, <app.database.models.Group object at 0x000001F7630BC9E0>, <app.database.models.Group object at 0x000001F7630BCAF0>, <app.database.models.Group object at 0x000001F7630BCC00>, <app.database.models.Group object at 0x000001F7630BCD10>, <app.database.models.Group object at 0x000001F7630BCE20>, <app.database.models.Group object at 0x000001F7630BCF30>, <app.database.models.Group object at 0x000001F7630BD040>, <app.database.models.Group object at 0x000001F7630BD150>, <app.database.models.Group object at 0x000001F7630BD260>, <app.database.models.Group object at 0x000001F7630BD370>, <app.database.models.Group object at 0x000001F7630BD480>, <app.database.models.Group object at 0x000001F7630BD590>, <app.database.models.Group object at 0x000001F7630BD6A0>, <app.database.models.Group object at 0x000001F7630BD7B0>, <app.database.models.Group object at 0x000001F7630BD8C0>, <app.database.models.Group object at 0x000001F7630BD9D0>, <app.database.models.Group object at 0x000001F7630BDAE0>, <app.database.models.Group object at 0x000001F7630BDBF0>, <app.database.models.Group object at 0x000001F7630BDD00>, <app.database.models.Group object at 0x000001F7630BDE10>, <app.database.models.Group object at 0x000001F7630BDF20>, <app.database.models.Group object at 0x000001F7630BE030>, <app.database.models.Group object at 0x000001F7630BE140>, <app.database.models.Group object at 0x000001F7630BE250>, <app.database.models.Group object at 0x000001F7630BE360>, <app.database.models.Group object at 0x000001F7630BE470>, <app.database.models.Group object at 0x000001F7630BE580>, <app.database.models.Group object at 0x000001F7630BE690>, <app.database.models.Group object at 0x000001F7630BE7A0>, <app.database.models.Group object at 0x000001F7630BE8B0>, <app.database.models.Group object at 0x000001F7630BE9C0>, <app.database.models.Group object at 0x000001F7630BEAD0>, <app.database.models.Group object at 0x000001F7630BEBE0>, <app.database.models.Group object at 0x000001F7630BECF0>]
2025-07-16 21:20:57,360 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:20:57,360 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 14...
2025-07-16 21:20:57,363 - DEBUG - app - [AUTO-CUTOFF] User 14 has 3 open orders.
2025-07-16 21:20:57,363 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 14...
2025-07-16 21:20:57,367 - DEBUG - app - [AUTO-CUTOFF] User 14 has 0 pending orders.
2025-07-16 21:20:57,367 - DEBUG - app - [AUTO-CUTOFF] User 14 total positions for portfolio calculation: 3
2025-07-16 21:20:57,368 - DEBUG - app - [AUTO-CUTOFF] User 14 adjusted market prices: {}
2025-07-16 21:20:57,368 - DEBUG - app - [AUTO-CUTOFF] User 14 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:20:57,368 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 14...
2025-07-16 21:20:57,650 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol BTCUSD
2025-07-16 21:20:57,650 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:20:57,650 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:20:57,651 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 14: {'balance': '9902.02000000', 'equity': '9902.02000000', 'margin': '9494.47000000', 'free_margin': '407.55000000', 'profit_loss': '0.0', 'margin_level': '104.2924986860772639231047125', 'positions': [{'order_id': '1000330-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.40000000'), 'order_price': Decimal('141908.50000000'), 'margin': Decimal('9422.73000000'), 'contract_value': Decimal('0.40000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('235.57000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000332-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('65.21517371'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000333-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('6.52134765'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:20:57,651 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 14: {'balance': '9902.02000000', 'equity': '9902.02000000', 'margin': '9494.47000000', 'free_margin': '407.55000000', 'profit_loss': '0.0', 'margin_level': '104.2924986860772639231047125', 'positions_with_pnl': [{'order_id': '1000330-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.40000000'), 'order_price': Decimal('141908.50000000'), 'margin': Decimal('9422.73000000'), 'contract_value': Decimal('0.40000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('235.57000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000332-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('65.21517371'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000333-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('6.52134765'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:20:57,652 - INFO - app - [AUTO-CUTOFF] User 14 margin_level: 104.2924986860772639231047125
2025-07-16 21:20:57,653 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 14
2025-07-16 21:20:57,653 - INFO - app - [AUTO-CUTOFF] Processing user 16 (live), group: Standard
2025-07-16 21:20:57,653 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 16 (live) from cache/DB...
2025-07-16 21:20:57,656 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:20:57,656 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:20:57,656 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:20:57,659 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x000001F763094E20>, <app.database.models.Group object at 0x000001F763096690>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763096360>, <app.database.models.Group object at 0x000001F763096580>, <app.database.models.Group object at 0x000001F763095D00>, <app.database.models.Group object at 0x000001F763096030>, <app.database.models.Group object at 0x000001F763095AE0>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F763095E10>, <app.database.models.Group object at 0x000001F763097460>, <app.database.models.Group object at 0x000001F763097570>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F763097790>, <app.database.models.Group object at 0x000001F7630978A0>, <app.database.models.Group object at 0x000001F7630979B0>, <app.database.models.Group object at 0x000001F763097AC0>, <app.database.models.Group object at 0x000001F763097BD0>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763097F00>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F7630958C0>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F763096250>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F76347CD10>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347D260>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347E250>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347C490>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347E030>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C7C0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F7634919D0>, <app.database.models.Group object at 0x000001F762EB18C0>, <app.database.models.Group object at 0x000001F762EB3790>, <app.database.models.Group object at 0x000001F7630BF020>]
2025-07-16 21:20:57,660 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:20:57,660 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 16...
2025-07-16 21:20:57,661 - DEBUG - app - [AUTO-CUTOFF] User 16 has 0 open orders.
2025-07-16 21:20:57,661 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 16...
2025-07-16 21:20:57,662 - DEBUG - app - [AUTO-CUTOFF] User 16 has 0 pending orders.
2025-07-16 21:20:57,662 - WARNING - app - [AUTO-CUTOFF] User 16 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:20:57,662 - INFO - app - [AUTO-CUTOFF] Processing user 17 (live), group: Group B
2025-07-16 21:20:57,662 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 17 (live) from cache/DB...
2025-07-16 21:20:57,665 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:20:57,665 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:20:57,666 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:20:57,669 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F7634905A0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F763492AD0>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F763492360>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F7634917B0>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F7634938A0>, <app.database.models.Group object at 0x000001F7634939B0>, <app.database.models.Group object at 0x000001F763493AC0>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763096470>, <app.database.models.Group object at 0x000001F763095BF0>, <app.database.models.Group object at 0x000001F7630967A0>, <app.database.models.Group object at 0x000001F7630BC050>, <app.database.models.Group object at 0x000001F7630BC160>, <app.database.models.Group object at 0x000001F7630BC270>, <app.database.models.Group object at 0x000001F7630BC380>, <app.database.models.Group object at 0x000001F7630BC490>, <app.database.models.Group object at 0x000001F7630BC5A0>, <app.database.models.Group object at 0x000001F7630BC6B0>, <app.database.models.Group object at 0x000001F7630BC7C0>, <app.database.models.Group object at 0x000001F7630BC8D0>, <app.database.models.Group object at 0x000001F7630BC9E0>, <app.database.models.Group object at 0x000001F7630BCAF0>, <app.database.models.Group object at 0x000001F7630BCC00>, <app.database.models.Group object at 0x000001F7630BCD10>, <app.database.models.Group object at 0x000001F7630BCE20>, <app.database.models.Group object at 0x000001F7630BCF30>, <app.database.models.Group object at 0x000001F7630BD040>, <app.database.models.Group object at 0x000001F7630BD150>, <app.database.models.Group object at 0x000001F7630BD260>, <app.database.models.Group object at 0x000001F7630BD370>, <app.database.models.Group object at 0x000001F7630BD480>, <app.database.models.Group object at 0x000001F7630BD590>, <app.database.models.Group object at 0x000001F7630BD6A0>, <app.database.models.Group object at 0x000001F7630BD7B0>, <app.database.models.Group object at 0x000001F7630BD8C0>, <app.database.models.Group object at 0x000001F7630BD9D0>, <app.database.models.Group object at 0x000001F7630BDAE0>, <app.database.models.Group object at 0x000001F7630BDBF0>, <app.database.models.Group object at 0x000001F7630BDD00>, <app.database.models.Group object at 0x000001F7630BDE10>, <app.database.models.Group object at 0x000001F7630BDF20>, <app.database.models.Group object at 0x000001F7630BE030>, <app.database.models.Group object at 0x000001F7630BE140>, <app.database.models.Group object at 0x000001F7630BE250>, <app.database.models.Group object at 0x000001F7630BE360>, <app.database.models.Group object at 0x000001F7630BE470>, <app.database.models.Group object at 0x000001F7630BE580>, <app.database.models.Group object at 0x000001F7630BE690>, <app.database.models.Group object at 0x000001F7630BE7A0>, <app.database.models.Group object at 0x000001F7630BE8B0>, <app.database.models.Group object at 0x000001F7630BE9C0>, <app.database.models.Group object at 0x000001F7630BEAD0>, <app.database.models.Group object at 0x000001F7630BEBE0>, <app.database.models.Group object at 0x000001F7630BECF0>, <app.database.models.Group object at 0x000001F7630BF130>, <app.database.models.Group object at 0x000001F7630BEE00>]
2025-07-16 21:20:57,669 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:20:57,669 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 17...
2025-07-16 21:20:57,671 - DEBUG - app - [AUTO-CUTOFF] User 17 has 0 open orders.
2025-07-16 21:20:57,671 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 17...
2025-07-16 21:20:57,673 - DEBUG - app - [AUTO-CUTOFF] User 17 has 0 pending orders.
2025-07-16 21:20:57,673 - WARNING - app - [AUTO-CUTOFF] User 17 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:20:57,673 - INFO - app - [AUTO-CUTOFF] Processing user 18 (live), group: Group B
2025-07-16 21:20:57,673 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 18 (live) from cache/DB...
2025-07-16 21:20:57,676 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:20:57,676 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:20:57,676 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:20:57,679 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F763096580>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F763096360>, <app.database.models.Group object at 0x000001F763095D00>, <app.database.models.Group object at 0x000001F763096030>, <app.database.models.Group object at 0x000001F763095AE0>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F763095E10>, <app.database.models.Group object at 0x000001F763097460>, <app.database.models.Group object at 0x000001F763097570>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F763097790>, <app.database.models.Group object at 0x000001F7630978A0>, <app.database.models.Group object at 0x000001F7630979B0>, <app.database.models.Group object at 0x000001F763097AC0>, <app.database.models.Group object at 0x000001F763097BD0>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763097F00>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F7630958C0>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F763096250>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F76347CD10>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347D260>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347E250>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347C490>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347E030>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C7C0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F762EB18C0>, <app.database.models.Group object at 0x000001F762EB3790>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F7634919D0>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F7630BF020>, <app.database.models.Group object at 0x000001F7630BEF10>, <app.database.models.Group object at 0x000001F7630BF240>]
2025-07-16 21:20:57,680 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:20:57,680 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 18...
2025-07-16 21:20:57,681 - DEBUG - app - [AUTO-CUTOFF] User 18 has 0 open orders.
2025-07-16 21:20:57,681 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 18...
2025-07-16 21:20:57,682 - DEBUG - app - [AUTO-CUTOFF] User 18 has 0 pending orders.
2025-07-16 21:20:57,682 - WARNING - app - [AUTO-CUTOFF] User 18 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:20:57,682 - INFO - app - [AUTO-CUTOFF] Processing user 19 (live), group: Elite
2025-07-16 21:20:57,682 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 19 (live) from cache/DB...
2025-07-16 21:20:57,684 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Elite...
2025-07-16 21:20:57,685 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Elite' from cache: None
2025-07-16 21:20:57,685 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Elite', fetching from DB.
2025-07-16 21:20:57,688 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Elite': [<app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F763492360>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F7634917B0>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F7634938A0>, <app.database.models.Group object at 0x000001F7634939B0>, <app.database.models.Group object at 0x000001F763493AC0>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763096470>, <app.database.models.Group object at 0x000001F763095BF0>, <app.database.models.Group object at 0x000001F7630967A0>, <app.database.models.Group object at 0x000001F763094E20>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763096690>, <app.database.models.Group object at 0x000001F7630BC050>, <app.database.models.Group object at 0x000001F7630BC160>, <app.database.models.Group object at 0x000001F7630BC270>, <app.database.models.Group object at 0x000001F7630BC380>, <app.database.models.Group object at 0x000001F7630BC490>, <app.database.models.Group object at 0x000001F7630BC5A0>, <app.database.models.Group object at 0x000001F7630BC6B0>, <app.database.models.Group object at 0x000001F7630BC7C0>, <app.database.models.Group object at 0x000001F7630BC8D0>, <app.database.models.Group object at 0x000001F7630BC9E0>, <app.database.models.Group object at 0x000001F7630BCAF0>, <app.database.models.Group object at 0x000001F7630BCC00>, <app.database.models.Group object at 0x000001F7630BCD10>, <app.database.models.Group object at 0x000001F7630BCE20>, <app.database.models.Group object at 0x000001F7630BCF30>, <app.database.models.Group object at 0x000001F7630BD040>, <app.database.models.Group object at 0x000001F7630BD150>, <app.database.models.Group object at 0x000001F7630BD260>, <app.database.models.Group object at 0x000001F7630BD370>, <app.database.models.Group object at 0x000001F7630BD480>, <app.database.models.Group object at 0x000001F7630BD590>, <app.database.models.Group object at 0x000001F7630BD6A0>, <app.database.models.Group object at 0x000001F7630BD7B0>, <app.database.models.Group object at 0x000001F7630BD8C0>, <app.database.models.Group object at 0x000001F7630BD9D0>, <app.database.models.Group object at 0x000001F7630BDAE0>, <app.database.models.Group object at 0x000001F7630BDBF0>, <app.database.models.Group object at 0x000001F7630BDD00>, <app.database.models.Group object at 0x000001F7630BDE10>, <app.database.models.Group object at 0x000001F7630BDF20>, <app.database.models.Group object at 0x000001F7630BE030>, <app.database.models.Group object at 0x000001F7630BE140>, <app.database.models.Group object at 0x000001F7630BE250>, <app.database.models.Group object at 0x000001F7630BE360>, <app.database.models.Group object at 0x000001F7630BE470>, <app.database.models.Group object at 0x000001F7630BE580>, <app.database.models.Group object at 0x000001F7630BE690>, <app.database.models.Group object at 0x000001F7630BE7A0>, <app.database.models.Group object at 0x000001F7630BE8B0>, <app.database.models.Group object at 0x000001F7630BE9C0>, <app.database.models.Group object at 0x000001F7630BEAD0>, <app.database.models.Group object at 0x000001F7630BEBE0>, <app.database.models.Group object at 0x000001F7630BECF0>]
2025-07-16 21:20:57,689 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Elite': {'sending_orders': 'barclays'}
2025-07-16 21:20:57,689 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 19...
2025-07-16 21:20:57,690 - DEBUG - app - [AUTO-CUTOFF] User 19 has 0 open orders.
2025-07-16 21:20:57,690 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 19...
2025-07-16 21:20:57,691 - DEBUG - app - [AUTO-CUTOFF] User 19 has 0 pending orders.
2025-07-16 21:20:57,692 - WARNING - app - [AUTO-CUTOFF] User 19 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:20:57,692 - INFO - app - [AUTO-CUTOFF] Processing user 20 (live), group: Standard
2025-07-16 21:20:57,692 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 20 (live) from cache/DB...
2025-07-16 21:20:57,694 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:20:57,695 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:20:57,695 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:20:57,697 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x000001F763095AE0>, <app.database.models.Group object at 0x000001F763096360>, <app.database.models.Group object at 0x000001F763096030>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F763095E10>, <app.database.models.Group object at 0x000001F763097460>, <app.database.models.Group object at 0x000001F763097570>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F763097790>, <app.database.models.Group object at 0x000001F7630978A0>, <app.database.models.Group object at 0x000001F7630979B0>, <app.database.models.Group object at 0x000001F763097AC0>, <app.database.models.Group object at 0x000001F763097BD0>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763097F00>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F7630958C0>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F763096250>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F76347CD10>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347D260>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347E250>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347C490>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347E030>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C7C0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F762EB18C0>, <app.database.models.Group object at 0x000001F762EB3790>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F7634919D0>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F7634905A0>, <app.database.models.Group object at 0x000001F763492AD0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F7630BF020>]
2025-07-16 21:20:57,698 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:20:57,698 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 20...
2025-07-16 21:20:57,699 - DEBUG - app - [AUTO-CUTOFF] User 20 has 0 open orders.
2025-07-16 21:20:57,699 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 20...
2025-07-16 21:20:57,700 - DEBUG - app - [AUTO-CUTOFF] User 20 has 0 pending orders.
2025-07-16 21:20:57,700 - WARNING - app - [AUTO-CUTOFF] User 20 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:20:57,700 - INFO - app - [AUTO-CUTOFF] Processing user 21 (live), group: Group B
2025-07-16 21:20:57,700 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 21 (live) from cache/DB...
2025-07-16 21:20:57,703 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:20:57,704 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:20:57,704 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:20:57,707 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F763492360>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F7634917B0>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F7634938A0>, <app.database.models.Group object at 0x000001F7634939B0>, <app.database.models.Group object at 0x000001F763493AC0>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763096470>, <app.database.models.Group object at 0x000001F763095BF0>, <app.database.models.Group object at 0x000001F7630967A0>, <app.database.models.Group object at 0x000001F763094E20>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763096690>, <app.database.models.Group object at 0x000001F763096580>, <app.database.models.Group object at 0x000001F763095D00>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F7630BC050>, <app.database.models.Group object at 0x000001F7630BC160>, <app.database.models.Group object at 0x000001F7630BC270>, <app.database.models.Group object at 0x000001F7630BC380>, <app.database.models.Group object at 0x000001F7630BC490>, <app.database.models.Group object at 0x000001F7630BC5A0>, <app.database.models.Group object at 0x000001F7630BC6B0>, <app.database.models.Group object at 0x000001F7630BC7C0>, <app.database.models.Group object at 0x000001F7630BC8D0>, <app.database.models.Group object at 0x000001F7630BC9E0>, <app.database.models.Group object at 0x000001F7630BCAF0>, <app.database.models.Group object at 0x000001F7630BCC00>, <app.database.models.Group object at 0x000001F7630BCD10>, <app.database.models.Group object at 0x000001F7630BCE20>, <app.database.models.Group object at 0x000001F7630BCF30>, <app.database.models.Group object at 0x000001F7630BD040>, <app.database.models.Group object at 0x000001F7630BD150>, <app.database.models.Group object at 0x000001F7630BD260>, <app.database.models.Group object at 0x000001F7630BD370>, <app.database.models.Group object at 0x000001F7630BD480>, <app.database.models.Group object at 0x000001F7630BD590>, <app.database.models.Group object at 0x000001F7630BD6A0>, <app.database.models.Group object at 0x000001F7630BD7B0>, <app.database.models.Group object at 0x000001F7630BD8C0>, <app.database.models.Group object at 0x000001F7630BD9D0>, <app.database.models.Group object at 0x000001F7630BDAE0>, <app.database.models.Group object at 0x000001F7630BDBF0>, <app.database.models.Group object at 0x000001F7630BDD00>, <app.database.models.Group object at 0x000001F7630BDE10>, <app.database.models.Group object at 0x000001F7630BDF20>, <app.database.models.Group object at 0x000001F7630BE030>, <app.database.models.Group object at 0x000001F7630BE140>, <app.database.models.Group object at 0x000001F7630BE250>, <app.database.models.Group object at 0x000001F7630BE360>, <app.database.models.Group object at 0x000001F7630BE470>, <app.database.models.Group object at 0x000001F7630BE580>, <app.database.models.Group object at 0x000001F7630BE690>, <app.database.models.Group object at 0x000001F7630BE7A0>, <app.database.models.Group object at 0x000001F7630BE8B0>, <app.database.models.Group object at 0x000001F7630BE9C0>, <app.database.models.Group object at 0x000001F7630BEAD0>, <app.database.models.Group object at 0x000001F7630BEBE0>, <app.database.models.Group object at 0x000001F7630BECF0>, <app.database.models.Group object at 0x000001F7630BEF10>, <app.database.models.Group object at 0x000001F7630BF240>]
2025-07-16 21:20:57,708 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:20:57,708 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 21...
2025-07-16 21:20:57,709 - DEBUG - app - [AUTO-CUTOFF] User 21 has 0 open orders.
2025-07-16 21:20:57,709 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 21...
2025-07-16 21:20:57,710 - DEBUG - app - [AUTO-CUTOFF] User 21 has 0 pending orders.
2025-07-16 21:20:57,710 - WARNING - app - [AUTO-CUTOFF] User 21 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:20:57,710 - INFO - app - [AUTO-CUTOFF] Processing user 22 (live), group: VIP
2025-07-16 21:20:57,710 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 22 (live) from cache/DB...
2025-07-16 21:20:57,713 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group VIP...
2025-07-16 21:20:57,713 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'VIP' from cache: None
2025-07-16 21:20:57,714 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'VIP', fetching from DB.
2025-07-16 21:20:57,716 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'VIP': [<app.database.models.Group object at 0x000001F763097460>, <app.database.models.Group object at 0x000001F763096030>, <app.database.models.Group object at 0x000001F763095E10>, <app.database.models.Group object at 0x000001F763097570>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F763097790>, <app.database.models.Group object at 0x000001F7630978A0>, <app.database.models.Group object at 0x000001F7630979B0>, <app.database.models.Group object at 0x000001F763097AC0>, <app.database.models.Group object at 0x000001F763097BD0>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763097F00>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F7630958C0>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F763096250>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F76347CD10>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347D260>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347E250>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347C490>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347E030>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C7C0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F762EB18C0>, <app.database.models.Group object at 0x000001F762EB3790>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F7634919D0>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F7634905A0>, <app.database.models.Group object at 0x000001F763492AD0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F7630BF020>]
2025-07-16 21:20:57,717 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'VIP': {'sending_orders': 'barclays'}
2025-07-16 21:20:57,717 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 22...
2025-07-16 21:20:57,718 - DEBUG - app - [AUTO-CUTOFF] User 22 has 0 open orders.
2025-07-16 21:20:57,718 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 22...
2025-07-16 21:20:57,719 - DEBUG - app - [AUTO-CUTOFF] User 22 has 0 pending orders.
2025-07-16 21:20:57,719 - WARNING - app - [AUTO-CUTOFF] User 22 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:20:57,719 - INFO - app - [AUTO-CUTOFF] Processing user 23 (live), group: Group B
2025-07-16 21:20:57,719 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 23 (live) from cache/DB...
2025-07-16 21:20:57,722 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:20:57,723 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:20:57,723 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:20:57,726 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F7634917B0>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F7634938A0>, <app.database.models.Group object at 0x000001F7634939B0>, <app.database.models.Group object at 0x000001F763493AC0>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763096470>, <app.database.models.Group object at 0x000001F763095BF0>, <app.database.models.Group object at 0x000001F7630967A0>, <app.database.models.Group object at 0x000001F763094E20>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763096690>, <app.database.models.Group object at 0x000001F763096580>, <app.database.models.Group object at 0x000001F763095D00>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F763095AE0>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F763096360>, <app.database.models.Group object at 0x000001F7630BC050>, <app.database.models.Group object at 0x000001F7630BC160>, <app.database.models.Group object at 0x000001F7630BC270>, <app.database.models.Group object at 0x000001F7630BC380>, <app.database.models.Group object at 0x000001F7630BC490>, <app.database.models.Group object at 0x000001F7630BC5A0>, <app.database.models.Group object at 0x000001F7630BC6B0>, <app.database.models.Group object at 0x000001F7630BC7C0>, <app.database.models.Group object at 0x000001F7630BC8D0>, <app.database.models.Group object at 0x000001F7630BC9E0>, <app.database.models.Group object at 0x000001F7630BCAF0>, <app.database.models.Group object at 0x000001F7630BCC00>, <app.database.models.Group object at 0x000001F7630BCD10>, <app.database.models.Group object at 0x000001F7630BCE20>, <app.database.models.Group object at 0x000001F7630BCF30>, <app.database.models.Group object at 0x000001F7630BD040>, <app.database.models.Group object at 0x000001F7630BD150>, <app.database.models.Group object at 0x000001F7630BD260>, <app.database.models.Group object at 0x000001F7630BD370>, <app.database.models.Group object at 0x000001F7630BD480>, <app.database.models.Group object at 0x000001F7630BD590>, <app.database.models.Group object at 0x000001F7630BD6A0>, <app.database.models.Group object at 0x000001F7630BD7B0>, <app.database.models.Group object at 0x000001F7630BD8C0>, <app.database.models.Group object at 0x000001F7630BD9D0>, <app.database.models.Group object at 0x000001F7630BDAE0>, <app.database.models.Group object at 0x000001F7630BDBF0>, <app.database.models.Group object at 0x000001F7630BDD00>, <app.database.models.Group object at 0x000001F7630BDE10>, <app.database.models.Group object at 0x000001F7630BDF20>, <app.database.models.Group object at 0x000001F7630BE030>, <app.database.models.Group object at 0x000001F7630BE140>, <app.database.models.Group object at 0x000001F7630BE250>, <app.database.models.Group object at 0x000001F7630BE360>, <app.database.models.Group object at 0x000001F7630BE470>, <app.database.models.Group object at 0x000001F7630BE580>, <app.database.models.Group object at 0x000001F7630BE690>, <app.database.models.Group object at 0x000001F7630BE7A0>, <app.database.models.Group object at 0x000001F7630BE8B0>, <app.database.models.Group object at 0x000001F7630BE9C0>, <app.database.models.Group object at 0x000001F7630BEAD0>, <app.database.models.Group object at 0x000001F7630BEBE0>, <app.database.models.Group object at 0x000001F7630BECF0>, <app.database.models.Group object at 0x000001F7630BEF10>, <app.database.models.Group object at 0x000001F7630BF240>]
2025-07-16 21:20:57,726 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:20:57,726 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 23...
2025-07-16 21:20:57,727 - DEBUG - app - [AUTO-CUTOFF] User 23 has 0 open orders.
2025-07-16 21:20:57,727 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 23...
2025-07-16 21:20:57,729 - DEBUG - app - [AUTO-CUTOFF] User 23 has 0 pending orders.
2025-07-16 21:20:57,729 - WARNING - app - [AUTO-CUTOFF] User 23 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:20:57,729 - INFO - app - [AUTO-CUTOFF] Processing user 25 (live), group: Group B
2025-07-16 21:20:57,729 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 25 (live) from cache/DB...
2025-07-16 21:20:57,731 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:20:57,732 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:20:57,732 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:20:57,735 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F763097790>, <app.database.models.Group object at 0x000001F763095E10>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F7630978A0>, <app.database.models.Group object at 0x000001F7630979B0>, <app.database.models.Group object at 0x000001F763097AC0>, <app.database.models.Group object at 0x000001F763097BD0>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763097F00>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F7630958C0>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F763096250>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F76347CD10>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347D260>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347E250>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347C490>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347E030>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C7C0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F762EB18C0>, <app.database.models.Group object at 0x000001F762EB3790>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F7634919D0>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F7634905A0>, <app.database.models.Group object at 0x000001F763492AD0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F763492360>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F7630BF020>, <app.database.models.Group object at 0x000001F7630BF130>, <app.database.models.Group object at 0x000001F7630BEE00>]
2025-07-16 21:20:57,735 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:20:57,735 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 25...
2025-07-16 21:20:57,737 - DEBUG - app - [AUTO-CUTOFF] User 25 has 0 open orders.
2025-07-16 21:20:57,737 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 25...
2025-07-16 21:20:57,738 - DEBUG - app - [AUTO-CUTOFF] User 25 has 0 pending orders.
2025-07-16 21:20:57,738 - WARNING - app - [AUTO-CUTOFF] User 25 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:20:57,738 - INFO - app - [AUTO-CUTOFF] Processing user 26 (live), group: Royal+
2025-07-16 21:20:57,738 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 26 (live) from cache/DB...
2025-07-16 21:20:57,741 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Royal+...
2025-07-16 21:20:57,741 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Royal+' from cache: None
2025-07-16 21:20:57,741 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Royal+', fetching from DB.
2025-07-16 21:20:57,744 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Royal+': [<app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F7634938A0>, <app.database.models.Group object at 0x000001F7634939B0>, <app.database.models.Group object at 0x000001F763493AC0>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763096470>, <app.database.models.Group object at 0x000001F763095BF0>, <app.database.models.Group object at 0x000001F7630967A0>, <app.database.models.Group object at 0x000001F763094E20>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763096690>, <app.database.models.Group object at 0x000001F763096580>, <app.database.models.Group object at 0x000001F763095D00>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F763095AE0>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F763096360>, <app.database.models.Group object at 0x000001F763097460>, <app.database.models.Group object at 0x000001F763097570>, <app.database.models.Group object at 0x000001F763096030>, <app.database.models.Group object at 0x000001F7630BC050>, <app.database.models.Group object at 0x000001F7630BC160>, <app.database.models.Group object at 0x000001F7630BC270>, <app.database.models.Group object at 0x000001F7630BC380>, <app.database.models.Group object at 0x000001F7630BC490>, <app.database.models.Group object at 0x000001F7630BC5A0>, <app.database.models.Group object at 0x000001F7630BC6B0>, <app.database.models.Group object at 0x000001F7630BC7C0>, <app.database.models.Group object at 0x000001F7630BC8D0>, <app.database.models.Group object at 0x000001F7630BC9E0>, <app.database.models.Group object at 0x000001F7630BCAF0>, <app.database.models.Group object at 0x000001F7630BCC00>, <app.database.models.Group object at 0x000001F7630BCD10>, <app.database.models.Group object at 0x000001F7630BCE20>, <app.database.models.Group object at 0x000001F7630BCF30>, <app.database.models.Group object at 0x000001F7630BD040>, <app.database.models.Group object at 0x000001F7630BD150>, <app.database.models.Group object at 0x000001F7630BD260>, <app.database.models.Group object at 0x000001F7630BD370>, <app.database.models.Group object at 0x000001F7630BD480>, <app.database.models.Group object at 0x000001F7630BD590>, <app.database.models.Group object at 0x000001F7630BD6A0>, <app.database.models.Group object at 0x000001F7630BD7B0>, <app.database.models.Group object at 0x000001F7630BD8C0>, <app.database.models.Group object at 0x000001F7630BD9D0>, <app.database.models.Group object at 0x000001F7630BDAE0>, <app.database.models.Group object at 0x000001F7630BDBF0>, <app.database.models.Group object at 0x000001F7630BDD00>, <app.database.models.Group object at 0x000001F7630BDE10>, <app.database.models.Group object at 0x000001F7630BDF20>, <app.database.models.Group object at 0x000001F7630BE030>, <app.database.models.Group object at 0x000001F7630BE140>, <app.database.models.Group object at 0x000001F7630BE250>, <app.database.models.Group object at 0x000001F7630BE360>, <app.database.models.Group object at 0x000001F7630BE470>, <app.database.models.Group object at 0x000001F7630BE580>, <app.database.models.Group object at 0x000001F7630BE690>, <app.database.models.Group object at 0x000001F7630BE7A0>, <app.database.models.Group object at 0x000001F7630BE8B0>, <app.database.models.Group object at 0x000001F7630BE9C0>, <app.database.models.Group object at 0x000001F7630BEAD0>, <app.database.models.Group object at 0x000001F7630BEBE0>, <app.database.models.Group object at 0x000001F7630BECF0>]
2025-07-16 21:20:57,744 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Royal+': {'sending_orders': 'barclays'}
2025-07-16 21:20:57,744 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 26...
2025-07-16 21:20:57,745 - DEBUG - app - [AUTO-CUTOFF] User 26 has 2 open orders.
2025-07-16 21:20:57,746 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 26...
2025-07-16 21:20:57,746 - DEBUG - app - [AUTO-CUTOFF] User 26 has 0 pending orders.
2025-07-16 21:20:57,746 - DEBUG - app - [AUTO-CUTOFF] User 26 total positions for portfolio calculation: 2
2025-07-16 21:20:57,747 - DEBUG - app - [AUTO-CUTOFF] User 26 adjusted market prices: {}
2025-07-16 21:20:57,747 - DEBUG - app - [AUTO-CUTOFF] User 26 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:20:57,747 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 26...
2025-07-16 21:20:58,054 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol XAGUSD
2025-07-16 21:20:58,054 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol BTCUSD
2025-07-16 21:20:58,054 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 26: {'balance': '184345.81000000', 'equity': '184345.81000000', 'margin': '146484.47000000', 'free_margin': '37861.34000000', 'profit_loss': '0.0', 'margin_level': '125.8466580109140579885362592', 'positions': [{'order_id': '7987141755', 'order_company_name': 'XAGUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('41.09800000'), 'margin': Decimal('19.54000000'), 'contract_value': Decimal('50.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1116628265', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('6.00000000'), 'order_price': Decimal('132091.90000000'), 'margin': Decimal('146464.93000000'), 'contract_value': Decimal('6.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3661.62000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:20:58,054 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 26: {'balance': '184345.81000000', 'equity': '184345.81000000', 'margin': '146484.47000000', 'free_margin': '37861.34000000', 'profit_loss': '0.0', 'margin_level': '125.8466580109140579885362592', 'positions_with_pnl': [{'order_id': '7987141755', 'order_company_name': 'XAGUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('41.09800000'), 'margin': Decimal('19.54000000'), 'contract_value': Decimal('50.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1116628265', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('6.00000000'), 'order_price': Decimal('132091.90000000'), 'margin': Decimal('146464.93000000'), 'contract_value': Decimal('6.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3661.62000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:20:58,055 - INFO - app - [AUTO-CUTOFF] User 26 margin_level: 125.8466580109140579885362592
2025-07-16 21:20:58,055 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 26
2025-07-16 21:20:58,055 - INFO - app - [AUTO-CUTOFF] Processing user 1 (demo), group: Group B
2025-07-16 21:20:58,055 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 1 (demo) from cache/DB...
2025-07-16 21:20:58,060 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:20:58,060 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:20:58,060 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:20:58,063 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F7630979B0>, <app.database.models.Group object at 0x000001F763097BD0>, <app.database.models.Group object at 0x000001F763097AC0>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763097F00>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F7630958C0>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F763096250>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F76347CD10>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347D260>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347E250>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347C490>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347E030>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C7C0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F762EB18C0>, <app.database.models.Group object at 0x000001F762EB3790>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F7634919D0>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F7634905A0>, <app.database.models.Group object at 0x000001F763492AD0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F763492360>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F7634917B0>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F7630BF020>, <app.database.models.Group object at 0x000001F7630BF130>, <app.database.models.Group object at 0x000001F7630BEE00>]
2025-07-16 21:20:58,064 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:20:58,064 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 1...
2025-07-16 21:20:58,066 - DEBUG - app - [AUTO-CUTOFF] User 1 has 2 open orders.
2025-07-16 21:20:58,066 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 1...
2025-07-16 21:20:58,068 - DEBUG - app - [AUTO-CUTOFF] User 1 has 1 pending orders.
2025-07-16 21:20:58,068 - DEBUG - app - [AUTO-CUTOFF] User 1 total positions for portfolio calculation: 3
2025-07-16 21:20:58,068 - DEBUG - app - [AUTO-CUTOFF] User 1 adjusted market prices: {}
2025-07-16 21:20:58,069 - DEBUG - app - [AUTO-CUTOFF] User 1 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:20:58,069 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 1...
2025-07-16 21:20:58,297 - DEBUG - app.firebase_stream - Firebase listener triggered (27). Event Type: patch, Path: /. Timestamp: 1752726058.2974832
2025-07-16 21:20:58,297 - DEBUG - app.firebase_stream - Prepared batch update for 1 symbols from root path for queue. Preview: {'USDJPY': {'b': '148.6000000000', 'o': '148.5920000000'}}
2025-07-16 21:20:58,297 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'USDJPY': {'b': '148.6000000000', 'o': '148.5920000000'}, '_timestamp': 1752726058.2976534}...
2025-07-16 21:20:58,297 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:20:58,359 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:20:58,360 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:20:58,360 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 1: {'balance': '17011.54000000', 'equity': '17011.54000000', 'margin': '6.54000000', 'free_margin': '17005.00000000', 'profit_loss': '0.0', 'margin_level': '260115.2905198776758409785933', 'positions': [{'order_id': '1000052-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.66800000'), 'margin': Decimal('6.54341805'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000053-001', 'order_company_name': 'AUDJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.56000000'), 'margin': Decimal('6.54258453'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:20:58,360 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 1: {'balance': '17011.54000000', 'equity': '17011.54000000', 'margin': '6.54000000', 'free_margin': '17005.00000000', 'profit_loss': '0.0', 'margin_level': '260115.2905198776758409785933', 'positions_with_pnl': [{'order_id': '1000052-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.66800000'), 'margin': Decimal('6.54341805'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000053-001', 'order_company_name': 'AUDJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.56000000'), 'margin': Decimal('6.54258453'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:20:58,360 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:58,361 - INFO - app - [AUTO-CUTOFF] User 1 margin_level: 260115.2905198776758409785933
2025-07-16 21:20:58,362 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 1
2025-07-16 21:20:58,362 - INFO - app - [AUTO-CUTOFF] Processing user 2 (demo), group: 
2025-07-16 21:20:58,362 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 2 (demo) from cache/DB...
2025-07-16 21:20:58,362 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:20:58,366 - WARNING - app - [AUTO-CUTOFF] User 2 has no group_name set. Skipping portfolio update.
2025-07-16 21:20:58,366 - INFO - app - [AUTO-CUTOFF] Processing user 3 (demo), group: string
2025-07-16 21:20:58,366 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 3 (demo) from cache/DB...
2025-07-16 21:20:58,369 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group string...
2025-07-16 21:20:58,370 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'string' from cache: None
2025-07-16 21:20:58,370 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'string', fetching from DB.
2025-07-16 21:20:58,371 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'string': []
2025-07-16 21:20:58,371 - ERROR - app - [AUTO-CUTOFF] Group symbol settings not found in DB for group 'string'. Skipping portfolio update for user 3.
2025-07-16 21:20:58,371 - INFO - app - [AUTO-CUTOFF] Processing user 4 (demo), group: Group B
2025-07-16 21:20:58,372 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 4 (demo) from cache/DB...
2025-07-16 21:20:58,372 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:20:58,372 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:20:58,372 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:20:58,375 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F76347CD10>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347D260>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347E250>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347C490>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347E030>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C7C0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F76347C6B0>, <app.database.models.Group object at 0x000001F76347C160>, <app.database.models.Group object at 0x000001F76347D150>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F7634919D0>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F7634905A0>, <app.database.models.Group object at 0x000001F763492AD0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F763492360>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F7634917B0>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763493020>, <app.database.models.Group object at 0x000001F7634938A0>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F763493AC0>, <app.database.models.Group object at 0x000001F7634939B0>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F7634928B0>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493DF0>]
2025-07-16 21:20:58,376 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:20:58,376 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 4...
2025-07-16 21:20:58,377 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 open orders.
2025-07-16 21:20:58,378 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 4...
2025-07-16 21:20:58,379 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 pending orders.
2025-07-16 21:20:58,379 - WARNING - app - [AUTO-CUTOFF] User 4 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:20:58,379 - INFO - app - [AUTO-CUTOFF] Processing user 5 (demo), group: None
2025-07-16 21:20:58,379 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 5 (demo) from cache/DB...
2025-07-16 21:20:58,382 - WARNING - app - [AUTO-CUTOFF] User 5 has no group_name set. Skipping portfolio update.
2025-07-16 21:20:58,382 - INFO - app - [AUTO-CUTOFF] Processing user 6 (demo), group: None
2025-07-16 21:20:58,382 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 6 (demo) from cache/DB...
2025-07-16 21:20:58,386 - WARNING - app - [AUTO-CUTOFF] User 6 has no group_name set. Skipping portfolio update.
2025-07-16 21:20:58,386 - INFO - app - [AUTO-CUTOFF] Processing user 9 (demo), group: Group B
2025-07-16 21:20:58,386 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 9 (demo) from cache/DB...
2025-07-16 21:20:58,386 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:20:58,387 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:20:58,387 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:20:58,390 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F7630979B0>, <app.database.models.Group object at 0x000001F763097BD0>, <app.database.models.Group object at 0x000001F763097AC0>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763097F00>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F7630958C0>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F763096250>, <app.database.models.Group object at 0x000001F763095590>, <app.database.models.Group object at 0x000001F763095370>, <app.database.models.Group object at 0x000001F763096470>, <app.database.models.Group object at 0x000001F763095BF0>, <app.database.models.Group object at 0x000001F7630967A0>, <app.database.models.Group object at 0x000001F763094E20>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763096690>, <app.database.models.Group object at 0x000001F763096580>, <app.database.models.Group object at 0x000001F763095D00>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F763095AE0>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F763096360>, <app.database.models.Group object at 0x000001F763097460>, <app.database.models.Group object at 0x000001F763097570>, <app.database.models.Group object at 0x000001F763096030>, <app.database.models.Group object at 0x000001F763097790>, <app.database.models.Group object at 0x000001F7630978A0>, <app.database.models.Group object at 0x000001F763095E10>, <app.database.models.Group object at 0x000001F7630D0050>, <app.database.models.Group object at 0x000001F7630D0160>, <app.database.models.Group object at 0x000001F7630D0270>, <app.database.models.Group object at 0x000001F7630D0380>, <app.database.models.Group object at 0x000001F7630D0490>, <app.database.models.Group object at 0x000001F7630D05A0>, <app.database.models.Group object at 0x000001F7630D06B0>, <app.database.models.Group object at 0x000001F7630D07C0>, <app.database.models.Group object at 0x000001F7630D08D0>, <app.database.models.Group object at 0x000001F7630D09E0>, <app.database.models.Group object at 0x000001F7630D0AF0>, <app.database.models.Group object at 0x000001F7630D0C00>, <app.database.models.Group object at 0x000001F7630D0D10>, <app.database.models.Group object at 0x000001F7630D0E20>, <app.database.models.Group object at 0x000001F7630D0F30>, <app.database.models.Group object at 0x000001F7630D1040>, <app.database.models.Group object at 0x000001F7630D1150>, <app.database.models.Group object at 0x000001F7630D1260>, <app.database.models.Group object at 0x000001F7630D1370>, <app.database.models.Group object at 0x000001F7630D1480>, <app.database.models.Group object at 0x000001F7630D1590>, <app.database.models.Group object at 0x000001F7630D16A0>, <app.database.models.Group object at 0x000001F7630D17B0>, <app.database.models.Group object at 0x000001F7630D18C0>, <app.database.models.Group object at 0x000001F7630D19D0>, <app.database.models.Group object at 0x000001F7630D1AE0>, <app.database.models.Group object at 0x000001F7630D1BF0>, <app.database.models.Group object at 0x000001F7630D1D00>, <app.database.models.Group object at 0x000001F7630D1E10>, <app.database.models.Group object at 0x000001F7630D1F20>, <app.database.models.Group object at 0x000001F7630D2030>, <app.database.models.Group object at 0x000001F7630D2140>, <app.database.models.Group object at 0x000001F7630D2250>, <app.database.models.Group object at 0x000001F7630D2360>, <app.database.models.Group object at 0x000001F7630D2470>, <app.database.models.Group object at 0x000001F7630D2580>, <app.database.models.Group object at 0x000001F7630D2690>, <app.database.models.Group object at 0x000001F7630D27A0>, <app.database.models.Group object at 0x000001F7630D28B0>, <app.database.models.Group object at 0x000001F7630D29C0>, <app.database.models.Group object at 0x000001F7630D2AD0>, <app.database.models.Group object at 0x000001F7630D2BE0>, <app.database.models.Group object at 0x000001F7630D2CF0>, <app.database.models.Group object at 0x000001F7630D2E00>, <app.database.models.Group object at 0x000001F7630D2F10>]
2025-07-16 21:20:58,391 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:20:58,391 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 9...
2025-07-16 21:20:58,393 - DEBUG - app - [AUTO-CUTOFF] User 9 has 28 open orders.
2025-07-16 21:20:58,393 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 9...
2025-07-16 21:20:58,395 - DEBUG - app - [AUTO-CUTOFF] User 9 has 6 pending orders.
2025-07-16 21:20:58,395 - DEBUG - app - [AUTO-CUTOFF] User 9 total positions for portfolio calculation: 34
2025-07-16 21:20:58,396 - DEBUG - app - [AUTO-CUTOFF] User 9 adjusted market prices: {}
2025-07-16 21:20:58,396 - DEBUG - app - [AUTO-CUTOFF] User 9 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:20:58,396 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 9...
2025-07-16 21:20:58,693 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDUSD
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDUSD
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFSGD
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFSGD
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CADJPY
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CADJPY
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFJPY
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFJPY
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURGBP
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURJPY
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURJPY
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURNZD
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURNZD
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol NZDJPY
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDCHF
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDCHF
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDNOK
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDNOK
2025-07-16 21:20:58,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDSGD
2025-07-16 21:20:58,695 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDTRY
2025-07-16 21:20:58,695 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 9: {'balance': '98181.73000000', 'equity': '98181.73000000', 'margin': '1917.31000000', 'free_margin': '96264.42000000', 'profit_loss': '0.0', 'margin_level': '5120.806233733720681579921870', 'positions': [{'order_id': '2504219016', 'order_company_name': 'AUDUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.64743000'), 'margin': Decimal('64.74000000'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4208488950', 'order_company_name': 'AUDUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('0.64707000'), 'margin': Decimal('142.36000000'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1409905880', 'order_company_name': 'CHFSGD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57561500'), 'margin': Decimal('122.35389131'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7183762766', 'order_company_name': 'CHFSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57505500'), 'margin': Decimal('122.31506360'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9716387266', 'order_company_name': 'CADJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.24150000'), 'margin': Decimal('109.44987397'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9899743248', 'order_company_name': 'CADJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.27050000'), 'margin': Decimal('109.47824594'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2965066905', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('1.77481000'), 'margin': Decimal('252.73304420'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6518780780', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.21000000'), 'order_price': Decimal('1.77439000'), 'margin': Decimal('241.18574740'), 'contract_value': Decimal('21000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7509572762', 'order_company_name': 'CHFJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.15500000'), 'margin': Decimal('122.35584187'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7522048723', 'order_company_name': 'CHFJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.09500000'), 'margin': Decimal('122.31379417'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6209391896', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77480000'), 'margin': Decimal('57.44317680'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8581607125', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77442000'), 'margin': Decimal('57.43111760'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8951109289', 'order_company_name': 'EURGBP', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.85403000'), 'margin': Decimal('114.85104400'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7115525171', 'order_company_name': 'EURJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.26050000'), 'margin': Decimal('114.87277223'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2099467271', 'order_company_name': 'EURJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.23150000'), 'margin': Decimal('114.85285533'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4283527369', 'order_company_name': 'EURNZD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.91952500'), 'margin': Decimal('114.85328250'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6611902574', 'order_company_name': 'EURNZD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.92063500'), 'margin': Decimal('114.81922980'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4731664142', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34376000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8676137902', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34361000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3301052276', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34379000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2972795665', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34378000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1117118581', 'order_company_name': 'NZDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('87.10150000'), 'margin': Decimal('5.97837949'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3385451189', 'order_company_name': 'USDCHF', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81771000'), 'margin': Decimal('149.97126753'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6134727989', 'order_company_name': 'USDCHF', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81805000'), 'margin': Decimal('150.03056608'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9211531174', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.04973000'), 'margin': Decimal('100.00169162'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5200391957', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.05023000'), 'margin': Decimal('100.00169154'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5654381883', 'order_company_name': 'USDSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.31000000'), 'order_price': Decimal('1.28795000'), 'margin': Decimal('309.93393934'), 'contract_value': Decimal('31000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6985407710', 'order_company_name': 'USDTRY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('39.56087000'), 'margin': Decimal('99.98738813'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:20:58,695 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 9: {'balance': '98181.73000000', 'equity': '98181.73000000', 'margin': '1917.31000000', 'free_margin': '96264.42000000', 'profit_loss': '0.0', 'margin_level': '5120.806233733720681579921870', 'positions_with_pnl': [{'order_id': '2504219016', 'order_company_name': 'AUDUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.64743000'), 'margin': Decimal('64.74000000'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4208488950', 'order_company_name': 'AUDUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('0.64707000'), 'margin': Decimal('142.36000000'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1409905880', 'order_company_name': 'CHFSGD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57561500'), 'margin': Decimal('122.35389131'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7183762766', 'order_company_name': 'CHFSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57505500'), 'margin': Decimal('122.31506360'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9716387266', 'order_company_name': 'CADJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.24150000'), 'margin': Decimal('109.44987397'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9899743248', 'order_company_name': 'CADJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.27050000'), 'margin': Decimal('109.47824594'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2965066905', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('1.77481000'), 'margin': Decimal('252.73304420'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6518780780', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.21000000'), 'order_price': Decimal('1.77439000'), 'margin': Decimal('241.18574740'), 'contract_value': Decimal('21000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7509572762', 'order_company_name': 'CHFJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.15500000'), 'margin': Decimal('122.35584187'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7522048723', 'order_company_name': 'CHFJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.09500000'), 'margin': Decimal('122.31379417'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6209391896', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77480000'), 'margin': Decimal('57.44317680'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8581607125', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77442000'), 'margin': Decimal('57.43111760'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8951109289', 'order_company_name': 'EURGBP', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.85403000'), 'margin': Decimal('114.85104400'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7115525171', 'order_company_name': 'EURJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.26050000'), 'margin': Decimal('114.87277223'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2099467271', 'order_company_name': 'EURJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.23150000'), 'margin': Decimal('114.85285533'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4283527369', 'order_company_name': 'EURNZD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.91952500'), 'margin': Decimal('114.85328250'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6611902574', 'order_company_name': 'EURNZD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.92063500'), 'margin': Decimal('114.81922980'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4731664142', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34376000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8676137902', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34361000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3301052276', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34379000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2972795665', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34378000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1117118581', 'order_company_name': 'NZDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('87.10150000'), 'margin': Decimal('5.97837949'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3385451189', 'order_company_name': 'USDCHF', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81771000'), 'margin': Decimal('149.97126753'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6134727989', 'order_company_name': 'USDCHF', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81805000'), 'margin': Decimal('150.03056608'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9211531174', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.04973000'), 'margin': Decimal('100.00169162'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5200391957', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.05023000'), 'margin': Decimal('100.00169154'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5654381883', 'order_company_name': 'USDSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.31000000'), 'order_price': Decimal('1.28795000'), 'margin': Decimal('309.93393934'), 'contract_value': Decimal('31000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6985407710', 'order_company_name': 'USDTRY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('39.56087000'), 'margin': Decimal('99.98738813'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:20:58,697 - INFO - app - [AUTO-CUTOFF] User 9 margin_level: 5120.806233733720681579921870
2025-07-16 21:20:58,698 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 9
2025-07-16 21:20:58,698 - INFO - app - [AUTO-CUTOFF] Processing user 10 (demo), group: Group B
2025-07-16 21:20:58,698 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 10 (demo) from cache/DB...
2025-07-16 21:20:58,699 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:20:58,699 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:20:58,700 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:20:58,704 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F7630979B0>, <app.database.models.Group object at 0x000001F763097BD0>, <app.database.models.Group object at 0x000001F763097AC0>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763097F00>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F7630958C0>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F763096250>, <app.database.models.Group object at 0x000001F763095590>, <app.database.models.Group object at 0x000001F763095370>, <app.database.models.Group object at 0x000001F763096470>, <app.database.models.Group object at 0x000001F763095BF0>, <app.database.models.Group object at 0x000001F7630967A0>, <app.database.models.Group object at 0x000001F763094E20>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763096690>, <app.database.models.Group object at 0x000001F763096580>, <app.database.models.Group object at 0x000001F763095D00>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F763095AE0>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F763096360>, <app.database.models.Group object at 0x000001F763097460>, <app.database.models.Group object at 0x000001F763097570>, <app.database.models.Group object at 0x000001F763096030>, <app.database.models.Group object at 0x000001F763097790>, <app.database.models.Group object at 0x000001F7630978A0>, <app.database.models.Group object at 0x000001F763095E10>, <app.database.models.Group object at 0x000001F7630D0050>, <app.database.models.Group object at 0x000001F7630D0160>, <app.database.models.Group object at 0x000001F7630D0270>, <app.database.models.Group object at 0x000001F7630D0380>, <app.database.models.Group object at 0x000001F7630D0490>, <app.database.models.Group object at 0x000001F7630D05A0>, <app.database.models.Group object at 0x000001F7630D06B0>, <app.database.models.Group object at 0x000001F7630D07C0>, <app.database.models.Group object at 0x000001F7630D08D0>, <app.database.models.Group object at 0x000001F7630D09E0>, <app.database.models.Group object at 0x000001F7630D0AF0>, <app.database.models.Group object at 0x000001F7630D0C00>, <app.database.models.Group object at 0x000001F7630D0D10>, <app.database.models.Group object at 0x000001F7630D0E20>, <app.database.models.Group object at 0x000001F7630D0F30>, <app.database.models.Group object at 0x000001F7630D1040>, <app.database.models.Group object at 0x000001F7630D1150>, <app.database.models.Group object at 0x000001F7630D1260>, <app.database.models.Group object at 0x000001F7630D1370>, <app.database.models.Group object at 0x000001F7630D1480>, <app.database.models.Group object at 0x000001F7630D1590>, <app.database.models.Group object at 0x000001F7630D16A0>, <app.database.models.Group object at 0x000001F7630D17B0>, <app.database.models.Group object at 0x000001F7630D18C0>, <app.database.models.Group object at 0x000001F7630D19D0>, <app.database.models.Group object at 0x000001F7630D1AE0>, <app.database.models.Group object at 0x000001F7630D1BF0>, <app.database.models.Group object at 0x000001F7630D1D00>, <app.database.models.Group object at 0x000001F7630D1E10>, <app.database.models.Group object at 0x000001F7630D1F20>, <app.database.models.Group object at 0x000001F7630D2030>, <app.database.models.Group object at 0x000001F7630D2140>, <app.database.models.Group object at 0x000001F7630D2250>, <app.database.models.Group object at 0x000001F7630D2360>, <app.database.models.Group object at 0x000001F7630D2470>, <app.database.models.Group object at 0x000001F7630D2580>, <app.database.models.Group object at 0x000001F7630D2690>, <app.database.models.Group object at 0x000001F7630D27A0>, <app.database.models.Group object at 0x000001F7630D28B0>, <app.database.models.Group object at 0x000001F7630D29C0>, <app.database.models.Group object at 0x000001F7630D2AD0>, <app.database.models.Group object at 0x000001F7630D2BE0>, <app.database.models.Group object at 0x000001F7630D2CF0>, <app.database.models.Group object at 0x000001F7630D2E00>, <app.database.models.Group object at 0x000001F7630D2F10>]
2025-07-16 21:20:58,704 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:20:58,704 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 10...
2025-07-16 21:20:58,707 - DEBUG - app - [AUTO-CUTOFF] User 10 has 0 open orders.
2025-07-16 21:20:58,707 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 10...
2025-07-16 21:20:58,709 - DEBUG - app - [AUTO-CUTOFF] User 10 has 1 pending orders.
2025-07-16 21:20:58,709 - DEBUG - app - [AUTO-CUTOFF] User 10 total positions for portfolio calculation: 1
2025-07-16 21:20:58,711 - DEBUG - app - [AUTO-CUTOFF] User 10 adjusted market prices: {}
2025-07-16 21:20:58,711 - DEBUG - app - [AUTO-CUTOFF] User 10 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:20:58,711 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 10...
2025-07-16 21:20:59,012 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 10: {'balance': '9958.40000000', 'equity': '9958.40000000', 'margin': '39.25000000', 'free_margin': '9919.15000000', 'profit_loss': '0.0', 'margin_level': '25371.71974522292993630573248', 'positions': [], 'margin_call': False}
2025-07-16 21:20:59,012 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 10: {'balance': '9958.40000000', 'equity': '9958.40000000', 'margin': '39.25000000', 'free_margin': '9919.15000000', 'profit_loss': '0.0', 'margin_level': '25371.71974522292993630573248', 'positions_with_pnl': [], 'margin_call': False}
2025-07-16 21:20:59,013 - INFO - app - [AUTO-CUTOFF] User 10 margin_level: 25371.71974522292993630573248
2025-07-16 21:20:59,014 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 10
2025-07-16 21:20:59,014 - INFO - app - [AUTO-CUTOFF] Processing user 11 (demo), group: Group B
2025-07-16 21:20:59,014 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 11 (demo) from cache/DB...
2025-07-16 21:20:59,015 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:20:59,015 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:20:59,015 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:20:59,018 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F7630979B0>, <app.database.models.Group object at 0x000001F763097BD0>, <app.database.models.Group object at 0x000001F763097AC0>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763097F00>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F7630958C0>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F763096250>, <app.database.models.Group object at 0x000001F763095590>, <app.database.models.Group object at 0x000001F763095370>, <app.database.models.Group object at 0x000001F763096470>, <app.database.models.Group object at 0x000001F763095BF0>, <app.database.models.Group object at 0x000001F7630967A0>, <app.database.models.Group object at 0x000001F763094E20>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763096690>, <app.database.models.Group object at 0x000001F763096580>, <app.database.models.Group object at 0x000001F763095D00>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F763095AE0>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F763096360>, <app.database.models.Group object at 0x000001F763097460>, <app.database.models.Group object at 0x000001F763097570>, <app.database.models.Group object at 0x000001F763096030>, <app.database.models.Group object at 0x000001F763097790>, <app.database.models.Group object at 0x000001F7630978A0>, <app.database.models.Group object at 0x000001F763095E10>, <app.database.models.Group object at 0x000001F7630D0050>, <app.database.models.Group object at 0x000001F7630D0160>, <app.database.models.Group object at 0x000001F7630D0270>, <app.database.models.Group object at 0x000001F7630D0380>, <app.database.models.Group object at 0x000001F7630D0490>, <app.database.models.Group object at 0x000001F7630D05A0>, <app.database.models.Group object at 0x000001F7630D06B0>, <app.database.models.Group object at 0x000001F7630D07C0>, <app.database.models.Group object at 0x000001F7630D08D0>, <app.database.models.Group object at 0x000001F7630D09E0>, <app.database.models.Group object at 0x000001F7630D0AF0>, <app.database.models.Group object at 0x000001F7630D0C00>, <app.database.models.Group object at 0x000001F7630D0D10>, <app.database.models.Group object at 0x000001F7630D0E20>, <app.database.models.Group object at 0x000001F7630D0F30>, <app.database.models.Group object at 0x000001F7630D1040>, <app.database.models.Group object at 0x000001F7630D1150>, <app.database.models.Group object at 0x000001F7630D1260>, <app.database.models.Group object at 0x000001F7630D1370>, <app.database.models.Group object at 0x000001F7630D1480>, <app.database.models.Group object at 0x000001F7630D1590>, <app.database.models.Group object at 0x000001F7630D16A0>, <app.database.models.Group object at 0x000001F7630D17B0>, <app.database.models.Group object at 0x000001F7630D18C0>, <app.database.models.Group object at 0x000001F7630D19D0>, <app.database.models.Group object at 0x000001F7630D1AE0>, <app.database.models.Group object at 0x000001F7630D1BF0>, <app.database.models.Group object at 0x000001F7630D1D00>, <app.database.models.Group object at 0x000001F7630D1E10>, <app.database.models.Group object at 0x000001F7630D1F20>, <app.database.models.Group object at 0x000001F7630D2030>, <app.database.models.Group object at 0x000001F7630D2140>, <app.database.models.Group object at 0x000001F7630D2250>, <app.database.models.Group object at 0x000001F7630D2360>, <app.database.models.Group object at 0x000001F7630D2470>, <app.database.models.Group object at 0x000001F7630D2580>, <app.database.models.Group object at 0x000001F7630D2690>, <app.database.models.Group object at 0x000001F7630D27A0>, <app.database.models.Group object at 0x000001F7630D28B0>, <app.database.models.Group object at 0x000001F7630D29C0>, <app.database.models.Group object at 0x000001F7630D2AD0>, <app.database.models.Group object at 0x000001F7630D2BE0>, <app.database.models.Group object at 0x000001F7630D2CF0>, <app.database.models.Group object at 0x000001F7630D2E00>, <app.database.models.Group object at 0x000001F7630D2F10>]
2025-07-16 21:20:59,019 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:20:59,019 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 11...
2025-07-16 21:20:59,021 - DEBUG - app - [AUTO-CUTOFF] User 11 has 1 open orders.
2025-07-16 21:20:59,022 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 11...
2025-07-16 21:20:59,023 - DEBUG - app - [AUTO-CUTOFF] User 11 has 0 pending orders.
2025-07-16 21:20:59,023 - DEBUG - app - [AUTO-CUTOFF] User 11 total positions for portfolio calculation: 1
2025-07-16 21:20:59,024 - DEBUG - app - [AUTO-CUTOFF] User 11 adjusted market prices: {}
2025-07-16 21:20:59,024 - DEBUG - app - [AUTO-CUTOFF] User 11 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:20:59,024 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 11...
2025-07-16 21:20:59,303 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-07-16 21:20:59,304 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 11: {'balance': '99998.61000000', 'equity': '99998.61000000', 'margin': '6.55000000', 'free_margin': '99992.06000000', 'profit_loss': '0.0', 'margin_level': '1526696.335877862595419847328', 'positions': [{'order_id': '1000099-001', 'order_company_name': 'AUDCAD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('0.89752000'), 'margin': Decimal('6.55364428'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 11, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:20:59,304 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 11: {'balance': '99998.61000000', 'equity': '99998.61000000', 'margin': '6.55000000', 'free_margin': '99992.06000000', 'profit_loss': '0.0', 'margin_level': '1526696.335877862595419847328', 'positions_with_pnl': [{'order_id': '1000099-001', 'order_company_name': 'AUDCAD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('0.89752000'), 'margin': Decimal('6.55364428'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 11, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:20:59,305 - INFO - app - [AUTO-CUTOFF] User 11 margin_level: 1526696.335877862595419847328
2025-07-16 21:20:59,305 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 11
2025-07-16 21:20:59,305 - INFO - app - [AUTO-CUTOFF] Processing user 12 (demo), group: Group B
2025-07-16 21:20:59,305 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 12 (demo) from cache/DB...
2025-07-16 21:20:59,306 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:20:59,306 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:20:59,306 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:20:59,309 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F7630979B0>, <app.database.models.Group object at 0x000001F763097BD0>, <app.database.models.Group object at 0x000001F763097AC0>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763097F00>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F7630958C0>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F763096250>, <app.database.models.Group object at 0x000001F763095590>, <app.database.models.Group object at 0x000001F763095370>, <app.database.models.Group object at 0x000001F763096470>, <app.database.models.Group object at 0x000001F763095BF0>, <app.database.models.Group object at 0x000001F7630967A0>, <app.database.models.Group object at 0x000001F763094E20>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763096690>, <app.database.models.Group object at 0x000001F763096580>, <app.database.models.Group object at 0x000001F763095D00>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F763095AE0>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F763096360>, <app.database.models.Group object at 0x000001F763097460>, <app.database.models.Group object at 0x000001F763097570>, <app.database.models.Group object at 0x000001F763096030>, <app.database.models.Group object at 0x000001F763097790>, <app.database.models.Group object at 0x000001F7630978A0>, <app.database.models.Group object at 0x000001F763095E10>, <app.database.models.Group object at 0x000001F7630D0050>, <app.database.models.Group object at 0x000001F7630D0160>, <app.database.models.Group object at 0x000001F7630D0270>, <app.database.models.Group object at 0x000001F7630D0380>, <app.database.models.Group object at 0x000001F7630D0490>, <app.database.models.Group object at 0x000001F7630D05A0>, <app.database.models.Group object at 0x000001F7630D06B0>, <app.database.models.Group object at 0x000001F7630D07C0>, <app.database.models.Group object at 0x000001F7630D08D0>, <app.database.models.Group object at 0x000001F7630D09E0>, <app.database.models.Group object at 0x000001F7630D0AF0>, <app.database.models.Group object at 0x000001F7630D0C00>, <app.database.models.Group object at 0x000001F7630D0D10>, <app.database.models.Group object at 0x000001F7630D0E20>, <app.database.models.Group object at 0x000001F7630D0F30>, <app.database.models.Group object at 0x000001F7630D1040>, <app.database.models.Group object at 0x000001F7630D1150>, <app.database.models.Group object at 0x000001F7630D1260>, <app.database.models.Group object at 0x000001F7630D1370>, <app.database.models.Group object at 0x000001F7630D1480>, <app.database.models.Group object at 0x000001F7630D1590>, <app.database.models.Group object at 0x000001F7630D16A0>, <app.database.models.Group object at 0x000001F7630D17B0>, <app.database.models.Group object at 0x000001F7630D18C0>, <app.database.models.Group object at 0x000001F7630D19D0>, <app.database.models.Group object at 0x000001F7630D1AE0>, <app.database.models.Group object at 0x000001F7630D1BF0>, <app.database.models.Group object at 0x000001F7630D1D00>, <app.database.models.Group object at 0x000001F7630D1E10>, <app.database.models.Group object at 0x000001F7630D1F20>, <app.database.models.Group object at 0x000001F7630D2030>, <app.database.models.Group object at 0x000001F7630D2140>, <app.database.models.Group object at 0x000001F7630D2250>, <app.database.models.Group object at 0x000001F7630D2360>, <app.database.models.Group object at 0x000001F7630D2470>, <app.database.models.Group object at 0x000001F7630D2580>, <app.database.models.Group object at 0x000001F7630D2690>, <app.database.models.Group object at 0x000001F7630D27A0>, <app.database.models.Group object at 0x000001F7630D28B0>, <app.database.models.Group object at 0x000001F7630D29C0>, <app.database.models.Group object at 0x000001F7630D2AD0>, <app.database.models.Group object at 0x000001F7630D2BE0>, <app.database.models.Group object at 0x000001F7630D2CF0>, <app.database.models.Group object at 0x000001F7630D2E00>, <app.database.models.Group object at 0x000001F7630D2F10>]
2025-07-16 21:20:59,309 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:20:59,310 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 12...
2025-07-16 21:20:59,311 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 open orders.
2025-07-16 21:20:59,311 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 12...
2025-07-16 21:20:59,312 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 pending orders.
2025-07-16 21:20:59,312 - WARNING - app - [AUTO-CUTOFF] User 12 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:20:59,312 - INFO - app - [AUTO-CUTOFF] Processing user 13 (demo), group: Group B
2025-07-16 21:20:59,312 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 13 (demo) from cache/DB...
2025-07-16 21:20:59,313 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:20:59,313 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:20:59,313 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:20:59,317 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F7630979B0>, <app.database.models.Group object at 0x000001F763097BD0>, <app.database.models.Group object at 0x000001F763097AC0>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763097F00>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F7630958C0>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F763096250>, <app.database.models.Group object at 0x000001F763095590>, <app.database.models.Group object at 0x000001F763095370>, <app.database.models.Group object at 0x000001F763096470>, <app.database.models.Group object at 0x000001F763095BF0>, <app.database.models.Group object at 0x000001F7630967A0>, <app.database.models.Group object at 0x000001F763094E20>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763096690>, <app.database.models.Group object at 0x000001F763096580>, <app.database.models.Group object at 0x000001F763095D00>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F763095AE0>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F763096360>, <app.database.models.Group object at 0x000001F763097460>, <app.database.models.Group object at 0x000001F763097570>, <app.database.models.Group object at 0x000001F763096030>, <app.database.models.Group object at 0x000001F763097790>, <app.database.models.Group object at 0x000001F7630978A0>, <app.database.models.Group object at 0x000001F763095E10>, <app.database.models.Group object at 0x000001F7630D0050>, <app.database.models.Group object at 0x000001F7630D0160>, <app.database.models.Group object at 0x000001F7630D0270>, <app.database.models.Group object at 0x000001F7630D0380>, <app.database.models.Group object at 0x000001F7630D0490>, <app.database.models.Group object at 0x000001F7630D05A0>, <app.database.models.Group object at 0x000001F7630D06B0>, <app.database.models.Group object at 0x000001F7630D07C0>, <app.database.models.Group object at 0x000001F7630D08D0>, <app.database.models.Group object at 0x000001F7630D09E0>, <app.database.models.Group object at 0x000001F7630D0AF0>, <app.database.models.Group object at 0x000001F7630D0C00>, <app.database.models.Group object at 0x000001F7630D0D10>, <app.database.models.Group object at 0x000001F7630D0E20>, <app.database.models.Group object at 0x000001F7630D0F30>, <app.database.models.Group object at 0x000001F7630D1040>, <app.database.models.Group object at 0x000001F7630D1150>, <app.database.models.Group object at 0x000001F7630D1260>, <app.database.models.Group object at 0x000001F7630D1370>, <app.database.models.Group object at 0x000001F7630D1480>, <app.database.models.Group object at 0x000001F7630D1590>, <app.database.models.Group object at 0x000001F7630D16A0>, <app.database.models.Group object at 0x000001F7630D17B0>, <app.database.models.Group object at 0x000001F7630D18C0>, <app.database.models.Group object at 0x000001F7630D19D0>, <app.database.models.Group object at 0x000001F7630D1AE0>, <app.database.models.Group object at 0x000001F7630D1BF0>, <app.database.models.Group object at 0x000001F7630D1D00>, <app.database.models.Group object at 0x000001F7630D1E10>, <app.database.models.Group object at 0x000001F7630D1F20>, <app.database.models.Group object at 0x000001F7630D2030>, <app.database.models.Group object at 0x000001F7630D2140>, <app.database.models.Group object at 0x000001F7630D2250>, <app.database.models.Group object at 0x000001F7630D2360>, <app.database.models.Group object at 0x000001F7630D2470>, <app.database.models.Group object at 0x000001F7630D2580>, <app.database.models.Group object at 0x000001F7630D2690>, <app.database.models.Group object at 0x000001F7630D27A0>, <app.database.models.Group object at 0x000001F7630D28B0>, <app.database.models.Group object at 0x000001F7630D29C0>, <app.database.models.Group object at 0x000001F7630D2AD0>, <app.database.models.Group object at 0x000001F7630D2BE0>, <app.database.models.Group object at 0x000001F7630D2CF0>, <app.database.models.Group object at 0x000001F7630D2E00>, <app.database.models.Group object at 0x000001F7630D2F10>]
2025-07-16 21:20:59,317 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:20:59,317 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 13...
2025-07-16 21:20:59,319 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 open orders.
2025-07-16 21:20:59,319 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 13...
2025-07-16 21:20:59,321 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 pending orders.
2025-07-16 21:20:59,321 - WARNING - app - [AUTO-CUTOFF] User 13 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:20:59,365 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:20:59,367 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:00,371 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:00,373 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:00,558 - DEBUG - app.firebase_stream - Firebase listener triggered (28). Event Type: patch, Path: /. Timestamp: 1752726060.5584648
2025-07-16 21:21:00,558 - DEBUG - app.firebase_stream - Prepared batch update for 3 symbols from root path for queue. Preview: {'GBPAUD': {'b': '2.0653000000', 'o': '2.0651400000'}, 'USDNOK': {'b': '10.2784700000', 'o': '10.2756300000'}, 'AUDJPY': {'b': '96.3370000000', 'o': '96.3290000000'}}
2025-07-16 21:21:00,558 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPAUD': {'b': '2.0653000000', 'o': '2.0651400000'}, 'USDNOK': {'b': '10.2784700000', 'o': '10.2756300000'}, 'AUDJPY': {'b': '96.3370000000', 'o': '96.3290000000'}, '_timestamp': 1752726060.5586374}...
2025-07-16 21:21:00,558 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:01,377 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:01,379 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:02,394 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:02,396 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:03,171 - DEBUG - app.firebase_stream - Firebase listener triggered (29). Event Type: patch, Path: /. Timestamp: 1752726063.171308
2025-07-16 21:21:03,171 - DEBUG - app.firebase_stream - Prepared batch update for 2 symbols from root path for queue. Preview: {'USDSGD': {'b': '1.2857500000', 'o': '1.2857000000'}, 'NOKSEK': {'b': '0.9484900000', 'o': '0.9478800000'}}
2025-07-16 21:21:03,171 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'USDSGD': {'b': '1.2857500000', 'o': '1.2857000000'}, 'NOKSEK': {'b': '0.9484900000', 'o': '0.9478800000'}, '_timestamp': 1752726063.1714778}...
2025-07-16 21:21:03,171 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:03,398 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:03,400 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:04,406 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:04,410 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:05,411 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:05,413 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:05,876 - DEBUG - app.firebase_stream - Firebase listener triggered (30). Event Type: patch, Path: /. Timestamp: 1752726065.8760984
2025-07-16 21:21:05,876 - DEBUG - app.firebase_stream - Prepared batch update for 2 symbols from root path for queue. Preview: {'EURUSD': {'b': '1.1617600000', 'o': '1.1616700000'}, 'EURJPY': {'b': '172.6330000000', 'o': '172.6320000000'}}
2025-07-16 21:21:05,876 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'EURUSD': {'b': '1.1617600000', 'o': '1.1616700000'}, 'EURJPY': {'b': '172.6330000000', 'o': '172.6320000000'}, '_timestamp': 1752726065.8767154}...
2025-07-16 21:21:05,877 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:06,418 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:06,422 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:07,435 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:07,437 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:08,450 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:08,451 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:08,494 - DEBUG - app.firebase_stream - Firebase listener triggered (31). Event Type: patch, Path: /. Timestamp: 1752726068.494117
2025-07-16 21:21:08,494 - DEBUG - app.firebase_stream - Prepared batch update for 1 symbols from root path for queue. Preview: {'AUDJPY': {'b': '96.3370000000', 'o': '96.3280000000'}}
2025-07-16 21:21:08,494 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'AUDJPY': {'b': '96.3370000000', 'o': '96.3280000000'}, '_timestamp': 1752726068.4942758}...
2025-07-16 21:21:08,494 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:09,458 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:09,460 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:10,462 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:10,465 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:11,472 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:11,473 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:11,505 - DEBUG - app.firebase_stream - Firebase listener triggered (32). Event Type: patch, Path: /. Timestamp: 1752726071.505638
2025-07-16 21:21:11,505 - DEBUG - app.firebase_stream - Prepared batch update for 2 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9910000000', 'o': '87.9780000000'}, 'SGDJPY': {'b': '115.5920000000', 'o': '115.5730000000'}}
2025-07-16 21:21:11,505 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'NZDJPY': {'b': '87.9910000000', 'o': '87.9780000000'}, 'SGDJPY': {'b': '115.5920000000', 'o': '115.5730000000'}, '_timestamp': 1752726071.5058172}...
2025-07-16 21:21:11,506 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:12,490 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:12,492 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:13,497 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:13,503 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:13,851 - DEBUG - app.firebase_stream - Firebase listener triggered (33). Event Type: patch, Path: /. Timestamp: 1752726073.8519301
2025-07-16 21:21:13,852 - DEBUG - app.firebase_stream - Prepared batch update for 13 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.9970000000', 'o': '37.9900000000'}, 'USDJPY': {'b': '148.6000000000', 'o': '148.5930000000'}, 'USDCNH': {'b': '7.1821900000', 'o': '7.1821400000'}, 'CADCHF': {'b': '0.5853300000',
2025-07-16 21:21:13,852 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '37.9970000000', 'o': '37.9900000000'}, 'USDJPY': {'b': '148.6000000000', 'o': '148.5930000000'}, 'USDCNH': {'b': '7.1821900000', 'o': '7.1821400000'}, 'CADCHF': {'b': '0.5853300000',...
2025-07-16 21:21:13,852 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:14,522 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:14,525 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:15,537 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:15,539 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:16,323 - DEBUG - app.firebase_stream - Firebase listener triggered (34). Event Type: patch, Path: /. Timestamp: 1752726076.3237185
2025-07-16 21:21:16,323 - DEBUG - app.firebase_stream - Prepared batch update for 11 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9860000000', 'o': '87.9760000000'}, 'GBPAUD': {'b': '2.0652800000', 'o': '2.0651400000'}, 'AUDJPY': {'b': '96.3370000000', 'o': '96.3300000000'}, 'JP225': {'b': '39730.0000000000'
2025-07-16 21:21:16,324 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9860000000', 'o': '87.9760000000'}, 'GBPAUD': {'b': '2.0652800000', 'o': '2.0651400000'}, 'AUDJPY': {'b': '96.3370000000', 'o': '96.3300000000'}, 'JP225': {'b': '39730.0000000000'...
2025-07-16 21:21:16,324 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:16,546 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:16,548 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:17,549 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:17,550 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:18,559 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:18,562 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:18,677 - DEBUG - app.firebase_stream - Firebase listener triggered (35). Event Type: patch, Path: /. Timestamp: 1752726078.677814
2025-07-16 21:21:18,678 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9860000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0653000000', 'o': '2.0651400000'}, 'USDJPY': {'b': '148.5990000000', 'o': '148.5920000000'}, 'CADCHF': {'b': '0.5853400000',
2025-07-16 21:21:18,678 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9860000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0653000000', 'o': '2.0651400000'}, 'USDJPY': {'b': '148.5990000000', 'o': '148.5920000000'}, 'CADCHF': {'b': '0.5853400000',...
2025-07-16 21:21:18,678 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:19,576 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:19,577 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:20,593 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:20,595 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:21,032 - DEBUG - app.firebase_stream - Firebase listener triggered (36). Event Type: patch, Path: /. Timestamp: 1752726081.0322907
2025-07-16 21:21:21,032 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0508000000', 'o': '13.0446000000'}, 'GBPAUD': {'b': '2.0652800000', 'o': '2.0651400000'}, 'USDJPY': {'b': '148.5990000000', 'o': '148.5900000000'}, 'CADCHF': {'b': '0.5853200000',
2025-07-16 21:21:21,032 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0508000000', 'o': '13.0446000000'}, 'GBPAUD': {'b': '2.0652800000', 'o': '2.0651400000'}, 'USDJPY': {'b': '148.5990000000', 'o': '148.5900000000'}, 'CADCHF': {'b': '0.5853200000',...
2025-07-16 21:21:21,032 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:21,598 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:21,602 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:22,614 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:22,616 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:23,388 - DEBUG - app.firebase_stream - Firebase listener triggered (37). Event Type: patch, Path: /. Timestamp: 1752726083.388049
2025-07-16 21:21:23,388 - DEBUG - app.firebase_stream - Prepared batch update for 11 symbols from root path for queue. Preview: {'GBPAUD': {'b': '2.0653100000', 'o': '2.0651200000'}, 'USDJPY': {'b': '148.6000000000', 'o': '148.5930000000'}, 'CADCHF': {'b': '0.5853300000', 'o': '0.5853300000'}, 'AUDJPY': {'b': '96.3390000000', 
2025-07-16 21:21:23,389 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPAUD': {'b': '2.0653100000', 'o': '2.0651200000'}, 'USDJPY': {'b': '148.6000000000', 'o': '148.5930000000'}, 'CADCHF': {'b': '0.5853300000', 'o': '0.5853300000'}, 'AUDJPY': {'b': '96.3390000000', ...
2025-07-16 21:21:23,389 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:23,625 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:23,628 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:24,631 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:24,633 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:25,634 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:25,637 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:25,642 - DEBUG - app.firebase_stream - Firebase listener triggered (38). Event Type: patch, Path: /. Timestamp: 1752726085.6422222
2025-07-16 21:21:25,642 - DEBUG - app.firebase_stream - Prepared batch update for 14 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.9960000000', 'o': '37.9880000000'}, 'GBPAUD': {'b': '2.0652900000', 'o': '2.0651200000'}, 'USDCNH': {'b': '7.1821300000', 'o': '7.1821100000'}, 'CADJPY': {'b': '108.3270000000', '
2025-07-16 21:21:25,642 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'XAGUSD': {'b': '37.9960000000', 'o': '37.9880000000'}, 'GBPAUD': {'b': '2.0652900000', 'o': '2.0651200000'}, 'USDCNH': {'b': '7.1821300000', 'o': '7.1821100000'}, 'CADJPY': {'b': '108.3270000000', '...
2025-07-16 21:21:25,643 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:26,650 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:26,653 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:27,665 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:27,666 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:27,916 - DEBUG - app.firebase_stream - Firebase listener triggered (39). Event Type: patch, Path: /. Timestamp: 1752726087.9160342
2025-07-16 21:21:27,916 - DEBUG - app.firebase_stream - Prepared batch update for 14 symbols from root path for queue. Preview: {'GBPAUD': {'b': '2.0653100000', 'o': '2.0651400000'}, 'AUDJPY': {'b': '96.3390000000', 'o': '96.3300000000'}, 'EURSEK': {'b': '11.3237700000', 'o': '11.3186800000'}, 'EURPLN': {'b': '4.2551900000', '
2025-07-16 21:21:27,916 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPAUD': {'b': '2.0653100000', 'o': '2.0651400000'}, 'AUDJPY': {'b': '96.3390000000', 'o': '96.3300000000'}, 'EURSEK': {'b': '11.3237700000', 'o': '11.3186800000'}, 'EURPLN': {'b': '4.2551900000', '...
2025-07-16 21:21:27,917 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:28,680 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:28,684 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:29,700 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:29,703 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:30,258 - DEBUG - app.firebase_stream - Firebase listener triggered (40). Event Type: patch, Path: /. Timestamp: 1752726090.2579606
2025-07-16 21:21:30,258 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0508000000', 'o': '13.0454000000'}, 'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '87.9910000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0652900000',
2025-07-16 21:21:30,258 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0508000000', 'o': '13.0454000000'}, 'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '87.9910000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0652900000',...
2025-07-16 21:21:30,258 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:30,720 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:30,724 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:31,738 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:31,743 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:32,618 - DEBUG - app.firebase_stream - Firebase listener triggered (41). Event Type: patch, Path: /. Timestamp: 1752726092.6180415
2025-07-16 21:21:32,618 - DEBUG - app.firebase_stream - Prepared batch update for 37 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0501000000', 'o': '13.0447000000'}, 'XAGUSD': {'b': '37.9980000000', 'o': '37.9910000000'}, 'NZDJPY': {'b': '87.9920000000', 'o': '87.9810000000'}, 'GBPAUD': {'b': '2.0652800000',
2025-07-16 21:21:32,618 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0501000000', 'o': '13.0447000000'}, 'XAGUSD': {'b': '37.9980000000', 'o': '37.9910000000'}, 'NZDJPY': {'b': '87.9920000000', 'o': '87.9810000000'}, 'GBPAUD': {'b': '2.0652800000',...
2025-07-16 21:21:32,618 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:32,760 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:32,765 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:33,778 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:33,780 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:34,785 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:34,788 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:34,865 - DEBUG - app.firebase_stream - Firebase listener triggered (42). Event Type: patch, Path: /. Timestamp: 1752726094.8653555
2025-07-16 21:21:34,865 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9880000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0650900000'}, 'USDJPY': {'b': '148.5990000000', 'o': '148.5920000000'}, 'USDCNH': {'b': '7.1820800000',
2025-07-16 21:21:34,865 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9880000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0650900000'}, 'USDJPY': {'b': '148.5990000000', 'o': '148.5920000000'}, 'USDCNH': {'b': '7.1820800000',...
2025-07-16 21:21:34,866 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:35,797 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:35,801 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:36,811 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:36,815 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:37,218 - DEBUG - app.firebase_stream - Firebase listener triggered (43). Event Type: patch, Path: /. Timestamp: 1752726097.2181125
2025-07-16 21:21:37,218 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0502000000', 'o': '13.0448000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0650800000'}, 'BTCUSD': {'b': '118214.3000000000', 'o': '118214.2000000000'}, 'USDJPY': {'b': '148.5930
2025-07-16 21:21:37,218 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0502000000', 'o': '13.0448000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0650800000'}, 'BTCUSD': {'b': '118214.3000000000', 'o': '118214.2000000000'}, 'USDJPY': {'b': '148.5930...
2025-07-16 21:21:37,218 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:37,821 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:37,825 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:38,841 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:38,845 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:39,478 - DEBUG - app.firebase_stream - Firebase listener triggered (44). Event Type: patch, Path: /. Timestamp: 1752726099.4781244
2025-07-16 21:21:39,478 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9910000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0651000000'}, 'BTCUSD': {'b': '118201.3000000000', 'o': '118201.2000000000'}, 'USDJPY': {'b': '148.6000
2025-07-16 21:21:39,478 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9910000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0651000000'}, 'BTCUSD': {'b': '118201.3000000000', 'o': '118201.2000000000'}, 'USDJPY': {'b': '148.6000...
2025-07-16 21:21:39,478 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:39,855 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:39,858 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:40,865 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:40,867 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:41,825 - DEBUG - app.firebase_stream - Firebase listener triggered (45). Event Type: patch, Path: /. Timestamp: 1752726101.825519
2025-07-16 21:21:41,825 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0505000000', 'o': '13.0443000000'}, 'BTCUSD': {'b': '118218.3000000000', 'o': '118218.2000000000'}, 'USDJPY': {'b': '148.5980000000', 'o': '148.5900000000'}, 'USDCNH': {'b': '7.18
2025-07-16 21:21:41,825 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0505000000', 'o': '13.0443000000'}, 'BTCUSD': {'b': '118218.3000000000', 'o': '118218.2000000000'}, 'USDJPY': {'b': '148.5980000000', 'o': '148.5900000000'}, 'USDCNH': {'b': '7.18...
2025-07-16 21:21:41,826 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:41,878 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:41,881 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:42,885 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:42,891 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:43,897 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:43,900 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:44,081 - DEBUG - app.firebase_stream - Firebase listener triggered (46). Event Type: patch, Path: /. Timestamp: 1752726104.0816746
2025-07-16 21:21:44,081 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0502000000', 'o': '13.0440000000'}, 'GBPAUD': {'b': '2.0652900000', 'o': '2.0651400000'}, 'USDJPY': {'b': '148.5990000000', 'o': '148.5900000000'}, 'CADCHF': {'b': '0.5853300000',
2025-07-16 21:21:44,082 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0502000000', 'o': '13.0440000000'}, 'GBPAUD': {'b': '2.0652900000', 'o': '2.0651400000'}, 'USDJPY': {'b': '148.5990000000', 'o': '148.5900000000'}, 'CADCHF': {'b': '0.5853300000',...
2025-07-16 21:21:44,082 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:44,906 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:44,910 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:45,920 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:45,923 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:46,433 - DEBUG - app.firebase_stream - Firebase listener triggered (47). Event Type: patch, Path: /. Timestamp: 1752726106.4337842
2025-07-16 21:21:46,433 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0000000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0650900000'}, 'USDJPY': {'b': '148.5920000000',
2025-07-16 21:21:46,434 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0000000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0650900000'}, 'USDJPY': {'b': '148.5920000000',...
2025-07-16 21:21:46,434 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:46,928 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:46,932 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:47,943 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:47,947 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:48,690 - DEBUG - app.firebase_stream - Firebase listener triggered (48). Event Type: patch, Path: /. Timestamp: 1752726108.6901772
2025-07-16 21:21:48,690 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0444000000'}, 'GBPAUD': {'b': '2.0653100000', 'o': '2.0651400000'}, 'USDJPY': {'b': '148.5940000000', 'o': '148.5880000000'}, 'USDCNH': {'b': '7.1821300000',
2025-07-16 21:21:48,690 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0444000000'}, 'GBPAUD': {'b': '2.0653100000', 'o': '2.0651400000'}, 'USDJPY': {'b': '148.5940000000', 'o': '148.5880000000'}, 'USDCNH': {'b': '7.1821300000',...
2025-07-16 21:21:48,691 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:48,960 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:48,963 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:49,967 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:49,970 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:50,977 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:50,981 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:51,045 - DEBUG - app.firebase_stream - Firebase listener triggered (49). Event Type: patch, Path: /. Timestamp: 1752726111.045333
2025-07-16 21:21:51,045 - DEBUG - app.firebase_stream - Prepared batch update for 21 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9890000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0653300000', 'o': '2.0651800000'}, 'BTCUSD': {'b': '118201.3000000000', 'o': '118201.2000000000'}, 'USDJPY': {'b': '148.5990
2025-07-16 21:21:51,045 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9890000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0653300000', 'o': '2.0651800000'}, 'BTCUSD': {'b': '118201.3000000000', 'o': '118201.2000000000'}, 'USDJPY': {'b': '148.5990...
2025-07-16 21:21:51,046 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:51,995 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:51,999 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:52,891 - INFO - app - [AUTO-CUTOFF] Starting update_all_users_dynamic_portfolio job...
2025-07-16 21:21:52,892 - INFO - app - [AUTO-CUTOFF] update_all_users_dynamic_portfolio heartbeat: task is alive and running.
2025-07-16 21:21:52,892 - INFO - app - [AUTO-CUTOFF] Fetching all active users (live and demo)...
2025-07-16 21:21:52,905 - INFO - app - [AUTO-CUTOFF] Found 19 live users and 11 demo users.
2025-07-16 21:21:52,905 - INFO - app - [AUTO-CUTOFF] Processing 30 users for dynamic portfolio update...
2025-07-16 21:21:52,905 - INFO - app - [AUTO-CUTOFF] Processing user 4 (live), group: Group B
2025-07-16 21:21:52,905 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 4 (live) from cache/DB...
2025-07-16 21:21:52,906 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:21:52,907 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:21:52,907 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:21:52,913 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F763097BD0>, <app.database.models.Group object at 0x000001F7630958C0>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F763096360>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763097F00>, <app.database.models.Group object at 0x000001F763096250>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763095BF0>, <app.database.models.Group object at 0x000001F7630978A0>, <app.database.models.Group object at 0x000001F763096690>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F763095AE0>, <app.database.models.Group object at 0x000001F763094E20>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F763095E10>, <app.database.models.Group object at 0x000001F763097790>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F76347DBF0>, <app.database.models.Group object at 0x000001F76347E250>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F76347D9D0>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347CD10>, <app.database.models.Group object at 0x000001F76347D260>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347C490>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347E030>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C7C0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F76347C6B0>, <app.database.models.Group object at 0x000001F76347C160>, <app.database.models.Group object at 0x000001F76347D150>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F7634919D0>]
2025-07-16 21:21:52,914 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:21:52,914 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 4...
2025-07-16 21:21:52,916 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 open orders.
2025-07-16 21:21:52,916 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 4...
2025-07-16 21:21:52,918 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 pending orders.
2025-07-16 21:21:52,918 - WARNING - app - [AUTO-CUTOFF] User 4 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:21:52,918 - INFO - app - [AUTO-CUTOFF] Processing user 5 (live), group: Admin
2025-07-16 21:21:52,918 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 5 (live) from cache/DB...
2025-07-16 21:21:52,921 - WARNING - app - [AUTO-CUTOFF] No user data found for user 5 (live). Skipping portfolio update.
2025-07-16 21:21:52,921 - INFO - app - [AUTO-CUTOFF] Processing user 8 (live), group: string
2025-07-16 21:21:52,921 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 8 (live) from cache/DB...
2025-07-16 21:21:52,922 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group string...
2025-07-16 21:21:52,922 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'string' from cache: None
2025-07-16 21:21:52,922 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'string', fetching from DB.
2025-07-16 21:21:52,924 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'string': []
2025-07-16 21:21:52,924 - ERROR - app - [AUTO-CUTOFF] Group symbol settings not found in DB for group 'string'. Skipping portfolio update for user 8.
2025-07-16 21:21:52,924 - INFO - app - [AUTO-CUTOFF] Processing user 9 (live), group: Standard
2025-07-16 21:21:52,924 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 9 (live) from cache/DB...
2025-07-16 21:21:52,924 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:21:52,925 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:21:52,925 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:21:52,929 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x000001F76347D9D0>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347CD10>, <app.database.models.Group object at 0x000001F76347D260>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347C490>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347E030>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C7C0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F76347C6B0>, <app.database.models.Group object at 0x000001F76347C160>, <app.database.models.Group object at 0x000001F76347D150>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F763097BD0>, <app.database.models.Group object at 0x000001F7630958C0>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F763096360>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763097F00>, <app.database.models.Group object at 0x000001F763096250>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763095BF0>, <app.database.models.Group object at 0x000001F7630978A0>, <app.database.models.Group object at 0x000001F763096690>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F763095AE0>, <app.database.models.Group object at 0x000001F763094E20>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F763095E10>, <app.database.models.Group object at 0x000001F763097790>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F763096030>, <app.database.models.Group object at 0x000001F763096580>, <app.database.models.Group object at 0x000001F7630967A0>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>]
2025-07-16 21:21:52,929 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:21:52,929 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 9...
2025-07-16 21:21:52,931 - DEBUG - app - [AUTO-CUTOFF] User 9 has 1 open orders.
2025-07-16 21:21:52,931 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 9...
2025-07-16 21:21:52,932 - DEBUG - app - [AUTO-CUTOFF] User 9 has 0 pending orders.
2025-07-16 21:21:52,932 - DEBUG - app - [AUTO-CUTOFF] User 9 total positions for portfolio calculation: 1
2025-07-16 21:21:52,933 - DEBUG - app - [AUTO-CUTOFF] User 9 adjusted market prices: {}
2025-07-16 21:21:52,933 - DEBUG - app - [AUTO-CUTOFF] User 9 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:21:52,933 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 9...
2025-07-16 21:21:53,286 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol BTCUSD
2025-07-16 21:21:53,287 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 99.90738313495848051220798402% which is below threshold 100.0%
2025-07-16 21:21:53,299 - DEBUG - app.firebase_stream - Firebase listener triggered (50). Event Type: patch, Path: /. Timestamp: 1752726113.2994087
2025-07-16 21:21:53,299 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 9: {'balance': '9794.75000000', 'equity': '9794.75000000', 'margin': '9803.83000000', 'free_margin': '-9.08000000', 'profit_loss': '0.0', 'margin_level': '99.90738313495848051220798402', 'positions': [{'order_id': '1000341-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.41000000'), 'order_price': Decimal('141921.60000000'), 'margin': Decimal('9773.83000000'), 'contract_value': Decimal('0.41000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('244.35000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': True}
2025-07-16 21:21:53,299 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0020000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9900000000', 'o': '87.9820000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0651000000'}, 'USDJPY': {'b': '148.5950000000',
2025-07-16 21:21:53,299 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 9: {'balance': '9794.75000000', 'equity': '9794.75000000', 'margin': '9803.83000000', 'free_margin': '-9.08000000', 'profit_loss': '0.0', 'margin_level': '99.90738313495848051220798402', 'positions_with_pnl': [{'order_id': '1000341-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.41000000'), 'order_price': Decimal('141921.60000000'), 'margin': Decimal('9773.83000000'), 'contract_value': Decimal('0.41000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('244.35000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': True}
2025-07-16 21:21:53,300 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0020000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9900000000', 'o': '87.9820000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0651000000'}, 'USDJPY': {'b': '148.5950000000',...
2025-07-16 21:21:53,300 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:53,300 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:53,301 - INFO - app - [AUTO-CUTOFF] User 9 margin_level: 99.90738313495848051220798402
2025-07-16 21:21:53,304 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:55,590 - DEBUG - app.firebase_stream - Firebase listener triggered (51). Event Type: patch, Path: /. Timestamp: 1752726115.5906696
2025-07-16 21:21:55,590 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0504000000', 'o': '13.0443000000'}, 'XAGUSD': {'b': '38.0000000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9870000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0652500000',
2025-07-16 21:21:55,591 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0504000000', 'o': '13.0443000000'}, 'XAGUSD': {'b': '38.0000000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9870000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0652500000',...
2025-07-16 21:21:55,591 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:57,486 - INFO - app - [AUTO-CUTOFF] Sent margin call warning email (HTML) to user 9 at kodideladinesh123@gmail.com
2025-07-16 21:21:57,492 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 9
2025-07-16 21:21:57,492 - INFO - app - [AUTO-CUTOFF] Processing user 10 (live), group: Group B
2025-07-16 21:21:57,492 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 10 (live) from cache/DB...
2025-07-16 21:21:57,493 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:21:57,495 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:21:57,495 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:21:57,499 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F763492AD0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F7634919D0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763493020>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F7634917B0>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F7634938A0>, <app.database.models.Group object at 0x000001F763492360>, <app.database.models.Group object at 0x000001F763493AC0>, <app.database.models.Group object at 0x000001F7634939B0>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F7634928B0>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F762EB18C0>, <app.database.models.Group object at 0x000001F762EB3790>, <app.database.models.Group object at 0x000001F7630C0050>, <app.database.models.Group object at 0x000001F7630C0160>, <app.database.models.Group object at 0x000001F7630C0270>, <app.database.models.Group object at 0x000001F7630C0380>, <app.database.models.Group object at 0x000001F7630C0490>, <app.database.models.Group object at 0x000001F7630C05A0>, <app.database.models.Group object at 0x000001F7630C06B0>, <app.database.models.Group object at 0x000001F7630C07C0>, <app.database.models.Group object at 0x000001F7630C08D0>, <app.database.models.Group object at 0x000001F7630C09E0>, <app.database.models.Group object at 0x000001F7630C0AF0>, <app.database.models.Group object at 0x000001F7630C0C00>, <app.database.models.Group object at 0x000001F7630C0D10>, <app.database.models.Group object at 0x000001F7630C0E20>, <app.database.models.Group object at 0x000001F7630C0F30>, <app.database.models.Group object at 0x000001F7630C1040>, <app.database.models.Group object at 0x000001F7630C1150>, <app.database.models.Group object at 0x000001F7630C1260>, <app.database.models.Group object at 0x000001F7630C1370>, <app.database.models.Group object at 0x000001F7630C1480>, <app.database.models.Group object at 0x000001F7630C1590>, <app.database.models.Group object at 0x000001F7630C16A0>, <app.database.models.Group object at 0x000001F7630C17B0>, <app.database.models.Group object at 0x000001F7630C18C0>, <app.database.models.Group object at 0x000001F7630C19D0>, <app.database.models.Group object at 0x000001F7630C1AE0>, <app.database.models.Group object at 0x000001F7630C1BF0>, <app.database.models.Group object at 0x000001F7630C1D00>, <app.database.models.Group object at 0x000001F7630C1E10>, <app.database.models.Group object at 0x000001F7630C1F20>, <app.database.models.Group object at 0x000001F7630C2030>, <app.database.models.Group object at 0x000001F7630C2140>, <app.database.models.Group object at 0x000001F7630C2250>, <app.database.models.Group object at 0x000001F7630C2360>, <app.database.models.Group object at 0x000001F7630C2470>, <app.database.models.Group object at 0x000001F7630C2580>, <app.database.models.Group object at 0x000001F7630C2690>, <app.database.models.Group object at 0x000001F7630C27A0>, <app.database.models.Group object at 0x000001F7630C28B0>, <app.database.models.Group object at 0x000001F7630C29C0>, <app.database.models.Group object at 0x000001F7630C2AD0>, <app.database.models.Group object at 0x000001F7630C2BE0>, <app.database.models.Group object at 0x000001F7630C2CF0>, <app.database.models.Group object at 0x000001F7630C2E00>, <app.database.models.Group object at 0x000001F7630C2F10>, <app.database.models.Group object at 0x000001F7630C3020>, <app.database.models.Group object at 0x000001F7630C3130>, <app.database.models.Group object at 0x000001F7630C3240>, <app.database.models.Group object at 0x000001F7630C3350>, <app.database.models.Group object at 0x000001F7630C3460>]
2025-07-16 21:21:57,501 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:21:57,501 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 10...
2025-07-16 21:21:57,505 - DEBUG - app - [AUTO-CUTOFF] User 10 has 0 open orders.
2025-07-16 21:21:57,506 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 10...
2025-07-16 21:21:57,508 - DEBUG - app - [AUTO-CUTOFF] User 10 has 0 pending orders.
2025-07-16 21:21:57,508 - WARNING - app - [AUTO-CUTOFF] User 10 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:21:57,508 - INFO - app - [AUTO-CUTOFF] Processing user 11 (live), group: Group B
2025-07-16 21:21:57,508 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 11 (live) from cache/DB...
2025-07-16 21:21:57,510 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:21:57,512 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:21:57,512 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:21:57,516 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F763492AD0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F7634919D0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763493020>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F7634917B0>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F7634938A0>, <app.database.models.Group object at 0x000001F763492360>, <app.database.models.Group object at 0x000001F763493AC0>, <app.database.models.Group object at 0x000001F7634939B0>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F7634928B0>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F762EB18C0>, <app.database.models.Group object at 0x000001F762EB3790>, <app.database.models.Group object at 0x000001F7630C0050>, <app.database.models.Group object at 0x000001F7630C0160>, <app.database.models.Group object at 0x000001F7630C0270>, <app.database.models.Group object at 0x000001F7630C0380>, <app.database.models.Group object at 0x000001F7630C0490>, <app.database.models.Group object at 0x000001F7630C05A0>, <app.database.models.Group object at 0x000001F7630C06B0>, <app.database.models.Group object at 0x000001F7630C07C0>, <app.database.models.Group object at 0x000001F7630C08D0>, <app.database.models.Group object at 0x000001F7630C09E0>, <app.database.models.Group object at 0x000001F7630C0AF0>, <app.database.models.Group object at 0x000001F7630C0C00>, <app.database.models.Group object at 0x000001F7630C0D10>, <app.database.models.Group object at 0x000001F7630C0E20>, <app.database.models.Group object at 0x000001F7630C0F30>, <app.database.models.Group object at 0x000001F7630C1040>, <app.database.models.Group object at 0x000001F7630C1150>, <app.database.models.Group object at 0x000001F7630C1260>, <app.database.models.Group object at 0x000001F7630C1370>, <app.database.models.Group object at 0x000001F7630C1480>, <app.database.models.Group object at 0x000001F7630C1590>, <app.database.models.Group object at 0x000001F7630C16A0>, <app.database.models.Group object at 0x000001F7630C17B0>, <app.database.models.Group object at 0x000001F7630C18C0>, <app.database.models.Group object at 0x000001F7630C19D0>, <app.database.models.Group object at 0x000001F7630C1AE0>, <app.database.models.Group object at 0x000001F7630C1BF0>, <app.database.models.Group object at 0x000001F7630C1D00>, <app.database.models.Group object at 0x000001F7630C1E10>, <app.database.models.Group object at 0x000001F7630C1F20>, <app.database.models.Group object at 0x000001F7630C2030>, <app.database.models.Group object at 0x000001F7630C2140>, <app.database.models.Group object at 0x000001F7630C2250>, <app.database.models.Group object at 0x000001F7630C2360>, <app.database.models.Group object at 0x000001F7630C2470>, <app.database.models.Group object at 0x000001F7630C2580>, <app.database.models.Group object at 0x000001F7630C2690>, <app.database.models.Group object at 0x000001F7630C27A0>, <app.database.models.Group object at 0x000001F7630C28B0>, <app.database.models.Group object at 0x000001F7630C29C0>, <app.database.models.Group object at 0x000001F7630C2AD0>, <app.database.models.Group object at 0x000001F7630C2BE0>, <app.database.models.Group object at 0x000001F7630C2CF0>, <app.database.models.Group object at 0x000001F7630C2E00>, <app.database.models.Group object at 0x000001F7630C2F10>, <app.database.models.Group object at 0x000001F7630C3020>, <app.database.models.Group object at 0x000001F7630C3130>, <app.database.models.Group object at 0x000001F7630C3240>, <app.database.models.Group object at 0x000001F7630C3350>, <app.database.models.Group object at 0x000001F7630C3460>]
2025-07-16 21:21:57,518 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:21:57,518 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 11...
2025-07-16 21:21:57,521 - DEBUG - app - [AUTO-CUTOFF] User 11 has 0 open orders.
2025-07-16 21:21:57,521 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 11...
2025-07-16 21:21:57,525 - DEBUG - app - [AUTO-CUTOFF] User 11 has 0 pending orders.
2025-07-16 21:21:57,525 - WARNING - app - [AUTO-CUTOFF] User 11 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:21:57,525 - INFO - app - [AUTO-CUTOFF] Processing user 12 (live), group: Standard
2025-07-16 21:21:57,525 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 12 (live) from cache/DB...
2025-07-16 21:21:57,527 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:21:57,527 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:21:57,528 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:21:57,534 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x000001F763097570>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F7630978A0>, <app.database.models.Group object at 0x000001F7630979B0>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F763097AC0>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763097790>, <app.database.models.Group object at 0x000001F763095370>, <app.database.models.Group object at 0x000001F763096580>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F763096470>, <app.database.models.Group object at 0x000001F7630967A0>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F76347D9D0>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347CD10>, <app.database.models.Group object at 0x000001F76347D260>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347C490>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347E030>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C7C0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F76347C6B0>, <app.database.models.Group object at 0x000001F76347C160>, <app.database.models.Group object at 0x000001F76347D150>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347DBF0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F7630C3570>, <app.database.models.Group object at 0x000001F7630C3680>, <app.database.models.Group object at 0x000001F7630C3790>]
2025-07-16 21:21:57,537 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:21:57,537 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 12...
2025-07-16 21:21:57,540 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 open orders.
2025-07-16 21:21:57,540 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 12...
2025-07-16 21:21:57,541 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 pending orders.
2025-07-16 21:21:57,541 - WARNING - app - [AUTO-CUTOFF] User 12 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:21:57,542 - INFO - app - [AUTO-CUTOFF] Processing user 13 (live), group: Group B
2025-07-16 21:21:57,542 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 13 (live) from cache/DB...
2025-07-16 21:21:57,543 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:21:57,547 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:21:57,547 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:21:57,552 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763492AD0>, <app.database.models.Group object at 0x000001F7634917B0>, <app.database.models.Group object at 0x000001F7634928B0>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F7634919D0>, <app.database.models.Group object at 0x000001F7634939B0>, <app.database.models.Group object at 0x000001F763493AC0>, <app.database.models.Group object at 0x000001F763492360>, <app.database.models.Group object at 0x000001F7634938A0>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F762EB18C0>, <app.database.models.Group object at 0x000001F762EB3790>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763096690>, <app.database.models.Group object at 0x000001F763095AE0>, <app.database.models.Group object at 0x000001F7630958C0>, <app.database.models.Group object at 0x000001F763097460>, <app.database.models.Group object at 0x000001F763095BF0>, <app.database.models.Group object at 0x000001F763095590>, <app.database.models.Group object at 0x000001F763096030>, <app.database.models.Group object at 0x000001F763097F00>, <app.database.models.Group object at 0x000001F763096360>, <app.database.models.Group object at 0x000001F763097BD0>, <app.database.models.Group object at 0x000001F763096250>, <app.database.models.Group object at 0x000001F763094E20>, <app.database.models.Group object at 0x000001F7630C0050>, <app.database.models.Group object at 0x000001F7630C0160>, <app.database.models.Group object at 0x000001F7630C0270>, <app.database.models.Group object at 0x000001F7630C0380>, <app.database.models.Group object at 0x000001F7630C0490>, <app.database.models.Group object at 0x000001F7630C05A0>, <app.database.models.Group object at 0x000001F7630C06B0>, <app.database.models.Group object at 0x000001F7630C07C0>, <app.database.models.Group object at 0x000001F7630C08D0>, <app.database.models.Group object at 0x000001F7630C09E0>, <app.database.models.Group object at 0x000001F7630C0AF0>, <app.database.models.Group object at 0x000001F7630C0C00>, <app.database.models.Group object at 0x000001F7630C0D10>, <app.database.models.Group object at 0x000001F7630C0E20>, <app.database.models.Group object at 0x000001F7630C0F30>, <app.database.models.Group object at 0x000001F7630C1040>, <app.database.models.Group object at 0x000001F7630C1150>, <app.database.models.Group object at 0x000001F7630C1260>, <app.database.models.Group object at 0x000001F7630C1370>, <app.database.models.Group object at 0x000001F7630C1480>, <app.database.models.Group object at 0x000001F7630C1590>, <app.database.models.Group object at 0x000001F7630C16A0>, <app.database.models.Group object at 0x000001F7630C17B0>, <app.database.models.Group object at 0x000001F7630C18C0>, <app.database.models.Group object at 0x000001F7630C19D0>, <app.database.models.Group object at 0x000001F7630C1AE0>, <app.database.models.Group object at 0x000001F7630C1BF0>, <app.database.models.Group object at 0x000001F7630C1D00>, <app.database.models.Group object at 0x000001F7630C1E10>, <app.database.models.Group object at 0x000001F7630C1F20>, <app.database.models.Group object at 0x000001F7630C2030>, <app.database.models.Group object at 0x000001F7630C2140>, <app.database.models.Group object at 0x000001F7630C2250>, <app.database.models.Group object at 0x000001F7630C2360>, <app.database.models.Group object at 0x000001F7630C2470>, <app.database.models.Group object at 0x000001F7630C2580>, <app.database.models.Group object at 0x000001F7630C2690>, <app.database.models.Group object at 0x000001F7630C27A0>, <app.database.models.Group object at 0x000001F7630C28B0>, <app.database.models.Group object at 0x000001F7630C29C0>, <app.database.models.Group object at 0x000001F7630C2AD0>, <app.database.models.Group object at 0x000001F7630C2BE0>, <app.database.models.Group object at 0x000001F7630C2CF0>, <app.database.models.Group object at 0x000001F7630C2E00>, <app.database.models.Group object at 0x000001F7630C2F10>, <app.database.models.Group object at 0x000001F7630C3020>, <app.database.models.Group object at 0x000001F7630C3130>, <app.database.models.Group object at 0x000001F7630C3240>, <app.database.models.Group object at 0x000001F7630C3350>, <app.database.models.Group object at 0x000001F7630C3460>, <app.database.models.Group object at 0x000001F7630C38A0>]
2025-07-16 21:21:57,554 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:21:57,555 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 13...
2025-07-16 21:21:57,559 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 open orders.
2025-07-16 21:21:57,559 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 13...
2025-07-16 21:21:57,562 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 pending orders.
2025-07-16 21:21:57,562 - WARNING - app - [AUTO-CUTOFF] User 13 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:21:57,562 - INFO - app - [AUTO-CUTOFF] Processing user 14 (live), group: Standard
2025-07-16 21:21:57,563 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 14 (live) from cache/DB...
2025-07-16 21:21:57,565 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:21:57,567 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:21:57,567 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:21:57,572 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x000001F763095370>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347C490>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347E030>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C7C0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F76347C6B0>, <app.database.models.Group object at 0x000001F76347C160>, <app.database.models.Group object at 0x000001F76347D150>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347DBF0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F763493020>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F7630C3570>, <app.database.models.Group object at 0x000001F7630C3680>, <app.database.models.Group object at 0x000001F7630C3790>, <app.database.models.Group object at 0x000001F7630C39B0>, <app.database.models.Group object at 0x000001F7630C3AC0>, <app.database.models.Group object at 0x000001F7630C3BD0>, <app.database.models.Group object at 0x000001F7630C3CE0>, <app.database.models.Group object at 0x000001F7630C3DF0>, <app.database.models.Group object at 0x000001F7630C3F00>]
2025-07-16 21:21:57,575 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:21:57,576 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 14...
2025-07-16 21:21:57,581 - DEBUG - app - [AUTO-CUTOFF] User 14 has 3 open orders.
2025-07-16 21:21:57,581 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 14...
2025-07-16 21:21:57,584 - DEBUG - app - [AUTO-CUTOFF] User 14 has 0 pending orders.
2025-07-16 21:21:57,584 - DEBUG - app - [AUTO-CUTOFF] User 14 total positions for portfolio calculation: 3
2025-07-16 21:21:57,588 - DEBUG - app - [AUTO-CUTOFF] User 14 adjusted market prices: {}
2025-07-16 21:21:57,589 - DEBUG - app - [AUTO-CUTOFF] User 14 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:21:57,589 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 14...
2025-07-16 21:21:57,998 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol BTCUSD
2025-07-16 21:21:57,999 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:21:57,999 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:21:57,999 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 14: {'balance': '9902.02000000', 'equity': '9902.02000000', 'margin': '9494.47000000', 'free_margin': '407.55000000', 'profit_loss': '0.0', 'margin_level': '104.2924986860772639231047125', 'positions': [{'order_id': '1000330-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.40000000'), 'order_price': Decimal('141908.50000000'), 'margin': Decimal('9422.73000000'), 'contract_value': Decimal('0.40000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('235.57000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000332-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('65.21517371'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000333-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('6.52134765'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:21:57,999 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 14: {'balance': '9902.02000000', 'equity': '9902.02000000', 'margin': '9494.47000000', 'free_margin': '407.55000000', 'profit_loss': '0.0', 'margin_level': '104.2924986860772639231047125', 'positions_with_pnl': [{'order_id': '1000330-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.40000000'), 'order_price': Decimal('141908.50000000'), 'margin': Decimal('9422.73000000'), 'contract_value': Decimal('0.40000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('235.57000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000332-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('65.21517371'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000333-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('6.52134765'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:21:58,013 - DEBUG - app.firebase_stream - Firebase listener triggered (52). Event Type: patch, Path: /. Timestamp: 1752726118.0131302
2025-07-16 21:21:58,013 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0438000000'}, 'XAGUSD': {'b': '38.0020000000', 'o': '37.9950000000'}, 'NZDJPY': {'b': '87.9870000000', 'o': '87.9820000000'}, 'GBPAUD': {'b': '2.0652000000',
2025-07-16 21:21:58,014 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0438000000'}, 'XAGUSD': {'b': '38.0020000000', 'o': '37.9950000000'}, 'NZDJPY': {'b': '87.9870000000', 'o': '87.9820000000'}, 'GBPAUD': {'b': '2.0652000000',...
2025-07-16 21:21:58,014 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:21:58,015 - INFO - app - [AUTO-CUTOFF] User 14 margin_level: 104.2924986860772639231047125
2025-07-16 21:21:58,019 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 14
2025-07-16 21:21:58,019 - INFO - app - [AUTO-CUTOFF] Processing user 16 (live), group: Standard
2025-07-16 21:21:58,019 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 16 (live) from cache/DB...
2025-07-16 21:21:58,021 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:21:58,023 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:21:58,023 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:21:58,026 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x000001F763095370>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347C490>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347E030>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C7C0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F76347C6B0>, <app.database.models.Group object at 0x000001F76347C160>, <app.database.models.Group object at 0x000001F76347D150>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347DBF0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F763493020>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F7630C3570>, <app.database.models.Group object at 0x000001F7630C3680>, <app.database.models.Group object at 0x000001F7630C3790>, <app.database.models.Group object at 0x000001F7630C39B0>, <app.database.models.Group object at 0x000001F7630C3AC0>, <app.database.models.Group object at 0x000001F7630C3BD0>, <app.database.models.Group object at 0x000001F7630C3CE0>, <app.database.models.Group object at 0x000001F7630C3DF0>, <app.database.models.Group object at 0x000001F7630C3F00>]
2025-07-16 21:21:58,026 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:21:58,026 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 16...
2025-07-16 21:21:58,028 - DEBUG - app - [AUTO-CUTOFF] User 16 has 0 open orders.
2025-07-16 21:21:58,028 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 16...
2025-07-16 21:21:58,029 - DEBUG - app - [AUTO-CUTOFF] User 16 has 0 pending orders.
2025-07-16 21:21:58,029 - WARNING - app - [AUTO-CUTOFF] User 16 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:21:58,029 - INFO - app - [AUTO-CUTOFF] Processing user 17 (live), group: Group B
2025-07-16 21:21:58,029 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 17 (live) from cache/DB...
2025-07-16 21:21:58,030 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:21:58,031 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:21:58,031 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:21:58,034 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347CD10>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F7630C0160>, <app.database.models.Group object at 0x000001F7630C0380>, <app.database.models.Group object at 0x000001F7630C0270>, <app.database.models.Group object at 0x000001F7630C0050>, <app.database.models.Group object at 0x000001F7630C0490>, <app.database.models.Group object at 0x000001F7630C05A0>, <app.database.models.Group object at 0x000001F7630C06B0>, <app.database.models.Group object at 0x000001F7630C07C0>, <app.database.models.Group object at 0x000001F7630C08D0>, <app.database.models.Group object at 0x000001F7630C09E0>, <app.database.models.Group object at 0x000001F7630C0AF0>, <app.database.models.Group object at 0x000001F7630C0C00>, <app.database.models.Group object at 0x000001F7630C0D10>, <app.database.models.Group object at 0x000001F7630C0E20>, <app.database.models.Group object at 0x000001F7630C0F30>, <app.database.models.Group object at 0x000001F7630C1040>, <app.database.models.Group object at 0x000001F7630C1150>, <app.database.models.Group object at 0x000001F7630C1260>, <app.database.models.Group object at 0x000001F7630C1370>, <app.database.models.Group object at 0x000001F7630C1480>, <app.database.models.Group object at 0x000001F7630C1590>, <app.database.models.Group object at 0x000001F7630C16A0>, <app.database.models.Group object at 0x000001F7630C17B0>, <app.database.models.Group object at 0x000001F7630C18C0>, <app.database.models.Group object at 0x000001F7630C19D0>, <app.database.models.Group object at 0x000001F7630C1AE0>, <app.database.models.Group object at 0x000001F7630C1BF0>, <app.database.models.Group object at 0x000001F7630C1D00>, <app.database.models.Group object at 0x000001F7630C1E10>, <app.database.models.Group object at 0x000001F7630C1F20>, <app.database.models.Group object at 0x000001F7630C2030>, <app.database.models.Group object at 0x000001F7630C2140>, <app.database.models.Group object at 0x000001F7630C2250>, <app.database.models.Group object at 0x000001F7630C2360>, <app.database.models.Group object at 0x000001F7630C2470>, <app.database.models.Group object at 0x000001F7630C2580>, <app.database.models.Group object at 0x000001F7630C2690>, <app.database.models.Group object at 0x000001F7630C27A0>, <app.database.models.Group object at 0x000001F7630C28B0>, <app.database.models.Group object at 0x000001F7630C29C0>, <app.database.models.Group object at 0x000001F7630C2AD0>, <app.database.models.Group object at 0x000001F7630C2BE0>, <app.database.models.Group object at 0x000001F7630C2CF0>, <app.database.models.Group object at 0x000001F7630C2E00>, <app.database.models.Group object at 0x000001F7630C2F10>, <app.database.models.Group object at 0x000001F7630C3020>, <app.database.models.Group object at 0x000001F7630C3130>, <app.database.models.Group object at 0x000001F7630C3240>, <app.database.models.Group object at 0x000001F7630C3350>, <app.database.models.Group object at 0x000001F7630C3460>, <app.database.models.Group object at 0x000001F7630C38A0>, <app.database.models.Group object at 0x000001F763095E10>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F7630967A0>, <app.database.models.Group object at 0x000001F763096470>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F763097AC0>, <app.database.models.Group object at 0x000001F763096580>, <app.database.models.Group object at 0x000001F7630979B0>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763096690>, <app.database.models.Group object at 0x000001F763095AE0>, <app.database.models.Group object at 0x000001F7630958C0>, <app.database.models.Group object at 0x000001F763097460>, <app.database.models.Group object at 0x000001F763095BF0>, <app.database.models.Group object at 0x000001F763095590>, <app.database.models.Group object at 0x000001F763096030>, <app.database.models.Group object at 0x000001F763097F00>, <app.database.models.Group object at 0x000001F763096360>]
2025-07-16 21:21:58,036 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:21:58,036 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 17...
2025-07-16 21:21:58,038 - DEBUG - app - [AUTO-CUTOFF] User 17 has 0 open orders.
2025-07-16 21:21:58,038 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 17...
2025-07-16 21:21:58,039 - DEBUG - app - [AUTO-CUTOFF] User 17 has 0 pending orders.
2025-07-16 21:21:58,039 - WARNING - app - [AUTO-CUTOFF] User 17 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:21:58,039 - INFO - app - [AUTO-CUTOFF] Processing user 18 (live), group: Group B
2025-07-16 21:21:58,039 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 18 (live) from cache/DB...
2025-07-16 21:21:58,040 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:21:58,041 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:21:58,041 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:21:58,044 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347CD10>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F7630C0160>, <app.database.models.Group object at 0x000001F7630C0380>, <app.database.models.Group object at 0x000001F7630C0270>, <app.database.models.Group object at 0x000001F7630C0050>, <app.database.models.Group object at 0x000001F7630C0490>, <app.database.models.Group object at 0x000001F7630C05A0>, <app.database.models.Group object at 0x000001F7630C06B0>, <app.database.models.Group object at 0x000001F7630C07C0>, <app.database.models.Group object at 0x000001F7630C08D0>, <app.database.models.Group object at 0x000001F7630C09E0>, <app.database.models.Group object at 0x000001F7630C0AF0>, <app.database.models.Group object at 0x000001F7630C0C00>, <app.database.models.Group object at 0x000001F7630C0D10>, <app.database.models.Group object at 0x000001F7630C0E20>, <app.database.models.Group object at 0x000001F7630C0F30>, <app.database.models.Group object at 0x000001F7630C1040>, <app.database.models.Group object at 0x000001F7630C1150>, <app.database.models.Group object at 0x000001F7630C1260>, <app.database.models.Group object at 0x000001F7630C1370>, <app.database.models.Group object at 0x000001F7630C1480>, <app.database.models.Group object at 0x000001F7630C1590>, <app.database.models.Group object at 0x000001F7630C16A0>, <app.database.models.Group object at 0x000001F7630C17B0>, <app.database.models.Group object at 0x000001F7630C18C0>, <app.database.models.Group object at 0x000001F7630C19D0>, <app.database.models.Group object at 0x000001F7630C1AE0>, <app.database.models.Group object at 0x000001F7630C1BF0>, <app.database.models.Group object at 0x000001F7630C1D00>, <app.database.models.Group object at 0x000001F7630C1E10>, <app.database.models.Group object at 0x000001F7630C1F20>, <app.database.models.Group object at 0x000001F7630C2030>, <app.database.models.Group object at 0x000001F7630C2140>, <app.database.models.Group object at 0x000001F7630C2250>, <app.database.models.Group object at 0x000001F7630C2360>, <app.database.models.Group object at 0x000001F7630C2470>, <app.database.models.Group object at 0x000001F7630C2580>, <app.database.models.Group object at 0x000001F7630C2690>, <app.database.models.Group object at 0x000001F7630C27A0>, <app.database.models.Group object at 0x000001F7630C28B0>, <app.database.models.Group object at 0x000001F7630C29C0>, <app.database.models.Group object at 0x000001F7630C2AD0>, <app.database.models.Group object at 0x000001F7630C2BE0>, <app.database.models.Group object at 0x000001F7630C2CF0>, <app.database.models.Group object at 0x000001F7630C2E00>, <app.database.models.Group object at 0x000001F7630C2F10>, <app.database.models.Group object at 0x000001F7630C3020>, <app.database.models.Group object at 0x000001F7630C3130>, <app.database.models.Group object at 0x000001F7630C3240>, <app.database.models.Group object at 0x000001F7630C3350>, <app.database.models.Group object at 0x000001F7630C3460>, <app.database.models.Group object at 0x000001F7630C38A0>, <app.database.models.Group object at 0x000001F763095E10>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F7630967A0>, <app.database.models.Group object at 0x000001F763096470>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F763097AC0>, <app.database.models.Group object at 0x000001F763096580>, <app.database.models.Group object at 0x000001F7630979B0>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763096690>, <app.database.models.Group object at 0x000001F763095AE0>, <app.database.models.Group object at 0x000001F7630958C0>, <app.database.models.Group object at 0x000001F763097460>, <app.database.models.Group object at 0x000001F763095BF0>, <app.database.models.Group object at 0x000001F763095590>, <app.database.models.Group object at 0x000001F763096030>, <app.database.models.Group object at 0x000001F763097F00>, <app.database.models.Group object at 0x000001F763096360>]
2025-07-16 21:21:58,045 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:21:58,045 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 18...
2025-07-16 21:21:58,047 - DEBUG - app - [AUTO-CUTOFF] User 18 has 0 open orders.
2025-07-16 21:21:58,047 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 18...
2025-07-16 21:21:58,048 - DEBUG - app - [AUTO-CUTOFF] User 18 has 0 pending orders.
2025-07-16 21:21:58,048 - WARNING - app - [AUTO-CUTOFF] User 18 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:21:58,048 - INFO - app - [AUTO-CUTOFF] Processing user 19 (live), group: Elite
2025-07-16 21:21:58,048 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 19 (live) from cache/DB...
2025-07-16 21:21:58,049 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Elite...
2025-07-16 21:21:58,051 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Elite' from cache: None
2025-07-16 21:21:58,051 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Elite', fetching from DB.
2025-07-16 21:21:58,054 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Elite': [<app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347C490>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347E030>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347E250>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C7C0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F76347C6B0>, <app.database.models.Group object at 0x000001F76347C160>, <app.database.models.Group object at 0x000001F76347D150>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347DBF0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F7630C3570>, <app.database.models.Group object at 0x000001F7630C3680>, <app.database.models.Group object at 0x000001F7630C3790>, <app.database.models.Group object at 0x000001F7630C39B0>, <app.database.models.Group object at 0x000001F7630C3AC0>, <app.database.models.Group object at 0x000001F7630C3BD0>, <app.database.models.Group object at 0x000001F7630C3CE0>, <app.database.models.Group object at 0x000001F7630C3DF0>, <app.database.models.Group object at 0x000001F7630C3F00>, <app.database.models.Group object at 0x000001F7634919D0>, <app.database.models.Group object at 0x000001F7634939B0>, <app.database.models.Group object at 0x000001F763492AD0>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F7634938A0>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F763493020>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F763095370>, <app.database.models.Group object at 0x000001F763097BD0>, <app.database.models.Group object at 0x000001F763096250>, <app.database.models.Group object at 0x000001F763094E20>, <app.database.models.Group object at 0x000001F763097570>]
2025-07-16 21:21:58,055 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Elite': {'sending_orders': 'barclays'}
2025-07-16 21:21:58,055 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 19...
2025-07-16 21:21:58,057 - DEBUG - app - [AUTO-CUTOFF] User 19 has 0 open orders.
2025-07-16 21:21:58,057 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 19...
2025-07-16 21:21:58,058 - DEBUG - app - [AUTO-CUTOFF] User 19 has 0 pending orders.
2025-07-16 21:21:58,058 - WARNING - app - [AUTO-CUTOFF] User 19 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:21:58,058 - INFO - app - [AUTO-CUTOFF] Processing user 20 (live), group: Standard
2025-07-16 21:21:58,058 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 20 (live) from cache/DB...
2025-07-16 21:21:58,059 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:21:58,059 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:21:58,059 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:21:58,063 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x000001F7630C0AF0>, <app.database.models.Group object at 0x000001F7630C16A0>, <app.database.models.Group object at 0x000001F7630C0050>, <app.database.models.Group object at 0x000001F7630C05A0>, <app.database.models.Group object at 0x000001F7630C1040>, <app.database.models.Group object at 0x000001F7630C1370>, <app.database.models.Group object at 0x000001F7630C1260>, <app.database.models.Group object at 0x000001F7630C1150>, <app.database.models.Group object at 0x000001F7630C1BF0>, <app.database.models.Group object at 0x000001F7630C1D00>, <app.database.models.Group object at 0x000001F7630C1E10>, <app.database.models.Group object at 0x000001F7630C1F20>, <app.database.models.Group object at 0x000001F7630C2030>, <app.database.models.Group object at 0x000001F7630C2140>, <app.database.models.Group object at 0x000001F7630C2250>, <app.database.models.Group object at 0x000001F7630C2360>, <app.database.models.Group object at 0x000001F7630C2470>, <app.database.models.Group object at 0x000001F7630C2580>, <app.database.models.Group object at 0x000001F7630C2690>, <app.database.models.Group object at 0x000001F7630C27A0>, <app.database.models.Group object at 0x000001F7630C28B0>, <app.database.models.Group object at 0x000001F7630C29C0>, <app.database.models.Group object at 0x000001F7630C2AD0>, <app.database.models.Group object at 0x000001F7630C2BE0>, <app.database.models.Group object at 0x000001F7630C2CF0>, <app.database.models.Group object at 0x000001F7630C2E00>, <app.database.models.Group object at 0x000001F7630C2F10>, <app.database.models.Group object at 0x000001F7630C3020>, <app.database.models.Group object at 0x000001F7630C3130>, <app.database.models.Group object at 0x000001F7630C3240>, <app.database.models.Group object at 0x000001F7630C3350>, <app.database.models.Group object at 0x000001F7630C3460>, <app.database.models.Group object at 0x000001F7630C38A0>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347D9D0>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347CD10>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F763095E10>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F7630967A0>, <app.database.models.Group object at 0x000001F763096470>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F763097AC0>, <app.database.models.Group object at 0x000001F763096580>, <app.database.models.Group object at 0x000001F7630979B0>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763096690>, <app.database.models.Group object at 0x000001F763095AE0>, <app.database.models.Group object at 0x000001F7630958C0>, <app.database.models.Group object at 0x000001F763097460>, <app.database.models.Group object at 0x000001F763095BF0>, <app.database.models.Group object at 0x000001F763095590>, <app.database.models.Group object at 0x000001F763096030>, <app.database.models.Group object at 0x000001F763097F00>, <app.database.models.Group object at 0x000001F763096360>, <app.database.models.Group object at 0x000001F763097790>]
2025-07-16 21:21:58,064 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:21:58,064 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 20...
2025-07-16 21:21:58,065 - DEBUG - app - [AUTO-CUTOFF] User 20 has 0 open orders.
2025-07-16 21:21:58,065 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 20...
2025-07-16 21:21:58,067 - DEBUG - app - [AUTO-CUTOFF] User 20 has 0 pending orders.
2025-07-16 21:21:58,067 - WARNING - app - [AUTO-CUTOFF] User 20 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:21:58,067 - INFO - app - [AUTO-CUTOFF] Processing user 21 (live), group: Group B
2025-07-16 21:21:58,067 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 21 (live) from cache/DB...
2025-07-16 21:21:58,067 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:21:58,068 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:21:58,068 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:21:58,070 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F762EB18C0>, <app.database.models.Group object at 0x000001F762EB3790>, <app.database.models.Group object at 0x000001F76347C7C0>, <app.database.models.Group object at 0x000001F76347C490>, <app.database.models.Group object at 0x000001F76347E250>, <app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F76347C6B0>, <app.database.models.Group object at 0x000001F76347C160>, <app.database.models.Group object at 0x000001F76347D150>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347DBF0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F7634919D0>, <app.database.models.Group object at 0x000001F7634939B0>, <app.database.models.Group object at 0x000001F763492AD0>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F7634938A0>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F763493020>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F7630C17B0>, <app.database.models.Group object at 0x000001F7630C0270>, <app.database.models.Group object at 0x000001F7630C19D0>, <app.database.models.Group object at 0x000001F7630C1480>, <app.database.models.Group object at 0x000001F7630C1AE0>, <app.database.models.Group object at 0x000001F7630C06B0>, <app.database.models.Group object at 0x000001F7630C1590>, <app.database.models.Group object at 0x000001F7630C0F30>, <app.database.models.Group object at 0x000001F7630C0E20>, <app.database.models.Group object at 0x000001F7630C0D10>, <app.database.models.Group object at 0x000001F7630C08D0>, <app.database.models.Group object at 0x000001F7630C09E0>, <app.database.models.Group object at 0x000001F7630C0380>, <app.database.models.Group object at 0x000001F7630C0C00>, <app.database.models.Group object at 0x000001F7630C0490>, <app.database.models.Group object at 0x000001F7630C3570>, <app.database.models.Group object at 0x000001F7630C3680>, <app.database.models.Group object at 0x000001F7630C3790>, <app.database.models.Group object at 0x000001F7630C39B0>]
2025-07-16 21:21:58,071 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:21:58,071 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 21...
2025-07-16 21:21:58,072 - DEBUG - app - [AUTO-CUTOFF] User 21 has 0 open orders.
2025-07-16 21:21:58,073 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 21...
2025-07-16 21:21:58,074 - DEBUG - app - [AUTO-CUTOFF] User 21 has 0 pending orders.
2025-07-16 21:21:58,074 - WARNING - app - [AUTO-CUTOFF] User 21 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:21:58,074 - INFO - app - [AUTO-CUTOFF] Processing user 22 (live), group: VIP
2025-07-16 21:21:58,074 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 22 (live) from cache/DB...
2025-07-16 21:21:58,074 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group VIP...
2025-07-16 21:21:58,075 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'VIP' from cache: None
2025-07-16 21:21:58,075 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'VIP', fetching from DB.
2025-07-16 21:21:58,077 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'VIP': [<app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347CD10>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F7630C0AF0>, <app.database.models.Group object at 0x000001F7630C16A0>, <app.database.models.Group object at 0x000001F7630C0050>, <app.database.models.Group object at 0x000001F7630C05A0>, <app.database.models.Group object at 0x000001F7630C1040>, <app.database.models.Group object at 0x000001F7630C1370>, <app.database.models.Group object at 0x000001F7630C1260>, <app.database.models.Group object at 0x000001F7630C1150>, <app.database.models.Group object at 0x000001F7630C1BF0>, <app.database.models.Group object at 0x000001F7630C1D00>, <app.database.models.Group object at 0x000001F7630C1E10>, <app.database.models.Group object at 0x000001F7630C1F20>, <app.database.models.Group object at 0x000001F7630C2030>, <app.database.models.Group object at 0x000001F7630C2140>, <app.database.models.Group object at 0x000001F7630C2250>, <app.database.models.Group object at 0x000001F7630C2360>, <app.database.models.Group object at 0x000001F7630C2470>, <app.database.models.Group object at 0x000001F7630C2580>, <app.database.models.Group object at 0x000001F7630C2690>, <app.database.models.Group object at 0x000001F7630C27A0>, <app.database.models.Group object at 0x000001F7630C28B0>, <app.database.models.Group object at 0x000001F7630C29C0>, <app.database.models.Group object at 0x000001F7630C2AD0>, <app.database.models.Group object at 0x000001F7630C2BE0>, <app.database.models.Group object at 0x000001F7630C2CF0>, <app.database.models.Group object at 0x000001F7630C2E00>, <app.database.models.Group object at 0x000001F7630C2F10>, <app.database.models.Group object at 0x000001F7630C3020>, <app.database.models.Group object at 0x000001F7630C3130>, <app.database.models.Group object at 0x000001F7630C3240>, <app.database.models.Group object at 0x000001F7630C3350>, <app.database.models.Group object at 0x000001F7630C3460>, <app.database.models.Group object at 0x000001F7630C38A0>, <app.database.models.Group object at 0x000001F7630C3AC0>, <app.database.models.Group object at 0x000001F7630C3BD0>, <app.database.models.Group object at 0x000001F7630C3CE0>, <app.database.models.Group object at 0x000001F7630C3DF0>, <app.database.models.Group object at 0x000001F7630C3F00>, <app.database.models.Group object at 0x000001F7630C0160>, <app.database.models.Group object at 0x000001F7630C18C0>, <app.database.models.Group object at 0x000001F7630C07C0>, <app.database.models.Group object at 0x000001F763095E10>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F7630967A0>, <app.database.models.Group object at 0x000001F763096470>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F763097AC0>, <app.database.models.Group object at 0x000001F763096580>, <app.database.models.Group object at 0x000001F7630979B0>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763096690>]
2025-07-16 21:21:58,078 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'VIP': {'sending_orders': 'barclays'}
2025-07-16 21:21:58,078 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 22...
2025-07-16 21:21:58,079 - DEBUG - app - [AUTO-CUTOFF] User 22 has 0 open orders.
2025-07-16 21:21:58,079 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 22...
2025-07-16 21:21:58,081 - DEBUG - app - [AUTO-CUTOFF] User 22 has 0 pending orders.
2025-07-16 21:21:58,081 - WARNING - app - [AUTO-CUTOFF] User 22 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:21:58,081 - INFO - app - [AUTO-CUTOFF] Processing user 23 (live), group: Group B
2025-07-16 21:21:58,081 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 23 (live) from cache/DB...
2025-07-16 21:21:58,081 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:21:58,082 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:21:58,082 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:21:58,085 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F763492AD0>, <app.database.models.Group object at 0x000001F7634919D0>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F7634938A0>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F763493020>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F7630C17B0>, <app.database.models.Group object at 0x000001F7630C0270>, <app.database.models.Group object at 0x000001F7630C19D0>, <app.database.models.Group object at 0x000001F7630C1480>, <app.database.models.Group object at 0x000001F7630C1AE0>, <app.database.models.Group object at 0x000001F7630C06B0>, <app.database.models.Group object at 0x000001F7630C1590>, <app.database.models.Group object at 0x000001F7630C0F30>, <app.database.models.Group object at 0x000001F7630C0E20>, <app.database.models.Group object at 0x000001F7630C0D10>, <app.database.models.Group object at 0x000001F7630C08D0>, <app.database.models.Group object at 0x000001F7630C09E0>, <app.database.models.Group object at 0x000001F7630C0380>, <app.database.models.Group object at 0x000001F7630C0C00>, <app.database.models.Group object at 0x000001F7630C0490>, <app.database.models.Group object at 0x000001F7630C3570>, <app.database.models.Group object at 0x000001F7630C3680>, <app.database.models.Group object at 0x000001F7630C3790>, <app.database.models.Group object at 0x000001F7630C39B0>, <app.database.models.Group object at 0x000001F76347C7C0>, <app.database.models.Group object at 0x000001F76347C490>, <app.database.models.Group object at 0x000001F76347E250>, <app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F76347C6B0>, <app.database.models.Group object at 0x000001F76347C160>, <app.database.models.Group object at 0x000001F76347D150>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347DBF0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347D9D0>, <app.database.models.Group object at 0x000001F76347D6A0>]
2025-07-16 21:21:58,085 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:21:58,085 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 23...
2025-07-16 21:21:58,086 - DEBUG - app - [AUTO-CUTOFF] User 23 has 0 open orders.
2025-07-16 21:21:58,086 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 23...
2025-07-16 21:21:58,088 - DEBUG - app - [AUTO-CUTOFF] User 23 has 0 pending orders.
2025-07-16 21:21:58,088 - WARNING - app - [AUTO-CUTOFF] User 23 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:21:58,088 - INFO - app - [AUTO-CUTOFF] Processing user 25 (live), group: Group B
2025-07-16 21:21:58,088 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 25 (live) from cache/DB...
2025-07-16 21:21:58,088 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:21:58,089 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:21:58,089 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:21:58,091 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F763492AD0>, <app.database.models.Group object at 0x000001F7634919D0>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F7634938A0>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F763493020>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F7630C17B0>, <app.database.models.Group object at 0x000001F7630C0270>, <app.database.models.Group object at 0x000001F7630C19D0>, <app.database.models.Group object at 0x000001F7630C1480>, <app.database.models.Group object at 0x000001F7630C1AE0>, <app.database.models.Group object at 0x000001F7630C06B0>, <app.database.models.Group object at 0x000001F7630C1590>, <app.database.models.Group object at 0x000001F7630C0F30>, <app.database.models.Group object at 0x000001F7630C0E20>, <app.database.models.Group object at 0x000001F7630C0D10>, <app.database.models.Group object at 0x000001F7630C08D0>, <app.database.models.Group object at 0x000001F7630C09E0>, <app.database.models.Group object at 0x000001F7630C0380>, <app.database.models.Group object at 0x000001F7630C0C00>, <app.database.models.Group object at 0x000001F7630C0490>, <app.database.models.Group object at 0x000001F7630C3570>, <app.database.models.Group object at 0x000001F7630C3680>, <app.database.models.Group object at 0x000001F7630C3790>, <app.database.models.Group object at 0x000001F7630C39B0>, <app.database.models.Group object at 0x000001F76347C7C0>, <app.database.models.Group object at 0x000001F76347C490>, <app.database.models.Group object at 0x000001F76347E250>, <app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F76347C6B0>, <app.database.models.Group object at 0x000001F76347C160>, <app.database.models.Group object at 0x000001F76347D150>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347DBF0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347D9D0>, <app.database.models.Group object at 0x000001F76347D6A0>]
2025-07-16 21:21:58,092 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:21:58,092 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 25...
2025-07-16 21:21:58,093 - DEBUG - app - [AUTO-CUTOFF] User 25 has 0 open orders.
2025-07-16 21:21:58,093 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 25...
2025-07-16 21:21:58,095 - DEBUG - app - [AUTO-CUTOFF] User 25 has 0 pending orders.
2025-07-16 21:21:58,095 - WARNING - app - [AUTO-CUTOFF] User 25 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:21:58,095 - INFO - app - [AUTO-CUTOFF] Processing user 26 (live), group: Royal+
2025-07-16 21:21:58,095 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 26 (live) from cache/DB...
2025-07-16 21:21:58,095 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Royal+...
2025-07-16 21:21:58,095 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Royal+' from cache: None
2025-07-16 21:21:58,096 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Royal+', fetching from DB.
2025-07-16 21:21:58,098 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Royal+': [<app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347CD10>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F7630C0AF0>, <app.database.models.Group object at 0x000001F7630C16A0>, <app.database.models.Group object at 0x000001F7630C0050>, <app.database.models.Group object at 0x000001F7630C05A0>, <app.database.models.Group object at 0x000001F7630C1040>, <app.database.models.Group object at 0x000001F7630C1370>, <app.database.models.Group object at 0x000001F7630C1260>, <app.database.models.Group object at 0x000001F7630C1150>, <app.database.models.Group object at 0x000001F7630C1BF0>, <app.database.models.Group object at 0x000001F7630C1D00>, <app.database.models.Group object at 0x000001F7630C1E10>, <app.database.models.Group object at 0x000001F7630C1F20>, <app.database.models.Group object at 0x000001F7630C2030>, <app.database.models.Group object at 0x000001F7630C2140>, <app.database.models.Group object at 0x000001F7630C2250>, <app.database.models.Group object at 0x000001F7630C2360>, <app.database.models.Group object at 0x000001F7630C2470>, <app.database.models.Group object at 0x000001F7630C2580>, <app.database.models.Group object at 0x000001F7630C2690>, <app.database.models.Group object at 0x000001F7630C27A0>, <app.database.models.Group object at 0x000001F7630C28B0>, <app.database.models.Group object at 0x000001F7630C29C0>, <app.database.models.Group object at 0x000001F7630C2AD0>, <app.database.models.Group object at 0x000001F7630C2BE0>, <app.database.models.Group object at 0x000001F7630C2CF0>, <app.database.models.Group object at 0x000001F7630C2E00>, <app.database.models.Group object at 0x000001F7630C2F10>, <app.database.models.Group object at 0x000001F7630C3020>, <app.database.models.Group object at 0x000001F7630C3130>, <app.database.models.Group object at 0x000001F7630C3240>, <app.database.models.Group object at 0x000001F7630C3350>, <app.database.models.Group object at 0x000001F7630C3460>, <app.database.models.Group object at 0x000001F7630C38A0>, <app.database.models.Group object at 0x000001F7630C3AC0>, <app.database.models.Group object at 0x000001F7630C3BD0>, <app.database.models.Group object at 0x000001F7630C3CE0>, <app.database.models.Group object at 0x000001F7630C3DF0>, <app.database.models.Group object at 0x000001F7630C3F00>, <app.database.models.Group object at 0x000001F7630C0160>, <app.database.models.Group object at 0x000001F7630C18C0>, <app.database.models.Group object at 0x000001F7630C07C0>, <app.database.models.Group object at 0x000001F7634939B0>, <app.database.models.Group object at 0x000001F762EB18C0>, <app.database.models.Group object at 0x000001F762EB3790>, <app.database.models.Group object at 0x000001F763095E10>, <app.database.models.Group object at 0x000001F763097CE0>, <app.database.models.Group object at 0x000001F7630959D0>, <app.database.models.Group object at 0x000001F7630967A0>, <app.database.models.Group object at 0x000001F763096470>, <app.database.models.Group object at 0x000001F763097350>, <app.database.models.Group object at 0x000001F7630956A0>, <app.database.models.Group object at 0x000001F763094D10>, <app.database.models.Group object at 0x000001F763097AC0>, <app.database.models.Group object at 0x000001F763096580>, <app.database.models.Group object at 0x000001F7630979B0>, <app.database.models.Group object at 0x000001F763097240>, <app.database.models.Group object at 0x000001F763097680>, <app.database.models.Group object at 0x000001F763097DF0>, <app.database.models.Group object at 0x000001F763096690>]
2025-07-16 21:21:58,099 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Royal+': {'sending_orders': 'barclays'}
2025-07-16 21:21:58,099 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 26...
2025-07-16 21:21:58,100 - DEBUG - app - [AUTO-CUTOFF] User 26 has 2 open orders.
2025-07-16 21:21:58,100 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 26...
2025-07-16 21:21:58,102 - DEBUG - app - [AUTO-CUTOFF] User 26 has 0 pending orders.
2025-07-16 21:21:58,102 - DEBUG - app - [AUTO-CUTOFF] User 26 total positions for portfolio calculation: 2
2025-07-16 21:21:58,102 - DEBUG - app - [AUTO-CUTOFF] User 26 adjusted market prices: {}
2025-07-16 21:21:58,102 - DEBUG - app - [AUTO-CUTOFF] User 26 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:21:58,102 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 26...
2025-07-16 21:21:58,406 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol XAGUSD
2025-07-16 21:21:58,406 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol BTCUSD
2025-07-16 21:21:58,406 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 26: {'balance': '184345.81000000', 'equity': '184345.81000000', 'margin': '146484.47000000', 'free_margin': '37861.34000000', 'profit_loss': '0.0', 'margin_level': '125.8466580109140579885362592', 'positions': [{'order_id': '7987141755', 'order_company_name': 'XAGUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('41.09800000'), 'margin': Decimal('19.54000000'), 'contract_value': Decimal('50.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1116628265', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('6.00000000'), 'order_price': Decimal('132091.90000000'), 'margin': Decimal('146464.93000000'), 'contract_value': Decimal('6.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3661.62000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:21:58,406 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 26: {'balance': '184345.81000000', 'equity': '184345.81000000', 'margin': '146484.47000000', 'free_margin': '37861.34000000', 'profit_loss': '0.0', 'margin_level': '125.8466580109140579885362592', 'positions_with_pnl': [{'order_id': '7987141755', 'order_company_name': 'XAGUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('41.09800000'), 'margin': Decimal('19.54000000'), 'contract_value': Decimal('50.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1116628265', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('6.00000000'), 'order_price': Decimal('132091.90000000'), 'margin': Decimal('146464.93000000'), 'contract_value': Decimal('6.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3661.62000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:21:58,407 - INFO - app - [AUTO-CUTOFF] User 26 margin_level: 125.8466580109140579885362592
2025-07-16 21:21:58,407 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 26
2025-07-16 21:21:58,407 - INFO - app - [AUTO-CUTOFF] Processing user 1 (demo), group: Group B
2025-07-16 21:21:58,407 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 1 (demo) from cache/DB...
2025-07-16 21:21:58,407 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:21:58,408 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:21:58,408 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:21:58,410 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F763493020>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F7630C17B0>, <app.database.models.Group object at 0x000001F7630C0270>, <app.database.models.Group object at 0x000001F7630C19D0>, <app.database.models.Group object at 0x000001F7630C1480>, <app.database.models.Group object at 0x000001F7630C1AE0>, <app.database.models.Group object at 0x000001F7630C06B0>, <app.database.models.Group object at 0x000001F7630C1590>, <app.database.models.Group object at 0x000001F7630C0F30>, <app.database.models.Group object at 0x000001F7630C0E20>, <app.database.models.Group object at 0x000001F7630C0D10>, <app.database.models.Group object at 0x000001F7630C08D0>, <app.database.models.Group object at 0x000001F7630C09E0>, <app.database.models.Group object at 0x000001F7630C0380>, <app.database.models.Group object at 0x000001F7630C0C00>, <app.database.models.Group object at 0x000001F7630C0490>, <app.database.models.Group object at 0x000001F7630C3570>, <app.database.models.Group object at 0x000001F7630C3680>, <app.database.models.Group object at 0x000001F7630C3790>, <app.database.models.Group object at 0x000001F7630C39B0>, <app.database.models.Group object at 0x000001F76347C7C0>, <app.database.models.Group object at 0x000001F76347C490>, <app.database.models.Group object at 0x000001F76347E250>, <app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F76347C6B0>, <app.database.models.Group object at 0x000001F76347C160>, <app.database.models.Group object at 0x000001F76347D150>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347DBF0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347D9D0>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347E7A0>]
2025-07-16 21:21:58,411 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:21:58,411 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 1...
2025-07-16 21:21:58,413 - DEBUG - app - [AUTO-CUTOFF] User 1 has 2 open orders.
2025-07-16 21:21:58,413 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 1...
2025-07-16 21:21:58,414 - DEBUG - app - [AUTO-CUTOFF] User 1 has 1 pending orders.
2025-07-16 21:21:58,414 - DEBUG - app - [AUTO-CUTOFF] User 1 total positions for portfolio calculation: 3
2025-07-16 21:21:58,415 - DEBUG - app - [AUTO-CUTOFF] User 1 adjusted market prices: {}
2025-07-16 21:21:58,415 - DEBUG - app - [AUTO-CUTOFF] User 1 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:21:58,415 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 1...
2025-07-16 21:21:58,721 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:21:58,722 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:21:58,722 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 1: {'balance': '17011.54000000', 'equity': '17011.54000000', 'margin': '6.54000000', 'free_margin': '17005.00000000', 'profit_loss': '0.0', 'margin_level': '260115.2905198776758409785933', 'positions': [{'order_id': '1000052-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.66800000'), 'margin': Decimal('6.54341805'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000053-001', 'order_company_name': 'AUDJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.56000000'), 'margin': Decimal('6.54258453'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:21:58,722 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 1: {'balance': '17011.54000000', 'equity': '17011.54000000', 'margin': '6.54000000', 'free_margin': '17005.00000000', 'profit_loss': '0.0', 'margin_level': '260115.2905198776758409785933', 'positions_with_pnl': [{'order_id': '1000052-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.66800000'), 'margin': Decimal('6.54341805'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000053-001', 'order_company_name': 'AUDJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.56000000'), 'margin': Decimal('6.54258453'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:21:58,723 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:58,724 - INFO - app - [AUTO-CUTOFF] User 1 margin_level: 260115.2905198776758409785933
2025-07-16 21:21:58,726 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 1
2025-07-16 21:21:58,726 - INFO - app - [AUTO-CUTOFF] Processing user 2 (demo), group: 
2025-07-16 21:21:58,726 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 2 (demo) from cache/DB...
2025-07-16 21:21:58,727 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:21:58,728 - WARNING - app - [AUTO-CUTOFF] User 2 has no group_name set. Skipping portfolio update.
2025-07-16 21:21:58,729 - INFO - app - [AUTO-CUTOFF] Processing user 3 (demo), group: string
2025-07-16 21:21:58,729 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 3 (demo) from cache/DB...
2025-07-16 21:21:58,730 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group string...
2025-07-16 21:21:58,731 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'string' from cache: None
2025-07-16 21:21:58,731 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'string', fetching from DB.
2025-07-16 21:21:58,733 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'string': []
2025-07-16 21:21:58,734 - ERROR - app - [AUTO-CUTOFF] Group symbol settings not found in DB for group 'string'. Skipping portfolio update for user 3.
2025-07-16 21:21:58,734 - INFO - app - [AUTO-CUTOFF] Processing user 4 (demo), group: Group B
2025-07-16 21:21:58,734 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 4 (demo) from cache/DB...
2025-07-16 21:21:58,734 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:21:58,735 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:21:58,735 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:21:58,739 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F76347C6B0>, <app.database.models.Group object at 0x000001F76347C160>, <app.database.models.Group object at 0x000001F76347D150>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347DBF0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347D9D0>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F762EB18C0>, <app.database.models.Group object at 0x000001F762EB3790>, <app.database.models.Group object at 0x000001F763493020>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F7634905A0>, <app.database.models.Group object at 0x000001F7634939B0>, <app.database.models.Group object at 0x000001F763492AD0>]
2025-07-16 21:21:58,740 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:21:58,740 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 4...
2025-07-16 21:21:58,742 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 open orders.
2025-07-16 21:21:58,742 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 4...
2025-07-16 21:21:58,744 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 pending orders.
2025-07-16 21:21:58,744 - WARNING - app - [AUTO-CUTOFF] User 4 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:21:58,744 - INFO - app - [AUTO-CUTOFF] Processing user 5 (demo), group: None
2025-07-16 21:21:58,744 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 5 (demo) from cache/DB...
2025-07-16 21:21:58,745 - WARNING - app - [AUTO-CUTOFF] User 5 has no group_name set. Skipping portfolio update.
2025-07-16 21:21:58,745 - INFO - app - [AUTO-CUTOFF] Processing user 6 (demo), group: None
2025-07-16 21:21:58,745 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 6 (demo) from cache/DB...
2025-07-16 21:21:58,745 - WARNING - app - [AUTO-CUTOFF] User 6 has no group_name set. Skipping portfolio update.
2025-07-16 21:21:58,746 - INFO - app - [AUTO-CUTOFF] Processing user 9 (demo), group: Group B
2025-07-16 21:21:58,746 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 9 (demo) from cache/DB...
2025-07-16 21:21:58,746 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:21:58,746 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:21:58,747 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:21:58,749 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F76347C6B0>, <app.database.models.Group object at 0x000001F76347C160>, <app.database.models.Group object at 0x000001F76347D150>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347DBF0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347D9D0>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F762EB18C0>, <app.database.models.Group object at 0x000001F762EB3790>, <app.database.models.Group object at 0x000001F763493020>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F7634905A0>, <app.database.models.Group object at 0x000001F7634939B0>, <app.database.models.Group object at 0x000001F763492AD0>]
2025-07-16 21:21:58,750 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:21:58,750 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 9...
2025-07-16 21:21:58,752 - DEBUG - app - [AUTO-CUTOFF] User 9 has 28 open orders.
2025-07-16 21:21:58,752 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 9...
2025-07-16 21:21:58,753 - DEBUG - app - [AUTO-CUTOFF] User 9 has 6 pending orders.
2025-07-16 21:21:58,753 - DEBUG - app - [AUTO-CUTOFF] User 9 total positions for portfolio calculation: 34
2025-07-16 21:21:58,753 - DEBUG - app - [AUTO-CUTOFF] User 9 adjusted market prices: {}
2025-07-16 21:21:58,754 - DEBUG - app - [AUTO-CUTOFF] User 9 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:21:58,754 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 9...
2025-07-16 21:21:59,040 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDUSD
2025-07-16 21:21:59,040 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDUSD
2025-07-16 21:21:59,040 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFSGD
2025-07-16 21:21:59,040 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFSGD
2025-07-16 21:21:59,040 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CADJPY
2025-07-16 21:21:59,041 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CADJPY
2025-07-16 21:21:59,041 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:21:59,041 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:21:59,041 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFJPY
2025-07-16 21:21:59,041 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFJPY
2025-07-16 21:21:59,041 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:21:59,041 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:21:59,041 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURGBP
2025-07-16 21:21:59,041 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURJPY
2025-07-16 21:21:59,041 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURJPY
2025-07-16 21:21:59,041 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURNZD
2025-07-16 21:21:59,041 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURNZD
2025-07-16 21:21:59,041 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:21:59,041 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:21:59,041 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:21:59,041 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:21:59,041 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol NZDJPY
2025-07-16 21:21:59,041 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDCHF
2025-07-16 21:21:59,042 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDCHF
2025-07-16 21:21:59,042 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDNOK
2025-07-16 21:21:59,042 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDNOK
2025-07-16 21:21:59,042 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDSGD
2025-07-16 21:21:59,042 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDTRY
2025-07-16 21:21:59,042 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 9: {'balance': '98181.73000000', 'equity': '98181.73000000', 'margin': '1917.31000000', 'free_margin': '96264.42000000', 'profit_loss': '0.0', 'margin_level': '5120.806233733720681579921870', 'positions': [{'order_id': '2504219016', 'order_company_name': 'AUDUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.64743000'), 'margin': Decimal('64.74000000'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4208488950', 'order_company_name': 'AUDUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('0.64707000'), 'margin': Decimal('142.36000000'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1409905880', 'order_company_name': 'CHFSGD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57561500'), 'margin': Decimal('122.35389131'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7183762766', 'order_company_name': 'CHFSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57505500'), 'margin': Decimal('122.31506360'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9716387266', 'order_company_name': 'CADJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.24150000'), 'margin': Decimal('109.44987397'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9899743248', 'order_company_name': 'CADJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.27050000'), 'margin': Decimal('109.47824594'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2965066905', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('1.77481000'), 'margin': Decimal('252.73304420'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6518780780', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.21000000'), 'order_price': Decimal('1.77439000'), 'margin': Decimal('241.18574740'), 'contract_value': Decimal('21000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7509572762', 'order_company_name': 'CHFJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.15500000'), 'margin': Decimal('122.35584187'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7522048723', 'order_company_name': 'CHFJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.09500000'), 'margin': Decimal('122.31379417'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6209391896', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77480000'), 'margin': Decimal('57.44317680'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8581607125', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77442000'), 'margin': Decimal('57.43111760'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8951109289', 'order_company_name': 'EURGBP', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.85403000'), 'margin': Decimal('114.85104400'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7115525171', 'order_company_name': 'EURJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.26050000'), 'margin': Decimal('114.87277223'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2099467271', 'order_company_name': 'EURJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.23150000'), 'margin': Decimal('114.85285533'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4283527369', 'order_company_name': 'EURNZD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.91952500'), 'margin': Decimal('114.85328250'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6611902574', 'order_company_name': 'EURNZD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.92063500'), 'margin': Decimal('114.81922980'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4731664142', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34376000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8676137902', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34361000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3301052276', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34379000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2972795665', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34378000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1117118581', 'order_company_name': 'NZDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('87.10150000'), 'margin': Decimal('5.97837949'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3385451189', 'order_company_name': 'USDCHF', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81771000'), 'margin': Decimal('149.97126753'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6134727989', 'order_company_name': 'USDCHF', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81805000'), 'margin': Decimal('150.03056608'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9211531174', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.04973000'), 'margin': Decimal('100.00169162'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5200391957', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.05023000'), 'margin': Decimal('100.00169154'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5654381883', 'order_company_name': 'USDSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.31000000'), 'order_price': Decimal('1.28795000'), 'margin': Decimal('309.93393934'), 'contract_value': Decimal('31000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6985407710', 'order_company_name': 'USDTRY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('39.56087000'), 'margin': Decimal('99.98738813'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:21:59,042 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 9: {'balance': '98181.73000000', 'equity': '98181.73000000', 'margin': '1917.31000000', 'free_margin': '96264.42000000', 'profit_loss': '0.0', 'margin_level': '5120.806233733720681579921870', 'positions_with_pnl': [{'order_id': '2504219016', 'order_company_name': 'AUDUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.64743000'), 'margin': Decimal('64.74000000'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4208488950', 'order_company_name': 'AUDUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('0.64707000'), 'margin': Decimal('142.36000000'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1409905880', 'order_company_name': 'CHFSGD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57561500'), 'margin': Decimal('122.35389131'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7183762766', 'order_company_name': 'CHFSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57505500'), 'margin': Decimal('122.31506360'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9716387266', 'order_company_name': 'CADJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.24150000'), 'margin': Decimal('109.44987397'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9899743248', 'order_company_name': 'CADJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.27050000'), 'margin': Decimal('109.47824594'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2965066905', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('1.77481000'), 'margin': Decimal('252.73304420'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6518780780', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.21000000'), 'order_price': Decimal('1.77439000'), 'margin': Decimal('241.18574740'), 'contract_value': Decimal('21000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7509572762', 'order_company_name': 'CHFJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.15500000'), 'margin': Decimal('122.35584187'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7522048723', 'order_company_name': 'CHFJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.09500000'), 'margin': Decimal('122.31379417'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6209391896', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77480000'), 'margin': Decimal('57.44317680'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8581607125', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77442000'), 'margin': Decimal('57.43111760'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8951109289', 'order_company_name': 'EURGBP', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.85403000'), 'margin': Decimal('114.85104400'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7115525171', 'order_company_name': 'EURJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.26050000'), 'margin': Decimal('114.87277223'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2099467271', 'order_company_name': 'EURJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.23150000'), 'margin': Decimal('114.85285533'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4283527369', 'order_company_name': 'EURNZD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.91952500'), 'margin': Decimal('114.85328250'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6611902574', 'order_company_name': 'EURNZD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.92063500'), 'margin': Decimal('114.81922980'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4731664142', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34376000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8676137902', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34361000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3301052276', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34379000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2972795665', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34378000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1117118581', 'order_company_name': 'NZDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('87.10150000'), 'margin': Decimal('5.97837949'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3385451189', 'order_company_name': 'USDCHF', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81771000'), 'margin': Decimal('149.97126753'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6134727989', 'order_company_name': 'USDCHF', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81805000'), 'margin': Decimal('150.03056608'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9211531174', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.04973000'), 'margin': Decimal('100.00169162'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5200391957', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.05023000'), 'margin': Decimal('100.00169154'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5654381883', 'order_company_name': 'USDSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.31000000'), 'order_price': Decimal('1.28795000'), 'margin': Decimal('309.93393934'), 'contract_value': Decimal('31000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6985407710', 'order_company_name': 'USDTRY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('39.56087000'), 'margin': Decimal('99.98738813'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:21:59,044 - INFO - app - [AUTO-CUTOFF] User 9 margin_level: 5120.806233733720681579921870
2025-07-16 21:21:59,045 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 9
2025-07-16 21:21:59,045 - INFO - app - [AUTO-CUTOFF] Processing user 10 (demo), group: Group B
2025-07-16 21:21:59,045 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 10 (demo) from cache/DB...
2025-07-16 21:21:59,046 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:21:59,047 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:21:59,047 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:21:59,054 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F76347C6B0>, <app.database.models.Group object at 0x000001F76347C160>, <app.database.models.Group object at 0x000001F76347D150>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347DBF0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347D9D0>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F762EB18C0>, <app.database.models.Group object at 0x000001F762EB3790>, <app.database.models.Group object at 0x000001F763493020>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F7634905A0>, <app.database.models.Group object at 0x000001F7634939B0>, <app.database.models.Group object at 0x000001F763492AD0>]
2025-07-16 21:21:59,054 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:21:59,055 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 10...
2025-07-16 21:21:59,057 - DEBUG - app - [AUTO-CUTOFF] User 10 has 0 open orders.
2025-07-16 21:21:59,057 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 10...
2025-07-16 21:21:59,060 - DEBUG - app - [AUTO-CUTOFF] User 10 has 1 pending orders.
2025-07-16 21:21:59,060 - DEBUG - app - [AUTO-CUTOFF] User 10 total positions for portfolio calculation: 1
2025-07-16 21:21:59,061 - DEBUG - app - [AUTO-CUTOFF] User 10 adjusted market prices: {}
2025-07-16 21:21:59,061 - DEBUG - app - [AUTO-CUTOFF] User 10 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:21:59,061 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 10...
2025-07-16 21:21:59,350 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 10: {'balance': '9958.40000000', 'equity': '9958.40000000', 'margin': '39.25000000', 'free_margin': '9919.15000000', 'profit_loss': '0.0', 'margin_level': '25371.71974522292993630573248', 'positions': [], 'margin_call': False}
2025-07-16 21:21:59,350 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 10: {'balance': '9958.40000000', 'equity': '9958.40000000', 'margin': '39.25000000', 'free_margin': '9919.15000000', 'profit_loss': '0.0', 'margin_level': '25371.71974522292993630573248', 'positions_with_pnl': [], 'margin_call': False}
2025-07-16 21:21:59,352 - INFO - app - [AUTO-CUTOFF] User 10 margin_level: 25371.71974522292993630573248
2025-07-16 21:21:59,352 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 10
2025-07-16 21:21:59,352 - INFO - app - [AUTO-CUTOFF] Processing user 11 (demo), group: Group B
2025-07-16 21:21:59,352 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 11 (demo) from cache/DB...
2025-07-16 21:21:59,353 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:21:59,353 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:21:59,353 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:21:59,358 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F76347C6B0>, <app.database.models.Group object at 0x000001F76347C160>, <app.database.models.Group object at 0x000001F76347D150>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347DBF0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347D9D0>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F762EB18C0>, <app.database.models.Group object at 0x000001F762EB3790>, <app.database.models.Group object at 0x000001F763493020>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F7634905A0>, <app.database.models.Group object at 0x000001F7634939B0>, <app.database.models.Group object at 0x000001F763492AD0>]
2025-07-16 21:21:59,358 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:21:59,358 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 11...
2025-07-16 21:21:59,361 - DEBUG - app - [AUTO-CUTOFF] User 11 has 1 open orders.
2025-07-16 21:21:59,361 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 11...
2025-07-16 21:21:59,362 - DEBUG - app - [AUTO-CUTOFF] User 11 has 0 pending orders.
2025-07-16 21:21:59,363 - DEBUG - app - [AUTO-CUTOFF] User 11 total positions for portfolio calculation: 1
2025-07-16 21:21:59,363 - DEBUG - app - [AUTO-CUTOFF] User 11 adjusted market prices: {}
2025-07-16 21:21:59,363 - DEBUG - app - [AUTO-CUTOFF] User 11 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:21:59,363 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 11...
2025-07-16 21:21:59,681 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-07-16 21:21:59,681 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 11: {'balance': '99998.61000000', 'equity': '99998.61000000', 'margin': '6.55000000', 'free_margin': '99992.06000000', 'profit_loss': '0.0', 'margin_level': '1526696.335877862595419847328', 'positions': [{'order_id': '1000099-001', 'order_company_name': 'AUDCAD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('0.89752000'), 'margin': Decimal('6.55364428'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 11, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:21:59,681 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 11: {'balance': '99998.61000000', 'equity': '99998.61000000', 'margin': '6.55000000', 'free_margin': '99992.06000000', 'profit_loss': '0.0', 'margin_level': '1526696.335877862595419847328', 'positions_with_pnl': [{'order_id': '1000099-001', 'order_company_name': 'AUDCAD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('0.89752000'), 'margin': Decimal('6.55364428'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 11, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:21:59,682 - INFO - app - [AUTO-CUTOFF] User 11 margin_level: 1526696.335877862595419847328
2025-07-16 21:21:59,682 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 11
2025-07-16 21:21:59,682 - INFO - app - [AUTO-CUTOFF] Processing user 12 (demo), group: Group B
2025-07-16 21:21:59,682 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 12 (demo) from cache/DB...
2025-07-16 21:21:59,683 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:21:59,683 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:21:59,683 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:21:59,686 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F76347C6B0>, <app.database.models.Group object at 0x000001F76347C160>, <app.database.models.Group object at 0x000001F76347D150>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347DBF0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347D9D0>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F762EB18C0>, <app.database.models.Group object at 0x000001F762EB3790>, <app.database.models.Group object at 0x000001F763493020>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F7634905A0>, <app.database.models.Group object at 0x000001F7634939B0>, <app.database.models.Group object at 0x000001F763492AD0>]
2025-07-16 21:21:59,687 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:21:59,687 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 12...
2025-07-16 21:21:59,689 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 open orders.
2025-07-16 21:21:59,689 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 12...
2025-07-16 21:21:59,690 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 pending orders.
2025-07-16 21:21:59,690 - WARNING - app - [AUTO-CUTOFF] User 12 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:21:59,690 - INFO - app - [AUTO-CUTOFF] Processing user 13 (demo), group: Group B
2025-07-16 21:21:59,690 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 13 (demo) from cache/DB...
2025-07-16 21:21:59,691 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:21:59,691 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:21:59,691 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:21:59,694 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000001F76347D370>, <app.database.models.Group object at 0x000001F76347C270>, <app.database.models.Group object at 0x000001F76347E470>, <app.database.models.Group object at 0x000001F76347CF30>, <app.database.models.Group object at 0x000001F76347E690>, <app.database.models.Group object at 0x000001F76347E360>, <app.database.models.Group object at 0x000001F76347C380>, <app.database.models.Group object at 0x000001F76347C9E0>, <app.database.models.Group object at 0x000001F76347C5A0>, <app.database.models.Group object at 0x000001F76347C6B0>, <app.database.models.Group object at 0x000001F76347C160>, <app.database.models.Group object at 0x000001F76347D150>, <app.database.models.Group object at 0x000001F76347E8B0>, <app.database.models.Group object at 0x000001F76347DBF0>, <app.database.models.Group object at 0x000001F76347FBD0>, <app.database.models.Group object at 0x000001F76347CE20>, <app.database.models.Group object at 0x000001F76347D9D0>, <app.database.models.Group object at 0x000001F76347D6A0>, <app.database.models.Group object at 0x000001F76347DAE0>, <app.database.models.Group object at 0x000001F76347D480>, <app.database.models.Group object at 0x000001F76347E7A0>, <app.database.models.Group object at 0x000001F76347E580>, <app.database.models.Group object at 0x000001F76347C8D0>, <app.database.models.Group object at 0x000001F76347E140>, <app.database.models.Group object at 0x000001F76347F8A0>, <app.database.models.Group object at 0x000001F76347CC00>, <app.database.models.Group object at 0x000001F76347DE10>, <app.database.models.Group object at 0x000001F76347F9B0>, <app.database.models.Group object at 0x000001F76347EAD0>, <app.database.models.Group object at 0x000001F76347DD00>, <app.database.models.Group object at 0x000001F76347DF20>, <app.database.models.Group object at 0x000001F76347D590>, <app.database.models.Group object at 0x000001F76347E9C0>, <app.database.models.Group object at 0x000001F76347D040>, <app.database.models.Group object at 0x000001F76347D8C0>, <app.database.models.Group object at 0x000001F76347C050>, <app.database.models.Group object at 0x000001F76347CAF0>, <app.database.models.Group object at 0x000001F76347D7B0>, <app.database.models.Group object at 0x000001F762EB18C0>, <app.database.models.Group object at 0x000001F762EB3790>, <app.database.models.Group object at 0x000001F763493020>, <app.database.models.Group object at 0x000001F763492F10>, <app.database.models.Group object at 0x000001F7634906B0>, <app.database.models.Group object at 0x000001F763493BD0>, <app.database.models.Group object at 0x000001F763493DF0>, <app.database.models.Group object at 0x000001F763491E10>, <app.database.models.Group object at 0x000001F763493F00>, <app.database.models.Group object at 0x000001F763492E00>, <app.database.models.Group object at 0x000001F763493240>, <app.database.models.Group object at 0x000001F763493570>, <app.database.models.Group object at 0x000001F763490AF0>, <app.database.models.Group object at 0x000001F7634909E0>, <app.database.models.Group object at 0x000001F763493680>, <app.database.models.Group object at 0x000001F763493460>, <app.database.models.Group object at 0x000001F7634929C0>, <app.database.models.Group object at 0x000001F763491590>, <app.database.models.Group object at 0x000001F763491F20>, <app.database.models.Group object at 0x000001F763493790>, <app.database.models.Group object at 0x000001F763490270>, <app.database.models.Group object at 0x000001F763492690>, <app.database.models.Group object at 0x000001F763490160>, <app.database.models.Group object at 0x000001F763490380>, <app.database.models.Group object at 0x000001F763491040>, <app.database.models.Group object at 0x000001F763492030>, <app.database.models.Group object at 0x000001F763492250>, <app.database.models.Group object at 0x000001F763491480>, <app.database.models.Group object at 0x000001F763490E20>, <app.database.models.Group object at 0x000001F763492BE0>, <app.database.models.Group object at 0x000001F763492CF0>, <app.database.models.Group object at 0x000001F7634908D0>, <app.database.models.Group object at 0x000001F763493130>, <app.database.models.Group object at 0x000001F763491AE0>, <app.database.models.Group object at 0x000001F763490F30>, <app.database.models.Group object at 0x000001F763493CE0>, <app.database.models.Group object at 0x000001F763493350>, <app.database.models.Group object at 0x000001F7634927A0>, <app.database.models.Group object at 0x000001F7634905A0>, <app.database.models.Group object at 0x000001F7634939B0>, <app.database.models.Group object at 0x000001F763492AD0>]
2025-07-16 21:21:59,694 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:21:59,694 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 13...
2025-07-16 21:21:59,696 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 open orders.
2025-07-16 21:21:59,696 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 13...
2025-07-16 21:21:59,697 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 pending orders.
2025-07-16 21:21:59,697 - WARNING - app - [AUTO-CUTOFF] User 13 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:21:59,747 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:21:59,752 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:00,232 - DEBUG - app.firebase_stream - Firebase listener triggered (53). Event Type: patch, Path: /. Timestamp: 1752726120.2328494
2025-07-16 21:22:00,233 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0500000000', 'o': '13.0439000000'}, 'NZDJPY': {'b': '87.9900000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0652400000', 'o': '2.0650800000'}, 'BTCUSD': {'b': '118218.300000000
2025-07-16 21:22:00,233 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0500000000', 'o': '13.0439000000'}, 'NZDJPY': {'b': '87.9900000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0652400000', 'o': '2.0650800000'}, 'BTCUSD': {'b': '118218.300000000...
2025-07-16 21:22:00,233 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:22:00,756 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:00,761 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:01,773 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:01,777 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:02,617 - DEBUG - app.firebase_stream - Firebase listener triggered (54). Event Type: patch, Path: /. Timestamp: 1752726122.6171207
2025-07-16 21:22:02,617 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0438000000'}, 'NZDJPY': {'b': '87.9870000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0653100000', 'o': '2.0651300000'}, 'BTCUSD': {'b': '118207.500000000
2025-07-16 21:22:02,617 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0438000000'}, 'NZDJPY': {'b': '87.9870000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0653100000', 'o': '2.0651300000'}, 'BTCUSD': {'b': '118207.500000000...
2025-07-16 21:22:02,617 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:22:02,793 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:02,798 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:03,813 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:03,816 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:04,823 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:04,825 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:04,862 - DEBUG - app.firebase_stream - Firebase listener triggered (55). Event Type: patch, Path: /. Timestamp: 1752726124.862477
2025-07-16 21:22:04,862 - DEBUG - app.firebase_stream - Prepared batch update for 33 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0494000000', 'o': '13.0440000000'}, 'NZDJPY': {'b': '87.9860000000', 'o': '87.9760000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0650800000'}, 'BTCUSD': {'b': '118193.000000000
2025-07-16 21:22:04,863 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0494000000', 'o': '13.0440000000'}, 'NZDJPY': {'b': '87.9860000000', 'o': '87.9760000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0650800000'}, 'BTCUSD': {'b': '118193.000000000...
2025-07-16 21:22:04,863 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:22:05,834 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:05,838 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:06,851 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:06,854 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:07,209 - DEBUG - app.firebase_stream - Firebase listener triggered (56). Event Type: patch, Path: /. Timestamp: 1752726127.2094297
2025-07-16 21:22:07,209 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0495000000', 'o': '13.0441000000'}, 'NZDJPY': {'b': '87.9850000000', 'o': '87.9760000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0650900000'}, 'CADCHF': {'b': '0.5853100000', '
2025-07-16 21:22:07,209 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0495000000', 'o': '13.0441000000'}, 'NZDJPY': {'b': '87.9850000000', 'o': '87.9760000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0650900000'}, 'CADCHF': {'b': '0.5853100000', '...
2025-07-16 21:22:07,210 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:22:07,868 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:07,870 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:08,875 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:08,877 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:09,559 - DEBUG - app.firebase_stream - Firebase listener triggered (57). Event Type: patch, Path: /. Timestamp: 1752726129.559811
2025-07-16 21:22:09,560 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0020000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9900000000', 'o': '87.9800000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0651000000'}, 'BTCUSD': {'b': '118201.300000000
2025-07-16 21:22:09,560 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0020000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9900000000', 'o': '87.9800000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0651000000'}, 'BTCUSD': {'b': '118201.300000000...
2025-07-16 21:22:09,560 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:22:09,882 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:09,885 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:10,894 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:10,897 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:11,807 - DEBUG - app.firebase_stream - Firebase listener triggered (58). Event Type: patch, Path: /. Timestamp: 1752726131.8071058
2025-07-16 21:22:11,807 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9900000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0650700000'}, 'USDJPY': {'b': '148.5940000000', 'o': '148.5850000000'}, 'USDCNH': {'b': '7.1821200000',
2025-07-16 21:22:11,807 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9900000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0650700000'}, 'USDJPY': {'b': '148.5940000000', 'o': '148.5850000000'}, 'USDCNH': {'b': '7.1821200000',...
2025-07-16 21:22:11,807 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:22:11,909 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:11,912 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:11,957 - INFO - app - Application shutdown initiated
2025-07-16 21:22:11,957 - INFO - app - Scheduler shutdown completed
2025-07-16 21:22:11,957 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-07-16 21:22:14,138 - INFO - app.firebase_stream - Firebase listener closed.
2025-07-16 21:22:14,138 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-07-16 21:22:14,139 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:14,144 - INFO - app - Redis connection closed
2025-07-16 21:22:14,144 - INFO - app - Application shutdown completed
2025-07-16 21:22:15,970 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-16 21:22:16,004 - INFO - app.core.config - .env file loaded successfully.
2025-07-16 21:22:16,016 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-16 21:22:16,016 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-16 21:22:16,327 - INFO - app - Application starting up - Trading system initialized
2025-07-16 21:22:16,327 - INFO - app - SL/TP Epsilon accuracy configured: 0.00001
2025-07-16 21:22:16,327 - INFO - app - Environment: DEVELOPMENT
2025-07-16 21:22:16,375 - INFO - app - Application startup initiated
2025-07-16 21:22:16,375 - INFO - app - Initializing core services...
2025-07-16 21:22:16,422 - INFO - app - Firebase initialized
2025-07-16 21:22:16,422 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-07-16 21:22:18,459 - INFO - app - Redis initialized
2025-07-16 21:22:18,462 - INFO - app - [SWAP] daily_swap_charge_job triggered
2025-07-16 21:22:18,462 - INFO - app - [AUTO-CUTOFF] Scheduled update_all_users_dynamic_portfolio job to run every 1 minute.
2025-07-16 21:22:18,463 - INFO - app - Scheduler initialized
2025-07-16 21:22:18,464 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-16 21:22:18,464 - DEBUG - app.firebase_stream - Successfully got running event loop in process_firebase_events task.
2025-07-16 21:22:18,465 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-07-16 21:22:19,480 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-16 21:22:19,497 - DEBUG - app.firebase_stream - Firebase listener triggered (1). Event Type: put, Path: /. Timestamp: 1752726139.4971242
2025-07-16 21:22:19,497 - DEBUG - app.firebase_stream - Prepared batch update for 48 symbols from root path for queue. Preview: {'AUDCAD': {'b': '0.8893500000', 'o': '0.8893500000'}, 'AUDCHF': {'b': '0.5205700000', 'o': '0.5205100000'}, 'AUDJPY': {'b': '96.3400000000', 'o': '96.3330000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'
2025-07-16 21:22:19,497 - INFO - app - Starting stale cache cleanup task
2025-07-16 21:22:19,498 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'AUDCAD': {'b': '0.8893500000', 'o': '0.8893500000'}, 'AUDCHF': {'b': '0.5205700000', 'o': '0.5205100000'}, 'AUDJPY': {'b': '96.3400000000', 'o': '96.3330000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'...
2025-07-16 21:22:19,498 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type put at path /.
2025-07-16 21:22:21,141 - DEBUG - app.firebase_stream - Firebase listener triggered (2). Event Type: patch, Path: /. Timestamp: 1752726141.1417034
2025-07-16 21:22:21,141 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9850000000', 'o': '87.9730000000'}, 'USDJPY': {'b': '148.5930000000', 'o': '148.5860000000'}, 'CADCHF': {'b': '0.5853200000', 'o': '0.5853000000'}, 'EURNZD': {'b': '1.9620900000',
2025-07-16 21:22:21,142 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9850000000', 'o': '87.9730000000'}, 'USDJPY': {'b': '148.5930000000', 'o': '148.5860000000'}, 'CADCHF': {'b': '0.5853200000', 'o': '0.5853000000'}, 'EURNZD': {'b': '1.9620900000',...
2025-07-16 21:22:21,142 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:22:23,396 - DEBUG - app.firebase_stream - Firebase listener triggered (3). Event Type: patch, Path: /. Timestamp: 1752726143.3963964
2025-07-16 21:22:23,396 - DEBUG - app.firebase_stream - Prepared batch update for 21 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9840000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0652800000', 'o': '2.0651000000'}, 'BTCUSD': {'b': '118201.2000000000', 'o': '118201.1000000000'}, 'USDJPY': {'b': '148.5910
2025-07-16 21:22:23,396 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'NZDJPY': {'b': '87.9840000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0652800000', 'o': '2.0651000000'}, 'BTCUSD': {'b': '118201.2000000000', 'o': '118201.1000000000'}, 'USDJPY': {'b': '148.5910...
2025-07-16 21:22:23,397 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:22:23,552 - INFO - app - Cleaned up pending order stream for new trigger price format
2025-07-16 21:22:23,552 - INFO - app - Background tasks initialized
2025-07-16 21:22:24,210 - INFO - app - Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-07-16 21:22:24,210 - INFO - app - Application startup completed successfully
2025-07-16 21:22:24,210 - INFO - app - Starting cache validation task
2025-07-16 21:22:24,213 - INFO - app - Starting Barclays pending order margin checker task.
2025-07-16 21:22:24,214 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:24,216 - INFO - app - Starting auto-cutoff order monitoring task.
2025-07-16 21:22:24,221 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-07-16 21:22:25,748 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-07-16 21:22:30,954 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-16 21:22:30,978 - INFO - app.core.config - .env file loaded successfully.
2025-07-16 21:22:30,994 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-16 21:22:30,995 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-16 21:22:31,242 - INFO - app - Application starting up - Trading system initialized
2025-07-16 21:22:31,242 - INFO - app - SL/TP Epsilon accuracy configured: 0.00001
2025-07-16 21:22:31,242 - INFO - app - Environment: DEVELOPMENT
2025-07-16 21:22:31,287 - INFO - app - Application startup initiated
2025-07-16 21:22:31,287 - INFO - app - Initializing core services...
2025-07-16 21:22:31,348 - INFO - app - Firebase initialized
2025-07-16 21:22:31,348 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-07-16 21:22:33,392 - INFO - app - Redis initialized
2025-07-16 21:22:33,395 - INFO - app - [SWAP] daily_swap_charge_job triggered
2025-07-16 21:22:33,395 - INFO - app - [AUTO-CUTOFF] Scheduled update_all_users_dynamic_portfolio job to run every 1 minute.
2025-07-16 21:22:33,396 - INFO - app - Scheduler initialized
2025-07-16 21:22:33,398 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-16 21:22:33,398 - DEBUG - app.firebase_stream - Successfully got running event loop in process_firebase_events task.
2025-07-16 21:22:33,398 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-07-16 21:22:34,257 - DEBUG - app.firebase_stream - Firebase listener triggered (1). Event Type: put, Path: /. Timestamp: 1752726154.2576563
2025-07-16 21:22:34,257 - DEBUG - app.firebase_stream - Prepared batch update for 48 symbols from root path for queue. Preview: {'AUDCAD': {'b': '0.8894000000', 'o': '0.8894000000'}, 'AUDCHF': {'b': '0.5205600000', 'o': '0.5205100000'}, 'AUDJPY': {'b': '96.3340000000', 'o': '96.3280000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'
2025-07-16 21:22:34,257 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-16 21:22:34,258 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'AUDCAD': {'b': '0.8894000000', 'o': '0.8894000000'}, 'AUDCHF': {'b': '0.5205600000', 'o': '0.5205100000'}, 'AUDJPY': {'b': '96.3340000000', 'o': '96.3280000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'...
2025-07-16 21:22:34,259 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type put at path /.
2025-07-16 21:22:34,259 - INFO - app - Starting stale cache cleanup task
2025-07-16 21:22:34,889 - DEBUG - app.firebase_stream - Firebase listener triggered (2). Event Type: patch, Path: /. Timestamp: 1752726154.8895118
2025-07-16 21:22:34,889 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9830000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0652100000', 'o': '2.0650400000'}, 'USDCNH': {'b': '7.1821400000', 'o': '7.1821400000'}, 'CADCHF': {'b': '0.5853300000', 'o'
2025-07-16 21:22:34,890 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9830000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0652100000', 'o': '2.0650400000'}, 'USDCNH': {'b': '7.1821400000', 'o': '7.1821400000'}, 'CADCHF': {'b': '0.5853300000', 'o'...
2025-07-16 21:22:34,890 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:22:37,737 - DEBUG - app.firebase_stream - Firebase listener triggered (3). Event Type: patch, Path: /. Timestamp: 1752726157.7378979
2025-07-16 21:22:37,738 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9870000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0650800000'}, 'USDJPY': {'b': '148.5890000000', 'o': '148.5850000000'}, 'USDCNH': {'b': '7.1821600000',
2025-07-16 21:22:37,738 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 2. Data preview: {'NZDJPY': {'b': '87.9870000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0650800000'}, 'USDJPY': {'b': '148.5890000000', 'o': '148.5850000000'}, 'USDCNH': {'b': '7.1821600000',...
2025-07-16 21:22:37,738 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:22:38,344 - INFO - app - Cleaned up pending order stream for new trigger price format
2025-07-16 21:22:38,344 - INFO - app - Background tasks initialized
2025-07-16 21:22:39,099 - INFO - app - Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-07-16 21:22:39,099 - INFO - app - Application startup completed successfully
2025-07-16 21:22:39,099 - INFO - app - Starting cache validation task
2025-07-16 21:22:39,103 - INFO - app - Starting Barclays pending order margin checker task.
2025-07-16 21:22:39,103 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:39,107 - INFO - app - Starting auto-cutoff order monitoring task.
2025-07-16 21:22:39,131 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:39,145 - INFO - app - Validating cache for 30 users
2025-07-16 21:22:40,011 - DEBUG - app.firebase_stream - Firebase listener triggered (4). Event Type: patch, Path: /. Timestamp: 1752726160.01148
2025-07-16 21:22:40,011 - DEBUG - app.firebase_stream - Prepared batch update for 18 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9850000000', 'o': '87.9790000000'}, 'USDJPY': {'b': '148.5890000000', 'o': '148.5840000000'}, 'USDCNH': {'b': '7.1821500000', 'o': '7.1821400000'}, 'EURNZD': {'b': '1.9622500000',
2025-07-16 21:22:40,012 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'NZDJPY': {'b': '87.9850000000', 'o': '87.9790000000'}, 'USDJPY': {'b': '148.5890000000', 'o': '148.5840000000'}, 'USDCNH': {'b': '7.1821500000', 'o': '7.1821400000'}, 'EURNZD': {'b': '1.9622500000',...
2025-07-16 21:22:40,012 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:22:40,146 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:40,148 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:41,129 - INFO - app - Found 0 static orders cache entries to check
2025-07-16 21:22:41,129 - INFO - app - Completed stale cache cleanup task
2025-07-16 21:22:41,154 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:41,159 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:42,163 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:42,166 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:42,316 - DEBUG - app.firebase_stream - Firebase listener triggered (5). Event Type: patch, Path: /. Timestamp: 1752726162.3164055
2025-07-16 21:22:42,316 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9860000000', 'o': '87.9780000000'}, 'BTCUSD': {'b': '118201.3000000000', 'o': '118201.2000000000'}, 'USDJPY': {'b': '148.5900000000', 'o': '148.5850000000'}, 'EURNZD': {'b': '1.96
2025-07-16 21:22:42,316 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 3. Data preview: {'NZDJPY': {'b': '87.9860000000', 'o': '87.9780000000'}, 'BTCUSD': {'b': '118201.3000000000', 'o': '118201.2000000000'}, 'USDJPY': {'b': '148.5900000000', 'o': '148.5850000000'}, 'EURNZD': {'b': '1.96...
2025-07-16 21:22:42,317 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:22:43,163 - WARNING - app - User 4: Missing balance/margin cache, refreshing...
2025-07-16 21:22:43,171 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:43,179 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:44,186 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:44,190 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:44,625 - DEBUG - app.firebase_stream - Firebase listener triggered (6). Event Type: patch, Path: /. Timestamp: 1752726164.6254506
2025-07-16 21:22:44,625 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0497000000', 'o': '13.0436000000'}, 'NZDJPY': {'b': '87.9830000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0652900000', 'o': '2.0651200000'}, 'BTCUSD': {'b': '118195.100000000
2025-07-16 21:22:44,626 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 2. Data preview: {'GBPSEK': {'b': '13.0497000000', 'o': '13.0436000000'}, 'NZDJPY': {'b': '87.9830000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0652900000', 'o': '2.0651200000'}, 'BTCUSD': {'b': '118195.100000000...
2025-07-16 21:22:44,626 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:22:45,205 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:45,236 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:46,252 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:46,254 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:46,950 - DEBUG - app.firebase_stream - Firebase listener triggered (7). Event Type: patch, Path: /. Timestamp: 1752726166.9500606
2025-07-16 21:22:46,950 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0437000000'}, 'XAGUSD': {'b': '38.0020000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9820000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0652500000',
2025-07-16 21:22:46,950 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 2. Data preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0437000000'}, 'XAGUSD': {'b': '38.0020000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9820000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0652500000',...
2025-07-16 21:22:46,950 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:22:47,260 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:47,270 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:47,309 - WARNING - app - User 5: Missing balance/margin cache, refreshing...
2025-07-16 21:22:47,332 - WARNING - app - User 8: Missing balance/margin cache, refreshing...
2025-07-16 21:22:48,287 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:48,294 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:49,231 - DEBUG - app.firebase_stream - Firebase listener triggered (8). Event Type: patch, Path: /. Timestamp: 1752726169.231793
2025-07-16 21:22:49,232 - DEBUG - app.firebase_stream - Prepared batch update for 33 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0437000000'}, 'XAGUSD': {'b': '38.0020000000', 'o': '37.9950000000'}, 'NZDJPY': {'b': '87.9850000000', 'o': '87.9760000000'}, 'GBPAUD': {'b': '2.0652600000',
2025-07-16 21:22:49,232 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0437000000'}, 'XAGUSD': {'b': '38.0020000000', 'o': '37.9950000000'}, 'NZDJPY': {'b': '87.9850000000', 'o': '87.9760000000'}, 'GBPAUD': {'b': '2.0652600000',...
2025-07-16 21:22:49,232 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:22:49,299 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:49,304 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:49,392 - WARNING - app - User 9: Missing balance/margin cache, refreshing...
2025-07-16 21:22:50,312 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:50,316 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:51,322 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:51,326 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:51,472 - WARNING - app - User 10: Missing balance/margin cache, refreshing...
2025-07-16 21:22:51,548 - DEBUG - app.firebase_stream - Firebase listener triggered (9). Event Type: patch, Path: /. Timestamp: 1752726171.5485845
2025-07-16 21:22:51,549 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9850000000', 'o': '87.9740000000'}, 'GBPAUD': {'b': '2.0652900000', 'o': '2.0651300000'}, 'USDCNH': {'b': '7.1821000000', 'o': '7.1821000000'}, 'CADCHF': {'b': '0.5853200000', 'o'
2025-07-16 21:22:51,549 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9850000000', 'o': '87.9740000000'}, 'GBPAUD': {'b': '2.0652900000', 'o': '2.0651300000'}, 'USDCNH': {'b': '7.1821000000', 'o': '7.1821000000'}, 'CADCHF': {'b': '0.5853200000', 'o'...
2025-07-16 21:22:51,549 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:22:52,337 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:52,340 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:53,346 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:53,349 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:53,554 - WARNING - app - User 11: Missing balance/margin cache, refreshing...
2025-07-16 21:22:53,572 - WARNING - app - User 12: Missing balance/margin cache, refreshing...
2025-07-16 21:22:53,584 - WARNING - app - User 13: Missing balance/margin cache, refreshing...
2025-07-16 21:22:53,600 - WARNING - app - User 14: Missing balance/margin cache, refreshing...
2025-07-16 21:22:53,613 - WARNING - app - User 16: Missing balance/margin cache, refreshing...
2025-07-16 21:22:53,622 - WARNING - app - User 17: Missing balance/margin cache, refreshing...
2025-07-16 21:22:53,639 - WARNING - app - User 18: Missing balance/margin cache, refreshing...
2025-07-16 21:22:53,654 - WARNING - app - User 19: Missing balance/margin cache, refreshing...
2025-07-16 21:22:53,668 - WARNING - app - User 20: Missing balance/margin cache, refreshing...
2025-07-16 21:22:53,684 - WARNING - app - User 21: Missing balance/margin cache, refreshing...
2025-07-16 21:22:53,700 - WARNING - app - User 22: Missing balance/margin cache, refreshing...
2025-07-16 21:22:53,710 - WARNING - app - User 23: Missing balance/margin cache, refreshing...
2025-07-16 21:22:53,715 - WARNING - app - User 25: Missing balance/margin cache, refreshing...
2025-07-16 21:22:53,720 - WARNING - app - User 26: Missing balance/margin cache, refreshing...
2025-07-16 21:22:53,726 - WARNING - app - User 1: Missing balance/margin cache, refreshing...
2025-07-16 21:22:53,735 - WARNING - app - User 2: Missing balance/margin cache, refreshing...
2025-07-16 21:22:53,742 - WARNING - app - User 3: Missing balance/margin cache, refreshing...
2025-07-16 21:22:53,747 - WARNING - app - User 4: Missing static orders cache, refreshing...
2025-07-16 21:22:53,759 - WARNING - app - User 5: Missing balance/margin cache, refreshing...
2025-07-16 21:22:53,764 - WARNING - app - User 6: Missing balance/margin cache, refreshing...
2025-07-16 21:22:53,771 - WARNING - app - User 9: Missing static orders cache, refreshing...
2025-07-16 21:22:53,789 - WARNING - app - User 10: Missing static orders cache, refreshing...
2025-07-16 21:22:53,802 - WARNING - app - User 11: Missing static orders cache, refreshing...
2025-07-16 21:22:53,817 - WARNING - app - User 12: Missing static orders cache, refreshing...
2025-07-16 21:22:53,831 - WARNING - app - User 13: Missing static orders cache, refreshing...
2025-07-16 21:22:53,842 - INFO - app - Cache validation completed
2025-07-16 21:22:53,917 - DEBUG - app.firebase_stream - Firebase listener triggered (10). Event Type: patch, Path: /. Timestamp: 1752726173.9175735
2025-07-16 21:22:53,917 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9830000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0652900000', 'o': '2.0651100000'}, 'CADCHF': {'b': '0.5853100000', 'o': '0.5853000000'}, 'EURNZD': {'b': '1.9622200000', 'o'
2025-07-16 21:22:53,918 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9830000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0652900000', 'o': '2.0651100000'}, 'CADCHF': {'b': '0.5853100000', 'o': '0.5853000000'}, 'EURNZD': {'b': '1.9622200000', 'o'...
2025-07-16 21:22:53,918 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:22:54,104 - INFO - app - Starting stale cache cleanup task
2025-07-16 21:22:54,105 - INFO - app - Found 6 static orders cache entries to check
2025-07-16 21:22:54,106 - WARNING - app - Found stale cache entry for user 4, will be refreshed on next access
2025-07-16 21:22:54,108 - WARNING - app - Found stale cache entry for user 13, will be refreshed on next access
2025-07-16 21:22:54,109 - WARNING - app - Found stale cache entry for user 12, will be refreshed on next access
2025-07-16 21:22:54,109 - INFO - app - Completed stale cache cleanup task
2025-07-16 21:22:54,361 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:54,363 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:55,372 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:55,377 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:56,166 - DEBUG - app.firebase_stream - Firebase listener triggered (11). Event Type: patch, Path: /. Timestamp: 1752726176.1667051
2025-07-16 21:22:56,167 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0653300000', 'o': '2.0651700000'}, 'BTCUSD': {'b': '118201.2000000000', 'o': '118201.1000000000'}, 'USDJPY': {'b': '148.5890
2025-07-16 21:22:56,167 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0653300000', 'o': '2.0651700000'}, 'BTCUSD': {'b': '118201.2000000000', 'o': '118201.1000000000'}, 'USDJPY': {'b': '148.5890...
2025-07-16 21:22:56,167 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:22:56,382 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:56,386 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:57,401 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:57,404 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:58,409 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:58,411 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:22:58,519 - DEBUG - app.firebase_stream - Firebase listener triggered (12). Event Type: patch, Path: /. Timestamp: 1752726178.5193102
2025-07-16 21:22:58,519 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9820000000', 'o': '87.9740000000'}, 'GBPAUD': {'b': '2.0653200000', 'o': '2.0651500000'}, 'BTCUSD': {'b': '118205.1000000000', 'o': '118205.0000000000'}, 'USDJPY': {'b': '148.5890
2025-07-16 21:22:58,519 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9820000000', 'o': '87.9740000000'}, 'GBPAUD': {'b': '2.0653200000', 'o': '2.0651500000'}, 'BTCUSD': {'b': '118205.1000000000', 'o': '118205.0000000000'}, 'USDJPY': {'b': '148.5890...
2025-07-16 21:22:58,520 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:22:59,425 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:22:59,429 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:00,431 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:00,436 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:00,775 - DEBUG - app.firebase_stream - Firebase listener triggered (13). Event Type: patch, Path: /. Timestamp: 1752726180.775202
2025-07-16 21:23:00,775 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9820000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0653200000', 'o': '2.0651700000'}, 'USDJPY': {'b': '148.5890000000', 'o': '148.5850000000'}, 'USDCNH': {'b': '7.1821200000',
2025-07-16 21:23:00,775 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9820000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0653200000', 'o': '2.0651700000'}, 'USDJPY': {'b': '148.5890000000', 'o': '148.5850000000'}, 'USDCNH': {'b': '7.1821200000',...
2025-07-16 21:23:00,775 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:01,446 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:01,449 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:02,463 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:02,467 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:03,131 - DEBUG - app.firebase_stream - Firebase listener triggered (14). Event Type: patch, Path: /. Timestamp: 1752726183.131125
2025-07-16 21:23:03,131 - DEBUG - app.firebase_stream - Prepared batch update for 19 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9820000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0653100000', 'o': '2.0651500000'}, 'USDJPY': {'b': '148.5890000000', 'o': '148.5840000000'}, 'CADCHF': {'b': '0.5853200000',
2025-07-16 21:23:03,131 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9820000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0653100000', 'o': '2.0651500000'}, 'USDJPY': {'b': '148.5890000000', 'o': '148.5840000000'}, 'CADCHF': {'b': '0.5853200000',...
2025-07-16 21:23:03,132 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:03,472 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:03,475 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:04,487 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:04,492 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:05,488 - DEBUG - app.firebase_stream - Firebase listener triggered (15). Event Type: patch, Path: /. Timestamp: 1752726185.4888425
2025-07-16 21:23:05,489 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9830000000', 'o': '87.9740000000'}, 'GBPAUD': {'b': '2.0653100000', 'o': '2.0651200000'}, 'USDJPY': {'b': '148.5890000000', 'o': '148.5850000000'}, 'CADCHF': {'b': '0.5853100000',
2025-07-16 21:23:05,489 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'NZDJPY': {'b': '87.9830000000', 'o': '87.9740000000'}, 'GBPAUD': {'b': '2.0653100000', 'o': '2.0651200000'}, 'USDJPY': {'b': '148.5890000000', 'o': '148.5850000000'}, 'CADCHF': {'b': '0.5853100000',...
2025-07-16 21:23:05,489 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:05,498 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:05,500 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:06,509 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:06,514 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:07,519 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:07,523 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:07,742 - DEBUG - app.firebase_stream - Firebase listener triggered (16). Event Type: patch, Path: /. Timestamp: 1752726187.7422276
2025-07-16 21:23:07,742 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0000000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0653400000', 'o': '2.0651500000'}, 'USDJPY': {'b': '148.5910000000',
2025-07-16 21:23:07,742 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0000000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0653400000', 'o': '2.0651500000'}, 'USDJPY': {'b': '148.5910000000',...
2025-07-16 21:23:07,743 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:08,533 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:08,537 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:09,549 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:09,552 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:10,102 - DEBUG - app.firebase_stream - Firebase listener triggered (17). Event Type: patch, Path: /. Timestamp: 1752726190.1023688
2025-07-16 21:23:10,102 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0653900000', 'o': '2.0652000000'}, 'USDJPY': {'b': '148.5900000000',
2025-07-16 21:23:10,103 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0653900000', 'o': '2.0652000000'}, 'USDJPY': {'b': '148.5900000000',...
2025-07-16 21:23:10,103 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:10,566 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:10,570 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:11,573 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:11,575 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:12,346 - DEBUG - app.firebase_stream - Firebase listener triggered (18). Event Type: patch, Path: /. Timestamp: 1752726192.346236
2025-07-16 21:23:12,346 - DEBUG - app.firebase_stream - Prepared batch update for 13 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0653300000', 'o': '2.0651700000'}, 'USDJPY': {'b': '148.5910000000', 'o': '148.5850000000'}, 'EURNZD': {'b': '1.9622700000',
2025-07-16 21:23:12,347 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0653300000', 'o': '2.0651700000'}, 'USDJPY': {'b': '148.5910000000', 'o': '148.5850000000'}, 'EURNZD': {'b': '1.9622700000',...
2025-07-16 21:23:12,347 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:12,577 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:12,581 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:13,584 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:13,589 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:14,602 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:14,606 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:14,699 - DEBUG - app.firebase_stream - Firebase listener triggered (19). Event Type: patch, Path: /. Timestamp: 1752726194.6990182
2025-07-16 21:23:14,699 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0653300000', 'o': '2.0651500000'}, 'USDCNH': {'b': '7.1821100000', 'o': '7.1821100000'}, 'EURNZD': {'b': '1.9623000000', 'o'
2025-07-16 21:23:14,699 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0653300000', 'o': '2.0651500000'}, 'USDCNH': {'b': '7.1821100000', 'o': '7.1821100000'}, 'EURNZD': {'b': '1.9623000000', 'o'...
2025-07-16 21:23:14,699 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:15,613 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:15,617 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:16,622 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:16,625 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:17,152 - DEBUG - app.firebase_stream - Firebase listener triggered (20). Event Type: patch, Path: /. Timestamp: 1752726197.1528454
2025-07-16 21:23:17,153 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0436000000'}, 'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0654000000', 'o': '2.0652300000'}, 'EURNZD': {'b': '1.9622900000', '
2025-07-16 21:23:17,153 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0436000000'}, 'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0654000000', 'o': '2.0652300000'}, 'EURNZD': {'b': '1.9622900000', '...
2025-07-16 21:23:17,153 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:17,632 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:17,636 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:18,639 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:18,642 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:19,410 - DEBUG - app.firebase_stream - Firebase listener triggered (21). Event Type: patch, Path: /. Timestamp: 1752726199.410481
2025-07-16 21:23:19,411 - DEBUG - app.firebase_stream - Prepared batch update for 21 symbols from root path for queue. Preview: {'GBPAUD': {'b': '2.0654100000', 'o': '2.0652200000'}, 'USDJPY': {'b': '148.5900000000', 'o': '148.5840000000'}, 'EURZAR': {'b': '20.7645000000', 'o': '20.7414900000'}, 'AUDJPY': {'b': '96.3340000000'
2025-07-16 21:23:19,411 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPAUD': {'b': '2.0654100000', 'o': '2.0652200000'}, 'USDJPY': {'b': '148.5900000000', 'o': '148.5840000000'}, 'EURZAR': {'b': '20.7645000000', 'o': '20.7414900000'}, 'AUDJPY': {'b': '96.3340000000'...
2025-07-16 21:23:19,411 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:19,658 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:19,662 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:20,668 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:20,672 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:21,658 - DEBUG - app.firebase_stream - Firebase listener triggered (22). Event Type: patch, Path: /. Timestamp: 1752726201.6588347
2025-07-16 21:23:21,659 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0654000000', 'o': '2.0652200000'}, 'USDJPY': {'b': '148.5910000000', 'o': '148.5850000000'}, 'CADCHF': {'b': '0.5853200000',
2025-07-16 21:23:21,659 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0654000000', 'o': '2.0652200000'}, 'USDJPY': {'b': '148.5910000000', 'o': '148.5850000000'}, 'CADCHF': {'b': '0.5853200000',...
2025-07-16 21:23:21,659 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:21,674 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:21,676 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:22,691 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:22,695 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:23,699 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:23,701 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:24,018 - DEBUG - app.firebase_stream - Firebase listener triggered (23). Event Type: patch, Path: /. Timestamp: 1752726204.0188913
2025-07-16 21:23:24,019 - DEBUG - app.firebase_stream - Prepared batch update for 15 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0653600000', 'o': '2.0652000000'}, 'CADCHF': {'b': '0.5853100000', 'o': '0.5853000000'}, 'EURNZD': {'b': '1.9622800000', 'o'
2025-07-16 21:23:24,019 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0653600000', 'o': '2.0652000000'}, 'CADCHF': {'b': '0.5853100000', 'o': '0.5853000000'}, 'EURNZD': {'b': '1.9622800000', 'o'...
2025-07-16 21:23:24,019 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:24,716 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:24,720 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:25,726 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:25,727 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:26,269 - DEBUG - app.firebase_stream - Firebase listener triggered (24). Event Type: patch, Path: /. Timestamp: 1752726206.2696195
2025-07-16 21:23:26,269 - DEBUG - app.firebase_stream - Prepared batch update for 18 symbols from root path for queue. Preview: {'GBPAUD': {'b': '2.0654000000', 'o': '2.0652200000'}, 'USDJPY': {'b': '148.5900000000', 'o': '148.5840000000'}, 'CADCHF': {'b': '0.5853200000', 'o': '0.5853200000'}, 'EURNZD': {'b': '1.9623200000', '
2025-07-16 21:23:26,270 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPAUD': {'b': '2.0654000000', 'o': '2.0652200000'}, 'USDJPY': {'b': '148.5900000000', 'o': '148.5840000000'}, 'CADCHF': {'b': '0.5853200000', 'o': '0.5853200000'}, 'EURNZD': {'b': '1.9623200000', '...
2025-07-16 21:23:26,270 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:26,731 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:26,739 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:27,745 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:27,750 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:28,551 - DEBUG - app.firebase_stream - Firebase listener triggered (25). Event Type: patch, Path: /. Timestamp: 1752726208.5512645
2025-07-16 21:23:28,551 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0437000000'}, 'NZDJPY': {'b': '87.9800000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0654100000', 'o': '2.0652300000'}, 'BTCUSD': {'b': '118202.600000000
2025-07-16 21:23:28,552 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0437000000'}, 'NZDJPY': {'b': '87.9800000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0654100000', 'o': '2.0652300000'}, 'BTCUSD': {'b': '118202.600000000...
2025-07-16 21:23:28,552 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:28,751 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:28,756 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:29,760 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:29,764 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:30,768 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:30,770 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:30,877 - DEBUG - app.firebase_stream - Firebase listener triggered (26). Event Type: patch, Path: /. Timestamp: 1752726210.8776414
2025-07-16 21:23:30,878 - DEBUG - app.firebase_stream - Prepared batch update for 19 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0436000000'}, 'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0654100000', 'o': '2.0652200000'}, 'USDJPY': {'b': '148.5900000000',
2025-07-16 21:23:30,878 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0436000000'}, 'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0654100000', 'o': '2.0652200000'}, 'USDJPY': {'b': '148.5900000000',...
2025-07-16 21:23:30,878 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:31,778 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:31,782 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:32,795 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:32,797 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:33,164 - DEBUG - app.firebase_stream - Firebase listener triggered (27). Event Type: patch, Path: /. Timestamp: 1752726213.1641598
2025-07-16 21:23:33,164 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0654100000', 'o': '2.0652300000'}, 'USDJPY': {'b': '148.5900000000', 'o': '148.5840000000'}, 'CADCHF': {'b': '0.5853100000',
2025-07-16 21:23:33,164 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0654100000', 'o': '2.0652300000'}, 'USDJPY': {'b': '148.5900000000', 'o': '148.5840000000'}, 'CADCHF': {'b': '0.5853100000',...
2025-07-16 21:23:33,164 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:33,397 - INFO - app - [AUTO-CUTOFF] Starting update_all_users_dynamic_portfolio job...
2025-07-16 21:23:33,397 - INFO - app - [AUTO-CUTOFF] update_all_users_dynamic_portfolio heartbeat: task is alive and running.
2025-07-16 21:23:33,397 - INFO - app - [AUTO-CUTOFF] Fetching all active users (live and demo)...
2025-07-16 21:23:33,407 - INFO - app - [AUTO-CUTOFF] Found 19 live users and 11 demo users.
2025-07-16 21:23:33,407 - INFO - app - [AUTO-CUTOFF] Processing 30 users for dynamic portfolio update...
2025-07-16 21:23:33,407 - INFO - app - [AUTO-CUTOFF] Processing user 4 (live), group: Group B
2025-07-16 21:23:33,407 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 4 (live) from cache/DB...
2025-07-16 21:23:33,412 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:23:33,413 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:23:33,413 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:23:33,418 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000021D7BBF88D0>, <app.database.models.Group object at 0x0000021D7BBF97B0>, <app.database.models.Group object at 0x0000021D7BBF8270>, <app.database.models.Group object at 0x0000021D7BBF8AF0>, <app.database.models.Group object at 0x0000021D7BBF86B0>, <app.database.models.Group object at 0x0000021D7BBF8C00>, <app.database.models.Group object at 0x0000021D7BBFA030>, <app.database.models.Group object at 0x0000021D7BBF87C0>, <app.database.models.Group object at 0x0000021D7BBF85A0>, <app.database.models.Group object at 0x0000021D7BBF89E0>, <app.database.models.Group object at 0x0000021D7BBF8050>, <app.database.models.Group object at 0x0000021D7BBF9590>, <app.database.models.Group object at 0x0000021D7BBF9E10>, <app.database.models.Group object at 0x0000021D7BBFB8A0>, <app.database.models.Group object at 0x0000021D7BBFA140>, <app.database.models.Group object at 0x0000021D7BBF8490>, <app.database.models.Group object at 0x0000021D7BBF9BF0>, <app.database.models.Group object at 0x0000021D7BBF9260>, <app.database.models.Group object at 0x0000021D7BBFBCE0>, <app.database.models.Group object at 0x0000021D7BBFAE00>, <app.database.models.Group object at 0x0000021D7BBF8D10>, <app.database.models.Group object at 0x0000021D7BBFB790>, <app.database.models.Group object at 0x0000021D7BBF9370>, <app.database.models.Group object at 0x0000021D7BBF9AE0>, <app.database.models.Group object at 0x0000021D7BBF9480>, <app.database.models.Group object at 0x0000021D7BBF8E20>, <app.database.models.Group object at 0x0000021D7BBF9F20>, <app.database.models.Group object at 0x0000021D7BBF9150>, <app.database.models.Group object at 0x0000021D7BBF8380>, <app.database.models.Group object at 0x0000021D7B728050>, <app.database.models.Group object at 0x0000021D7B728F30>, <app.database.models.Group object at 0x0000021D7B729150>, <app.database.models.Group object at 0x0000021D7B729040>, <app.database.models.Group object at 0x0000021D7B72A140>, <app.database.models.Group object at 0x0000021D7B728160>, <app.database.models.Group object at 0x0000021D7B728270>, <app.database.models.Group object at 0x0000021D7B72AAD0>, <app.database.models.Group object at 0x0000021D7B728380>, <app.database.models.Group object at 0x0000021D7B72AE00>, <app.database.models.Group object at 0x0000021D7B7289E0>, <app.database.models.Group object at 0x0000021D7B7288D0>, <app.database.models.Group object at 0x0000021D7B7287C0>, <app.database.models.Group object at 0x0000021D7B72ACF0>, <app.database.models.Group object at 0x0000021D7B72AF10>, <app.database.models.Group object at 0x0000021D7B72B020>, <app.database.models.Group object at 0x0000021D7B72B130>, <app.database.models.Group object at 0x0000021D7B72B240>, <app.database.models.Group object at 0x0000021D7B72B350>, <app.database.models.Group object at 0x0000021D7B72B460>, <app.database.models.Group object at 0x0000021D7B72B570>, <app.database.models.Group object at 0x0000021D7B72B680>, <app.database.models.Group object at 0x0000021D7B72B790>, <app.database.models.Group object at 0x0000021D7B72B8A0>, <app.database.models.Group object at 0x0000021D7B72B9B0>, <app.database.models.Group object at 0x0000021D7B72BAC0>, <app.database.models.Group object at 0x0000021D7B72BBD0>, <app.database.models.Group object at 0x0000021D7B72BCE0>, <app.database.models.Group object at 0x0000021D7B72BDF0>, <app.database.models.Group object at 0x0000021D7B72BF00>, <app.database.models.Group object at 0x0000021D7B728490>, <app.database.models.Group object at 0x0000021D7B7285A0>, <app.database.models.Group object at 0x0000021D7B72ABE0>, <app.database.models.Group object at 0x0000021D7BC067A0>, <app.database.models.Group object at 0x0000021D7BC04AF0>, <app.database.models.Group object at 0x0000021D7BC04380>, <app.database.models.Group object at 0x0000021D7BC04270>, <app.database.models.Group object at 0x0000021D7BC05F20>, <app.database.models.Group object at 0x0000021D7BC048D0>, <app.database.models.Group object at 0x0000021D7BC059D0>, <app.database.models.Group object at 0x0000021D7BC069C0>, <app.database.models.Group object at 0x0000021D7BC05BF0>, <app.database.models.Group object at 0x0000021D7BC04D10>, <app.database.models.Group object at 0x0000021D7BC06580>, <app.database.models.Group object at 0x0000021D7BC05480>, <app.database.models.Group object at 0x0000021D7BC05AE0>, <app.database.models.Group object at 0x0000021D7BC045A0>, <app.database.models.Group object at 0x0000021D7BC04160>, <app.database.models.Group object at 0x0000021D7BC04E20>, <app.database.models.Group object at 0x0000021D7BC06360>]
2025-07-16 21:23:33,418 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:23:33,418 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 4...
2025-07-16 21:23:33,420 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 open orders.
2025-07-16 21:23:33,420 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 4...
2025-07-16 21:23:33,422 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 pending orders.
2025-07-16 21:23:33,422 - WARNING - app - [AUTO-CUTOFF] User 4 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:23:33,422 - INFO - app - [AUTO-CUTOFF] Processing user 5 (live), group: Admin
2025-07-16 21:23:33,422 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 5 (live) from cache/DB...
2025-07-16 21:23:33,424 - WARNING - app - [AUTO-CUTOFF] No user data found for user 5 (live). Skipping portfolio update.
2025-07-16 21:23:33,424 - INFO - app - [AUTO-CUTOFF] Processing user 8 (live), group: string
2025-07-16 21:23:33,424 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 8 (live) from cache/DB...
2025-07-16 21:23:33,427 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group string...
2025-07-16 21:23:33,428 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'string' from cache: None
2025-07-16 21:23:33,428 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'string', fetching from DB.
2025-07-16 21:23:33,430 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'string': []
2025-07-16 21:23:33,430 - ERROR - app - [AUTO-CUTOFF] Group symbol settings not found in DB for group 'string'. Skipping portfolio update for user 8.
2025-07-16 21:23:33,430 - INFO - app - [AUTO-CUTOFF] Processing user 9 (live), group: Standard
2025-07-16 21:23:33,430 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 9 (live) from cache/DB...
2025-07-16 21:23:33,433 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:23:33,433 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:23:33,433 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:23:33,437 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x0000021D7B72A140>, <app.database.models.Group object at 0x0000021D7B728F30>, <app.database.models.Group object at 0x0000021D7B728270>, <app.database.models.Group object at 0x0000021D7B72AAD0>, <app.database.models.Group object at 0x0000021D7B728380>, <app.database.models.Group object at 0x0000021D7B72AE00>, <app.database.models.Group object at 0x0000021D7B7289E0>, <app.database.models.Group object at 0x0000021D7B7288D0>, <app.database.models.Group object at 0x0000021D7B7287C0>, <app.database.models.Group object at 0x0000021D7B72ACF0>, <app.database.models.Group object at 0x0000021D7B72AF10>, <app.database.models.Group object at 0x0000021D7B72B020>, <app.database.models.Group object at 0x0000021D7B72B130>, <app.database.models.Group object at 0x0000021D7B72B240>, <app.database.models.Group object at 0x0000021D7B72B350>, <app.database.models.Group object at 0x0000021D7B72B460>, <app.database.models.Group object at 0x0000021D7B72B570>, <app.database.models.Group object at 0x0000021D7B72B680>, <app.database.models.Group object at 0x0000021D7B72B790>, <app.database.models.Group object at 0x0000021D7B72B8A0>, <app.database.models.Group object at 0x0000021D7B72B9B0>, <app.database.models.Group object at 0x0000021D7B72BAC0>, <app.database.models.Group object at 0x0000021D7B72BBD0>, <app.database.models.Group object at 0x0000021D7B72BCE0>, <app.database.models.Group object at 0x0000021D7B72BDF0>, <app.database.models.Group object at 0x0000021D7B72BF00>, <app.database.models.Group object at 0x0000021D7B728490>, <app.database.models.Group object at 0x0000021D7B7285A0>, <app.database.models.Group object at 0x0000021D7B72ABE0>, <app.database.models.Group object at 0x0000021D7B64F9B0>, <app.database.models.Group object at 0x0000021D7BBF88D0>, <app.database.models.Group object at 0x0000021D7BBF97B0>, <app.database.models.Group object at 0x0000021D7BBF8270>, <app.database.models.Group object at 0x0000021D7BBF8AF0>, <app.database.models.Group object at 0x0000021D7BBF86B0>, <app.database.models.Group object at 0x0000021D7BBF8C00>, <app.database.models.Group object at 0x0000021D7BBFA030>, <app.database.models.Group object at 0x0000021D7BBF87C0>, <app.database.models.Group object at 0x0000021D7BBF85A0>, <app.database.models.Group object at 0x0000021D7BBF89E0>, <app.database.models.Group object at 0x0000021D7BBF8050>, <app.database.models.Group object at 0x0000021D7BBF9590>, <app.database.models.Group object at 0x0000021D7BBF9E10>, <app.database.models.Group object at 0x0000021D7BBFB8A0>, <app.database.models.Group object at 0x0000021D7BBFA140>, <app.database.models.Group object at 0x0000021D7BBF8490>, <app.database.models.Group object at 0x0000021D7BBF9BF0>, <app.database.models.Group object at 0x0000021D7BBF9260>, <app.database.models.Group object at 0x0000021D7BBFBCE0>, <app.database.models.Group object at 0x0000021D7BBFAE00>, <app.database.models.Group object at 0x0000021D7BBF8D10>, <app.database.models.Group object at 0x0000021D7BBFB790>, <app.database.models.Group object at 0x0000021D7BBF9370>, <app.database.models.Group object at 0x0000021D7BBF9AE0>, <app.database.models.Group object at 0x0000021D7BBF9480>, <app.database.models.Group object at 0x0000021D7BBF8E20>, <app.database.models.Group object at 0x0000021D7BBF9F20>, <app.database.models.Group object at 0x0000021D7BBF9150>, <app.database.models.Group object at 0x0000021D7BBF8380>, <app.database.models.Group object at 0x0000021D7BBFB130>, <app.database.models.Group object at 0x0000021D7BBF9D00>, <app.database.models.Group object at 0x0000021D7BBF96A0>, <app.database.models.Group object at 0x0000021D7BC067A0>, <app.database.models.Group object at 0x0000021D7BC04AF0>, <app.database.models.Group object at 0x0000021D7BC04380>, <app.database.models.Group object at 0x0000021D7BC04270>, <app.database.models.Group object at 0x0000021D7BC05F20>, <app.database.models.Group object at 0x0000021D7BC048D0>, <app.database.models.Group object at 0x0000021D7BC059D0>, <app.database.models.Group object at 0x0000021D7BC069C0>, <app.database.models.Group object at 0x0000021D7BC05BF0>, <app.database.models.Group object at 0x0000021D7BC04D10>, <app.database.models.Group object at 0x0000021D7BC06580>, <app.database.models.Group object at 0x0000021D7BC05480>, <app.database.models.Group object at 0x0000021D7BC05AE0>, <app.database.models.Group object at 0x0000021D7BC045A0>, <app.database.models.Group object at 0x0000021D7BC04160>]
2025-07-16 21:23:33,438 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:23:33,438 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 9...
2025-07-16 21:23:33,439 - DEBUG - app - [AUTO-CUTOFF] User 9 has 1 open orders.
2025-07-16 21:23:33,439 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 9...
2025-07-16 21:23:33,440 - DEBUG - app - [AUTO-CUTOFF] User 9 has 0 pending orders.
2025-07-16 21:23:33,440 - DEBUG - app - [AUTO-CUTOFF] User 9 total positions for portfolio calculation: 1
2025-07-16 21:23:33,441 - DEBUG - app - [AUTO-CUTOFF] User 9 adjusted market prices: {}
2025-07-16 21:23:33,441 - DEBUG - app - [AUTO-CUTOFF] User 9 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:23:33,441 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 9...
2025-07-16 21:23:33,842 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol BTCUSD
2025-07-16 21:23:33,842 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 99.90738313495848051220798402% which is below threshold 100.0%
2025-07-16 21:23:33,842 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 9: {'balance': '9794.75000000', 'equity': '9794.75000000', 'margin': '9803.83000000', 'free_margin': '-9.08000000', 'profit_loss': '0.0', 'margin_level': '99.90738313495848051220798402', 'positions': [{'order_id': '1000341-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.41000000'), 'order_price': Decimal('141921.60000000'), 'margin': Decimal('9773.83000000'), 'contract_value': Decimal('0.41000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('244.35000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': True}
2025-07-16 21:23:33,842 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 9: {'balance': '9794.75000000', 'equity': '9794.75000000', 'margin': '9803.83000000', 'free_margin': '-9.08000000', 'profit_loss': '0.0', 'margin_level': '99.90738313495848051220798402', 'positions_with_pnl': [{'order_id': '1000341-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.41000000'), 'order_price': Decimal('141921.60000000'), 'margin': Decimal('9773.83000000'), 'contract_value': Decimal('0.41000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('244.35000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': True}
2025-07-16 21:23:33,843 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:33,844 - INFO - app - [AUTO-CUTOFF] User 9 margin_level: 99.90738313495848051220798402
2025-07-16 21:23:35,463 - DEBUG - app.firebase_stream - Firebase listener triggered (28). Event Type: patch, Path: /. Timestamp: 1752726215.4630284
2025-07-16 21:23:35,463 - DEBUG - app.firebase_stream - Prepared batch update for 15 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0437000000'}, 'GBPAUD': {'b': '2.0654000000', 'o': '2.0652300000'}, 'USDCNH': {'b': '7.1821200000', 'o': '7.1821100000'}, 'USDSGD': {'b': '1.2857000000', 'o'
2025-07-16 21:23:35,464 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0437000000'}, 'GBPAUD': {'b': '2.0654000000', 'o': '2.0652300000'}, 'USDCNH': {'b': '7.1821200000', 'o': '7.1821100000'}, 'USDSGD': {'b': '1.2857000000', 'o'...
2025-07-16 21:23:35,464 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:37,734 - INFO - app - [AUTO-CUTOFF] Sent margin call warning email (HTML) to user 9 at kodideladinesh123@gmail.com
2025-07-16 21:23:37,736 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:37,736 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 9
2025-07-16 21:23:37,737 - INFO - app - [AUTO-CUTOFF] Processing user 10 (live), group: Group B
2025-07-16 21:23:37,737 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 10 (live) from cache/DB...
2025-07-16 21:23:37,757 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:23:37,763 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:23:37,763 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:23:37,776 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000021D7BC049E0>, <app.database.models.Group object at 0x0000021D7BC06F10>, <app.database.models.Group object at 0x0000021D7BC06690>, <app.database.models.Group object at 0x0000021D7BC06030>, <app.database.models.Group object at 0x0000021D7BC057B0>, <app.database.models.Group object at 0x0000021D7BC06470>, <app.database.models.Group object at 0x0000021D7BC06E00>, <app.database.models.Group object at 0x0000021D7BC06BE0>, <app.database.models.Group object at 0x0000021D7BC04E20>, <app.database.models.Group object at 0x0000021D7BC05370>, <app.database.models.Group object at 0x0000021D7BC07020>, <app.database.models.Group object at 0x0000021D7BC07130>, <app.database.models.Group object at 0x0000021D7BC07240>, <app.database.models.Group object at 0x0000021D7BC07350>, <app.database.models.Group object at 0x0000021D7BC07460>, <app.database.models.Group object at 0x0000021D7BC07570>, <app.database.models.Group object at 0x0000021D7BC07680>, <app.database.models.Group object at 0x0000021D7BC07790>, <app.database.models.Group object at 0x0000021D7BC078A0>, <app.database.models.Group object at 0x0000021D7BC079B0>, <app.database.models.Group object at 0x0000021D7BC07AC0>, <app.database.models.Group object at 0x0000021D7BC07BD0>, <app.database.models.Group object at 0x0000021D7BC07CE0>, <app.database.models.Group object at 0x0000021D7BC07DF0>, <app.database.models.Group object at 0x0000021D7BC07F00>, <app.database.models.Group object at 0x0000021D7BB54050>, <app.database.models.Group object at 0x0000021D7BB54160>, <app.database.models.Group object at 0x0000021D7BB54270>, <app.database.models.Group object at 0x0000021D7BB54380>, <app.database.models.Group object at 0x0000021D7BB54490>, <app.database.models.Group object at 0x0000021D7BB545A0>, <app.database.models.Group object at 0x0000021D7BB546B0>, <app.database.models.Group object at 0x0000021D7BB547C0>, <app.database.models.Group object at 0x0000021D7BB548D0>, <app.database.models.Group object at 0x0000021D7BB549E0>, <app.database.models.Group object at 0x0000021D7BB54AF0>, <app.database.models.Group object at 0x0000021D7BB54C00>, <app.database.models.Group object at 0x0000021D7BB54D10>, <app.database.models.Group object at 0x0000021D7BB54E20>, <app.database.models.Group object at 0x0000021D7BB54F30>, <app.database.models.Group object at 0x0000021D7BB55040>, <app.database.models.Group object at 0x0000021D7BB55150>, <app.database.models.Group object at 0x0000021D7BB55260>, <app.database.models.Group object at 0x0000021D7BB55370>, <app.database.models.Group object at 0x0000021D7BB55480>, <app.database.models.Group object at 0x0000021D7BB55590>, <app.database.models.Group object at 0x0000021D7BB556A0>, <app.database.models.Group object at 0x0000021D7BB557B0>, <app.database.models.Group object at 0x0000021D7BB558C0>, <app.database.models.Group object at 0x0000021D7BB559D0>, <app.database.models.Group object at 0x0000021D7BB55AE0>, <app.database.models.Group object at 0x0000021D7BB55BF0>, <app.database.models.Group object at 0x0000021D7BB55D00>, <app.database.models.Group object at 0x0000021D7BB55E10>, <app.database.models.Group object at 0x0000021D7BB55F20>, <app.database.models.Group object at 0x0000021D7BB56030>, <app.database.models.Group object at 0x0000021D7BB56140>, <app.database.models.Group object at 0x0000021D7BB56250>, <app.database.models.Group object at 0x0000021D7BB56360>, <app.database.models.Group object at 0x0000021D7BB56470>, <app.database.models.Group object at 0x0000021D7BB56580>, <app.database.models.Group object at 0x0000021D7BB56690>, <app.database.models.Group object at 0x0000021D7BB567A0>, <app.database.models.Group object at 0x0000021D7BB568B0>, <app.database.models.Group object at 0x0000021D7BB569C0>, <app.database.models.Group object at 0x0000021D7BB56AD0>, <app.database.models.Group object at 0x0000021D7BB56BE0>, <app.database.models.Group object at 0x0000021D7BB56CF0>, <app.database.models.Group object at 0x0000021D7BB56E00>, <app.database.models.Group object at 0x0000021D7BB56F10>, <app.database.models.Group object at 0x0000021D7BB57020>, <app.database.models.Group object at 0x0000021D7BB57130>, <app.database.models.Group object at 0x0000021D7BB57240>, <app.database.models.Group object at 0x0000021D7BB57350>, <app.database.models.Group object at 0x0000021D7BB57460>, <app.database.models.Group object at 0x0000021D7BB57570>, <app.database.models.Group object at 0x0000021D7BB57680>, <app.database.models.Group object at 0x0000021D7BB57790>, <app.database.models.Group object at 0x0000021D7BB578A0>]
2025-07-16 21:23:37,781 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:23:37,782 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 10...
2025-07-16 21:23:37,786 - DEBUG - app - [AUTO-CUTOFF] User 10 has 0 open orders.
2025-07-16 21:23:37,786 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 10...
2025-07-16 21:23:37,792 - DEBUG - app - [AUTO-CUTOFF] User 10 has 0 pending orders.
2025-07-16 21:23:37,792 - WARNING - app - [AUTO-CUTOFF] User 10 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:23:37,792 - INFO - app - [AUTO-CUTOFF] Processing user 11 (live), group: Group B
2025-07-16 21:23:37,792 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 11 (live) from cache/DB...
2025-07-16 21:23:37,799 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:23:37,800 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:23:37,800 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:23:37,806 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000021D7BC05AE0>, <app.database.models.Group object at 0x0000021D7BC05F20>, <app.database.models.Group object at 0x0000021D7BC069C0>, <app.database.models.Group object at 0x0000021D7BC06AD0>, <app.database.models.Group object at 0x0000021D7BC06140>, <app.database.models.Group object at 0x0000021D7BC04380>, <app.database.models.Group object at 0x0000021D7BC05590>, <app.database.models.Group object at 0x0000021D7BC05480>, <app.database.models.Group object at 0x0000021D7BC056A0>, <app.database.models.Group object at 0x0000021D7BC068B0>, <app.database.models.Group object at 0x0000021D7BC04C00>, <app.database.models.Group object at 0x0000021D7BC04270>, <app.database.models.Group object at 0x0000021D7BC05D00>, <app.database.models.Group object at 0x0000021D7BC059D0>, <app.database.models.Group object at 0x0000021D7BC048D0>, <app.database.models.Group object at 0x0000021D7BC05BF0>, <app.database.models.Group object at 0x0000021D7BC045A0>, <app.database.models.Group object at 0x0000021D7BC04160>, <app.database.models.Group object at 0x0000021D7B72A140>, <app.database.models.Group object at 0x0000021D7B728F30>, <app.database.models.Group object at 0x0000021D7B728270>, <app.database.models.Group object at 0x0000021D7B72AAD0>, <app.database.models.Group object at 0x0000021D7B728380>, <app.database.models.Group object at 0x0000021D7B72AE00>, <app.database.models.Group object at 0x0000021D7B7289E0>, <app.database.models.Group object at 0x0000021D7B7288D0>, <app.database.models.Group object at 0x0000021D7B7287C0>, <app.database.models.Group object at 0x0000021D7B72ACF0>, <app.database.models.Group object at 0x0000021D7B72AF10>, <app.database.models.Group object at 0x0000021D7B72B020>, <app.database.models.Group object at 0x0000021D7B72B130>, <app.database.models.Group object at 0x0000021D7B72B240>, <app.database.models.Group object at 0x0000021D7B72B350>, <app.database.models.Group object at 0x0000021D7B72B460>, <app.database.models.Group object at 0x0000021D7B72B570>, <app.database.models.Group object at 0x0000021D7B72B680>, <app.database.models.Group object at 0x0000021D7B72B790>, <app.database.models.Group object at 0x0000021D7B72B8A0>, <app.database.models.Group object at 0x0000021D7B72B9B0>, <app.database.models.Group object at 0x0000021D7B72BAC0>, <app.database.models.Group object at 0x0000021D7B72BBD0>, <app.database.models.Group object at 0x0000021D7B72BCE0>, <app.database.models.Group object at 0x0000021D7B72BDF0>, <app.database.models.Group object at 0x0000021D7B72BF00>, <app.database.models.Group object at 0x0000021D7B728490>, <app.database.models.Group object at 0x0000021D7B7285A0>, <app.database.models.Group object at 0x0000021D7B72ABE0>, <app.database.models.Group object at 0x0000021D7B728050>, <app.database.models.Group object at 0x0000021D7B64D9D0>, <app.database.models.Group object at 0x0000021D7B64F9B0>, <app.database.models.Group object at 0x0000021D7B64F8A0>, <app.database.models.Group object at 0x0000021D7BBF8160>, <app.database.models.Group object at 0x0000021D7BBF88D0>, <app.database.models.Group object at 0x0000021D7BBF97B0>, <app.database.models.Group object at 0x0000021D7BBF8270>, <app.database.models.Group object at 0x0000021D7BBF8AF0>, <app.database.models.Group object at 0x0000021D7BBF86B0>, <app.database.models.Group object at 0x0000021D7BBF8C00>, <app.database.models.Group object at 0x0000021D7BBFA030>, <app.database.models.Group object at 0x0000021D7BBF87C0>, <app.database.models.Group object at 0x0000021D7BBF85A0>, <app.database.models.Group object at 0x0000021D7BBF89E0>, <app.database.models.Group object at 0x0000021D7BBF8050>, <app.database.models.Group object at 0x0000021D7BBF9590>, <app.database.models.Group object at 0x0000021D7BBF9E10>, <app.database.models.Group object at 0x0000021D7BBFB8A0>, <app.database.models.Group object at 0x0000021D7BBFA140>, <app.database.models.Group object at 0x0000021D7BBF8490>, <app.database.models.Group object at 0x0000021D7BBF9BF0>, <app.database.models.Group object at 0x0000021D7BBF9260>, <app.database.models.Group object at 0x0000021D7BBFBCE0>, <app.database.models.Group object at 0x0000021D7BBFAE00>, <app.database.models.Group object at 0x0000021D7BBF8D10>, <app.database.models.Group object at 0x0000021D7BBFB790>, <app.database.models.Group object at 0x0000021D7BBF9370>, <app.database.models.Group object at 0x0000021D7BBF9AE0>, <app.database.models.Group object at 0x0000021D7BBF9480>, <app.database.models.Group object at 0x0000021D7BBF8E20>, <app.database.models.Group object at 0x0000021D7BBF9F20>]
2025-07-16 21:23:37,807 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:23:37,807 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 11...
2025-07-16 21:23:37,810 - DEBUG - app - [AUTO-CUTOFF] User 11 has 0 open orders.
2025-07-16 21:23:37,810 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 11...
2025-07-16 21:23:37,813 - DEBUG - app - [AUTO-CUTOFF] User 11 has 0 pending orders.
2025-07-16 21:23:37,813 - WARNING - app - [AUTO-CUTOFF] User 11 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:23:37,813 - INFO - app - [AUTO-CUTOFF] Processing user 12 (live), group: Standard
2025-07-16 21:23:37,813 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 12 (live) from cache/DB...
2025-07-16 21:23:37,818 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:23:37,819 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:23:37,819 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:23:37,825 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x0000021D7BC06470>, <app.database.models.Group object at 0x0000021D7BC049E0>, <app.database.models.Group object at 0x0000021D7BC06E00>, <app.database.models.Group object at 0x0000021D7BC06BE0>, <app.database.models.Group object at 0x0000021D7BC04E20>, <app.database.models.Group object at 0x0000021D7BC05370>, <app.database.models.Group object at 0x0000021D7BC07020>, <app.database.models.Group object at 0x0000021D7BC07130>, <app.database.models.Group object at 0x0000021D7BC07240>, <app.database.models.Group object at 0x0000021D7BC07350>, <app.database.models.Group object at 0x0000021D7BC07460>, <app.database.models.Group object at 0x0000021D7BC07570>, <app.database.models.Group object at 0x0000021D7BC07680>, <app.database.models.Group object at 0x0000021D7BC07790>, <app.database.models.Group object at 0x0000021D7BC078A0>, <app.database.models.Group object at 0x0000021D7BC079B0>, <app.database.models.Group object at 0x0000021D7BC07AC0>, <app.database.models.Group object at 0x0000021D7BC07BD0>, <app.database.models.Group object at 0x0000021D7BC07CE0>, <app.database.models.Group object at 0x0000021D7BC07DF0>, <app.database.models.Group object at 0x0000021D7BC07F00>, <app.database.models.Group object at 0x0000021D7BC04AF0>, <app.database.models.Group object at 0x0000021D7BC06CF0>, <app.database.models.Group object at 0x0000021D7BC06580>, <app.database.models.Group object at 0x0000021D7BC04D10>, <app.database.models.Group object at 0x0000021D7BBF9150>, <app.database.models.Group object at 0x0000021D7BBF8380>, <app.database.models.Group object at 0x0000021D7BBFB130>, <app.database.models.Group object at 0x0000021D7BBF9D00>, <app.database.models.Group object at 0x0000021D7BBF96A0>, <app.database.models.Group object at 0x0000021D7BBF8F30>, <app.database.models.Group object at 0x0000021D7BBF9040>, <app.database.models.Group object at 0x0000021D7BB54050>, <app.database.models.Group object at 0x0000021D7BB54160>, <app.database.models.Group object at 0x0000021D7BB54270>, <app.database.models.Group object at 0x0000021D7BB54380>, <app.database.models.Group object at 0x0000021D7BB54490>, <app.database.models.Group object at 0x0000021D7BB545A0>, <app.database.models.Group object at 0x0000021D7BB546B0>, <app.database.models.Group object at 0x0000021D7BB547C0>, <app.database.models.Group object at 0x0000021D7BB548D0>, <app.database.models.Group object at 0x0000021D7BB549E0>, <app.database.models.Group object at 0x0000021D7BB54AF0>, <app.database.models.Group object at 0x0000021D7BB54C00>, <app.database.models.Group object at 0x0000021D7BB54D10>, <app.database.models.Group object at 0x0000021D7BB54E20>, <app.database.models.Group object at 0x0000021D7BB54F30>, <app.database.models.Group object at 0x0000021D7BB55040>, <app.database.models.Group object at 0x0000021D7BB55150>, <app.database.models.Group object at 0x0000021D7BB55260>, <app.database.models.Group object at 0x0000021D7BB55370>, <app.database.models.Group object at 0x0000021D7BB55480>, <app.database.models.Group object at 0x0000021D7BB55590>, <app.database.models.Group object at 0x0000021D7BB556A0>, <app.database.models.Group object at 0x0000021D7BB557B0>, <app.database.models.Group object at 0x0000021D7BB558C0>, <app.database.models.Group object at 0x0000021D7BB559D0>, <app.database.models.Group object at 0x0000021D7BB55AE0>, <app.database.models.Group object at 0x0000021D7BB55BF0>, <app.database.models.Group object at 0x0000021D7BB55D00>, <app.database.models.Group object at 0x0000021D7BB55E10>, <app.database.models.Group object at 0x0000021D7BB55F20>, <app.database.models.Group object at 0x0000021D7BB56030>, <app.database.models.Group object at 0x0000021D7BB56140>, <app.database.models.Group object at 0x0000021D7BB56250>, <app.database.models.Group object at 0x0000021D7BB56360>, <app.database.models.Group object at 0x0000021D7BB56470>, <app.database.models.Group object at 0x0000021D7BB56580>, <app.database.models.Group object at 0x0000021D7BB56690>, <app.database.models.Group object at 0x0000021D7BB567A0>, <app.database.models.Group object at 0x0000021D7BB568B0>, <app.database.models.Group object at 0x0000021D7BB569C0>, <app.database.models.Group object at 0x0000021D7BB56AD0>, <app.database.models.Group object at 0x0000021D7BB56BE0>, <app.database.models.Group object at 0x0000021D7BB56CF0>, <app.database.models.Group object at 0x0000021D7BB56E00>, <app.database.models.Group object at 0x0000021D7BB56F10>]
2025-07-16 21:23:37,826 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:23:37,826 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 12...
2025-07-16 21:23:37,828 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 open orders.
2025-07-16 21:23:37,829 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 12...
2025-07-16 21:23:37,831 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 pending orders.
2025-07-16 21:23:37,831 - WARNING - app - [AUTO-CUTOFF] User 12 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:23:37,831 - INFO - app - [AUTO-CUTOFF] Processing user 13 (live), group: Group B
2025-07-16 21:23:37,831 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 13 (live) from cache/DB...
2025-07-16 21:23:37,836 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:23:37,837 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:23:37,837 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:23:37,843 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000021D7B72AE00>, <app.database.models.Group object at 0x0000021D7B72A140>, <app.database.models.Group object at 0x0000021D7B7289E0>, <app.database.models.Group object at 0x0000021D7B7288D0>, <app.database.models.Group object at 0x0000021D7B7287C0>, <app.database.models.Group object at 0x0000021D7B72ACF0>, <app.database.models.Group object at 0x0000021D7B72AF10>, <app.database.models.Group object at 0x0000021D7B72B020>, <app.database.models.Group object at 0x0000021D7B72B130>, <app.database.models.Group object at 0x0000021D7B72B240>, <app.database.models.Group object at 0x0000021D7B72B350>, <app.database.models.Group object at 0x0000021D7B72B460>, <app.database.models.Group object at 0x0000021D7B72B570>, <app.database.models.Group object at 0x0000021D7B72B680>, <app.database.models.Group object at 0x0000021D7B72B790>, <app.database.models.Group object at 0x0000021D7B72B8A0>, <app.database.models.Group object at 0x0000021D7B72B9B0>, <app.database.models.Group object at 0x0000021D7B72BAC0>, <app.database.models.Group object at 0x0000021D7B72BBD0>, <app.database.models.Group object at 0x0000021D7B72BCE0>, <app.database.models.Group object at 0x0000021D7B72BDF0>, <app.database.models.Group object at 0x0000021D7B72BF00>, <app.database.models.Group object at 0x0000021D7B728490>, <app.database.models.Group object at 0x0000021D7B7285A0>, <app.database.models.Group object at 0x0000021D7B72ABE0>, <app.database.models.Group object at 0x0000021D7B728050>, <app.database.models.Group object at 0x0000021D7B64D9D0>, <app.database.models.Group object at 0x0000021D7B64F9B0>, <app.database.models.Group object at 0x0000021D7B64F8A0>, <app.database.models.Group object at 0x0000021D7BBF8160>, <app.database.models.Group object at 0x0000021D7BBF88D0>, <app.database.models.Group object at 0x0000021D7BBF97B0>, <app.database.models.Group object at 0x0000021D7BBF8270>, <app.database.models.Group object at 0x0000021D7BBF8AF0>, <app.database.models.Group object at 0x0000021D7BBF86B0>, <app.database.models.Group object at 0x0000021D7BBF8C00>, <app.database.models.Group object at 0x0000021D7BBFA030>, <app.database.models.Group object at 0x0000021D7BBF87C0>, <app.database.models.Group object at 0x0000021D7BBF85A0>, <app.database.models.Group object at 0x0000021D7BBF89E0>, <app.database.models.Group object at 0x0000021D7BBF8050>, <app.database.models.Group object at 0x0000021D7BBF9590>, <app.database.models.Group object at 0x0000021D7BBF9E10>, <app.database.models.Group object at 0x0000021D7BBFB8A0>, <app.database.models.Group object at 0x0000021D7BBFA140>, <app.database.models.Group object at 0x0000021D7BBF8490>, <app.database.models.Group object at 0x0000021D7BBF9BF0>, <app.database.models.Group object at 0x0000021D7BBF9260>, <app.database.models.Group object at 0x0000021D7BBFBCE0>, <app.database.models.Group object at 0x0000021D7BBFAE00>, <app.database.models.Group object at 0x0000021D7BBF8D10>, <app.database.models.Group object at 0x0000021D7BBFB790>, <app.database.models.Group object at 0x0000021D7BBF9370>, <app.database.models.Group object at 0x0000021D7BBF9AE0>, <app.database.models.Group object at 0x0000021D7BBF9480>, <app.database.models.Group object at 0x0000021D7BBF8E20>, <app.database.models.Group object at 0x0000021D7BBF9F20>, <app.database.models.Group object at 0x0000021D7BC05AE0>, <app.database.models.Group object at 0x0000021D7BC05F20>, <app.database.models.Group object at 0x0000021D7BC069C0>, <app.database.models.Group object at 0x0000021D7BC06AD0>, <app.database.models.Group object at 0x0000021D7BC06140>, <app.database.models.Group object at 0x0000021D7BC04380>, <app.database.models.Group object at 0x0000021D7BC05590>, <app.database.models.Group object at 0x0000021D7BC05480>, <app.database.models.Group object at 0x0000021D7BC056A0>, <app.database.models.Group object at 0x0000021D7BC068B0>, <app.database.models.Group object at 0x0000021D7BC04C00>, <app.database.models.Group object at 0x0000021D7BC04270>, <app.database.models.Group object at 0x0000021D7BC05D00>, <app.database.models.Group object at 0x0000021D7BC059D0>, <app.database.models.Group object at 0x0000021D7BC048D0>, <app.database.models.Group object at 0x0000021D7BC05BF0>, <app.database.models.Group object at 0x0000021D7BC045A0>, <app.database.models.Group object at 0x0000021D7BC04160>, <app.database.models.Group object at 0x0000021D7BC06690>, <app.database.models.Group object at 0x0000021D7BC057B0>, <app.database.models.Group object at 0x0000021D7BC06F10>, <app.database.models.Group object at 0x0000021D7BC06030>]
2025-07-16 21:23:37,844 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:23:37,844 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 13...
2025-07-16 21:23:37,846 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 open orders.
2025-07-16 21:23:37,846 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 13...
2025-07-16 21:23:37,849 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 pending orders.
2025-07-16 21:23:37,849 - WARNING - app - [AUTO-CUTOFF] User 13 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:23:37,849 - INFO - app - [AUTO-CUTOFF] Processing user 14 (live), group: Standard
2025-07-16 21:23:37,849 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 14 (live) from cache/DB...
2025-07-16 21:23:37,853 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:23:37,853 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:23:37,853 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:23:37,859 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x0000021D7BC05370>, <app.database.models.Group object at 0x0000021D7BC06470>, <app.database.models.Group object at 0x0000021D7BC07020>, <app.database.models.Group object at 0x0000021D7BC07130>, <app.database.models.Group object at 0x0000021D7BC07240>, <app.database.models.Group object at 0x0000021D7BC07350>, <app.database.models.Group object at 0x0000021D7BC07460>, <app.database.models.Group object at 0x0000021D7BC07570>, <app.database.models.Group object at 0x0000021D7BC07680>, <app.database.models.Group object at 0x0000021D7BC07790>, <app.database.models.Group object at 0x0000021D7BC078A0>, <app.database.models.Group object at 0x0000021D7BC079B0>, <app.database.models.Group object at 0x0000021D7BC07AC0>, <app.database.models.Group object at 0x0000021D7BC07BD0>, <app.database.models.Group object at 0x0000021D7BC07CE0>, <app.database.models.Group object at 0x0000021D7BC07DF0>, <app.database.models.Group object at 0x0000021D7BC07F00>, <app.database.models.Group object at 0x0000021D7BC04AF0>, <app.database.models.Group object at 0x0000021D7BC06CF0>, <app.database.models.Group object at 0x0000021D7BC06580>, <app.database.models.Group object at 0x0000021D7BC04D10>, <app.database.models.Group object at 0x0000021D7BBF9150>, <app.database.models.Group object at 0x0000021D7BBF8380>, <app.database.models.Group object at 0x0000021D7BBFB130>, <app.database.models.Group object at 0x0000021D7BBF9D00>, <app.database.models.Group object at 0x0000021D7BBF96A0>, <app.database.models.Group object at 0x0000021D7BBF8F30>, <app.database.models.Group object at 0x0000021D7BBF9040>, <app.database.models.Group object at 0x0000021D7B728270>, <app.database.models.Group object at 0x0000021D7B728380>, <app.database.models.Group object at 0x0000021D7B728F30>, <app.database.models.Group object at 0x0000021D7B72AAD0>, <app.database.models.Group object at 0x0000021D7BB54050>, <app.database.models.Group object at 0x0000021D7BB54160>, <app.database.models.Group object at 0x0000021D7BB54270>, <app.database.models.Group object at 0x0000021D7BB54380>, <app.database.models.Group object at 0x0000021D7BB54490>, <app.database.models.Group object at 0x0000021D7BB545A0>, <app.database.models.Group object at 0x0000021D7BB546B0>, <app.database.models.Group object at 0x0000021D7BB547C0>, <app.database.models.Group object at 0x0000021D7BB548D0>, <app.database.models.Group object at 0x0000021D7BB549E0>, <app.database.models.Group object at 0x0000021D7BB54AF0>, <app.database.models.Group object at 0x0000021D7BB54C00>, <app.database.models.Group object at 0x0000021D7BB54D10>, <app.database.models.Group object at 0x0000021D7BB54E20>, <app.database.models.Group object at 0x0000021D7BB54F30>, <app.database.models.Group object at 0x0000021D7BB55040>, <app.database.models.Group object at 0x0000021D7BB55150>, <app.database.models.Group object at 0x0000021D7BB55260>, <app.database.models.Group object at 0x0000021D7BB55370>, <app.database.models.Group object at 0x0000021D7BB55480>, <app.database.models.Group object at 0x0000021D7BB55590>, <app.database.models.Group object at 0x0000021D7BB556A0>, <app.database.models.Group object at 0x0000021D7BB557B0>, <app.database.models.Group object at 0x0000021D7BB558C0>, <app.database.models.Group object at 0x0000021D7BB559D0>, <app.database.models.Group object at 0x0000021D7BB55AE0>, <app.database.models.Group object at 0x0000021D7BB55BF0>, <app.database.models.Group object at 0x0000021D7BB55D00>, <app.database.models.Group object at 0x0000021D7BB55E10>, <app.database.models.Group object at 0x0000021D7BB55F20>, <app.database.models.Group object at 0x0000021D7BB56030>, <app.database.models.Group object at 0x0000021D7BB56140>, <app.database.models.Group object at 0x0000021D7BB56250>, <app.database.models.Group object at 0x0000021D7BB56360>, <app.database.models.Group object at 0x0000021D7BB56470>, <app.database.models.Group object at 0x0000021D7BB56580>, <app.database.models.Group object at 0x0000021D7BB56690>, <app.database.models.Group object at 0x0000021D7BB567A0>, <app.database.models.Group object at 0x0000021D7BB568B0>, <app.database.models.Group object at 0x0000021D7BB569C0>, <app.database.models.Group object at 0x0000021D7BB56AD0>, <app.database.models.Group object at 0x0000021D7BB56BE0>, <app.database.models.Group object at 0x0000021D7BB56CF0>, <app.database.models.Group object at 0x0000021D7BB56E00>, <app.database.models.Group object at 0x0000021D7BB56F10>]
2025-07-16 21:23:37,860 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:23:37,860 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 14...
2025-07-16 21:23:37,862 - DEBUG - app - [AUTO-CUTOFF] User 14 has 3 open orders.
2025-07-16 21:23:37,862 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 14...
2025-07-16 21:23:37,864 - DEBUG - app - [AUTO-CUTOFF] User 14 has 0 pending orders.
2025-07-16 21:23:37,864 - DEBUG - app - [AUTO-CUTOFF] User 14 total positions for portfolio calculation: 3
2025-07-16 21:23:37,866 - DEBUG - app - [AUTO-CUTOFF] User 14 adjusted market prices: {}
2025-07-16 21:23:37,866 - DEBUG - app - [AUTO-CUTOFF] User 14 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:23:37,866 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 14...
2025-07-16 21:23:38,156 - DEBUG - app.firebase_stream - Firebase listener triggered (29). Event Type: patch, Path: /. Timestamp: 1752726218.1564434
2025-07-16 21:23:38,156 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0494000000', 'o': '13.0440000000'}, 'GBPAUD': {'b': '2.0654200000', 'o': '2.0652300000'}, 'USDJPY': {'b': '148.5890000000', 'o': '148.5840000000'}, 'CADCHF': {'b': '0.5853100000',
2025-07-16 21:23:38,157 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0494000000', 'o': '13.0440000000'}, 'GBPAUD': {'b': '2.0654200000', 'o': '2.0652300000'}, 'USDJPY': {'b': '148.5890000000', 'o': '148.5840000000'}, 'CADCHF': {'b': '0.5853100000',...
2025-07-16 21:23:38,157 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:38,166 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol BTCUSD
2025-07-16 21:23:38,167 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:23:38,167 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:23:38,167 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 14: {'balance': '9902.02000000', 'equity': '9902.02000000', 'margin': '9494.47000000', 'free_margin': '407.55000000', 'profit_loss': '0.0', 'margin_level': '104.2924986860772639231047125', 'positions': [{'order_id': '1000330-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.40000000'), 'order_price': Decimal('141908.50000000'), 'margin': Decimal('9422.73000000'), 'contract_value': Decimal('0.40000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('235.57000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000332-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('65.21517371'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000333-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('6.52134765'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:23:38,167 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 14: {'balance': '9902.02000000', 'equity': '9902.02000000', 'margin': '9494.47000000', 'free_margin': '407.55000000', 'profit_loss': '0.0', 'margin_level': '104.2924986860772639231047125', 'positions_with_pnl': [{'order_id': '1000330-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.40000000'), 'order_price': Decimal('141908.50000000'), 'margin': Decimal('9422.73000000'), 'contract_value': Decimal('0.40000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('235.57000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000332-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('65.21517371'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000333-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('6.52134765'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:23:38,169 - INFO - app - [AUTO-CUTOFF] User 14 margin_level: 104.2924986860772639231047125
2025-07-16 21:23:38,174 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 14
2025-07-16 21:23:38,174 - INFO - app - [AUTO-CUTOFF] Processing user 16 (live), group: Standard
2025-07-16 21:23:38,174 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 16 (live) from cache/DB...
2025-07-16 21:23:38,199 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:23:38,203 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:23:38,204 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:23:38,220 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x0000021D7B72B8A0>, <app.database.models.Group object at 0x0000021D7B72B570>, <app.database.models.Group object at 0x0000021D7B7288D0>, <app.database.models.Group object at 0x0000021D7B72B020>, <app.database.models.Group object at 0x0000021D7B72B350>, <app.database.models.Group object at 0x0000021D7B72BF00>, <app.database.models.Group object at 0x0000021D7BBF88D0>, <app.database.models.Group object at 0x0000021D7BBF97B0>, <app.database.models.Group object at 0x0000021D7BBF8270>, <app.database.models.Group object at 0x0000021D7BBF8AF0>, <app.database.models.Group object at 0x0000021D7BBF86B0>, <app.database.models.Group object at 0x0000021D7BBF8C00>, <app.database.models.Group object at 0x0000021D7BBFA030>, <app.database.models.Group object at 0x0000021D7BBF87C0>, <app.database.models.Group object at 0x0000021D7BBF85A0>, <app.database.models.Group object at 0x0000021D7BBF89E0>, <app.database.models.Group object at 0x0000021D7BBF8050>, <app.database.models.Group object at 0x0000021D7BBF9590>, <app.database.models.Group object at 0x0000021D7BBF9E10>, <app.database.models.Group object at 0x0000021D7BBFB8A0>, <app.database.models.Group object at 0x0000021D7BBFA140>, <app.database.models.Group object at 0x0000021D7BBF8490>, <app.database.models.Group object at 0x0000021D7BBF9BF0>, <app.database.models.Group object at 0x0000021D7BBF9260>, <app.database.models.Group object at 0x0000021D7BBFBCE0>, <app.database.models.Group object at 0x0000021D7BBFAE00>, <app.database.models.Group object at 0x0000021D7BBF8D10>, <app.database.models.Group object at 0x0000021D7BBFB790>, <app.database.models.Group object at 0x0000021D7BBF9370>, <app.database.models.Group object at 0x0000021D7BBF9AE0>, <app.database.models.Group object at 0x0000021D7BBF9480>, <app.database.models.Group object at 0x0000021D7BBF8E20>, <app.database.models.Group object at 0x0000021D7BBF9F20>, <app.database.models.Group object at 0x0000021D7BC067A0>, <app.database.models.Group object at 0x0000021D7BC05040>, <app.database.models.Group object at 0x0000021D7BC05AE0>, <app.database.models.Group object at 0x0000021D7BC05F20>, <app.database.models.Group object at 0x0000021D7BC069C0>, <app.database.models.Group object at 0x0000021D7BC06AD0>, <app.database.models.Group object at 0x0000021D7BC06140>, <app.database.models.Group object at 0x0000021D7BC04380>, <app.database.models.Group object at 0x0000021D7BC05590>, <app.database.models.Group object at 0x0000021D7BC05480>, <app.database.models.Group object at 0x0000021D7BC056A0>, <app.database.models.Group object at 0x0000021D7BC068B0>, <app.database.models.Group object at 0x0000021D7BC04C00>, <app.database.models.Group object at 0x0000021D7BC04270>, <app.database.models.Group object at 0x0000021D7BC05D00>, <app.database.models.Group object at 0x0000021D7BC059D0>, <app.database.models.Group object at 0x0000021D7BC048D0>, <app.database.models.Group object at 0x0000021D7BC05BF0>, <app.database.models.Group object at 0x0000021D7BC045A0>, <app.database.models.Group object at 0x0000021D7BC04160>, <app.database.models.Group object at 0x0000021D7BC06690>, <app.database.models.Group object at 0x0000021D7BC057B0>, <app.database.models.Group object at 0x0000021D7BC06F10>, <app.database.models.Group object at 0x0000021D7BC06030>, <app.database.models.Group object at 0x0000021D7BC06E00>, <app.database.models.Group object at 0x0000021D7BC04E20>, <app.database.models.Group object at 0x0000021D7BC049E0>, <app.database.models.Group object at 0x0000021D7BC06BE0>, <app.database.models.Group object at 0x0000021D7BB57020>, <app.database.models.Group object at 0x0000021D7BB57130>, <app.database.models.Group object at 0x0000021D7BB57240>, <app.database.models.Group object at 0x0000021D7BB57350>, <app.database.models.Group object at 0x0000021D7BB57460>, <app.database.models.Group object at 0x0000021D7BB57570>, <app.database.models.Group object at 0x0000021D7BB57680>, <app.database.models.Group object at 0x0000021D7BB57790>, <app.database.models.Group object at 0x0000021D7BB578A0>, <app.database.models.Group object at 0x0000021D7BB579B0>, <app.database.models.Group object at 0x0000021D7BB57AC0>, <app.database.models.Group object at 0x0000021D7BB57BD0>, <app.database.models.Group object at 0x0000021D7BB57CE0>, <app.database.models.Group object at 0x0000021D7BB57DF0>, <app.database.models.Group object at 0x0000021D7BB57F00>, <app.database.models.Group object at 0x0000021D7BB80050>]
2025-07-16 21:23:38,222 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:23:38,222 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 16...
2025-07-16 21:23:38,231 - DEBUG - app - [AUTO-CUTOFF] User 16 has 0 open orders.
2025-07-16 21:23:38,231 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 16...
2025-07-16 21:23:38,237 - DEBUG - app - [AUTO-CUTOFF] User 16 has 0 pending orders.
2025-07-16 21:23:38,238 - WARNING - app - [AUTO-CUTOFF] User 16 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:23:38,238 - INFO - app - [AUTO-CUTOFF] Processing user 17 (live), group: Group B
2025-07-16 21:23:38,238 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 17 (live) from cache/DB...
2025-07-16 21:23:38,259 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:23:38,260 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:23:38,261 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:23:38,272 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000021D7BC04AF0>, <app.database.models.Group object at 0x0000021D7BC07BD0>, <app.database.models.Group object at 0x0000021D7BC07460>, <app.database.models.Group object at 0x0000021D7BC06580>, <app.database.models.Group object at 0x0000021D7BC07790>, <app.database.models.Group object at 0x0000021D7BC06470>, <app.database.models.Group object at 0x0000021D7BC078A0>, <app.database.models.Group object at 0x0000021D7BC05370>, <app.database.models.Group object at 0x0000021D7BC07020>, <app.database.models.Group object at 0x0000021D7BC07680>, <app.database.models.Group object at 0x0000021D7BC07130>, <app.database.models.Group object at 0x0000021D7BC06CF0>, <app.database.models.Group object at 0x0000021D7BC07CE0>, <app.database.models.Group object at 0x0000021D7BC07DF0>, <app.database.models.Group object at 0x0000021D7BC079B0>, <app.database.models.Group object at 0x0000021D7BC07AC0>, <app.database.models.Group object at 0x0000021D7BBFBF00>, <app.database.models.Group object at 0x0000021D7BBF8160>, <app.database.models.Group object at 0x0000021D7BBF9150>, <app.database.models.Group object at 0x0000021D7BBF8380>, <app.database.models.Group object at 0x0000021D7BBFB130>, <app.database.models.Group object at 0x0000021D7BBF9D00>, <app.database.models.Group object at 0x0000021D7BBF96A0>, <app.database.models.Group object at 0x0000021D7BBF8F30>, <app.database.models.Group object at 0x0000021D7BBF9040>, <app.database.models.Group object at 0x0000021D7BB54050>, <app.database.models.Group object at 0x0000021D7BB54160>, <app.database.models.Group object at 0x0000021D7BB54270>, <app.database.models.Group object at 0x0000021D7BB54380>, <app.database.models.Group object at 0x0000021D7BB54490>, <app.database.models.Group object at 0x0000021D7BB545A0>, <app.database.models.Group object at 0x0000021D7BB546B0>, <app.database.models.Group object at 0x0000021D7BB547C0>, <app.database.models.Group object at 0x0000021D7BB548D0>, <app.database.models.Group object at 0x0000021D7BB549E0>, <app.database.models.Group object at 0x0000021D7BB54AF0>, <app.database.models.Group object at 0x0000021D7BB54C00>, <app.database.models.Group object at 0x0000021D7BB54D10>, <app.database.models.Group object at 0x0000021D7BB54E20>, <app.database.models.Group object at 0x0000021D7BB54F30>, <app.database.models.Group object at 0x0000021D7BB55040>, <app.database.models.Group object at 0x0000021D7BB55150>, <app.database.models.Group object at 0x0000021D7BB55260>, <app.database.models.Group object at 0x0000021D7BB55370>, <app.database.models.Group object at 0x0000021D7BB55480>, <app.database.models.Group object at 0x0000021D7BB55590>, <app.database.models.Group object at 0x0000021D7BB556A0>, <app.database.models.Group object at 0x0000021D7BB557B0>, <app.database.models.Group object at 0x0000021D7BB558C0>, <app.database.models.Group object at 0x0000021D7BB559D0>, <app.database.models.Group object at 0x0000021D7BB55AE0>, <app.database.models.Group object at 0x0000021D7BB55BF0>, <app.database.models.Group object at 0x0000021D7BB55D00>, <app.database.models.Group object at 0x0000021D7BB55E10>, <app.database.models.Group object at 0x0000021D7BB55F20>, <app.database.models.Group object at 0x0000021D7BB56030>, <app.database.models.Group object at 0x0000021D7BB56140>, <app.database.models.Group object at 0x0000021D7BB56250>, <app.database.models.Group object at 0x0000021D7BB56360>, <app.database.models.Group object at 0x0000021D7BB56470>, <app.database.models.Group object at 0x0000021D7BB56580>, <app.database.models.Group object at 0x0000021D7BB56690>, <app.database.models.Group object at 0x0000021D7BB567A0>, <app.database.models.Group object at 0x0000021D7BB568B0>, <app.database.models.Group object at 0x0000021D7BB569C0>, <app.database.models.Group object at 0x0000021D7BB56AD0>, <app.database.models.Group object at 0x0000021D7BB56BE0>, <app.database.models.Group object at 0x0000021D7BB56CF0>, <app.database.models.Group object at 0x0000021D7BB56E00>, <app.database.models.Group object at 0x0000021D7BB56F10>, <app.database.models.Group object at 0x0000021D7B728160>, <app.database.models.Group object at 0x0000021D7B72B460>, <app.database.models.Group object at 0x0000021D7B72B130>, <app.database.models.Group object at 0x0000021D7B72ACF0>, <app.database.models.Group object at 0x0000021D7B7285A0>, <app.database.models.Group object at 0x0000021D7B728050>, <app.database.models.Group object at 0x0000021D7B728490>, <app.database.models.Group object at 0x0000021D7B72ABE0>, <app.database.models.Group object at 0x0000021D7B72A140>]
2025-07-16 21:23:38,273 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:23:38,274 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 17...
2025-07-16 21:23:38,277 - DEBUG - app - [AUTO-CUTOFF] User 17 has 0 open orders.
2025-07-16 21:23:38,278 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 17...
2025-07-16 21:23:38,281 - DEBUG - app - [AUTO-CUTOFF] User 17 has 0 pending orders.
2025-07-16 21:23:38,282 - WARNING - app - [AUTO-CUTOFF] User 17 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:23:38,282 - INFO - app - [AUTO-CUTOFF] Processing user 18 (live), group: Group B
2025-07-16 21:23:38,282 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 18 (live) from cache/DB...
2025-07-16 21:23:38,290 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:23:38,291 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:23:38,291 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:23:38,301 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000021D7BBF8C00>, <app.database.models.Group object at 0x0000021D7BBF88D0>, <app.database.models.Group object at 0x0000021D7BBFA030>, <app.database.models.Group object at 0x0000021D7BBF87C0>, <app.database.models.Group object at 0x0000021D7BBF85A0>, <app.database.models.Group object at 0x0000021D7BBF89E0>, <app.database.models.Group object at 0x0000021D7BBF8050>, <app.database.models.Group object at 0x0000021D7BBF9590>, <app.database.models.Group object at 0x0000021D7BBF9E10>, <app.database.models.Group object at 0x0000021D7BBFB8A0>, <app.database.models.Group object at 0x0000021D7BBFA140>, <app.database.models.Group object at 0x0000021D7BBF8490>, <app.database.models.Group object at 0x0000021D7BBF9BF0>, <app.database.models.Group object at 0x0000021D7BBF9260>, <app.database.models.Group object at 0x0000021D7BBFBCE0>, <app.database.models.Group object at 0x0000021D7BBFAE00>, <app.database.models.Group object at 0x0000021D7BBF8D10>, <app.database.models.Group object at 0x0000021D7BBFB790>, <app.database.models.Group object at 0x0000021D7BBF9370>, <app.database.models.Group object at 0x0000021D7BBF9AE0>, <app.database.models.Group object at 0x0000021D7BBF9480>, <app.database.models.Group object at 0x0000021D7BBF8E20>, <app.database.models.Group object at 0x0000021D7BBF9F20>, <app.database.models.Group object at 0x0000021D7BB57020>, <app.database.models.Group object at 0x0000021D7BB57130>, <app.database.models.Group object at 0x0000021D7BB57240>, <app.database.models.Group object at 0x0000021D7BB57350>, <app.database.models.Group object at 0x0000021D7BB57460>, <app.database.models.Group object at 0x0000021D7BB57570>, <app.database.models.Group object at 0x0000021D7BB57680>, <app.database.models.Group object at 0x0000021D7BB57790>, <app.database.models.Group object at 0x0000021D7BB578A0>, <app.database.models.Group object at 0x0000021D7BB579B0>, <app.database.models.Group object at 0x0000021D7BB57AC0>, <app.database.models.Group object at 0x0000021D7BB57BD0>, <app.database.models.Group object at 0x0000021D7BB57CE0>, <app.database.models.Group object at 0x0000021D7BB57DF0>, <app.database.models.Group object at 0x0000021D7BB57F00>, <app.database.models.Group object at 0x0000021D7B64F8A0>, <app.database.models.Group object at 0x0000021D7BC067A0>, <app.database.models.Group object at 0x0000021D7BC05040>, <app.database.models.Group object at 0x0000021D7BC05AE0>, <app.database.models.Group object at 0x0000021D7BC05F20>, <app.database.models.Group object at 0x0000021D7BC069C0>, <app.database.models.Group object at 0x0000021D7BC06AD0>, <app.database.models.Group object at 0x0000021D7BC06140>, <app.database.models.Group object at 0x0000021D7BC04380>, <app.database.models.Group object at 0x0000021D7BC05590>, <app.database.models.Group object at 0x0000021D7BC05480>, <app.database.models.Group object at 0x0000021D7BC056A0>, <app.database.models.Group object at 0x0000021D7BC068B0>, <app.database.models.Group object at 0x0000021D7BC04C00>, <app.database.models.Group object at 0x0000021D7BC04270>, <app.database.models.Group object at 0x0000021D7BC05D00>, <app.database.models.Group object at 0x0000021D7BC059D0>, <app.database.models.Group object at 0x0000021D7BC048D0>, <app.database.models.Group object at 0x0000021D7BC05BF0>, <app.database.models.Group object at 0x0000021D7BC045A0>, <app.database.models.Group object at 0x0000021D7BC04160>, <app.database.models.Group object at 0x0000021D7BC06690>, <app.database.models.Group object at 0x0000021D7BC057B0>, <app.database.models.Group object at 0x0000021D7BC06F10>, <app.database.models.Group object at 0x0000021D7BC06030>, <app.database.models.Group object at 0x0000021D7BC06E00>, <app.database.models.Group object at 0x0000021D7BC04E20>, <app.database.models.Group object at 0x0000021D7BC049E0>, <app.database.models.Group object at 0x0000021D7BC06BE0>, <app.database.models.Group object at 0x0000021D7BC07F00>, <app.database.models.Group object at 0x0000021D7BC07350>, <app.database.models.Group object at 0x0000021D7BC07570>, <app.database.models.Group object at 0x0000021D7B72B8A0>, <app.database.models.Group object at 0x0000021D7B72B570>, <app.database.models.Group object at 0x0000021D7B7288D0>, <app.database.models.Group object at 0x0000021D7B72B020>, <app.database.models.Group object at 0x0000021D7B72B350>, <app.database.models.Group object at 0x0000021D7B72BF00>, <app.database.models.Group object at 0x0000021D7B7287C0>, <app.database.models.Group object at 0x0000021D7B72B9B0>, <app.database.models.Group object at 0x0000021D7B72BAC0>]
2025-07-16 21:23:38,303 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:23:38,303 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 18...
2025-07-16 21:23:38,306 - DEBUG - app - [AUTO-CUTOFF] User 18 has 0 open orders.
2025-07-16 21:23:38,306 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 18...
2025-07-16 21:23:38,309 - DEBUG - app - [AUTO-CUTOFF] User 18 has 0 pending orders.
2025-07-16 21:23:38,309 - WARNING - app - [AUTO-CUTOFF] User 18 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:23:38,310 - INFO - app - [AUTO-CUTOFF] Processing user 19 (live), group: Elite
2025-07-16 21:23:38,310 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 19 (live) from cache/DB...
2025-07-16 21:23:38,318 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Elite...
2025-07-16 21:23:38,319 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Elite' from cache: None
2025-07-16 21:23:38,319 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Elite', fetching from DB.
2025-07-16 21:23:38,327 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Elite': [<app.database.models.Group object at 0x0000021D7BC06470>, <app.database.models.Group object at 0x0000021D7BC04AF0>, <app.database.models.Group object at 0x0000021D7BC078A0>, <app.database.models.Group object at 0x0000021D7BC05370>, <app.database.models.Group object at 0x0000021D7BC07020>, <app.database.models.Group object at 0x0000021D7BC07680>, <app.database.models.Group object at 0x0000021D7BC07130>, <app.database.models.Group object at 0x0000021D7BC06CF0>, <app.database.models.Group object at 0x0000021D7BC07CE0>, <app.database.models.Group object at 0x0000021D7BC07DF0>, <app.database.models.Group object at 0x0000021D7BC079B0>, <app.database.models.Group object at 0x0000021D7BC07AC0>, <app.database.models.Group object at 0x0000021D7BB54050>, <app.database.models.Group object at 0x0000021D7BB54160>, <app.database.models.Group object at 0x0000021D7BB54270>, <app.database.models.Group object at 0x0000021D7BB54380>, <app.database.models.Group object at 0x0000021D7BB54490>, <app.database.models.Group object at 0x0000021D7BB545A0>, <app.database.models.Group object at 0x0000021D7BB546B0>, <app.database.models.Group object at 0x0000021D7BB547C0>, <app.database.models.Group object at 0x0000021D7BB548D0>, <app.database.models.Group object at 0x0000021D7BB549E0>, <app.database.models.Group object at 0x0000021D7BB54AF0>, <app.database.models.Group object at 0x0000021D7BB54C00>, <app.database.models.Group object at 0x0000021D7BB54D10>, <app.database.models.Group object at 0x0000021D7BB54E20>, <app.database.models.Group object at 0x0000021D7BB54F30>, <app.database.models.Group object at 0x0000021D7BB55040>, <app.database.models.Group object at 0x0000021D7BB55150>, <app.database.models.Group object at 0x0000021D7BB55260>, <app.database.models.Group object at 0x0000021D7BB55370>, <app.database.models.Group object at 0x0000021D7BB55480>, <app.database.models.Group object at 0x0000021D7BB55590>, <app.database.models.Group object at 0x0000021D7BB556A0>, <app.database.models.Group object at 0x0000021D7BB557B0>, <app.database.models.Group object at 0x0000021D7BB558C0>, <app.database.models.Group object at 0x0000021D7BB559D0>, <app.database.models.Group object at 0x0000021D7BB55AE0>, <app.database.models.Group object at 0x0000021D7BB55BF0>, <app.database.models.Group object at 0x0000021D7BB55D00>, <app.database.models.Group object at 0x0000021D7BB55E10>, <app.database.models.Group object at 0x0000021D7BB55F20>, <app.database.models.Group object at 0x0000021D7BB56030>, <app.database.models.Group object at 0x0000021D7BB56140>, <app.database.models.Group object at 0x0000021D7BB56250>, <app.database.models.Group object at 0x0000021D7BB56360>, <app.database.models.Group object at 0x0000021D7BB56470>, <app.database.models.Group object at 0x0000021D7BB56580>, <app.database.models.Group object at 0x0000021D7BB56690>, <app.database.models.Group object at 0x0000021D7BB567A0>, <app.database.models.Group object at 0x0000021D7BB568B0>, <app.database.models.Group object at 0x0000021D7BB569C0>, <app.database.models.Group object at 0x0000021D7BB56AD0>, <app.database.models.Group object at 0x0000021D7BB56BE0>, <app.database.models.Group object at 0x0000021D7BB56CF0>, <app.database.models.Group object at 0x0000021D7BB56E00>, <app.database.models.Group object at 0x0000021D7BB56F10>, <app.database.models.Group object at 0x0000021D7BBFBF00>, <app.database.models.Group object at 0x0000021D7BBF8160>, <app.database.models.Group object at 0x0000021D7BBF9150>, <app.database.models.Group object at 0x0000021D7BBF8380>, <app.database.models.Group object at 0x0000021D7BBFB130>, <app.database.models.Group object at 0x0000021D7BBF9D00>, <app.database.models.Group object at 0x0000021D7BBF96A0>, <app.database.models.Group object at 0x0000021D7BBF8F30>, <app.database.models.Group object at 0x0000021D7BBF9040>, <app.database.models.Group object at 0x0000021D7BBF8270>, <app.database.models.Group object at 0x0000021D7BBF86B0>, <app.database.models.Group object at 0x0000021D7BBF97B0>, <app.database.models.Group object at 0x0000021D7BBF8AF0>, <app.database.models.Group object at 0x0000021D7B728160>, <app.database.models.Group object at 0x0000021D7B72B460>, <app.database.models.Group object at 0x0000021D7B72B130>, <app.database.models.Group object at 0x0000021D7B72ACF0>, <app.database.models.Group object at 0x0000021D7B7285A0>, <app.database.models.Group object at 0x0000021D7B728050>, <app.database.models.Group object at 0x0000021D7B728490>]
2025-07-16 21:23:38,328 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Elite': {'sending_orders': 'barclays'}
2025-07-16 21:23:38,329 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 19...
2025-07-16 21:23:38,333 - DEBUG - app - [AUTO-CUTOFF] User 19 has 0 open orders.
2025-07-16 21:23:38,333 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 19...
2025-07-16 21:23:38,336 - DEBUG - app - [AUTO-CUTOFF] User 19 has 0 pending orders.
2025-07-16 21:23:38,336 - WARNING - app - [AUTO-CUTOFF] User 19 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:23:38,336 - INFO - app - [AUTO-CUTOFF] Processing user 20 (live), group: Standard
2025-07-16 21:23:38,336 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 20 (live) from cache/DB...
2025-07-16 21:23:38,342 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:23:38,343 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:23:38,343 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:23:38,352 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x0000021D7BBF89E0>, <app.database.models.Group object at 0x0000021D7BBF8C00>, <app.database.models.Group object at 0x0000021D7BBF8050>, <app.database.models.Group object at 0x0000021D7BBF9590>, <app.database.models.Group object at 0x0000021D7BBF9E10>, <app.database.models.Group object at 0x0000021D7BBFB8A0>, <app.database.models.Group object at 0x0000021D7BBFA140>, <app.database.models.Group object at 0x0000021D7BBF8490>, <app.database.models.Group object at 0x0000021D7BBF9BF0>, <app.database.models.Group object at 0x0000021D7BBF9260>, <app.database.models.Group object at 0x0000021D7BBFBCE0>, <app.database.models.Group object at 0x0000021D7BBFAE00>, <app.database.models.Group object at 0x0000021D7BBF8D10>, <app.database.models.Group object at 0x0000021D7BBFB790>, <app.database.models.Group object at 0x0000021D7BBF9370>, <app.database.models.Group object at 0x0000021D7BBF9AE0>, <app.database.models.Group object at 0x0000021D7BBF9480>, <app.database.models.Group object at 0x0000021D7BBF8E20>, <app.database.models.Group object at 0x0000021D7BBF9F20>, <app.database.models.Group object at 0x0000021D7BB57020>, <app.database.models.Group object at 0x0000021D7BB57130>, <app.database.models.Group object at 0x0000021D7BB57240>, <app.database.models.Group object at 0x0000021D7BB57350>, <app.database.models.Group object at 0x0000021D7BB57460>, <app.database.models.Group object at 0x0000021D7BB57570>, <app.database.models.Group object at 0x0000021D7BB57680>, <app.database.models.Group object at 0x0000021D7BB57790>, <app.database.models.Group object at 0x0000021D7BB578A0>, <app.database.models.Group object at 0x0000021D7BB579B0>, <app.database.models.Group object at 0x0000021D7BB57AC0>, <app.database.models.Group object at 0x0000021D7BB57BD0>, <app.database.models.Group object at 0x0000021D7BB57CE0>, <app.database.models.Group object at 0x0000021D7BB57DF0>, <app.database.models.Group object at 0x0000021D7BB57F00>, <app.database.models.Group object at 0x0000021D7B64F8A0>, <app.database.models.Group object at 0x0000021D7BC067A0>, <app.database.models.Group object at 0x0000021D7BC05040>, <app.database.models.Group object at 0x0000021D7BC05AE0>, <app.database.models.Group object at 0x0000021D7BC05F20>, <app.database.models.Group object at 0x0000021D7BC069C0>, <app.database.models.Group object at 0x0000021D7BC06AD0>, <app.database.models.Group object at 0x0000021D7BC06140>, <app.database.models.Group object at 0x0000021D7BC04380>, <app.database.models.Group object at 0x0000021D7BC05590>, <app.database.models.Group object at 0x0000021D7BC05480>, <app.database.models.Group object at 0x0000021D7BC056A0>, <app.database.models.Group object at 0x0000021D7BC068B0>, <app.database.models.Group object at 0x0000021D7BC04C00>, <app.database.models.Group object at 0x0000021D7BC04270>, <app.database.models.Group object at 0x0000021D7BC05D00>, <app.database.models.Group object at 0x0000021D7BC059D0>, <app.database.models.Group object at 0x0000021D7BC048D0>, <app.database.models.Group object at 0x0000021D7BC05BF0>, <app.database.models.Group object at 0x0000021D7BC045A0>, <app.database.models.Group object at 0x0000021D7BC04160>, <app.database.models.Group object at 0x0000021D7BC06690>, <app.database.models.Group object at 0x0000021D7BC057B0>, <app.database.models.Group object at 0x0000021D7BC06F10>, <app.database.models.Group object at 0x0000021D7BC06030>, <app.database.models.Group object at 0x0000021D7BC06E00>, <app.database.models.Group object at 0x0000021D7BC04E20>, <app.database.models.Group object at 0x0000021D7BC049E0>, <app.database.models.Group object at 0x0000021D7BC06BE0>, <app.database.models.Group object at 0x0000021D7BC07F00>, <app.database.models.Group object at 0x0000021D7BC07350>, <app.database.models.Group object at 0x0000021D7BC07570>, <app.database.models.Group object at 0x0000021D7BC07460>, <app.database.models.Group object at 0x0000021D7BC07790>, <app.database.models.Group object at 0x0000021D7BC07BD0>, <app.database.models.Group object at 0x0000021D7BC06580>, <app.database.models.Group object at 0x0000021D7B72B8A0>, <app.database.models.Group object at 0x0000021D7B72B570>, <app.database.models.Group object at 0x0000021D7B7288D0>, <app.database.models.Group object at 0x0000021D7B72B020>, <app.database.models.Group object at 0x0000021D7B72B350>, <app.database.models.Group object at 0x0000021D7B72BF00>, <app.database.models.Group object at 0x0000021D7B7287C0>]
2025-07-16 21:23:38,354 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:23:38,354 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 20...
2025-07-16 21:23:38,358 - DEBUG - app - [AUTO-CUTOFF] User 20 has 0 open orders.
2025-07-16 21:23:38,358 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 20...
2025-07-16 21:23:38,362 - DEBUG - app - [AUTO-CUTOFF] User 20 has 0 pending orders.
2025-07-16 21:23:38,362 - WARNING - app - [AUTO-CUTOFF] User 20 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:23:38,362 - INFO - app - [AUTO-CUTOFF] Processing user 21 (live), group: Group B
2025-07-16 21:23:38,362 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 21 (live) from cache/DB...
2025-07-16 21:23:38,369 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:23:38,370 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:23:38,370 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:23:38,381 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000021D7BC07680>, <app.database.models.Group object at 0x0000021D7BC06470>, <app.database.models.Group object at 0x0000021D7BC07130>, <app.database.models.Group object at 0x0000021D7BC06CF0>, <app.database.models.Group object at 0x0000021D7BC07CE0>, <app.database.models.Group object at 0x0000021D7BC07DF0>, <app.database.models.Group object at 0x0000021D7BC079B0>, <app.database.models.Group object at 0x0000021D7BC07AC0>, <app.database.models.Group object at 0x0000021D7BB54050>, <app.database.models.Group object at 0x0000021D7BB54160>, <app.database.models.Group object at 0x0000021D7BB54270>, <app.database.models.Group object at 0x0000021D7BB54380>, <app.database.models.Group object at 0x0000021D7BB54490>, <app.database.models.Group object at 0x0000021D7BB545A0>, <app.database.models.Group object at 0x0000021D7BB546B0>, <app.database.models.Group object at 0x0000021D7BB547C0>, <app.database.models.Group object at 0x0000021D7BB548D0>, <app.database.models.Group object at 0x0000021D7BB549E0>, <app.database.models.Group object at 0x0000021D7BB54AF0>, <app.database.models.Group object at 0x0000021D7BB54C00>, <app.database.models.Group object at 0x0000021D7BB54D10>, <app.database.models.Group object at 0x0000021D7BB54E20>, <app.database.models.Group object at 0x0000021D7BB54F30>, <app.database.models.Group object at 0x0000021D7BB55040>, <app.database.models.Group object at 0x0000021D7BB55150>, <app.database.models.Group object at 0x0000021D7BB55260>, <app.database.models.Group object at 0x0000021D7BB55370>, <app.database.models.Group object at 0x0000021D7BB55480>, <app.database.models.Group object at 0x0000021D7BB55590>, <app.database.models.Group object at 0x0000021D7BB556A0>, <app.database.models.Group object at 0x0000021D7BB557B0>, <app.database.models.Group object at 0x0000021D7BB558C0>, <app.database.models.Group object at 0x0000021D7BB559D0>, <app.database.models.Group object at 0x0000021D7BB55AE0>, <app.database.models.Group object at 0x0000021D7BB55BF0>, <app.database.models.Group object at 0x0000021D7BB55D00>, <app.database.models.Group object at 0x0000021D7BB55E10>, <app.database.models.Group object at 0x0000021D7BB55F20>, <app.database.models.Group object at 0x0000021D7BB56030>, <app.database.models.Group object at 0x0000021D7BB56140>, <app.database.models.Group object at 0x0000021D7BB56250>, <app.database.models.Group object at 0x0000021D7BB56360>, <app.database.models.Group object at 0x0000021D7BB56470>, <app.database.models.Group object at 0x0000021D7BB56580>, <app.database.models.Group object at 0x0000021D7BB56690>, <app.database.models.Group object at 0x0000021D7BB567A0>, <app.database.models.Group object at 0x0000021D7BB568B0>, <app.database.models.Group object at 0x0000021D7BB569C0>, <app.database.models.Group object at 0x0000021D7BB56AD0>, <app.database.models.Group object at 0x0000021D7BB56BE0>, <app.database.models.Group object at 0x0000021D7BB56CF0>, <app.database.models.Group object at 0x0000021D7BB56E00>, <app.database.models.Group object at 0x0000021D7BB56F10>, <app.database.models.Group object at 0x0000021D7BBFBF00>, <app.database.models.Group object at 0x0000021D7BBF8160>, <app.database.models.Group object at 0x0000021D7BBF9150>, <app.database.models.Group object at 0x0000021D7BBF8380>, <app.database.models.Group object at 0x0000021D7BBFB130>, <app.database.models.Group object at 0x0000021D7BBF9D00>, <app.database.models.Group object at 0x0000021D7BBF96A0>, <app.database.models.Group object at 0x0000021D7BBF8F30>, <app.database.models.Group object at 0x0000021D7BBF9040>, <app.database.models.Group object at 0x0000021D7BBF8270>, <app.database.models.Group object at 0x0000021D7BBF86B0>, <app.database.models.Group object at 0x0000021D7BBF97B0>, <app.database.models.Group object at 0x0000021D7BBF8AF0>, <app.database.models.Group object at 0x0000021D7BBFA030>, <app.database.models.Group object at 0x0000021D7BBF85A0>, <app.database.models.Group object at 0x0000021D7BBF88D0>, <app.database.models.Group object at 0x0000021D7BBF87C0>, <app.database.models.Group object at 0x0000021D7B728160>, <app.database.models.Group object at 0x0000021D7B72B460>, <app.database.models.Group object at 0x0000021D7B72B130>, <app.database.models.Group object at 0x0000021D7B72ACF0>, <app.database.models.Group object at 0x0000021D7B7285A0>, <app.database.models.Group object at 0x0000021D7B728050>, <app.database.models.Group object at 0x0000021D7B728490>, <app.database.models.Group object at 0x0000021D7B72B9B0>, <app.database.models.Group object at 0x0000021D7B72BAC0>]
2025-07-16 21:23:38,383 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:23:38,383 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 21...
2025-07-16 21:23:38,387 - DEBUG - app - [AUTO-CUTOFF] User 21 has 0 open orders.
2025-07-16 21:23:38,387 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 21...
2025-07-16 21:23:38,390 - DEBUG - app - [AUTO-CUTOFF] User 21 has 0 pending orders.
2025-07-16 21:23:38,391 - WARNING - app - [AUTO-CUTOFF] User 21 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:23:38,391 - INFO - app - [AUTO-CUTOFF] Processing user 22 (live), group: VIP
2025-07-16 21:23:38,391 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 22 (live) from cache/DB...
2025-07-16 21:23:38,396 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group VIP...
2025-07-16 21:23:38,397 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'VIP' from cache: None
2025-07-16 21:23:38,397 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'VIP', fetching from DB.
2025-07-16 21:23:38,407 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'VIP': [<app.database.models.Group object at 0x0000021D7BBFB8A0>, <app.database.models.Group object at 0x0000021D7BBF89E0>, <app.database.models.Group object at 0x0000021D7BBFA140>, <app.database.models.Group object at 0x0000021D7BBF8490>, <app.database.models.Group object at 0x0000021D7BBF9BF0>, <app.database.models.Group object at 0x0000021D7BBF9260>, <app.database.models.Group object at 0x0000021D7BBFBCE0>, <app.database.models.Group object at 0x0000021D7BBFAE00>, <app.database.models.Group object at 0x0000021D7BBF8D10>, <app.database.models.Group object at 0x0000021D7BBFB790>, <app.database.models.Group object at 0x0000021D7BBF9370>, <app.database.models.Group object at 0x0000021D7BBF9AE0>, <app.database.models.Group object at 0x0000021D7BBF9480>, <app.database.models.Group object at 0x0000021D7BBF8E20>, <app.database.models.Group object at 0x0000021D7BBF9F20>, <app.database.models.Group object at 0x0000021D7BB57020>, <app.database.models.Group object at 0x0000021D7BB57130>, <app.database.models.Group object at 0x0000021D7BB57240>, <app.database.models.Group object at 0x0000021D7BB57350>, <app.database.models.Group object at 0x0000021D7BB57460>, <app.database.models.Group object at 0x0000021D7BB57570>, <app.database.models.Group object at 0x0000021D7BB57680>, <app.database.models.Group object at 0x0000021D7BB57790>, <app.database.models.Group object at 0x0000021D7BB578A0>, <app.database.models.Group object at 0x0000021D7BB579B0>, <app.database.models.Group object at 0x0000021D7BB57AC0>, <app.database.models.Group object at 0x0000021D7BB57BD0>, <app.database.models.Group object at 0x0000021D7BB57CE0>, <app.database.models.Group object at 0x0000021D7BB57DF0>, <app.database.models.Group object at 0x0000021D7BB57F00>, <app.database.models.Group object at 0x0000021D7B64F8A0>, <app.database.models.Group object at 0x0000021D7BC067A0>, <app.database.models.Group object at 0x0000021D7BC05040>, <app.database.models.Group object at 0x0000021D7BC05AE0>, <app.database.models.Group object at 0x0000021D7BC05F20>, <app.database.models.Group object at 0x0000021D7BC069C0>, <app.database.models.Group object at 0x0000021D7BC06AD0>, <app.database.models.Group object at 0x0000021D7BC06140>, <app.database.models.Group object at 0x0000021D7BC04380>, <app.database.models.Group object at 0x0000021D7BC05590>, <app.database.models.Group object at 0x0000021D7BC05480>, <app.database.models.Group object at 0x0000021D7BC056A0>, <app.database.models.Group object at 0x0000021D7BC068B0>, <app.database.models.Group object at 0x0000021D7BC04C00>, <app.database.models.Group object at 0x0000021D7BC04270>, <app.database.models.Group object at 0x0000021D7BC05D00>, <app.database.models.Group object at 0x0000021D7BC059D0>, <app.database.models.Group object at 0x0000021D7BC048D0>, <app.database.models.Group object at 0x0000021D7BC05BF0>, <app.database.models.Group object at 0x0000021D7BC045A0>, <app.database.models.Group object at 0x0000021D7BC04160>, <app.database.models.Group object at 0x0000021D7BC06690>, <app.database.models.Group object at 0x0000021D7BC057B0>, <app.database.models.Group object at 0x0000021D7BC06F10>, <app.database.models.Group object at 0x0000021D7BC06030>, <app.database.models.Group object at 0x0000021D7BC06E00>, <app.database.models.Group object at 0x0000021D7BC04E20>, <app.database.models.Group object at 0x0000021D7BC049E0>, <app.database.models.Group object at 0x0000021D7BC06BE0>, <app.database.models.Group object at 0x0000021D7BC07F00>, <app.database.models.Group object at 0x0000021D7BC07350>, <app.database.models.Group object at 0x0000021D7BC07570>, <app.database.models.Group object at 0x0000021D7BC07460>, <app.database.models.Group object at 0x0000021D7BC07790>, <app.database.models.Group object at 0x0000021D7BC07BD0>, <app.database.models.Group object at 0x0000021D7BC06580>, <app.database.models.Group object at 0x0000021D7BC078A0>, <app.database.models.Group object at 0x0000021D7BC07020>, <app.database.models.Group object at 0x0000021D7BC04AF0>, <app.database.models.Group object at 0x0000021D7BC05370>, <app.database.models.Group object at 0x0000021D7B72B8A0>, <app.database.models.Group object at 0x0000021D7B72B570>, <app.database.models.Group object at 0x0000021D7B7288D0>, <app.database.models.Group object at 0x0000021D7B72B020>, <app.database.models.Group object at 0x0000021D7B72B350>, <app.database.models.Group object at 0x0000021D7B72BF00>, <app.database.models.Group object at 0x0000021D7B7287C0>]
2025-07-16 21:23:38,408 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'VIP': {'sending_orders': 'barclays'}
2025-07-16 21:23:38,408 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 22...
2025-07-16 21:23:38,412 - DEBUG - app - [AUTO-CUTOFF] User 22 has 0 open orders.
2025-07-16 21:23:38,412 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 22...
2025-07-16 21:23:38,416 - DEBUG - app - [AUTO-CUTOFF] User 22 has 0 pending orders.
2025-07-16 21:23:38,416 - WARNING - app - [AUTO-CUTOFF] User 22 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:23:38,416 - INFO - app - [AUTO-CUTOFF] Processing user 23 (live), group: Group B
2025-07-16 21:23:38,416 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 23 (live) from cache/DB...
2025-07-16 21:23:38,422 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:23:38,423 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:23:38,423 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:23:38,432 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000021D7BC07DF0>, <app.database.models.Group object at 0x0000021D7BC07680>, <app.database.models.Group object at 0x0000021D7BC079B0>, <app.database.models.Group object at 0x0000021D7BC07AC0>, <app.database.models.Group object at 0x0000021D7BB54050>, <app.database.models.Group object at 0x0000021D7BB54160>, <app.database.models.Group object at 0x0000021D7BB54270>, <app.database.models.Group object at 0x0000021D7BB54380>, <app.database.models.Group object at 0x0000021D7BB54490>, <app.database.models.Group object at 0x0000021D7BB545A0>, <app.database.models.Group object at 0x0000021D7BB546B0>, <app.database.models.Group object at 0x0000021D7BB547C0>, <app.database.models.Group object at 0x0000021D7BB548D0>, <app.database.models.Group object at 0x0000021D7BB549E0>, <app.database.models.Group object at 0x0000021D7BB54AF0>, <app.database.models.Group object at 0x0000021D7BB54C00>, <app.database.models.Group object at 0x0000021D7BB54D10>, <app.database.models.Group object at 0x0000021D7BB54E20>, <app.database.models.Group object at 0x0000021D7BB54F30>, <app.database.models.Group object at 0x0000021D7BB55040>, <app.database.models.Group object at 0x0000021D7BB55150>, <app.database.models.Group object at 0x0000021D7BB55260>, <app.database.models.Group object at 0x0000021D7BB55370>, <app.database.models.Group object at 0x0000021D7BB55480>, <app.database.models.Group object at 0x0000021D7BB55590>, <app.database.models.Group object at 0x0000021D7BB556A0>, <app.database.models.Group object at 0x0000021D7BB557B0>, <app.database.models.Group object at 0x0000021D7BB558C0>, <app.database.models.Group object at 0x0000021D7BB559D0>, <app.database.models.Group object at 0x0000021D7BB55AE0>, <app.database.models.Group object at 0x0000021D7BB55BF0>, <app.database.models.Group object at 0x0000021D7BB55D00>, <app.database.models.Group object at 0x0000021D7BB55E10>, <app.database.models.Group object at 0x0000021D7BB55F20>, <app.database.models.Group object at 0x0000021D7BB56030>, <app.database.models.Group object at 0x0000021D7BB56140>, <app.database.models.Group object at 0x0000021D7BB56250>, <app.database.models.Group object at 0x0000021D7BB56360>, <app.database.models.Group object at 0x0000021D7BB56470>, <app.database.models.Group object at 0x0000021D7BB56580>, <app.database.models.Group object at 0x0000021D7BB56690>, <app.database.models.Group object at 0x0000021D7BB567A0>, <app.database.models.Group object at 0x0000021D7BB568B0>, <app.database.models.Group object at 0x0000021D7BB569C0>, <app.database.models.Group object at 0x0000021D7BB56AD0>, <app.database.models.Group object at 0x0000021D7BB56BE0>, <app.database.models.Group object at 0x0000021D7BB56CF0>, <app.database.models.Group object at 0x0000021D7BB56E00>, <app.database.models.Group object at 0x0000021D7BB56F10>, <app.database.models.Group object at 0x0000021D7BBFBF00>, <app.database.models.Group object at 0x0000021D7BBF8160>, <app.database.models.Group object at 0x0000021D7BBF9150>, <app.database.models.Group object at 0x0000021D7BBF8380>, <app.database.models.Group object at 0x0000021D7BBFB130>, <app.database.models.Group object at 0x0000021D7BBF9D00>, <app.database.models.Group object at 0x0000021D7BBF96A0>, <app.database.models.Group object at 0x0000021D7BBF8F30>, <app.database.models.Group object at 0x0000021D7BBF9040>, <app.database.models.Group object at 0x0000021D7BBF8270>, <app.database.models.Group object at 0x0000021D7BBF86B0>, <app.database.models.Group object at 0x0000021D7BBF97B0>, <app.database.models.Group object at 0x0000021D7BBF8AF0>, <app.database.models.Group object at 0x0000021D7BBFA030>, <app.database.models.Group object at 0x0000021D7BBF85A0>, <app.database.models.Group object at 0x0000021D7BBF88D0>, <app.database.models.Group object at 0x0000021D7BBF87C0>, <app.database.models.Group object at 0x0000021D7BBF8050>, <app.database.models.Group object at 0x0000021D7BBF9E10>, <app.database.models.Group object at 0x0000021D7BBF8C00>, <app.database.models.Group object at 0x0000021D7BBF9590>, <app.database.models.Group object at 0x0000021D7B728160>, <app.database.models.Group object at 0x0000021D7B72B460>, <app.database.models.Group object at 0x0000021D7B72B130>, <app.database.models.Group object at 0x0000021D7B72ACF0>, <app.database.models.Group object at 0x0000021D7B7285A0>, <app.database.models.Group object at 0x0000021D7B728050>, <app.database.models.Group object at 0x0000021D7B728490>, <app.database.models.Group object at 0x0000021D7B72B9B0>, <app.database.models.Group object at 0x0000021D7B72BAC0>]
2025-07-16 21:23:38,434 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:23:38,434 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 23...
2025-07-16 21:23:38,438 - DEBUG - app - [AUTO-CUTOFF] User 23 has 0 open orders.
2025-07-16 21:23:38,438 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 23...
2025-07-16 21:23:38,441 - DEBUG - app - [AUTO-CUTOFF] User 23 has 0 pending orders.
2025-07-16 21:23:38,441 - WARNING - app - [AUTO-CUTOFF] User 23 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:23:38,441 - INFO - app - [AUTO-CUTOFF] Processing user 25 (live), group: Group B
2025-07-16 21:23:38,441 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 25 (live) from cache/DB...
2025-07-16 21:23:38,447 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:23:38,447 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:23:38,448 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:23:38,458 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000021D7BBF9260>, <app.database.models.Group object at 0x0000021D7BBFB8A0>, <app.database.models.Group object at 0x0000021D7BBFBCE0>, <app.database.models.Group object at 0x0000021D7BBFAE00>, <app.database.models.Group object at 0x0000021D7BBF8D10>, <app.database.models.Group object at 0x0000021D7BBFB790>, <app.database.models.Group object at 0x0000021D7BBF9370>, <app.database.models.Group object at 0x0000021D7BBF9AE0>, <app.database.models.Group object at 0x0000021D7BBF9480>, <app.database.models.Group object at 0x0000021D7BBF8E20>, <app.database.models.Group object at 0x0000021D7BBF9F20>, <app.database.models.Group object at 0x0000021D7BB57020>, <app.database.models.Group object at 0x0000021D7BB57130>, <app.database.models.Group object at 0x0000021D7BB57240>, <app.database.models.Group object at 0x0000021D7BB57350>, <app.database.models.Group object at 0x0000021D7BB57460>, <app.database.models.Group object at 0x0000021D7BB57570>, <app.database.models.Group object at 0x0000021D7BB57680>, <app.database.models.Group object at 0x0000021D7BB57790>, <app.database.models.Group object at 0x0000021D7BB578A0>, <app.database.models.Group object at 0x0000021D7BB579B0>, <app.database.models.Group object at 0x0000021D7BB57AC0>, <app.database.models.Group object at 0x0000021D7BB57BD0>, <app.database.models.Group object at 0x0000021D7BB57CE0>, <app.database.models.Group object at 0x0000021D7BB57DF0>, <app.database.models.Group object at 0x0000021D7BB57F00>, <app.database.models.Group object at 0x0000021D7B64F8A0>, <app.database.models.Group object at 0x0000021D7BC067A0>, <app.database.models.Group object at 0x0000021D7BC05040>, <app.database.models.Group object at 0x0000021D7BC05AE0>, <app.database.models.Group object at 0x0000021D7BC05F20>, <app.database.models.Group object at 0x0000021D7BC069C0>, <app.database.models.Group object at 0x0000021D7BC06AD0>, <app.database.models.Group object at 0x0000021D7BC06140>, <app.database.models.Group object at 0x0000021D7BC04380>, <app.database.models.Group object at 0x0000021D7BC05590>, <app.database.models.Group object at 0x0000021D7BC05480>, <app.database.models.Group object at 0x0000021D7BC056A0>, <app.database.models.Group object at 0x0000021D7BC068B0>, <app.database.models.Group object at 0x0000021D7BC04C00>, <app.database.models.Group object at 0x0000021D7BC04270>, <app.database.models.Group object at 0x0000021D7BC05D00>, <app.database.models.Group object at 0x0000021D7BC059D0>, <app.database.models.Group object at 0x0000021D7BC048D0>, <app.database.models.Group object at 0x0000021D7BC05BF0>, <app.database.models.Group object at 0x0000021D7BC045A0>, <app.database.models.Group object at 0x0000021D7BC04160>, <app.database.models.Group object at 0x0000021D7BC06690>, <app.database.models.Group object at 0x0000021D7BC057B0>, <app.database.models.Group object at 0x0000021D7BC06F10>, <app.database.models.Group object at 0x0000021D7BC06030>, <app.database.models.Group object at 0x0000021D7BC06E00>, <app.database.models.Group object at 0x0000021D7BC04E20>, <app.database.models.Group object at 0x0000021D7BC049E0>, <app.database.models.Group object at 0x0000021D7BC06BE0>, <app.database.models.Group object at 0x0000021D7BC07F00>, <app.database.models.Group object at 0x0000021D7BC07350>, <app.database.models.Group object at 0x0000021D7BC07570>, <app.database.models.Group object at 0x0000021D7BC07460>, <app.database.models.Group object at 0x0000021D7BC07790>, <app.database.models.Group object at 0x0000021D7BC07BD0>, <app.database.models.Group object at 0x0000021D7BC06580>, <app.database.models.Group object at 0x0000021D7BC078A0>, <app.database.models.Group object at 0x0000021D7BC07020>, <app.database.models.Group object at 0x0000021D7BC04AF0>, <app.database.models.Group object at 0x0000021D7BC05370>, <app.database.models.Group object at 0x0000021D7BC07130>, <app.database.models.Group object at 0x0000021D7BC07CE0>, <app.database.models.Group object at 0x0000021D7BC06470>, <app.database.models.Group object at 0x0000021D7BC06CF0>, <app.database.models.Group object at 0x0000021D7B72B8A0>, <app.database.models.Group object at 0x0000021D7B72B570>, <app.database.models.Group object at 0x0000021D7B7288D0>, <app.database.models.Group object at 0x0000021D7B72B020>, <app.database.models.Group object at 0x0000021D7B72B350>, <app.database.models.Group object at 0x0000021D7B72BF00>, <app.database.models.Group object at 0x0000021D7B7287C0>, <app.database.models.Group object at 0x0000021D7B72ABE0>, <app.database.models.Group object at 0x0000021D7B72A140>]
2025-07-16 21:23:38,459 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:23:38,459 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 25...
2025-07-16 21:23:38,463 - DEBUG - app - [AUTO-CUTOFF] User 25 has 0 open orders.
2025-07-16 21:23:38,463 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 25...
2025-07-16 21:23:38,467 - DEBUG - app - [AUTO-CUTOFF] User 25 has 0 pending orders.
2025-07-16 21:23:38,468 - WARNING - app - [AUTO-CUTOFF] User 25 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:23:38,469 - INFO - app - [AUTO-CUTOFF] Processing user 26 (live), group: Royal+
2025-07-16 21:23:38,469 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 26 (live) from cache/DB...
2025-07-16 21:23:38,479 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Royal+...
2025-07-16 21:23:38,480 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Royal+' from cache: None
2025-07-16 21:23:38,480 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Royal+', fetching from DB.
2025-07-16 21:23:38,489 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Royal+': [<app.database.models.Group object at 0x0000021D7BB54050>, <app.database.models.Group object at 0x0000021D7BB54160>, <app.database.models.Group object at 0x0000021D7BB54270>, <app.database.models.Group object at 0x0000021D7BB54380>, <app.database.models.Group object at 0x0000021D7BB54490>, <app.database.models.Group object at 0x0000021D7BB545A0>, <app.database.models.Group object at 0x0000021D7BB546B0>, <app.database.models.Group object at 0x0000021D7BB547C0>, <app.database.models.Group object at 0x0000021D7BB548D0>, <app.database.models.Group object at 0x0000021D7BB549E0>, <app.database.models.Group object at 0x0000021D7BB54AF0>, <app.database.models.Group object at 0x0000021D7BB54C00>, <app.database.models.Group object at 0x0000021D7BB54D10>, <app.database.models.Group object at 0x0000021D7BB54E20>, <app.database.models.Group object at 0x0000021D7BB54F30>, <app.database.models.Group object at 0x0000021D7BB55040>, <app.database.models.Group object at 0x0000021D7BB55150>, <app.database.models.Group object at 0x0000021D7BB55260>, <app.database.models.Group object at 0x0000021D7BB55370>, <app.database.models.Group object at 0x0000021D7BB55480>, <app.database.models.Group object at 0x0000021D7BB55590>, <app.database.models.Group object at 0x0000021D7BB556A0>, <app.database.models.Group object at 0x0000021D7BB557B0>, <app.database.models.Group object at 0x0000021D7BB558C0>, <app.database.models.Group object at 0x0000021D7BB559D0>, <app.database.models.Group object at 0x0000021D7BB55AE0>, <app.database.models.Group object at 0x0000021D7BB55BF0>, <app.database.models.Group object at 0x0000021D7BB55D00>, <app.database.models.Group object at 0x0000021D7BB55E10>, <app.database.models.Group object at 0x0000021D7BB55F20>, <app.database.models.Group object at 0x0000021D7BB56030>, <app.database.models.Group object at 0x0000021D7BB56140>, <app.database.models.Group object at 0x0000021D7BB56250>, <app.database.models.Group object at 0x0000021D7BB56360>, <app.database.models.Group object at 0x0000021D7BB56470>, <app.database.models.Group object at 0x0000021D7BB56580>, <app.database.models.Group object at 0x0000021D7BB56690>, <app.database.models.Group object at 0x0000021D7BB567A0>, <app.database.models.Group object at 0x0000021D7BB568B0>, <app.database.models.Group object at 0x0000021D7BB569C0>, <app.database.models.Group object at 0x0000021D7BB56AD0>, <app.database.models.Group object at 0x0000021D7BB56BE0>, <app.database.models.Group object at 0x0000021D7BB56CF0>, <app.database.models.Group object at 0x0000021D7BB56E00>, <app.database.models.Group object at 0x0000021D7BB56F10>, <app.database.models.Group object at 0x0000021D7BBFBF00>, <app.database.models.Group object at 0x0000021D7BBF8160>, <app.database.models.Group object at 0x0000021D7BBF9150>, <app.database.models.Group object at 0x0000021D7BBF8380>, <app.database.models.Group object at 0x0000021D7BBFB130>, <app.database.models.Group object at 0x0000021D7BBF9D00>, <app.database.models.Group object at 0x0000021D7BBF96A0>, <app.database.models.Group object at 0x0000021D7BBF8F30>, <app.database.models.Group object at 0x0000021D7BBF9040>, <app.database.models.Group object at 0x0000021D7BBF8270>, <app.database.models.Group object at 0x0000021D7BBF86B0>, <app.database.models.Group object at 0x0000021D7BBF97B0>, <app.database.models.Group object at 0x0000021D7BBF8AF0>, <app.database.models.Group object at 0x0000021D7BBFA030>, <app.database.models.Group object at 0x0000021D7BBF85A0>, <app.database.models.Group object at 0x0000021D7BBF88D0>, <app.database.models.Group object at 0x0000021D7BBF87C0>, <app.database.models.Group object at 0x0000021D7BBF8050>, <app.database.models.Group object at 0x0000021D7BBF9E10>, <app.database.models.Group object at 0x0000021D7BBF8C00>, <app.database.models.Group object at 0x0000021D7BBF9590>, <app.database.models.Group object at 0x0000021D7BBFA140>, <app.database.models.Group object at 0x0000021D7BBF9BF0>, <app.database.models.Group object at 0x0000021D7BBF89E0>, <app.database.models.Group object at 0x0000021D7BBF8490>, <app.database.models.Group object at 0x0000021D7B728160>, <app.database.models.Group object at 0x0000021D7B72B460>, <app.database.models.Group object at 0x0000021D7B72B130>, <app.database.models.Group object at 0x0000021D7B72ACF0>, <app.database.models.Group object at 0x0000021D7B7285A0>, <app.database.models.Group object at 0x0000021D7B728050>, <app.database.models.Group object at 0x0000021D7B728490>]
2025-07-16 21:23:38,490 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Royal+': {'sending_orders': 'barclays'}
2025-07-16 21:23:38,491 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 26...
2025-07-16 21:23:38,495 - DEBUG - app - [AUTO-CUTOFF] User 26 has 2 open orders.
2025-07-16 21:23:38,495 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 26...
2025-07-16 21:23:38,499 - DEBUG - app - [AUTO-CUTOFF] User 26 has 0 pending orders.
2025-07-16 21:23:38,499 - DEBUG - app - [AUTO-CUTOFF] User 26 total positions for portfolio calculation: 2
2025-07-16 21:23:38,501 - DEBUG - app - [AUTO-CUTOFF] User 26 adjusted market prices: {}
2025-07-16 21:23:38,502 - DEBUG - app - [AUTO-CUTOFF] User 26 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:23:38,502 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 26...
2025-07-16 21:23:38,859 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol XAGUSD
2025-07-16 21:23:38,859 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol BTCUSD
2025-07-16 21:23:38,860 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 26: {'balance': '184345.81000000', 'equity': '184345.81000000', 'margin': '146484.47000000', 'free_margin': '37861.34000000', 'profit_loss': '0.0', 'margin_level': '125.8466580109140579885362592', 'positions': [{'order_id': '7987141755', 'order_company_name': 'XAGUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('41.09800000'), 'margin': Decimal('19.54000000'), 'contract_value': Decimal('50.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1116628265', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('6.00000000'), 'order_price': Decimal('132091.90000000'), 'margin': Decimal('146464.93000000'), 'contract_value': Decimal('6.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3661.62000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:23:38,860 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 26: {'balance': '184345.81000000', 'equity': '184345.81000000', 'margin': '146484.47000000', 'free_margin': '37861.34000000', 'profit_loss': '0.0', 'margin_level': '125.8466580109140579885362592', 'positions_with_pnl': [{'order_id': '7987141755', 'order_company_name': 'XAGUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('41.09800000'), 'margin': Decimal('19.54000000'), 'contract_value': Decimal('50.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1116628265', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('6.00000000'), 'order_price': Decimal('132091.90000000'), 'margin': Decimal('146464.93000000'), 'contract_value': Decimal('6.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3661.62000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:23:38,861 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:38,863 - INFO - app - [AUTO-CUTOFF] User 26 margin_level: 125.8466580109140579885362592
2025-07-16 21:23:38,864 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:38,864 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 26
2025-07-16 21:23:38,864 - INFO - app - [AUTO-CUTOFF] Processing user 1 (demo), group: Group B
2025-07-16 21:23:38,864 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 1 (demo) from cache/DB...
2025-07-16 21:23:38,872 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:23:38,873 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:23:38,873 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:23:38,884 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000021D7BBF8E20>, <app.database.models.Group object at 0x0000021D7BBF9260>, <app.database.models.Group object at 0x0000021D7BBF9370>, <app.database.models.Group object at 0x0000021D7BBFB8A0>, <app.database.models.Group object at 0x0000021D7BBF9480>, <app.database.models.Group object at 0x0000021D7BBFBCE0>, <app.database.models.Group object at 0x0000021D7BBF9F20>, <app.database.models.Group object at 0x0000021D7BB57020>, <app.database.models.Group object at 0x0000021D7BB57130>, <app.database.models.Group object at 0x0000021D7BB57240>, <app.database.models.Group object at 0x0000021D7BB57350>, <app.database.models.Group object at 0x0000021D7BB57460>, <app.database.models.Group object at 0x0000021D7BB57570>, <app.database.models.Group object at 0x0000021D7BB57680>, <app.database.models.Group object at 0x0000021D7BB57790>, <app.database.models.Group object at 0x0000021D7BB578A0>, <app.database.models.Group object at 0x0000021D7BB579B0>, <app.database.models.Group object at 0x0000021D7BB57AC0>, <app.database.models.Group object at 0x0000021D7BB57BD0>, <app.database.models.Group object at 0x0000021D7BB57CE0>, <app.database.models.Group object at 0x0000021D7BB57DF0>, <app.database.models.Group object at 0x0000021D7BB57F00>, <app.database.models.Group object at 0x0000021D7B64F8A0>, <app.database.models.Group object at 0x0000021D7BC06360>, <app.database.models.Group object at 0x0000021D7BC067A0>, <app.database.models.Group object at 0x0000021D7BC05040>, <app.database.models.Group object at 0x0000021D7BC05AE0>, <app.database.models.Group object at 0x0000021D7BC05F20>, <app.database.models.Group object at 0x0000021D7BC069C0>, <app.database.models.Group object at 0x0000021D7BC06AD0>, <app.database.models.Group object at 0x0000021D7BC06140>, <app.database.models.Group object at 0x0000021D7BC04380>, <app.database.models.Group object at 0x0000021D7BC05590>, <app.database.models.Group object at 0x0000021D7BC05480>, <app.database.models.Group object at 0x0000021D7BC056A0>, <app.database.models.Group object at 0x0000021D7BC068B0>, <app.database.models.Group object at 0x0000021D7BC04C00>, <app.database.models.Group object at 0x0000021D7BC04270>, <app.database.models.Group object at 0x0000021D7BC05D00>, <app.database.models.Group object at 0x0000021D7BC059D0>, <app.database.models.Group object at 0x0000021D7BC048D0>, <app.database.models.Group object at 0x0000021D7BC05BF0>, <app.database.models.Group object at 0x0000021D7BC045A0>, <app.database.models.Group object at 0x0000021D7BC04160>, <app.database.models.Group object at 0x0000021D7BC06690>, <app.database.models.Group object at 0x0000021D7BC057B0>, <app.database.models.Group object at 0x0000021D7BC06F10>, <app.database.models.Group object at 0x0000021D7BC06030>, <app.database.models.Group object at 0x0000021D7BC06E00>, <app.database.models.Group object at 0x0000021D7BC04E20>, <app.database.models.Group object at 0x0000021D7BC049E0>, <app.database.models.Group object at 0x0000021D7BC06BE0>, <app.database.models.Group object at 0x0000021D7BC07F00>, <app.database.models.Group object at 0x0000021D7BC07350>, <app.database.models.Group object at 0x0000021D7BC07570>, <app.database.models.Group object at 0x0000021D7BC07460>, <app.database.models.Group object at 0x0000021D7BC07790>, <app.database.models.Group object at 0x0000021D7BC07BD0>, <app.database.models.Group object at 0x0000021D7BC06580>, <app.database.models.Group object at 0x0000021D7BC078A0>, <app.database.models.Group object at 0x0000021D7BC07020>, <app.database.models.Group object at 0x0000021D7BC04AF0>, <app.database.models.Group object at 0x0000021D7BC05370>, <app.database.models.Group object at 0x0000021D7BC07130>, <app.database.models.Group object at 0x0000021D7BC07CE0>, <app.database.models.Group object at 0x0000021D7BC06470>, <app.database.models.Group object at 0x0000021D7BC06CF0>, <app.database.models.Group object at 0x0000021D7BC07DF0>, <app.database.models.Group object at 0x0000021D7BC07680>, <app.database.models.Group object at 0x0000021D7BC07AC0>, <app.database.models.Group object at 0x0000021D7BC079B0>, <app.database.models.Group object at 0x0000021D7B729040>, <app.database.models.Group object at 0x0000021D7B72B8A0>, <app.database.models.Group object at 0x0000021D7B72B570>, <app.database.models.Group object at 0x0000021D7B7288D0>, <app.database.models.Group object at 0x0000021D7B72B020>, <app.database.models.Group object at 0x0000021D7B72B350>, <app.database.models.Group object at 0x0000021D7B72BF00>, <app.database.models.Group object at 0x0000021D7B7287C0>]
2025-07-16 21:23:38,885 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:23:38,885 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 1...
2025-07-16 21:23:38,891 - DEBUG - app - [AUTO-CUTOFF] User 1 has 2 open orders.
2025-07-16 21:23:38,891 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 1...
2025-07-16 21:23:38,899 - DEBUG - app - [AUTO-CUTOFF] User 1 has 1 pending orders.
2025-07-16 21:23:38,899 - DEBUG - app - [AUTO-CUTOFF] User 1 total positions for portfolio calculation: 3
2025-07-16 21:23:38,900 - DEBUG - app - [AUTO-CUTOFF] User 1 adjusted market prices: {}
2025-07-16 21:23:38,901 - DEBUG - app - [AUTO-CUTOFF] User 1 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:23:38,901 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 1...
2025-07-16 21:23:39,212 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:23:39,212 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:23:39,212 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 1: {'balance': '17011.54000000', 'equity': '17011.54000000', 'margin': '6.54000000', 'free_margin': '17005.00000000', 'profit_loss': '0.0', 'margin_level': '260115.2905198776758409785933', 'positions': [{'order_id': '1000052-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.66800000'), 'margin': Decimal('6.54341805'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000053-001', 'order_company_name': 'AUDJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.56000000'), 'margin': Decimal('6.54258453'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:23:39,212 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 1: {'balance': '17011.54000000', 'equity': '17011.54000000', 'margin': '6.54000000', 'free_margin': '17005.00000000', 'profit_loss': '0.0', 'margin_level': '260115.2905198776758409785933', 'positions_with_pnl': [{'order_id': '1000052-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.66800000'), 'margin': Decimal('6.54341805'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000053-001', 'order_company_name': 'AUDJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.56000000'), 'margin': Decimal('6.54258453'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:23:39,213 - INFO - app - [AUTO-CUTOFF] User 1 margin_level: 260115.2905198776758409785933
2025-07-16 21:23:39,214 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 1
2025-07-16 21:23:39,214 - INFO - app - [AUTO-CUTOFF] Processing user 2 (demo), group: 
2025-07-16 21:23:39,214 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 2 (demo) from cache/DB...
2025-07-16 21:23:39,222 - WARNING - app - [AUTO-CUTOFF] User 2 has no group_name set. Skipping portfolio update.
2025-07-16 21:23:39,222 - INFO - app - [AUTO-CUTOFF] Processing user 3 (demo), group: string
2025-07-16 21:23:39,223 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 3 (demo) from cache/DB...
2025-07-16 21:23:39,230 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group string...
2025-07-16 21:23:39,231 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'string' from cache: None
2025-07-16 21:23:39,232 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'string', fetching from DB.
2025-07-16 21:23:39,236 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'string': []
2025-07-16 21:23:39,236 - ERROR - app - [AUTO-CUTOFF] Group symbol settings not found in DB for group 'string'. Skipping portfolio update for user 3.
2025-07-16 21:23:39,236 - INFO - app - [AUTO-CUTOFF] Processing user 4 (demo), group: Group B
2025-07-16 21:23:39,236 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 4 (demo) from cache/DB...
2025-07-16 21:23:39,237 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:23:39,239 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:23:39,239 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:23:39,254 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000021D7BC05F20>, <app.database.models.Group object at 0x0000021D7BC069C0>, <app.database.models.Group object at 0x0000021D7BC06AD0>, <app.database.models.Group object at 0x0000021D7BC06140>, <app.database.models.Group object at 0x0000021D7BC04380>, <app.database.models.Group object at 0x0000021D7BC05590>, <app.database.models.Group object at 0x0000021D7BC05480>, <app.database.models.Group object at 0x0000021D7BC056A0>, <app.database.models.Group object at 0x0000021D7BC068B0>, <app.database.models.Group object at 0x0000021D7BC04C00>, <app.database.models.Group object at 0x0000021D7BC04270>, <app.database.models.Group object at 0x0000021D7BC05D00>, <app.database.models.Group object at 0x0000021D7BC059D0>, <app.database.models.Group object at 0x0000021D7BC048D0>, <app.database.models.Group object at 0x0000021D7BC05BF0>, <app.database.models.Group object at 0x0000021D7BC045A0>, <app.database.models.Group object at 0x0000021D7BC04160>, <app.database.models.Group object at 0x0000021D7BC06690>, <app.database.models.Group object at 0x0000021D7BC057B0>, <app.database.models.Group object at 0x0000021D7BC06F10>, <app.database.models.Group object at 0x0000021D7BC06030>, <app.database.models.Group object at 0x0000021D7BC06E00>, <app.database.models.Group object at 0x0000021D7BC04E20>, <app.database.models.Group object at 0x0000021D7BC049E0>, <app.database.models.Group object at 0x0000021D7BC06BE0>, <app.database.models.Group object at 0x0000021D7BC07F00>, <app.database.models.Group object at 0x0000021D7BC07350>, <app.database.models.Group object at 0x0000021D7BC07570>, <app.database.models.Group object at 0x0000021D7BC07460>, <app.database.models.Group object at 0x0000021D7BC07790>, <app.database.models.Group object at 0x0000021D7BC07BD0>, <app.database.models.Group object at 0x0000021D7BC06580>, <app.database.models.Group object at 0x0000021D7BC078A0>, <app.database.models.Group object at 0x0000021D7BC07020>, <app.database.models.Group object at 0x0000021D7BC04AF0>, <app.database.models.Group object at 0x0000021D7BC05370>, <app.database.models.Group object at 0x0000021D7BC07130>, <app.database.models.Group object at 0x0000021D7BC07CE0>, <app.database.models.Group object at 0x0000021D7BC06470>, <app.database.models.Group object at 0x0000021D7BC06CF0>, <app.database.models.Group object at 0x0000021D7BC07DF0>, <app.database.models.Group object at 0x0000021D7BC07680>, <app.database.models.Group object at 0x0000021D7BC07AC0>, <app.database.models.Group object at 0x0000021D7BC079B0>, <app.database.models.Group object at 0x0000021D7B64F8A0>, <app.database.models.Group object at 0x0000021D7B64F9B0>, <app.database.models.Group object at 0x0000021D7B64D9D0>, <app.database.models.Group object at 0x0000021D7BB57020>, <app.database.models.Group object at 0x0000021D7BB57130>, <app.database.models.Group object at 0x0000021D7BB57240>, <app.database.models.Group object at 0x0000021D7BB57350>, <app.database.models.Group object at 0x0000021D7BB57460>, <app.database.models.Group object at 0x0000021D7BB57570>, <app.database.models.Group object at 0x0000021D7BB57680>, <app.database.models.Group object at 0x0000021D7BB57790>, <app.database.models.Group object at 0x0000021D7BB578A0>, <app.database.models.Group object at 0x0000021D7BB579B0>, <app.database.models.Group object at 0x0000021D7BB57AC0>, <app.database.models.Group object at 0x0000021D7BB57BD0>, <app.database.models.Group object at 0x0000021D7BB57CE0>, <app.database.models.Group object at 0x0000021D7BB57DF0>, <app.database.models.Group object at 0x0000021D7BB57F00>, <app.database.models.Group object at 0x0000021D7BB547C0>, <app.database.models.Group object at 0x0000021D7BB54270>, <app.database.models.Group object at 0x0000021D7BB54160>, <app.database.models.Group object at 0x0000021D7BB546B0>, <app.database.models.Group object at 0x0000021D7BB548D0>, <app.database.models.Group object at 0x0000021D7BB549E0>, <app.database.models.Group object at 0x0000021D7BB54AF0>, <app.database.models.Group object at 0x0000021D7BB54C00>, <app.database.models.Group object at 0x0000021D7BB54D10>, <app.database.models.Group object at 0x0000021D7BB54E20>, <app.database.models.Group object at 0x0000021D7BB54F30>, <app.database.models.Group object at 0x0000021D7BB55040>, <app.database.models.Group object at 0x0000021D7BB55150>, <app.database.models.Group object at 0x0000021D7BB55260>, <app.database.models.Group object at 0x0000021D7BB55370>, <app.database.models.Group object at 0x0000021D7BB55480>, <app.database.models.Group object at 0x0000021D7BB55590>]
2025-07-16 21:23:39,256 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:23:39,256 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 4...
2025-07-16 21:23:39,260 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 open orders.
2025-07-16 21:23:39,260 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 4...
2025-07-16 21:23:39,266 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 pending orders.
2025-07-16 21:23:39,266 - WARNING - app - [AUTO-CUTOFF] User 4 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:23:39,266 - INFO - app - [AUTO-CUTOFF] Processing user 5 (demo), group: None
2025-07-16 21:23:39,267 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 5 (demo) from cache/DB...
2025-07-16 21:23:39,274 - WARNING - app - [AUTO-CUTOFF] User 5 has no group_name set. Skipping portfolio update.
2025-07-16 21:23:39,274 - INFO - app - [AUTO-CUTOFF] Processing user 6 (demo), group: None
2025-07-16 21:23:39,274 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 6 (demo) from cache/DB...
2025-07-16 21:23:39,281 - WARNING - app - [AUTO-CUTOFF] User 6 has no group_name set. Skipping portfolio update.
2025-07-16 21:23:39,282 - INFO - app - [AUTO-CUTOFF] Processing user 9 (demo), group: Group B
2025-07-16 21:23:39,282 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 9 (demo) from cache/DB...
2025-07-16 21:23:39,283 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:23:39,284 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:23:39,284 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:23:39,296 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000021D7BB557B0>, <app.database.models.Group object at 0x0000021D7BB556A0>, <app.database.models.Group object at 0x0000021D7BB558C0>, <app.database.models.Group object at 0x0000021D7BB559D0>, <app.database.models.Group object at 0x0000021D7BB55AE0>, <app.database.models.Group object at 0x0000021D7BB55BF0>, <app.database.models.Group object at 0x0000021D7BB55D00>, <app.database.models.Group object at 0x0000021D7BB55E10>, <app.database.models.Group object at 0x0000021D7BB55F20>, <app.database.models.Group object at 0x0000021D7BB56030>, <app.database.models.Group object at 0x0000021D7BB56140>, <app.database.models.Group object at 0x0000021D7BB56250>, <app.database.models.Group object at 0x0000021D7BB56360>, <app.database.models.Group object at 0x0000021D7BB56470>, <app.database.models.Group object at 0x0000021D7BB56580>, <app.database.models.Group object at 0x0000021D7BB56690>, <app.database.models.Group object at 0x0000021D7BB567A0>, <app.database.models.Group object at 0x0000021D7BB568B0>, <app.database.models.Group object at 0x0000021D7BB569C0>, <app.database.models.Group object at 0x0000021D7BB56AD0>, <app.database.models.Group object at 0x0000021D7BB56BE0>, <app.database.models.Group object at 0x0000021D7BB56CF0>, <app.database.models.Group object at 0x0000021D7BB56E00>, <app.database.models.Group object at 0x0000021D7BB56F10>, <app.database.models.Group object at 0x0000021D7BBF8E20>, <app.database.models.Group object at 0x0000021D7BBF9260>, <app.database.models.Group object at 0x0000021D7BBF9370>, <app.database.models.Group object at 0x0000021D7BBFB8A0>, <app.database.models.Group object at 0x0000021D7BBF9480>, <app.database.models.Group object at 0x0000021D7BBFBCE0>, <app.database.models.Group object at 0x0000021D7BBF9F20>, <app.database.models.Group object at 0x0000021D7BBFBF00>, <app.database.models.Group object at 0x0000021D7BBF8160>, <app.database.models.Group object at 0x0000021D7BBF9150>, <app.database.models.Group object at 0x0000021D7BBF8380>, <app.database.models.Group object at 0x0000021D7BBFB130>, <app.database.models.Group object at 0x0000021D7BBF9D00>, <app.database.models.Group object at 0x0000021D7BBF96A0>, <app.database.models.Group object at 0x0000021D7BBF8F30>, <app.database.models.Group object at 0x0000021D7BBF9040>, <app.database.models.Group object at 0x0000021D7BBF8270>, <app.database.models.Group object at 0x0000021D7BBF86B0>, <app.database.models.Group object at 0x0000021D7BBF97B0>, <app.database.models.Group object at 0x0000021D7BBF8AF0>, <app.database.models.Group object at 0x0000021D7BBFA030>, <app.database.models.Group object at 0x0000021D7BBF85A0>, <app.database.models.Group object at 0x0000021D7BBF88D0>, <app.database.models.Group object at 0x0000021D7BBF87C0>, <app.database.models.Group object at 0x0000021D7BBF8050>, <app.database.models.Group object at 0x0000021D7BBF9E10>, <app.database.models.Group object at 0x0000021D7BBF8C00>, <app.database.models.Group object at 0x0000021D7BBF9590>, <app.database.models.Group object at 0x0000021D7BBFA140>, <app.database.models.Group object at 0x0000021D7BBF9BF0>, <app.database.models.Group object at 0x0000021D7BBF89E0>, <app.database.models.Group object at 0x0000021D7BBF8490>, <app.database.models.Group object at 0x0000021D7BBF99D0>, <app.database.models.Group object at 0x0000021D7BBF8D10>, <app.database.models.Group object at 0x0000021D7BBF9AE0>, <app.database.models.Group object at 0x0000021D7BBFAE00>, <app.database.models.Group object at 0x0000021D7B729040>, <app.database.models.Group object at 0x0000021D7B72B8A0>, <app.database.models.Group object at 0x0000021D7B72B570>, <app.database.models.Group object at 0x0000021D7B7288D0>, <app.database.models.Group object at 0x0000021D7B72B020>, <app.database.models.Group object at 0x0000021D7B72B350>, <app.database.models.Group object at 0x0000021D7B72BF00>, <app.database.models.Group object at 0x0000021D7B7287C0>, <app.database.models.Group object at 0x0000021D7B728160>, <app.database.models.Group object at 0x0000021D7B72B460>, <app.database.models.Group object at 0x0000021D7B72B130>, <app.database.models.Group object at 0x0000021D7B72ACF0>, <app.database.models.Group object at 0x0000021D7B7285A0>, <app.database.models.Group object at 0x0000021D7B728050>, <app.database.models.Group object at 0x0000021D7B728490>, <app.database.models.Group object at 0x0000021D7B72ABE0>, <app.database.models.Group object at 0x0000021D7B72A140>, <app.database.models.Group object at 0x0000021D7B72B9B0>, <app.database.models.Group object at 0x0000021D7B72BAC0>]
2025-07-16 21:23:39,297 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:23:39,298 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 9...
2025-07-16 21:23:39,305 - DEBUG - app - [AUTO-CUTOFF] User 9 has 28 open orders.
2025-07-16 21:23:39,306 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 9...
2025-07-16 21:23:39,311 - DEBUG - app - [AUTO-CUTOFF] User 9 has 6 pending orders.
2025-07-16 21:23:39,311 - DEBUG - app - [AUTO-CUTOFF] User 9 total positions for portfolio calculation: 34
2025-07-16 21:23:39,312 - DEBUG - app - [AUTO-CUTOFF] User 9 adjusted market prices: {}
2025-07-16 21:23:39,313 - DEBUG - app - [AUTO-CUTOFF] User 9 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:23:39,313 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 9...
2025-07-16 21:23:39,602 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDUSD
2025-07-16 21:23:39,602 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDUSD
2025-07-16 21:23:39,602 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFSGD
2025-07-16 21:23:39,602 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFSGD
2025-07-16 21:23:39,602 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CADJPY
2025-07-16 21:23:39,602 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CADJPY
2025-07-16 21:23:39,602 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:23:39,602 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:23:39,602 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFJPY
2025-07-16 21:23:39,602 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFJPY
2025-07-16 21:23:39,602 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:23:39,602 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:23:39,602 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURGBP
2025-07-16 21:23:39,602 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURJPY
2025-07-16 21:23:39,602 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURJPY
2025-07-16 21:23:39,602 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURNZD
2025-07-16 21:23:39,603 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURNZD
2025-07-16 21:23:39,603 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:23:39,603 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:23:39,603 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:23:39,603 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:23:39,603 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol NZDJPY
2025-07-16 21:23:39,603 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDCHF
2025-07-16 21:23:39,603 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDCHF
2025-07-16 21:23:39,603 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDNOK
2025-07-16 21:23:39,603 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDNOK
2025-07-16 21:23:39,603 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDSGD
2025-07-16 21:23:39,603 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDTRY
2025-07-16 21:23:39,604 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 9: {'balance': '98181.73000000', 'equity': '98181.73000000', 'margin': '1917.31000000', 'free_margin': '96264.42000000', 'profit_loss': '0.0', 'margin_level': '5120.806233733720681579921870', 'positions': [{'order_id': '2504219016', 'order_company_name': 'AUDUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.64743000'), 'margin': Decimal('64.74000000'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4208488950', 'order_company_name': 'AUDUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('0.64707000'), 'margin': Decimal('142.36000000'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1409905880', 'order_company_name': 'CHFSGD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57561500'), 'margin': Decimal('122.35389131'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7183762766', 'order_company_name': 'CHFSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57505500'), 'margin': Decimal('122.31506360'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9716387266', 'order_company_name': 'CADJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.24150000'), 'margin': Decimal('109.44987397'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9899743248', 'order_company_name': 'CADJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.27050000'), 'margin': Decimal('109.47824594'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2965066905', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('1.77481000'), 'margin': Decimal('252.73304420'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6518780780', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.21000000'), 'order_price': Decimal('1.77439000'), 'margin': Decimal('241.18574740'), 'contract_value': Decimal('21000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7509572762', 'order_company_name': 'CHFJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.15500000'), 'margin': Decimal('122.35584187'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7522048723', 'order_company_name': 'CHFJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.09500000'), 'margin': Decimal('122.31379417'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6209391896', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77480000'), 'margin': Decimal('57.44317680'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8581607125', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77442000'), 'margin': Decimal('57.43111760'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8951109289', 'order_company_name': 'EURGBP', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.85403000'), 'margin': Decimal('114.85104400'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7115525171', 'order_company_name': 'EURJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.26050000'), 'margin': Decimal('114.87277223'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2099467271', 'order_company_name': 'EURJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.23150000'), 'margin': Decimal('114.85285533'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4283527369', 'order_company_name': 'EURNZD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.91952500'), 'margin': Decimal('114.85328250'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6611902574', 'order_company_name': 'EURNZD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.92063500'), 'margin': Decimal('114.81922980'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4731664142', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34376000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8676137902', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34361000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3301052276', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34379000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2972795665', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34378000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1117118581', 'order_company_name': 'NZDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('87.10150000'), 'margin': Decimal('5.97837949'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3385451189', 'order_company_name': 'USDCHF', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81771000'), 'margin': Decimal('149.97126753'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6134727989', 'order_company_name': 'USDCHF', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81805000'), 'margin': Decimal('150.03056608'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9211531174', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.04973000'), 'margin': Decimal('100.00169162'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5200391957', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.05023000'), 'margin': Decimal('100.00169154'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5654381883', 'order_company_name': 'USDSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.31000000'), 'order_price': Decimal('1.28795000'), 'margin': Decimal('309.93393934'), 'contract_value': Decimal('31000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6985407710', 'order_company_name': 'USDTRY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('39.56087000'), 'margin': Decimal('99.98738813'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:23:39,604 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 9: {'balance': '98181.73000000', 'equity': '98181.73000000', 'margin': '1917.31000000', 'free_margin': '96264.42000000', 'profit_loss': '0.0', 'margin_level': '5120.806233733720681579921870', 'positions_with_pnl': [{'order_id': '2504219016', 'order_company_name': 'AUDUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.64743000'), 'margin': Decimal('64.74000000'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4208488950', 'order_company_name': 'AUDUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('0.64707000'), 'margin': Decimal('142.36000000'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1409905880', 'order_company_name': 'CHFSGD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57561500'), 'margin': Decimal('122.35389131'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7183762766', 'order_company_name': 'CHFSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57505500'), 'margin': Decimal('122.31506360'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9716387266', 'order_company_name': 'CADJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.24150000'), 'margin': Decimal('109.44987397'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9899743248', 'order_company_name': 'CADJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.27050000'), 'margin': Decimal('109.47824594'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2965066905', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('1.77481000'), 'margin': Decimal('252.73304420'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6518780780', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.21000000'), 'order_price': Decimal('1.77439000'), 'margin': Decimal('241.18574740'), 'contract_value': Decimal('21000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7509572762', 'order_company_name': 'CHFJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.15500000'), 'margin': Decimal('122.35584187'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7522048723', 'order_company_name': 'CHFJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.09500000'), 'margin': Decimal('122.31379417'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6209391896', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77480000'), 'margin': Decimal('57.44317680'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8581607125', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77442000'), 'margin': Decimal('57.43111760'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8951109289', 'order_company_name': 'EURGBP', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.85403000'), 'margin': Decimal('114.85104400'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7115525171', 'order_company_name': 'EURJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.26050000'), 'margin': Decimal('114.87277223'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2099467271', 'order_company_name': 'EURJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.23150000'), 'margin': Decimal('114.85285533'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4283527369', 'order_company_name': 'EURNZD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.91952500'), 'margin': Decimal('114.85328250'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6611902574', 'order_company_name': 'EURNZD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.92063500'), 'margin': Decimal('114.81922980'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4731664142', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34376000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8676137902', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34361000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3301052276', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34379000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2972795665', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34378000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1117118581', 'order_company_name': 'NZDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('87.10150000'), 'margin': Decimal('5.97837949'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3385451189', 'order_company_name': 'USDCHF', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81771000'), 'margin': Decimal('149.97126753'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6134727989', 'order_company_name': 'USDCHF', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81805000'), 'margin': Decimal('150.03056608'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9211531174', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.04973000'), 'margin': Decimal('100.00169162'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5200391957', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.05023000'), 'margin': Decimal('100.00169154'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5654381883', 'order_company_name': 'USDSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.31000000'), 'order_price': Decimal('1.28795000'), 'margin': Decimal('309.93393934'), 'contract_value': Decimal('31000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6985407710', 'order_company_name': 'USDTRY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('39.56087000'), 'margin': Decimal('99.98738813'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:23:39,609 - INFO - app - [AUTO-CUTOFF] User 9 margin_level: 5120.806233733720681579921870
2025-07-16 21:23:39,610 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 9
2025-07-16 21:23:39,611 - INFO - app - [AUTO-CUTOFF] Processing user 10 (demo), group: Group B
2025-07-16 21:23:39,611 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 10 (demo) from cache/DB...
2025-07-16 21:23:39,611 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:23:39,612 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:23:39,613 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:23:39,620 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000021D7BB557B0>, <app.database.models.Group object at 0x0000021D7BB556A0>, <app.database.models.Group object at 0x0000021D7BB558C0>, <app.database.models.Group object at 0x0000021D7BB559D0>, <app.database.models.Group object at 0x0000021D7BB55AE0>, <app.database.models.Group object at 0x0000021D7BB55BF0>, <app.database.models.Group object at 0x0000021D7BB55D00>, <app.database.models.Group object at 0x0000021D7BB55E10>, <app.database.models.Group object at 0x0000021D7BB55F20>, <app.database.models.Group object at 0x0000021D7BB56030>, <app.database.models.Group object at 0x0000021D7BB56140>, <app.database.models.Group object at 0x0000021D7BB56250>, <app.database.models.Group object at 0x0000021D7BB56360>, <app.database.models.Group object at 0x0000021D7BB56470>, <app.database.models.Group object at 0x0000021D7BB56580>, <app.database.models.Group object at 0x0000021D7BB56690>, <app.database.models.Group object at 0x0000021D7BB567A0>, <app.database.models.Group object at 0x0000021D7BB568B0>, <app.database.models.Group object at 0x0000021D7BB569C0>, <app.database.models.Group object at 0x0000021D7BB56AD0>, <app.database.models.Group object at 0x0000021D7BB56BE0>, <app.database.models.Group object at 0x0000021D7BB56CF0>, <app.database.models.Group object at 0x0000021D7BB56E00>, <app.database.models.Group object at 0x0000021D7BB56F10>, <app.database.models.Group object at 0x0000021D7BBF8E20>, <app.database.models.Group object at 0x0000021D7BBF9260>, <app.database.models.Group object at 0x0000021D7BBF9370>, <app.database.models.Group object at 0x0000021D7BBFB8A0>, <app.database.models.Group object at 0x0000021D7BBF9480>, <app.database.models.Group object at 0x0000021D7BBFBCE0>, <app.database.models.Group object at 0x0000021D7BBF9F20>, <app.database.models.Group object at 0x0000021D7BBFBF00>, <app.database.models.Group object at 0x0000021D7BBF8160>, <app.database.models.Group object at 0x0000021D7BBF9150>, <app.database.models.Group object at 0x0000021D7BBF8380>, <app.database.models.Group object at 0x0000021D7BBFB130>, <app.database.models.Group object at 0x0000021D7BBF9D00>, <app.database.models.Group object at 0x0000021D7BBF96A0>, <app.database.models.Group object at 0x0000021D7BBF8F30>, <app.database.models.Group object at 0x0000021D7BBF9040>, <app.database.models.Group object at 0x0000021D7BBF8270>, <app.database.models.Group object at 0x0000021D7BBF86B0>, <app.database.models.Group object at 0x0000021D7BBF97B0>, <app.database.models.Group object at 0x0000021D7BBF8AF0>, <app.database.models.Group object at 0x0000021D7BBFA030>, <app.database.models.Group object at 0x0000021D7BBF85A0>, <app.database.models.Group object at 0x0000021D7BBF88D0>, <app.database.models.Group object at 0x0000021D7BBF87C0>, <app.database.models.Group object at 0x0000021D7BBF8050>, <app.database.models.Group object at 0x0000021D7BBF9E10>, <app.database.models.Group object at 0x0000021D7BBF8C00>, <app.database.models.Group object at 0x0000021D7BBF9590>, <app.database.models.Group object at 0x0000021D7BBFA140>, <app.database.models.Group object at 0x0000021D7BBF9BF0>, <app.database.models.Group object at 0x0000021D7BBF89E0>, <app.database.models.Group object at 0x0000021D7BBF8490>, <app.database.models.Group object at 0x0000021D7BBF99D0>, <app.database.models.Group object at 0x0000021D7BBF8D10>, <app.database.models.Group object at 0x0000021D7BBF9AE0>, <app.database.models.Group object at 0x0000021D7BBFAE00>, <app.database.models.Group object at 0x0000021D7B729040>, <app.database.models.Group object at 0x0000021D7B72B8A0>, <app.database.models.Group object at 0x0000021D7B72B570>, <app.database.models.Group object at 0x0000021D7B7288D0>, <app.database.models.Group object at 0x0000021D7B72B020>, <app.database.models.Group object at 0x0000021D7B72B350>, <app.database.models.Group object at 0x0000021D7B72BF00>, <app.database.models.Group object at 0x0000021D7B7287C0>, <app.database.models.Group object at 0x0000021D7B728160>, <app.database.models.Group object at 0x0000021D7B72B460>, <app.database.models.Group object at 0x0000021D7B72B130>, <app.database.models.Group object at 0x0000021D7B72ACF0>, <app.database.models.Group object at 0x0000021D7B7285A0>, <app.database.models.Group object at 0x0000021D7B728050>, <app.database.models.Group object at 0x0000021D7B728490>, <app.database.models.Group object at 0x0000021D7B72ABE0>, <app.database.models.Group object at 0x0000021D7B72A140>, <app.database.models.Group object at 0x0000021D7B72B9B0>, <app.database.models.Group object at 0x0000021D7B72BAC0>]
2025-07-16 21:23:39,621 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:23:39,621 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 10...
2025-07-16 21:23:39,624 - DEBUG - app - [AUTO-CUTOFF] User 10 has 0 open orders.
2025-07-16 21:23:39,624 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 10...
2025-07-16 21:23:39,626 - DEBUG - app - [AUTO-CUTOFF] User 10 has 1 pending orders.
2025-07-16 21:23:39,626 - DEBUG - app - [AUTO-CUTOFF] User 10 total positions for portfolio calculation: 1
2025-07-16 21:23:39,627 - DEBUG - app - [AUTO-CUTOFF] User 10 adjusted market prices: {}
2025-07-16 21:23:39,627 - DEBUG - app - [AUTO-CUTOFF] User 10 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:23:39,627 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 10...
2025-07-16 21:23:39,911 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 10: {'balance': '9958.40000000', 'equity': '9958.40000000', 'margin': '39.25000000', 'free_margin': '9919.15000000', 'profit_loss': '0.0', 'margin_level': '25371.71974522292993630573248', 'positions': [], 'margin_call': False}
2025-07-16 21:23:39,911 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 10: {'balance': '9958.40000000', 'equity': '9958.40000000', 'margin': '39.25000000', 'free_margin': '9919.15000000', 'profit_loss': '0.0', 'margin_level': '25371.71974522292993630573248', 'positions_with_pnl': [], 'margin_call': False}
2025-07-16 21:23:39,912 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:39,913 - INFO - app - [AUTO-CUTOFF] User 10 margin_level: 25371.71974522292993630573248
2025-07-16 21:23:39,914 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 10
2025-07-16 21:23:39,914 - INFO - app - [AUTO-CUTOFF] Processing user 11 (demo), group: Group B
2025-07-16 21:23:39,914 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 11 (demo) from cache/DB...
2025-07-16 21:23:39,915 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:23:39,916 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:39,916 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:23:39,916 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:23:39,921 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000021D7BB557B0>, <app.database.models.Group object at 0x0000021D7BB556A0>, <app.database.models.Group object at 0x0000021D7BB558C0>, <app.database.models.Group object at 0x0000021D7BB559D0>, <app.database.models.Group object at 0x0000021D7BB55AE0>, <app.database.models.Group object at 0x0000021D7BB55BF0>, <app.database.models.Group object at 0x0000021D7BB55D00>, <app.database.models.Group object at 0x0000021D7BB55E10>, <app.database.models.Group object at 0x0000021D7BB55F20>, <app.database.models.Group object at 0x0000021D7BB56030>, <app.database.models.Group object at 0x0000021D7BB56140>, <app.database.models.Group object at 0x0000021D7BB56250>, <app.database.models.Group object at 0x0000021D7BB56360>, <app.database.models.Group object at 0x0000021D7BB56470>, <app.database.models.Group object at 0x0000021D7BB56580>, <app.database.models.Group object at 0x0000021D7BB56690>, <app.database.models.Group object at 0x0000021D7BB567A0>, <app.database.models.Group object at 0x0000021D7BB568B0>, <app.database.models.Group object at 0x0000021D7BB569C0>, <app.database.models.Group object at 0x0000021D7BB56AD0>, <app.database.models.Group object at 0x0000021D7BB56BE0>, <app.database.models.Group object at 0x0000021D7BB56CF0>, <app.database.models.Group object at 0x0000021D7BB56E00>, <app.database.models.Group object at 0x0000021D7BB56F10>, <app.database.models.Group object at 0x0000021D7BBF8E20>, <app.database.models.Group object at 0x0000021D7BBF9260>, <app.database.models.Group object at 0x0000021D7BBF9370>, <app.database.models.Group object at 0x0000021D7BBFB8A0>, <app.database.models.Group object at 0x0000021D7BBF9480>, <app.database.models.Group object at 0x0000021D7BBFBCE0>, <app.database.models.Group object at 0x0000021D7BBF9F20>, <app.database.models.Group object at 0x0000021D7BBFBF00>, <app.database.models.Group object at 0x0000021D7BBF8160>, <app.database.models.Group object at 0x0000021D7BBF9150>, <app.database.models.Group object at 0x0000021D7BBF8380>, <app.database.models.Group object at 0x0000021D7BBFB130>, <app.database.models.Group object at 0x0000021D7BBF9D00>, <app.database.models.Group object at 0x0000021D7BBF96A0>, <app.database.models.Group object at 0x0000021D7BBF8F30>, <app.database.models.Group object at 0x0000021D7BBF9040>, <app.database.models.Group object at 0x0000021D7BBF8270>, <app.database.models.Group object at 0x0000021D7BBF86B0>, <app.database.models.Group object at 0x0000021D7BBF97B0>, <app.database.models.Group object at 0x0000021D7BBF8AF0>, <app.database.models.Group object at 0x0000021D7BBFA030>, <app.database.models.Group object at 0x0000021D7BBF85A0>, <app.database.models.Group object at 0x0000021D7BBF88D0>, <app.database.models.Group object at 0x0000021D7BBF87C0>, <app.database.models.Group object at 0x0000021D7BBF8050>, <app.database.models.Group object at 0x0000021D7BBF9E10>, <app.database.models.Group object at 0x0000021D7BBF8C00>, <app.database.models.Group object at 0x0000021D7BBF9590>, <app.database.models.Group object at 0x0000021D7BBFA140>, <app.database.models.Group object at 0x0000021D7BBF9BF0>, <app.database.models.Group object at 0x0000021D7BBF89E0>, <app.database.models.Group object at 0x0000021D7BBF8490>, <app.database.models.Group object at 0x0000021D7BBF99D0>, <app.database.models.Group object at 0x0000021D7BBF8D10>, <app.database.models.Group object at 0x0000021D7BBF9AE0>, <app.database.models.Group object at 0x0000021D7BBFAE00>, <app.database.models.Group object at 0x0000021D7B729040>, <app.database.models.Group object at 0x0000021D7B72B8A0>, <app.database.models.Group object at 0x0000021D7B72B570>, <app.database.models.Group object at 0x0000021D7B7288D0>, <app.database.models.Group object at 0x0000021D7B72B020>, <app.database.models.Group object at 0x0000021D7B72B350>, <app.database.models.Group object at 0x0000021D7B72BF00>, <app.database.models.Group object at 0x0000021D7B7287C0>, <app.database.models.Group object at 0x0000021D7B728160>, <app.database.models.Group object at 0x0000021D7B72B460>, <app.database.models.Group object at 0x0000021D7B72B130>, <app.database.models.Group object at 0x0000021D7B72ACF0>, <app.database.models.Group object at 0x0000021D7B7285A0>, <app.database.models.Group object at 0x0000021D7B728050>, <app.database.models.Group object at 0x0000021D7B728490>, <app.database.models.Group object at 0x0000021D7B72ABE0>, <app.database.models.Group object at 0x0000021D7B72A140>, <app.database.models.Group object at 0x0000021D7B72B9B0>, <app.database.models.Group object at 0x0000021D7B72BAC0>]
2025-07-16 21:23:39,922 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:23:39,922 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 11...
2025-07-16 21:23:39,923 - DEBUG - app - [AUTO-CUTOFF] User 11 has 1 open orders.
2025-07-16 21:23:39,923 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 11...
2025-07-16 21:23:39,925 - DEBUG - app - [AUTO-CUTOFF] User 11 has 0 pending orders.
2025-07-16 21:23:39,925 - DEBUG - app - [AUTO-CUTOFF] User 11 total positions for portfolio calculation: 1
2025-07-16 21:23:39,926 - DEBUG - app - [AUTO-CUTOFF] User 11 adjusted market prices: {}
2025-07-16 21:23:39,926 - DEBUG - app - [AUTO-CUTOFF] User 11 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:23:39,926 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 11...
2025-07-16 21:23:40,222 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-07-16 21:23:40,222 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 11: {'balance': '99998.61000000', 'equity': '99998.61000000', 'margin': '6.55000000', 'free_margin': '99992.06000000', 'profit_loss': '0.0', 'margin_level': '1526696.335877862595419847328', 'positions': [{'order_id': '1000099-001', 'order_company_name': 'AUDCAD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('0.89752000'), 'margin': Decimal('6.55364428'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 11, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:23:40,222 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 11: {'balance': '99998.61000000', 'equity': '99998.61000000', 'margin': '6.55000000', 'free_margin': '99992.06000000', 'profit_loss': '0.0', 'margin_level': '1526696.335877862595419847328', 'positions_with_pnl': [{'order_id': '1000099-001', 'order_company_name': 'AUDCAD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('0.89752000'), 'margin': Decimal('6.55364428'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 11, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:23:40,224 - INFO - app - [AUTO-CUTOFF] User 11 margin_level: 1526696.335877862595419847328
2025-07-16 21:23:40,224 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 11
2025-07-16 21:23:40,225 - INFO - app - [AUTO-CUTOFF] Processing user 12 (demo), group: Group B
2025-07-16 21:23:40,225 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 12 (demo) from cache/DB...
2025-07-16 21:23:40,226 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:23:40,227 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:23:40,227 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:23:40,235 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000021D7BB557B0>, <app.database.models.Group object at 0x0000021D7BB556A0>, <app.database.models.Group object at 0x0000021D7BB558C0>, <app.database.models.Group object at 0x0000021D7BB559D0>, <app.database.models.Group object at 0x0000021D7BB55AE0>, <app.database.models.Group object at 0x0000021D7BB55BF0>, <app.database.models.Group object at 0x0000021D7BB55D00>, <app.database.models.Group object at 0x0000021D7BB55E10>, <app.database.models.Group object at 0x0000021D7BB55F20>, <app.database.models.Group object at 0x0000021D7BB56030>, <app.database.models.Group object at 0x0000021D7BB56140>, <app.database.models.Group object at 0x0000021D7BB56250>, <app.database.models.Group object at 0x0000021D7BB56360>, <app.database.models.Group object at 0x0000021D7BB56470>, <app.database.models.Group object at 0x0000021D7BB56580>, <app.database.models.Group object at 0x0000021D7BB56690>, <app.database.models.Group object at 0x0000021D7BB567A0>, <app.database.models.Group object at 0x0000021D7BB568B0>, <app.database.models.Group object at 0x0000021D7BB569C0>, <app.database.models.Group object at 0x0000021D7BB56AD0>, <app.database.models.Group object at 0x0000021D7BB56BE0>, <app.database.models.Group object at 0x0000021D7BB56CF0>, <app.database.models.Group object at 0x0000021D7BB56E00>, <app.database.models.Group object at 0x0000021D7BB56F10>, <app.database.models.Group object at 0x0000021D7BBF8E20>, <app.database.models.Group object at 0x0000021D7BBF9260>, <app.database.models.Group object at 0x0000021D7BBF9370>, <app.database.models.Group object at 0x0000021D7BBFB8A0>, <app.database.models.Group object at 0x0000021D7BBF9480>, <app.database.models.Group object at 0x0000021D7BBFBCE0>, <app.database.models.Group object at 0x0000021D7BBF9F20>, <app.database.models.Group object at 0x0000021D7BBFBF00>, <app.database.models.Group object at 0x0000021D7BBF8160>, <app.database.models.Group object at 0x0000021D7BBF9150>, <app.database.models.Group object at 0x0000021D7BBF8380>, <app.database.models.Group object at 0x0000021D7BBFB130>, <app.database.models.Group object at 0x0000021D7BBF9D00>, <app.database.models.Group object at 0x0000021D7BBF96A0>, <app.database.models.Group object at 0x0000021D7BBF8F30>, <app.database.models.Group object at 0x0000021D7BBF9040>, <app.database.models.Group object at 0x0000021D7BBF8270>, <app.database.models.Group object at 0x0000021D7BBF86B0>, <app.database.models.Group object at 0x0000021D7BBF97B0>, <app.database.models.Group object at 0x0000021D7BBF8AF0>, <app.database.models.Group object at 0x0000021D7BBFA030>, <app.database.models.Group object at 0x0000021D7BBF85A0>, <app.database.models.Group object at 0x0000021D7BBF88D0>, <app.database.models.Group object at 0x0000021D7BBF87C0>, <app.database.models.Group object at 0x0000021D7BBF8050>, <app.database.models.Group object at 0x0000021D7BBF9E10>, <app.database.models.Group object at 0x0000021D7BBF8C00>, <app.database.models.Group object at 0x0000021D7BBF9590>, <app.database.models.Group object at 0x0000021D7BBFA140>, <app.database.models.Group object at 0x0000021D7BBF9BF0>, <app.database.models.Group object at 0x0000021D7BBF89E0>, <app.database.models.Group object at 0x0000021D7BBF8490>, <app.database.models.Group object at 0x0000021D7BBF99D0>, <app.database.models.Group object at 0x0000021D7BBF8D10>, <app.database.models.Group object at 0x0000021D7BBF9AE0>, <app.database.models.Group object at 0x0000021D7BBFAE00>, <app.database.models.Group object at 0x0000021D7B729040>, <app.database.models.Group object at 0x0000021D7B72B8A0>, <app.database.models.Group object at 0x0000021D7B72B570>, <app.database.models.Group object at 0x0000021D7B7288D0>, <app.database.models.Group object at 0x0000021D7B72B020>, <app.database.models.Group object at 0x0000021D7B72B350>, <app.database.models.Group object at 0x0000021D7B72BF00>, <app.database.models.Group object at 0x0000021D7B7287C0>, <app.database.models.Group object at 0x0000021D7B728160>, <app.database.models.Group object at 0x0000021D7B72B460>, <app.database.models.Group object at 0x0000021D7B72B130>, <app.database.models.Group object at 0x0000021D7B72ACF0>, <app.database.models.Group object at 0x0000021D7B7285A0>, <app.database.models.Group object at 0x0000021D7B728050>, <app.database.models.Group object at 0x0000021D7B728490>, <app.database.models.Group object at 0x0000021D7B72ABE0>, <app.database.models.Group object at 0x0000021D7B72A140>, <app.database.models.Group object at 0x0000021D7B72B9B0>, <app.database.models.Group object at 0x0000021D7B72BAC0>]
2025-07-16 21:23:40,236 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:23:40,236 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 12...
2025-07-16 21:23:40,240 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 open orders.
2025-07-16 21:23:40,240 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 12...
2025-07-16 21:23:40,243 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 pending orders.
2025-07-16 21:23:40,243 - WARNING - app - [AUTO-CUTOFF] User 12 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:23:40,243 - INFO - app - [AUTO-CUTOFF] Processing user 13 (demo), group: Group B
2025-07-16 21:23:40,243 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 13 (demo) from cache/DB...
2025-07-16 21:23:40,244 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:23:40,245 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:23:40,245 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:23:40,249 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000021D7BB557B0>, <app.database.models.Group object at 0x0000021D7BB556A0>, <app.database.models.Group object at 0x0000021D7BB558C0>, <app.database.models.Group object at 0x0000021D7BB559D0>, <app.database.models.Group object at 0x0000021D7BB55AE0>, <app.database.models.Group object at 0x0000021D7BB55BF0>, <app.database.models.Group object at 0x0000021D7BB55D00>, <app.database.models.Group object at 0x0000021D7BB55E10>, <app.database.models.Group object at 0x0000021D7BB55F20>, <app.database.models.Group object at 0x0000021D7BB56030>, <app.database.models.Group object at 0x0000021D7BB56140>, <app.database.models.Group object at 0x0000021D7BB56250>, <app.database.models.Group object at 0x0000021D7BB56360>, <app.database.models.Group object at 0x0000021D7BB56470>, <app.database.models.Group object at 0x0000021D7BB56580>, <app.database.models.Group object at 0x0000021D7BB56690>, <app.database.models.Group object at 0x0000021D7BB567A0>, <app.database.models.Group object at 0x0000021D7BB568B0>, <app.database.models.Group object at 0x0000021D7BB569C0>, <app.database.models.Group object at 0x0000021D7BB56AD0>, <app.database.models.Group object at 0x0000021D7BB56BE0>, <app.database.models.Group object at 0x0000021D7BB56CF0>, <app.database.models.Group object at 0x0000021D7BB56E00>, <app.database.models.Group object at 0x0000021D7BB56F10>, <app.database.models.Group object at 0x0000021D7BBF8E20>, <app.database.models.Group object at 0x0000021D7BBF9260>, <app.database.models.Group object at 0x0000021D7BBF9370>, <app.database.models.Group object at 0x0000021D7BBFB8A0>, <app.database.models.Group object at 0x0000021D7BBF9480>, <app.database.models.Group object at 0x0000021D7BBFBCE0>, <app.database.models.Group object at 0x0000021D7BBF9F20>, <app.database.models.Group object at 0x0000021D7BBFBF00>, <app.database.models.Group object at 0x0000021D7BBF8160>, <app.database.models.Group object at 0x0000021D7BBF9150>, <app.database.models.Group object at 0x0000021D7BBF8380>, <app.database.models.Group object at 0x0000021D7BBFB130>, <app.database.models.Group object at 0x0000021D7BBF9D00>, <app.database.models.Group object at 0x0000021D7BBF96A0>, <app.database.models.Group object at 0x0000021D7BBF8F30>, <app.database.models.Group object at 0x0000021D7BBF9040>, <app.database.models.Group object at 0x0000021D7BBF8270>, <app.database.models.Group object at 0x0000021D7BBF86B0>, <app.database.models.Group object at 0x0000021D7BBF97B0>, <app.database.models.Group object at 0x0000021D7BBF8AF0>, <app.database.models.Group object at 0x0000021D7BBFA030>, <app.database.models.Group object at 0x0000021D7BBF85A0>, <app.database.models.Group object at 0x0000021D7BBF88D0>, <app.database.models.Group object at 0x0000021D7BBF87C0>, <app.database.models.Group object at 0x0000021D7BBF8050>, <app.database.models.Group object at 0x0000021D7BBF9E10>, <app.database.models.Group object at 0x0000021D7BBF8C00>, <app.database.models.Group object at 0x0000021D7BBF9590>, <app.database.models.Group object at 0x0000021D7BBFA140>, <app.database.models.Group object at 0x0000021D7BBF9BF0>, <app.database.models.Group object at 0x0000021D7BBF89E0>, <app.database.models.Group object at 0x0000021D7BBF8490>, <app.database.models.Group object at 0x0000021D7BBF99D0>, <app.database.models.Group object at 0x0000021D7BBF8D10>, <app.database.models.Group object at 0x0000021D7BBF9AE0>, <app.database.models.Group object at 0x0000021D7BBFAE00>, <app.database.models.Group object at 0x0000021D7B729040>, <app.database.models.Group object at 0x0000021D7B72B8A0>, <app.database.models.Group object at 0x0000021D7B72B570>, <app.database.models.Group object at 0x0000021D7B7288D0>, <app.database.models.Group object at 0x0000021D7B72B020>, <app.database.models.Group object at 0x0000021D7B72B350>, <app.database.models.Group object at 0x0000021D7B72BF00>, <app.database.models.Group object at 0x0000021D7B7287C0>, <app.database.models.Group object at 0x0000021D7B728160>, <app.database.models.Group object at 0x0000021D7B72B460>, <app.database.models.Group object at 0x0000021D7B72B130>, <app.database.models.Group object at 0x0000021D7B72ACF0>, <app.database.models.Group object at 0x0000021D7B7285A0>, <app.database.models.Group object at 0x0000021D7B728050>, <app.database.models.Group object at 0x0000021D7B728490>, <app.database.models.Group object at 0x0000021D7B72ABE0>, <app.database.models.Group object at 0x0000021D7B72A140>, <app.database.models.Group object at 0x0000021D7B72B9B0>, <app.database.models.Group object at 0x0000021D7B72BAC0>]
2025-07-16 21:23:40,249 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:23:40,250 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 13...
2025-07-16 21:23:40,251 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 open orders.
2025-07-16 21:23:40,251 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 13...
2025-07-16 21:23:40,252 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 pending orders.
2025-07-16 21:23:40,252 - WARNING - app - [AUTO-CUTOFF] User 13 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:23:40,337 - DEBUG - app.firebase_stream - Firebase listener triggered (30). Event Type: patch, Path: /. Timestamp: 1752726220.3372803
2025-07-16 21:23:40,337 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0654100000', 'o': '2.0652300000'}, 'USDJPY': {'b': '148.5900000000', 'o': '148.5840000000'}, 'EURNZD': {'b': '1.9622700000',
2025-07-16 21:23:40,338 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0654100000', 'o': '2.0652300000'}, 'USDJPY': {'b': '148.5900000000', 'o': '148.5840000000'}, 'EURNZD': {'b': '1.9622700000',...
2025-07-16 21:23:40,338 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:40,942 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:40,944 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:41,956 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:41,958 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:42,659 - DEBUG - app.firebase_stream - Firebase listener triggered (31). Event Type: patch, Path: /. Timestamp: 1752726222.6592007
2025-07-16 21:23:42,659 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'USDJPY': {'b': '148.5910000000', 'o': '148.5850000000'}, 'CADCHF': {'b': '0.5853100000', 'o': '0.5853100000'}, 'EURNZD': {'b': '1.9623200000',
2025-07-16 21:23:42,659 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'USDJPY': {'b': '148.5910000000', 'o': '148.5850000000'}, 'CADCHF': {'b': '0.5853100000', 'o': '0.5853100000'}, 'EURNZD': {'b': '1.9623200000',...
2025-07-16 21:23:42,659 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:42,968 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:42,970 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:43,983 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:43,985 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:44,966 - DEBUG - app.firebase_stream - Firebase listener triggered (32). Event Type: patch, Path: /. Timestamp: 1752726224.966944
2025-07-16 21:23:44,967 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0654200000', 'o': '2.0652300000'}, 'USDJPY': {'b': '148.5890000000', 'o': '148.5840000000'}, 'USDCNH': {'b': '7.1821200000',
2025-07-16 21:23:44,967 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0654200000', 'o': '2.0652300000'}, 'USDJPY': {'b': '148.5890000000', 'o': '148.5840000000'}, 'USDCNH': {'b': '7.1821200000',...
2025-07-16 21:23:44,967 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:44,992 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:44,993 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:45,999 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:46,003 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:47,013 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:47,015 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:47,254 - DEBUG - app.firebase_stream - Firebase listener triggered (33). Event Type: patch, Path: /. Timestamp: 1752726227.2543955
2025-07-16 21:23:47,254 - DEBUG - app.firebase_stream - Prepared batch update for 33 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.9940000000', 'o': '37.9870000000'}, 'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0654000000', 'o': '2.0652300000'}, 'BTCUSD': {'b': '118220.640000000
2025-07-16 21:23:47,254 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '37.9940000000', 'o': '37.9870000000'}, 'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0654000000', 'o': '2.0652300000'}, 'BTCUSD': {'b': '118220.640000000...
2025-07-16 21:23:47,254 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:48,028 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:48,032 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:49,035 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:49,038 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:49,548 - DEBUG - app.firebase_stream - Firebase listener triggered (34). Event Type: patch, Path: /. Timestamp: 1752726229.5488071
2025-07-16 21:23:49,549 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0491000000', 'o': '13.0437000000'}, 'NZDJPY': {'b': '87.9820000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0654200000', 'o': '2.0652300000'}, 'BTCUSD': {'b': '118222.200000000
2025-07-16 21:23:49,549 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0491000000', 'o': '13.0437000000'}, 'NZDJPY': {'b': '87.9820000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0654200000', 'o': '2.0652300000'}, 'BTCUSD': {'b': '118222.200000000...
2025-07-16 21:23:49,549 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:50,042 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:50,047 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:51,057 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:51,060 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:51,872 - DEBUG - app.firebase_stream - Firebase listener triggered (35). Event Type: patch, Path: /. Timestamp: 1752726231.8724608
2025-07-16 21:23:51,872 - DEBUG - app.firebase_stream - Prepared batch update for 21 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9810000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0653800000', 'o': '2.0652200000'}, 'CADCHF': {'b': '0.5853100000', 'o': '0.5853100000'}, 'AUDJPY': {'b': '96.3300000000', 'o
2025-07-16 21:23:51,872 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9810000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0653800000', 'o': '2.0652200000'}, 'CADCHF': {'b': '0.5853100000', 'o': '0.5853100000'}, 'AUDJPY': {'b': '96.3300000000', 'o...
2025-07-16 21:23:51,872 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:52,074 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:52,078 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:53,088 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:53,090 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:54,098 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:54,101 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:54,229 - DEBUG - app.firebase_stream - Firebase listener triggered (36). Event Type: patch, Path: /. Timestamp: 1752726234.229841
2025-07-16 21:23:54,230 - DEBUG - app.firebase_stream - Prepared batch update for 21 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9810000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0654000000', 'o': '2.0652200000'}, 'USDJPY': {'b': '148.5890000000', 'o': '148.5850000000'}, 'EURNZD': {'b': '1.9622900000',
2025-07-16 21:23:54,230 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9810000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0654000000', 'o': '2.0652200000'}, 'USDJPY': {'b': '148.5890000000', 'o': '148.5850000000'}, 'EURNZD': {'b': '1.9622900000',...
2025-07-16 21:23:54,231 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:55,106 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:55,110 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:56,117 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:56,122 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:56,476 - DEBUG - app.firebase_stream - Firebase listener triggered (37). Event Type: patch, Path: /. Timestamp: 1752726236.476724
2025-07-16 21:23:56,477 - DEBUG - app.firebase_stream - Prepared batch update for 14 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9810000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0654100000', 'o': '2.0652200000'}, 'USDJPY': {'b': '148.5910000000', 'o': '148.5840000000'}, 'CADCHF': {'b': '0.5853000000',
2025-07-16 21:23:56,477 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9810000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0654100000', 'o': '2.0652200000'}, 'USDJPY': {'b': '148.5910000000', 'o': '148.5840000000'}, 'CADCHF': {'b': '0.5853000000',...
2025-07-16 21:23:56,477 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:57,134 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:57,138 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:58,149 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:58,153 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:23:58,833 - DEBUG - app.firebase_stream - Firebase listener triggered (38). Event Type: patch, Path: /. Timestamp: 1752726238.8335474
2025-07-16 21:23:58,833 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0654000000', 'o': '2.0652200000'}, 'USDCNH': {'b': '7.1821300000', 'o': '7.1821200000'}, 'CADCHF': {'b': '0.5853000000', 'o'
2025-07-16 21:23:58,833 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0654000000', 'o': '2.0652200000'}, 'USDCNH': {'b': '7.1821300000', 'o': '7.1821200000'}, 'CADCHF': {'b': '0.5853000000', 'o'...
2025-07-16 21:23:58,834 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:23:59,160 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:23:59,162 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:00,168 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:00,171 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:01,086 - DEBUG - app.firebase_stream - Firebase listener triggered (39). Event Type: patch, Path: /. Timestamp: 1752726241.0863175
2025-07-16 21:24:01,086 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0497000000', 'o': '13.0435000000'}, 'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0654000000', 'o': '2.0652500000'}, 'BTCUSD': {'b': '118222.300000000
2025-07-16 21:24:01,086 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0497000000', 'o': '13.0435000000'}, 'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0654000000', 'o': '2.0652500000'}, 'BTCUSD': {'b': '118222.300000000...
2025-07-16 21:24:01,087 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:24:01,173 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:01,175 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:02,177 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:02,180 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:03,184 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:03,188 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:03,444 - DEBUG - app.firebase_stream - Firebase listener triggered (40). Event Type: patch, Path: /. Timestamp: 1752726243.4439847
2025-07-16 21:24:03,444 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0496000000', 'o': '13.0434000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0654400000', 'o': '2.0652800000'}, 'USDJPY': {'b': '148.5900000000',
2025-07-16 21:24:03,444 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0496000000', 'o': '13.0434000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0654400000', 'o': '2.0652800000'}, 'USDJPY': {'b': '148.5900000000',...
2025-07-16 21:24:03,445 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:24:04,193 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:04,197 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:05,200 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:05,203 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:05,692 - DEBUG - app.firebase_stream - Firebase listener triggered (41). Event Type: patch, Path: /. Timestamp: 1752726245.692252
2025-07-16 21:24:05,692 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPAUD': {'b': '2.0654700000', 'o': '2.0652800000'}, 'USDJPY': {'b': '148.5900000000', 'o': '148.5840000000'}, 'USDCNH': {'b': '7.1821300000', 'o': '7.1821300000'}, 'CADCHF': {'b': '0.5852900000', '
2025-07-16 21:24:05,693 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPAUD': {'b': '2.0654700000', 'o': '2.0652800000'}, 'USDJPY': {'b': '148.5900000000', 'o': '148.5840000000'}, 'USDCNH': {'b': '7.1821300000', 'o': '7.1821300000'}, 'CADCHF': {'b': '0.5852900000', '...
2025-07-16 21:24:05,693 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:24:06,204 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:06,208 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:06,668 - INFO - app - Application shutdown initiated
2025-07-16 21:24:06,668 - INFO - app - Scheduler shutdown completed
2025-07-16 21:24:06,669 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-07-16 21:24:07,945 - INFO - app.firebase_stream - Firebase listener closed.
2025-07-16 21:24:07,945 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-07-16 21:24:07,945 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:07,950 - INFO - app - Redis connection closed
2025-07-16 21:24:07,950 - INFO - app - Application shutdown completed
2025-07-16 21:24:19,964 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-16 21:24:20,004 - INFO - app.core.config - .env file loaded successfully.
2025-07-16 21:24:20,014 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-16 21:24:20,014 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-16 21:24:20,380 - INFO - app - Application starting up - Trading system initialized
2025-07-16 21:24:20,380 - INFO - app - SL/TP Epsilon accuracy configured: 0.00001
2025-07-16 21:24:20,380 - INFO - app - Environment: DEVELOPMENT
2025-07-16 21:24:20,430 - INFO - app - Application startup initiated
2025-07-16 21:24:20,430 - INFO - app - Initializing core services...
2025-07-16 21:24:20,474 - INFO - app - Firebase initialized
2025-07-16 21:24:20,474 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-07-16 21:24:22,520 - INFO - app - Redis initialized
2025-07-16 21:24:22,531 - INFO - app - [SWAP] daily_swap_charge_job triggered
2025-07-16 21:24:22,532 - INFO - app - [AUTO-CUTOFF] Scheduled update_all_users_dynamic_portfolio job to run every 1 minute.
2025-07-16 21:24:22,535 - INFO - app - Scheduler initialized
2025-07-16 21:24:22,541 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-16 21:24:22,541 - DEBUG - app.firebase_stream - Successfully got running event loop in process_firebase_events task.
2025-07-16 21:24:22,542 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-07-16 21:24:23,834 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-16 21:24:23,837 - INFO - app - Starting stale cache cleanup task
2025-07-16 21:24:23,856 - DEBUG - app.firebase_stream - Firebase listener triggered (1). Event Type: put, Path: /. Timestamp: 1752726263.8569212
2025-07-16 21:24:23,857 - DEBUG - app.firebase_stream - Prepared batch update for 48 symbols from root path for queue. Preview: {'AUDCAD': {'b': '0.8893000000', 'o': '0.8893000000'}, 'AUDCHF': {'b': '0.5205000000', 'o': '0.5204300000'}, 'AUDJPY': {'b': '96.3280000000', 'o': '96.3200000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'
2025-07-16 21:24:23,857 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'AUDCAD': {'b': '0.8893000000', 'o': '0.8893000000'}, 'AUDCHF': {'b': '0.5205000000', 'o': '0.5204300000'}, 'AUDJPY': {'b': '96.3280000000', 'o': '96.3200000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'...
2025-07-16 21:24:23,857 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type put at path /.
2025-07-16 21:24:24,136 - DEBUG - app.firebase_stream - Firebase listener triggered (2). Event Type: patch, Path: /. Timestamp: 1752726264.1361272
2025-07-16 21:24:24,136 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0487000000', 'o': '13.0433000000'}, 'NZDJPY': {'b': '87.9850000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0654900000', 'o': '2.0653400000'}, 'BTCUSD': {'b': '118241.700000000
2025-07-16 21:24:24,136 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0487000000', 'o': '13.0433000000'}, 'NZDJPY': {'b': '87.9850000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0654900000', 'o': '2.0653400000'}, 'BTCUSD': {'b': '118241.700000000...
2025-07-16 21:24:24,137 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:24:26,437 - DEBUG - app.firebase_stream - Firebase listener triggered (3). Event Type: patch, Path: /. Timestamp: 1752726266.4377234
2025-07-16 21:24:26,438 - DEBUG - app.firebase_stream - Prepared batch update for 18 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9860000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0654800000', 'o': '2.0653300000'}, 'USDJPY': {'b': '148.5890000000', 'o': '148.5830000000'}, 'CADCHF': {'b': '0.5852700000',
2025-07-16 21:24:26,438 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'NZDJPY': {'b': '87.9860000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0654800000', 'o': '2.0653300000'}, 'USDJPY': {'b': '148.5890000000', 'o': '148.5830000000'}, 'CADCHF': {'b': '0.5852700000',...
2025-07-16 21:24:26,438 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:24:27,922 - INFO - app - Cleaned up pending order stream for new trigger price format
2025-07-16 21:24:27,922 - INFO - app - Background tasks initialized
2025-07-16 21:24:28,622 - INFO - app - Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-07-16 21:24:28,622 - INFO - app - Application startup completed successfully
2025-07-16 21:24:28,623 - INFO - app - Starting cache validation task
2025-07-16 21:24:28,626 - INFO - app - Starting Barclays pending order margin checker task.
2025-07-16 21:24:28,627 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:28,629 - INFO - app - Starting auto-cutoff order monitoring task.
2025-07-16 21:24:28,641 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:28,649 - INFO - app - Validating cache for 30 users
2025-07-16 21:24:28,831 - DEBUG - app.firebase_stream - Firebase listener triggered (4). Event Type: patch, Path: /. Timestamp: 1752726268.8312504
2025-07-16 21:24:28,831 - DEBUG - app.firebase_stream - Prepared batch update for 13 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9860000000', 'o': '87.9760000000'}, 'USDJPY': {'b': '148.5870000000', 'o': '148.5830000000'}, 'CADCHF': {'b': '0.5852900000', 'o': '0.5852700000'}, 'USDSGD': {'b': '1.2856700000',
2025-07-16 21:24:28,831 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 3. Data preview: {'NZDJPY': {'b': '87.9860000000', 'o': '87.9760000000'}, 'USDJPY': {'b': '148.5870000000', 'o': '148.5830000000'}, 'CADCHF': {'b': '0.5852900000', 'o': '0.5852700000'}, 'USDSGD': {'b': '1.2856700000',...
2025-07-16 21:24:28,831 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:24:29,652 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:29,655 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:30,659 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:30,663 - INFO - app - Found 0 static orders cache entries to check
2025-07-16 21:24:30,663 - INFO - app - Completed stale cache cleanup task
2025-07-16 21:24:30,665 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:31,084 - DEBUG - app.firebase_stream - Firebase listener triggered (5). Event Type: patch, Path: /. Timestamp: 1752726271.084197
2025-07-16 21:24:31,084 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9860000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0654700000', 'o': '2.0652800000'}, 'BTCUSD': {'b': '118252.2000000000', 'o': '118252.1000000000'}, 'USDCNH': {'b': '7.182060
2025-07-16 21:24:31,084 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 2. Data preview: {'NZDJPY': {'b': '87.9860000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0654700000', 'o': '2.0652800000'}, 'BTCUSD': {'b': '118252.2000000000', 'o': '118252.1000000000'}, 'USDCNH': {'b': '7.182060...
2025-07-16 21:24:31,084 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:24:31,670 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:31,672 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:32,681 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:32,688 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:32,690 - WARNING - app - User 4: Missing balance/margin cache, refreshing...
2025-07-16 21:24:33,449 - DEBUG - app.firebase_stream - Firebase listener triggered (6). Event Type: patch, Path: /. Timestamp: 1752726273.4494202
2025-07-16 21:24:33,449 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '88.0020000000', 'o': '87.9960000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0650800000'}, 'BTCUSD': {'b': '118273.800000000
2025-07-16 21:24:33,449 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 2. Data preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '88.0020000000', 'o': '87.9960000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0650800000'}, 'BTCUSD': {'b': '118273.800000000...
2025-07-16 21:24:33,450 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:24:33,697 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:33,701 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:34,708 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:34,716 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:35,698 - DEBUG - app.firebase_stream - Firebase listener triggered (7). Event Type: patch, Path: /. Timestamp: 1752726275.6982186
2025-07-16 21:24:35,698 - DEBUG - app.firebase_stream - Prepared batch update for 18 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.0020000000', 'o': '87.9950000000'}, 'USDJPY': {'b': '148.6000000000', 'o': '148.5950000000'}, 'USDCNH': {'b': '7.1821800000', 'o': '7.1820600000'}, 'CADCHF': {'b': '0.5852900000',
2025-07-16 21:24:35,698 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 2. Data preview: {'NZDJPY': {'b': '88.0020000000', 'o': '87.9950000000'}, 'USDJPY': {'b': '148.6000000000', 'o': '148.5950000000'}, 'USDCNH': {'b': '7.1821800000', 'o': '7.1820600000'}, 'CADCHF': {'b': '0.5852900000',...
2025-07-16 21:24:35,698 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:24:35,728 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:35,730 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:36,745 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:36,751 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:36,771 - WARNING - app - User 5: Missing balance/margin cache, refreshing...
2025-07-16 21:24:37,759 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:37,763 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:38,050 - DEBUG - app.firebase_stream - Firebase listener triggered (8). Event Type: patch, Path: /. Timestamp: 1752726278.0507195
2025-07-16 21:24:38,050 - DEBUG - app.firebase_stream - Prepared batch update for 21 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9950000000'}, 'EURZAR': {'b': '20.7652100000', 'o': '20.7416200000'}, 'AUDJPY': {'b': '96.3510000000', 'o': '96.3440000000'}, 'SGDJPY': {'b': '115.5950000000
2025-07-16 21:24:38,051 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9950000000'}, 'EURZAR': {'b': '20.7652100000', 'o': '20.7416200000'}, 'AUDJPY': {'b': '96.3510000000', 'o': '96.3440000000'}, 'SGDJPY': {'b': '115.5950000000...
2025-07-16 21:24:38,051 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:24:38,769 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:38,772 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:38,831 - WARNING - app - User 8: Missing balance/margin cache, refreshing...
2025-07-16 21:24:38,841 - WARNING - app - User 9: Missing balance/margin cache, refreshing...
2025-07-16 21:24:39,787 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:39,791 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:40,401 - DEBUG - app.firebase_stream - Firebase listener triggered (9). Event Type: patch, Path: /. Timestamp: 1752726280.4014475
2025-07-16 21:24:40,401 - DEBUG - app.firebase_stream - Prepared batch update for 17 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.0030000000', 'o': '87.9950000000'}, 'USDJPY': {'b': '148.6010000000', 'o': '148.5960000000'}, 'USDCNH': {'b': '7.1821100000', 'o': '7.1821100000'}, 'CADCHF': {'b': '0.5852900000',
2025-07-16 21:24:40,401 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.0030000000', 'o': '87.9950000000'}, 'USDJPY': {'b': '148.6010000000', 'o': '148.5960000000'}, 'USDCNH': {'b': '7.1821100000', 'o': '7.1821100000'}, 'CADCHF': {'b': '0.5852900000',...
2025-07-16 21:24:40,401 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:24:40,798 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:40,803 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:40,914 - WARNING - app - User 10: Missing balance/margin cache, refreshing...
2025-07-16 21:24:40,926 - WARNING - app - User 11: Missing balance/margin cache, refreshing...
2025-07-16 21:24:40,936 - WARNING - app - User 12: Missing balance/margin cache, refreshing...
2025-07-16 21:24:41,819 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:41,823 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:42,770 - DEBUG - app.firebase_stream - Firebase listener triggered (10). Event Type: patch, Path: /. Timestamp: 1752726282.7700794
2025-07-16 21:24:42,770 - DEBUG - app.firebase_stream - Prepared batch update for 17 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9960000000'}, 'NZDJPY': {'b': '88.0040000000', 'o': '87.9950000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0651000000'}, 'CADCHF': {'b': '0.5852800000', '
2025-07-16 21:24:42,771 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9960000000'}, 'NZDJPY': {'b': '88.0040000000', 'o': '87.9950000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0651000000'}, 'CADCHF': {'b': '0.5852800000', '...
2025-07-16 21:24:42,771 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:24:42,834 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:42,840 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:43,008 - WARNING - app - User 13: Missing balance/margin cache, refreshing...
2025-07-16 21:24:43,041 - WARNING - app - User 14: Missing balance/margin cache, refreshing...
2025-07-16 21:24:43,063 - WARNING - app - User 16: Missing balance/margin cache, refreshing...
2025-07-16 21:24:43,093 - WARNING - app - User 17: Missing balance/margin cache, refreshing...
2025-07-16 21:24:43,118 - WARNING - app - User 18: Missing balance/margin cache, refreshing...
2025-07-16 21:24:43,130 - WARNING - app - User 19: Missing balance/margin cache, refreshing...
2025-07-16 21:24:43,159 - WARNING - app - User 20: Missing balance/margin cache, refreshing...
2025-07-16 21:24:43,182 - WARNING - app - User 21: Missing balance/margin cache, refreshing...
2025-07-16 21:24:43,198 - WARNING - app - User 22: Missing balance/margin cache, refreshing...
2025-07-16 21:24:43,225 - WARNING - app - User 23: Missing balance/margin cache, refreshing...
2025-07-16 21:24:43,239 - WARNING - app - User 25: Missing balance/margin cache, refreshing...
2025-07-16 21:24:43,266 - WARNING - app - User 26: Missing balance/margin cache, refreshing...
2025-07-16 21:24:43,281 - WARNING - app - User 1: Missing balance/margin cache, refreshing...
2025-07-16 21:24:43,295 - WARNING - app - User 2: Missing balance/margin cache, refreshing...
2025-07-16 21:24:43,302 - WARNING - app - User 3: Missing balance/margin cache, refreshing...
2025-07-16 21:24:43,309 - WARNING - app - User 4: Missing static orders cache, refreshing...
2025-07-16 21:24:43,325 - WARNING - app - User 5: Missing balance/margin cache, refreshing...
2025-07-16 21:24:43,335 - WARNING - app - User 6: Missing balance/margin cache, refreshing...
2025-07-16 21:24:43,346 - WARNING - app - User 9: Missing static orders cache, refreshing...
2025-07-16 21:24:43,372 - WARNING - app - User 10: Missing static orders cache, refreshing...
2025-07-16 21:24:43,386 - WARNING - app - User 11: Missing static orders cache, refreshing...
2025-07-16 21:24:43,401 - WARNING - app - User 12: Missing static orders cache, refreshing...
2025-07-16 21:24:43,416 - WARNING - app - User 13: Missing static orders cache, refreshing...
2025-07-16 21:24:43,430 - INFO - app - Cache validation completed
2025-07-16 21:24:43,632 - INFO - app - Starting stale cache cleanup task
2025-07-16 21:24:43,633 - INFO - app - Found 6 static orders cache entries to check
2025-07-16 21:24:43,633 - WARNING - app - Found stale cache entry for user 4, will be refreshed on next access
2025-07-16 21:24:43,633 - WARNING - app - Found stale cache entry for user 13, will be refreshed on next access
2025-07-16 21:24:43,634 - WARNING - app - Found stale cache entry for user 12, will be refreshed on next access
2025-07-16 21:24:43,634 - INFO - app - Completed stale cache cleanup task
2025-07-16 21:24:43,846 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:43,850 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:44,860 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:44,863 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:45,023 - DEBUG - app.firebase_stream - Firebase listener triggered (11). Event Type: patch, Path: /. Timestamp: 1752726285.023806
2025-07-16 21:24:45,024 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9950000000'}, 'NZDJPY': {'b': '88.0010000000', 'o': '87.9950000000'}, 'GBPAUD': {'b': '2.0652900000', 'o': '2.0651000000'}, 'USDJPY': {'b': '148.6000000000',
2025-07-16 21:24:45,026 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9950000000'}, 'NZDJPY': {'b': '88.0010000000', 'o': '87.9950000000'}, 'GBPAUD': {'b': '2.0652900000', 'o': '2.0651000000'}, 'USDJPY': {'b': '148.6000000000',...
2025-07-16 21:24:45,027 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:24:45,873 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:45,878 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:46,897 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:46,901 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:47,288 - DEBUG - app.firebase_stream - Firebase listener triggered (12). Event Type: patch, Path: /. Timestamp: 1752726287.2880156
2025-07-16 21:24:47,288 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0496000000', 'o': '13.0436000000'}, 'XAGUSD': {'b': '38.0030000000', 'o': '37.9960000000'}, 'NZDJPY': {'b': '88.0030000000', 'o': '87.9930000000'}, 'GBPAUD': {'b': '2.0652900000',
2025-07-16 21:24:47,289 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0496000000', 'o': '13.0436000000'}, 'XAGUSD': {'b': '38.0030000000', 'o': '37.9960000000'}, 'NZDJPY': {'b': '88.0030000000', 'o': '87.9930000000'}, 'GBPAUD': {'b': '2.0652900000',...
2025-07-16 21:24:47,290 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:24:47,915 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:47,918 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:48,925 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:48,927 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:49,586 - DEBUG - app.firebase_stream - Firebase listener triggered (13). Event Type: patch, Path: /. Timestamp: 1752726289.5862741
2025-07-16 21:24:49,586 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0497000000', 'o': '13.0437000000'}, 'NZDJPY': {'b': '88.0030000000', 'o': '87.9950000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0651100000'}, 'USDJPY': {'b': '148.5990000000',
2025-07-16 21:24:49,586 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0497000000', 'o': '13.0437000000'}, 'NZDJPY': {'b': '88.0030000000', 'o': '87.9950000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0651100000'}, 'USDJPY': {'b': '148.5990000000',...
2025-07-16 21:24:49,586 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:24:49,936 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:49,939 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:50,945 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:50,950 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:51,876 - DEBUG - app.firebase_stream - Firebase listener triggered (14). Event Type: patch, Path: /. Timestamp: 1752726291.8766155
2025-07-16 21:24:51,877 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0497000000', 'o': '13.0436000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0651000000'}, 'USDCNH': {'b': '7.1821100000', 'o': '7.1821100000'}, 'CADCHF': {'b': '0.5852900000', 'o'
2025-07-16 21:24:51,877 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0497000000', 'o': '13.0436000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0651000000'}, 'USDCNH': {'b': '7.1821100000', 'o': '7.1821100000'}, 'CADCHF': {'b': '0.5852900000', 'o'...
2025-07-16 21:24:51,877 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:24:51,954 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:51,957 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:52,973 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:52,978 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:53,984 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:53,988 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:54,228 - DEBUG - app.firebase_stream - Firebase listener triggered (15). Event Type: patch, Path: /. Timestamp: 1752726294.2282782
2025-07-16 21:24:54,228 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0493000000', 'o': '13.0440000000'}, 'XAGUSD': {'b': '38.0030000000', 'o': '37.9950000000'}, 'NZDJPY': {'b': '88.0020000000', 'o': '87.9950000000'}, 'GBPAUD': {'b': '2.0652700000',
2025-07-16 21:24:54,228 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0493000000', 'o': '13.0440000000'}, 'XAGUSD': {'b': '38.0030000000', 'o': '37.9950000000'}, 'NZDJPY': {'b': '88.0020000000', 'o': '87.9950000000'}, 'GBPAUD': {'b': '2.0652700000',...
2025-07-16 21:24:54,228 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:24:54,996 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:54,999 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:56,000 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:56,002 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:56,499 - DEBUG - app.firebase_stream - Firebase listener triggered (16). Event Type: patch, Path: /. Timestamp: 1752726296.4999416
2025-07-16 21:24:56,500 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9960000000'}, 'NZDJPY': {'b': '88.0060000000', 'o': '87.9990000000'}, 'USDCNH': {'b': '7.1820900000', 'o': '7.1820200000'}, 'CADCHF': {'b': '0.5852800000', '
2025-07-16 21:24:56,501 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9960000000'}, 'NZDJPY': {'b': '88.0060000000', 'o': '87.9990000000'}, 'USDCNH': {'b': '7.1820900000', 'o': '7.1820200000'}, 'CADCHF': {'b': '0.5852800000', '...
2025-07-16 21:24:56,505 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:24:57,008 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:57,010 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:58,016 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:58,019 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:24:58,847 - DEBUG - app.firebase_stream - Firebase listener triggered (17). Event Type: patch, Path: /. Timestamp: 1752726298.8471625
2025-07-16 21:24:58,847 - DEBUG - app.firebase_stream - Prepared batch update for 19 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0496000000', 'o': '13.0443000000'}, 'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'GBPAUD': {'b': '2.0652400000', 'o': '2.0650900000'}, 'USDCNH': {'b': '7.1821800000', '
2025-07-16 21:24:58,848 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0496000000', 'o': '13.0443000000'}, 'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'GBPAUD': {'b': '2.0652400000', 'o': '2.0650900000'}, 'USDCNH': {'b': '7.1821800000', '...
2025-07-16 21:24:58,852 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:24:59,030 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:24:59,033 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:00,040 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:00,043 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:01,050 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:01,055 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:01,102 - DEBUG - app.firebase_stream - Firebase listener triggered (18). Event Type: patch, Path: /. Timestamp: 1752726301.1020217
2025-07-16 21:25:01,102 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'GBPAUD': {'b': '2.0650900000', 'o': '2.0649100000'}, 'USDCNH': {'b': '7.1820600000', 'o': '7.1820600000'}, 'CADCHF': {'b': '0.5852800000', 'o': '0.5852600000'}, 'EURNZD': {'b': '1.9620100000', 'o': 
2025-07-16 21:25:01,103 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPAUD': {'b': '2.0650900000', 'o': '2.0649100000'}, 'USDCNH': {'b': '7.1820600000', 'o': '7.1820600000'}, 'CADCHF': {'b': '0.5852800000', 'o': '0.5852600000'}, 'EURNZD': {'b': '1.9620100000', 'o': ...
2025-07-16 21:25:01,108 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:02,074 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:02,079 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:03,085 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:03,091 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:03,455 - DEBUG - app.firebase_stream - Firebase listener triggered (19). Event Type: patch, Path: /. Timestamp: 1752726303.4555218
2025-07-16 21:25:03,455 - DEBUG - app.firebase_stream - Prepared batch update for 10 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.0060000000', 'o': '87.9980000000'}, 'USDCNH': {'b': '7.1821100000', 'o': '7.1820300000'}, 'CADCHF': {'b': '0.5852900000', 'o': '0.5852900000'}, 'SGDJPY': {'b': '115.5960000000', '
2025-07-16 21:25:03,456 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'NZDJPY': {'b': '88.0060000000', 'o': '87.9980000000'}, 'USDCNH': {'b': '7.1821100000', 'o': '7.1820300000'}, 'CADCHF': {'b': '0.5852900000', 'o': '0.5852900000'}, 'SGDJPY': {'b': '115.5960000000', '...
2025-07-16 21:25:03,457 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:04,112 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:04,117 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:05,137 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:05,144 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:05,675 - DEBUG - app.firebase_stream - Firebase listener triggered (20). Event Type: patch, Path: /. Timestamp: 1752726305.6752183
2025-07-16 21:25:05,675 - DEBUG - app.firebase_stream - Prepared batch update for 19 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '88.0060000000', 'o': '88.0000000000'}, 'GBPAUD': {'b': '2.0650800000', 'o': '2.0649100000'}, 'USDCNH': {'b': '7.1820600000', '
2025-07-16 21:25:05,675 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '88.0060000000', 'o': '88.0000000000'}, 'GBPAUD': {'b': '2.0650800000', 'o': '2.0649100000'}, 'USDCNH': {'b': '7.1820600000', '...
2025-07-16 21:25:05,676 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:06,158 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:06,163 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:07,165 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:07,168 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:07,979 - DEBUG - app.firebase_stream - Firebase listener triggered (21). Event Type: patch, Path: /. Timestamp: 1752726307.979524
2025-07-16 21:25:07,980 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0040000000', 'o': '37.9970000000'}, 'NZDJPY': {'b': '88.0060000000', 'o': '87.9990000000'}, 'GBPAUD': {'b': '2.0650600000', 'o': '2.0649100000'}, 'USDCNH': {'b': '7.1820500000', '
2025-07-16 21:25:07,980 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0040000000', 'o': '37.9970000000'}, 'NZDJPY': {'b': '88.0060000000', 'o': '87.9990000000'}, 'GBPAUD': {'b': '2.0650600000', 'o': '2.0649100000'}, 'USDCNH': {'b': '7.1820500000', '...
2025-07-16 21:25:07,981 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:08,178 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:08,183 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:09,188 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:09,193 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:10,204 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:10,210 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:10,286 - DEBUG - app.firebase_stream - Firebase listener triggered (22). Event Type: patch, Path: /. Timestamp: 1752726310.2864468
2025-07-16 21:25:10,286 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0497000000', 'o': '13.0444000000'}, 'NZDJPY': {'b': '88.0060000000', 'o': '88.0000000000'}, 'GBPAUD': {'b': '2.0650800000', 'o': '2.0649100000'}, 'USDJPY': {'b': '148.5990000000',
2025-07-16 21:25:10,288 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0497000000', 'o': '13.0444000000'}, 'NZDJPY': {'b': '88.0060000000', 'o': '88.0000000000'}, 'GBPAUD': {'b': '2.0650800000', 'o': '2.0649100000'}, 'USDJPY': {'b': '148.5990000000',...
2025-07-16 21:25:10,292 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:11,212 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:11,215 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:12,223 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:12,227 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:12,664 - DEBUG - app.firebase_stream - Firebase listener triggered (23). Event Type: patch, Path: /. Timestamp: 1752726312.6645222
2025-07-16 21:25:12,664 - DEBUG - app.firebase_stream - Prepared batch update for 19 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.0060000000', 'o': '87.9980000000'}, 'GBPAUD': {'b': '2.0651100000', 'o': '2.0649200000'}, 'USDCNH': {'b': '7.1820400000', 'o': '7.1820400000'}, 'AUDJPY': {'b': '96.3620000000', 'o
2025-07-16 21:25:12,665 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.0060000000', 'o': '87.9980000000'}, 'GBPAUD': {'b': '2.0651100000', 'o': '2.0649200000'}, 'USDCNH': {'b': '7.1820400000', 'o': '7.1820400000'}, 'AUDJPY': {'b': '96.3620000000', 'o...
2025-07-16 21:25:12,665 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:13,232 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:13,237 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:14,243 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:14,247 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:14,967 - DEBUG - app.firebase_stream - Firebase listener triggered (24). Event Type: patch, Path: /. Timestamp: 1752726314.967696
2025-07-16 21:25:14,968 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0496000000', 'o': '13.0435000000'}, 'NZDJPY': {'b': '88.0060000000', 'o': '88.0000000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649100000'}, 'USDCNH': {'b': '7.1820700000', '
2025-07-16 21:25:14,969 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0496000000', 'o': '13.0435000000'}, 'NZDJPY': {'b': '88.0060000000', 'o': '88.0000000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649100000'}, 'USDCNH': {'b': '7.1820700000', '...
2025-07-16 21:25:14,974 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:15,250 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:15,258 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:16,261 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:16,265 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:17,253 - DEBUG - app.firebase_stream - Firebase listener triggered (25). Event Type: patch, Path: /. Timestamp: 1752726317.2530923
2025-07-16 21:25:17,253 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPAUD': {'b': '2.0650800000', 'o': '2.0649400000'}, 'USDCNH': {'b': '7.1821100000', 'o': '7.1819900000'}, 'EURZAR': {'b': '20.7641600000', 'o': '20.7413800000'}, 'AUDJPY': {'b': '96.3600000000', 'o
2025-07-16 21:25:17,254 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPAUD': {'b': '2.0650800000', 'o': '2.0649400000'}, 'USDCNH': {'b': '7.1821100000', 'o': '7.1819900000'}, 'EURZAR': {'b': '20.7641600000', 'o': '20.7413800000'}, 'AUDJPY': {'b': '96.3600000000', 'o...
2025-07-16 21:25:17,256 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:17,270 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:17,277 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:18,291 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:18,294 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:19,306 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:19,309 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:19,631 - DEBUG - app.firebase_stream - Firebase listener triggered (26). Event Type: patch, Path: /. Timestamp: 1752726319.6314802
2025-07-16 21:25:19,631 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0495000000', 'o': '13.0434000000'}, 'NZDJPY': {'b': '88.0060000000', 'o': '87.9990000000'}, 'GBPAUD': {'b': '2.0650900000', 'o': '2.0649100000'}, 'USDCNH': {'b': '7.1820500000', '
2025-07-16 21:25:19,632 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0495000000', 'o': '13.0434000000'}, 'NZDJPY': {'b': '88.0060000000', 'o': '87.9990000000'}, 'GBPAUD': {'b': '2.0650900000', 'o': '2.0649100000'}, 'USDCNH': {'b': '7.1820500000', '...
2025-07-16 21:25:19,632 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:20,313 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:20,317 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:21,332 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:21,336 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:21,894 - DEBUG - app.firebase_stream - Firebase listener triggered (27). Event Type: patch, Path: /. Timestamp: 1752726321.8948376
2025-07-16 21:25:21,895 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0494000000', 'o': '13.0433000000'}, 'NZDJPY': {'b': '88.0060000000', 'o': '87.9980000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649100000'}, 'USDJPY': {'b': '148.6000000000',
2025-07-16 21:25:21,896 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0494000000', 'o': '13.0433000000'}, 'NZDJPY': {'b': '88.0060000000', 'o': '87.9980000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649100000'}, 'USDJPY': {'b': '148.6000000000',...
2025-07-16 21:25:21,900 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:22,354 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:22,358 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:22,547 - INFO - app - [AUTO-CUTOFF] Starting update_all_users_dynamic_portfolio job...
2025-07-16 21:25:22,547 - INFO - app - [AUTO-CUTOFF] update_all_users_dynamic_portfolio heartbeat: task is alive and running.
2025-07-16 21:25:22,547 - INFO - app - [AUTO-CUTOFF] Fetching all active users (live and demo)...
2025-07-16 21:25:22,559 - INFO - app - [AUTO-CUTOFF] Found 19 live users and 11 demo users.
2025-07-16 21:25:22,559 - INFO - app - [AUTO-CUTOFF] Processing 30 users for dynamic portfolio update...
2025-07-16 21:25:22,559 - INFO - app - [AUTO-CUTOFF] Processing user 4 (live), group: Group B
2025-07-16 21:25:22,559 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 4 (live) from cache/DB...
2025-07-16 21:25:22,566 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:25:22,567 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:25:22,567 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:25:22,578 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369040>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E53688D0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E536AF10>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E53696A0>, <app.database.models.Group object at 0x000002B2E536B8A0>, <app.database.models.Group object at 0x000002B2E5369260>, <app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368E20>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E53698C0>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E4ECCC00>, <app.database.models.Group object at 0x000002B2E4ECC490>, <app.database.models.Group object at 0x000002B2E4ECEAD0>, <app.database.models.Group object at 0x000002B2E4ECC050>, <app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECD370>, <app.database.models.Group object at 0x000002B2E4ECD260>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECEE00>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECF130>, <app.database.models.Group object at 0x000002B2E4ECF240>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E4ECF570>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E4ECFBD0>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5374380>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E53745A0>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5375BF0>, <app.database.models.Group object at 0x000002B2E5375E10>, <app.database.models.Group object at 0x000002B2E5376470>]
2025-07-16 21:25:22,579 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:25:22,579 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 4...
2025-07-16 21:25:22,581 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 open orders.
2025-07-16 21:25:22,582 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 4...
2025-07-16 21:25:22,585 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 pending orders.
2025-07-16 21:25:22,585 - WARNING - app - [AUTO-CUTOFF] User 4 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:25:22,585 - INFO - app - [AUTO-CUTOFF] Processing user 5 (live), group: Admin
2025-07-16 21:25:22,585 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 5 (live) from cache/DB...
2025-07-16 21:25:22,589 - WARNING - app - [AUTO-CUTOFF] No user data found for user 5 (live). Skipping portfolio update.
2025-07-16 21:25:22,590 - INFO - app - [AUTO-CUTOFF] Processing user 8 (live), group: string
2025-07-16 21:25:22,590 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 8 (live) from cache/DB...
2025-07-16 21:25:22,595 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group string...
2025-07-16 21:25:22,596 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'string' from cache: None
2025-07-16 21:25:22,596 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'string', fetching from DB.
2025-07-16 21:25:22,599 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'string': []
2025-07-16 21:25:22,599 - ERROR - app - [AUTO-CUTOFF] Group symbol settings not found in DB for group 'string'. Skipping portfolio update for user 8.
2025-07-16 21:25:22,599 - INFO - app - [AUTO-CUTOFF] Processing user 9 (live), group: Standard
2025-07-16 21:25:22,599 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 9 (live) from cache/DB...
2025-07-16 21:25:22,602 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:25:22,603 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:25:22,603 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:25:22,608 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x000002B2E4ECC050>, <app.database.models.Group object at 0x000002B2E4ECCC00>, <app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECD370>, <app.database.models.Group object at 0x000002B2E4ECD260>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECEE00>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECF130>, <app.database.models.Group object at 0x000002B2E4ECF240>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E4ECF570>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E4ECFBD0>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369040>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E53688D0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E536AF10>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E53696A0>, <app.database.models.Group object at 0x000002B2E536B8A0>, <app.database.models.Group object at 0x000002B2E5369260>, <app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368E20>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E53698C0>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E53699D0>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E5369150>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5374380>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E53745A0>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5375BF0>]
2025-07-16 21:25:22,609 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:25:22,609 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 9...
2025-07-16 21:25:22,612 - DEBUG - app - [AUTO-CUTOFF] User 9 has 1 open orders.
2025-07-16 21:25:22,612 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 9...
2025-07-16 21:25:22,614 - DEBUG - app - [AUTO-CUTOFF] User 9 has 0 pending orders.
2025-07-16 21:25:22,614 - DEBUG - app - [AUTO-CUTOFF] User 9 total positions for portfolio calculation: 1
2025-07-16 21:25:22,615 - DEBUG - app - [AUTO-CUTOFF] User 9 adjusted market prices: {}
2025-07-16 21:25:22,615 - DEBUG - app - [AUTO-CUTOFF] User 9 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:25:22,615 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 9...
2025-07-16 21:25:23,001 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol BTCUSD
2025-07-16 21:25:23,001 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 99.90738313495848051220798402% which is below threshold 100.0%
2025-07-16 21:25:23,001 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 9: {'balance': '9794.75000000', 'equity': '9794.75000000', 'margin': '9803.83000000', 'free_margin': '-9.08000000', 'profit_loss': '0.0', 'margin_level': '99.90738313495848051220798402', 'positions': [{'order_id': '1000341-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.41000000'), 'order_price': Decimal('141921.60000000'), 'margin': Decimal('9773.83000000'), 'contract_value': Decimal('0.41000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('244.35000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': True}
2025-07-16 21:25:23,001 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 9: {'balance': '9794.75000000', 'equity': '9794.75000000', 'margin': '9803.83000000', 'free_margin': '-9.08000000', 'profit_loss': '0.0', 'margin_level': '99.90738313495848051220798402', 'positions_with_pnl': [{'order_id': '1000341-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.41000000'), 'order_price': Decimal('141921.60000000'), 'margin': Decimal('9773.83000000'), 'contract_value': Decimal('0.41000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('244.35000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': True}
2025-07-16 21:25:23,002 - INFO - app - [AUTO-CUTOFF] User 9 margin_level: 99.90738313495848051220798402
2025-07-16 21:25:24,235 - DEBUG - app.firebase_stream - Firebase listener triggered (28). Event Type: patch, Path: /. Timestamp: 1752726324.2357583
2025-07-16 21:25:24,236 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.0040000000', 'o': '87.9980000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649200000'}, 'USDJPY': {'b': '148.5970000000', 'o': '148.5920000000'}, 'USDCNH': {'b': '7.1820600000',
2025-07-16 21:25:24,236 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.0040000000', 'o': '87.9980000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649200000'}, 'USDJPY': {'b': '148.5970000000', 'o': '148.5920000000'}, 'USDCNH': {'b': '7.1820600000',...
2025-07-16 21:25:24,236 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:26,515 - DEBUG - app.firebase_stream - Firebase listener triggered (29). Event Type: patch, Path: /. Timestamp: 1752726326.5155065
2025-07-16 21:25:26,516 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0496000000', 'o': '13.0443000000'}, 'NZDJPY': {'b': '88.0060000000', 'o': '87.9970000000'}, 'GBPAUD': {'b': '2.0651100000', 'o': '2.0649200000'}, 'USDJPY': {'b': '148.5990000000',
2025-07-16 21:25:26,516 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0496000000', 'o': '13.0443000000'}, 'NZDJPY': {'b': '88.0060000000', 'o': '87.9970000000'}, 'GBPAUD': {'b': '2.0651100000', 'o': '2.0649200000'}, 'USDJPY': {'b': '148.5990000000',...
2025-07-16 21:25:26,516 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:27,095 - INFO - app - [AUTO-CUTOFF] Sent margin call warning email (HTML) to user 9 at kodideladinesh123@gmail.com
2025-07-16 21:25:27,096 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:27,097 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 9
2025-07-16 21:25:27,097 - INFO - app - [AUTO-CUTOFF] Processing user 10 (live), group: Group B
2025-07-16 21:25:27,097 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 10 (live) from cache/DB...
2025-07-16 21:25:27,105 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:27,123 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:25:27,128 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:25:27,128 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:25:27,141 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E5377F00>, <app.database.models.Group object at 0x000002B2E52D8050>, <app.database.models.Group object at 0x000002B2E52D8160>, <app.database.models.Group object at 0x000002B2E52D8270>, <app.database.models.Group object at 0x000002B2E52D8380>, <app.database.models.Group object at 0x000002B2E52D8490>, <app.database.models.Group object at 0x000002B2E52D85A0>, <app.database.models.Group object at 0x000002B2E52D86B0>, <app.database.models.Group object at 0x000002B2E52D87C0>, <app.database.models.Group object at 0x000002B2E52D88D0>, <app.database.models.Group object at 0x000002B2E52D89E0>, <app.database.models.Group object at 0x000002B2E52D8AF0>, <app.database.models.Group object at 0x000002B2E52D8C00>, <app.database.models.Group object at 0x000002B2E52D8D10>, <app.database.models.Group object at 0x000002B2E52D8E20>, <app.database.models.Group object at 0x000002B2E52D8F30>, <app.database.models.Group object at 0x000002B2E52D9040>, <app.database.models.Group object at 0x000002B2E52D9150>, <app.database.models.Group object at 0x000002B2E52D9260>, <app.database.models.Group object at 0x000002B2E52D9370>, <app.database.models.Group object at 0x000002B2E52D9480>, <app.database.models.Group object at 0x000002B2E52D9590>, <app.database.models.Group object at 0x000002B2E52D96A0>, <app.database.models.Group object at 0x000002B2E52D97B0>, <app.database.models.Group object at 0x000002B2E52D98C0>, <app.database.models.Group object at 0x000002B2E52D99D0>, <app.database.models.Group object at 0x000002B2E52D9AE0>, <app.database.models.Group object at 0x000002B2E52D9BF0>, <app.database.models.Group object at 0x000002B2E52D9D00>, <app.database.models.Group object at 0x000002B2E52D9E10>, <app.database.models.Group object at 0x000002B2E52D9F20>, <app.database.models.Group object at 0x000002B2E52DA030>, <app.database.models.Group object at 0x000002B2E52DA140>, <app.database.models.Group object at 0x000002B2E52DA250>, <app.database.models.Group object at 0x000002B2E52DA360>, <app.database.models.Group object at 0x000002B2E52DA470>, <app.database.models.Group object at 0x000002B2E52DA580>, <app.database.models.Group object at 0x000002B2E52DA690>, <app.database.models.Group object at 0x000002B2E52DA7A0>, <app.database.models.Group object at 0x000002B2E52DA8B0>, <app.database.models.Group object at 0x000002B2E52DA9C0>, <app.database.models.Group object at 0x000002B2E52DAAD0>, <app.database.models.Group object at 0x000002B2E52DABE0>, <app.database.models.Group object at 0x000002B2E52DACF0>, <app.database.models.Group object at 0x000002B2E52DAE00>, <app.database.models.Group object at 0x000002B2E52DAF10>, <app.database.models.Group object at 0x000002B2E52DB020>, <app.database.models.Group object at 0x000002B2E52DB130>, <app.database.models.Group object at 0x000002B2E52DB240>, <app.database.models.Group object at 0x000002B2E52DB350>, <app.database.models.Group object at 0x000002B2E52DB460>, <app.database.models.Group object at 0x000002B2E52DB570>, <app.database.models.Group object at 0x000002B2E52DB680>, <app.database.models.Group object at 0x000002B2E52DB790>, <app.database.models.Group object at 0x000002B2E52DB8A0>, <app.database.models.Group object at 0x000002B2E52DB9B0>, <app.database.models.Group object at 0x000002B2E52DBAC0>, <app.database.models.Group object at 0x000002B2E52DBBD0>, <app.database.models.Group object at 0x000002B2E52DBCE0>, <app.database.models.Group object at 0x000002B2E52DBDF0>, <app.database.models.Group object at 0x000002B2E52DBF00>]
2025-07-16 21:25:27,145 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:25:27,145 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 10...
2025-07-16 21:25:27,155 - DEBUG - app - [AUTO-CUTOFF] User 10 has 0 open orders.
2025-07-16 21:25:27,155 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 10...
2025-07-16 21:25:27,160 - DEBUG - app - [AUTO-CUTOFF] User 10 has 0 pending orders.
2025-07-16 21:25:27,160 - WARNING - app - [AUTO-CUTOFF] User 10 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:25:27,160 - INFO - app - [AUTO-CUTOFF] Processing user 11 (live), group: Group B
2025-07-16 21:25:27,160 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 11 (live) from cache/DB...
2025-07-16 21:25:27,170 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:25:27,173 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:25:27,173 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:25:27,182 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E53767A0>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5375BF0>, <app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E4ECEAD0>, <app.database.models.Group object at 0x000002B2E4ECC050>, <app.database.models.Group object at 0x000002B2E4ECCC00>, <app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECD370>, <app.database.models.Group object at 0x000002B2E4ECD260>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECEE00>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECF130>, <app.database.models.Group object at 0x000002B2E4ECF240>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E4ECF570>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E4ECFBD0>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E536BDF0>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369040>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E53688D0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E536AF10>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E53696A0>, <app.database.models.Group object at 0x000002B2E536B8A0>, <app.database.models.Group object at 0x000002B2E5369260>, <app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368E20>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E53698C0>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E53699D0>]
2025-07-16 21:25:27,186 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:25:27,186 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 11...
2025-07-16 21:25:27,189 - DEBUG - app - [AUTO-CUTOFF] User 11 has 0 open orders.
2025-07-16 21:25:27,189 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 11...
2025-07-16 21:25:27,194 - DEBUG - app - [AUTO-CUTOFF] User 11 has 0 pending orders.
2025-07-16 21:25:27,194 - WARNING - app - [AUTO-CUTOFF] User 11 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:25:27,195 - INFO - app - [AUTO-CUTOFF] Processing user 12 (live), group: Standard
2025-07-16 21:25:27,195 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 12 (live) from cache/DB...
2025-07-16 21:25:27,218 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:25:27,224 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:25:27,224 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:25:27,238 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E5369150>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E5369E10>, <app.database.models.Group object at 0x000002B2E536B9B0>, <app.database.models.Group object at 0x000002B2E536A140>, <app.database.models.Group object at 0x000002B2E52CC050>, <app.database.models.Group object at 0x000002B2E52CC160>, <app.database.models.Group object at 0x000002B2E52CC270>, <app.database.models.Group object at 0x000002B2E52CC380>, <app.database.models.Group object at 0x000002B2E52CC490>, <app.database.models.Group object at 0x000002B2E52CC5A0>, <app.database.models.Group object at 0x000002B2E52CC6B0>, <app.database.models.Group object at 0x000002B2E52CC7C0>, <app.database.models.Group object at 0x000002B2E52CC8D0>, <app.database.models.Group object at 0x000002B2E52CC9E0>, <app.database.models.Group object at 0x000002B2E52CCAF0>, <app.database.models.Group object at 0x000002B2E52CCC00>, <app.database.models.Group object at 0x000002B2E52CCD10>, <app.database.models.Group object at 0x000002B2E52CCE20>, <app.database.models.Group object at 0x000002B2E52CCF30>, <app.database.models.Group object at 0x000002B2E52CD040>, <app.database.models.Group object at 0x000002B2E52CD150>, <app.database.models.Group object at 0x000002B2E52CD260>, <app.database.models.Group object at 0x000002B2E52CD370>, <app.database.models.Group object at 0x000002B2E52CD480>, <app.database.models.Group object at 0x000002B2E52CD590>, <app.database.models.Group object at 0x000002B2E52CD6A0>, <app.database.models.Group object at 0x000002B2E52CD7B0>, <app.database.models.Group object at 0x000002B2E52CD8C0>, <app.database.models.Group object at 0x000002B2E52CD9D0>, <app.database.models.Group object at 0x000002B2E52CDAE0>, <app.database.models.Group object at 0x000002B2E52CDBF0>, <app.database.models.Group object at 0x000002B2E52CDD00>, <app.database.models.Group object at 0x000002B2E52CDE10>, <app.database.models.Group object at 0x000002B2E52CDF20>, <app.database.models.Group object at 0x000002B2E52CE030>, <app.database.models.Group object at 0x000002B2E52CE140>, <app.database.models.Group object at 0x000002B2E52CE250>, <app.database.models.Group object at 0x000002B2E52CE360>, <app.database.models.Group object at 0x000002B2E52CE470>, <app.database.models.Group object at 0x000002B2E52CE580>, <app.database.models.Group object at 0x000002B2E52CE690>, <app.database.models.Group object at 0x000002B2E52CE7A0>, <app.database.models.Group object at 0x000002B2E52CE8B0>, <app.database.models.Group object at 0x000002B2E52CE9C0>, <app.database.models.Group object at 0x000002B2E52CEAD0>, <app.database.models.Group object at 0x000002B2E52CEBE0>, <app.database.models.Group object at 0x000002B2E52CECF0>, <app.database.models.Group object at 0x000002B2E52CEE00>, <app.database.models.Group object at 0x000002B2E52CEF10>, <app.database.models.Group object at 0x000002B2E52CF020>, <app.database.models.Group object at 0x000002B2E52CF130>, <app.database.models.Group object at 0x000002B2E52CF240>, <app.database.models.Group object at 0x000002B2E52CF350>, <app.database.models.Group object at 0x000002B2E52CF460>, <app.database.models.Group object at 0x000002B2E52CF570>, <app.database.models.Group object at 0x000002B2E52CF680>, <app.database.models.Group object at 0x000002B2E52CF790>, <app.database.models.Group object at 0x000002B2E52CF8A0>, <app.database.models.Group object at 0x000002B2E52CF9B0>, <app.database.models.Group object at 0x000002B2E52CFAC0>, <app.database.models.Group object at 0x000002B2E52CFBD0>, <app.database.models.Group object at 0x000002B2E52CFCE0>, <app.database.models.Group object at 0x000002B2E52CFDF0>, <app.database.models.Group object at 0x000002B2E52CFF00>, <app.database.models.Group object at 0x000002B2E52F4050>, <app.database.models.Group object at 0x000002B2E52F4160>, <app.database.models.Group object at 0x000002B2E52F4270>]
2025-07-16 21:25:27,241 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:25:27,241 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 12...
2025-07-16 21:25:27,246 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 open orders.
2025-07-16 21:25:27,246 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 12...
2025-07-16 21:25:27,250 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 pending orders.
2025-07-16 21:25:27,250 - WARNING - app - [AUTO-CUTOFF] User 12 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:25:27,250 - INFO - app - [AUTO-CUTOFF] Processing user 13 (live), group: Group B
2025-07-16 21:25:27,250 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 13 (live) from cache/DB...
2025-07-16 21:25:27,258 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:25:27,260 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:25:27,260 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:25:27,265 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECC050>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECEAD0>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECF130>, <app.database.models.Group object at 0x000002B2E4ECF240>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E4ECF570>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E4ECFBD0>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E536BDF0>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369040>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E53688D0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E536AF10>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E53696A0>, <app.database.models.Group object at 0x000002B2E536B8A0>, <app.database.models.Group object at 0x000002B2E5369260>, <app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368E20>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E53698C0>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E53699D0>, <app.database.models.Group object at 0x000002B2E4DF7680>, <app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>, <app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E5376CF0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E53745A0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5375370>]
2025-07-16 21:25:27,266 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:25:27,266 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 13...
2025-07-16 21:25:27,269 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 open orders.
2025-07-16 21:25:27,269 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 13...
2025-07-16 21:25:27,271 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 pending orders.
2025-07-16 21:25:27,271 - WARNING - app - [AUTO-CUTOFF] User 13 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:25:27,271 - INFO - app - [AUTO-CUTOFF] Processing user 14 (live), group: Standard
2025-07-16 21:25:27,271 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 14 (live) from cache/DB...
2025-07-16 21:25:27,276 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:25:27,277 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:25:27,277 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:25:27,283 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x000002B2E536A140>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E4ECEE00>, <app.database.models.Group object at 0x000002B2E4ECCC00>, <app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E53767A0>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5375BF0>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E5376690>, <app.database.models.Group object at 0x000002B2E5375260>, <app.database.models.Group object at 0x000002B2E52B4050>, <app.database.models.Group object at 0x000002B2E52B4160>, <app.database.models.Group object at 0x000002B2E52B4270>, <app.database.models.Group object at 0x000002B2E52B4380>, <app.database.models.Group object at 0x000002B2E52B4490>, <app.database.models.Group object at 0x000002B2E52B45A0>, <app.database.models.Group object at 0x000002B2E52B46B0>, <app.database.models.Group object at 0x000002B2E52B47C0>, <app.database.models.Group object at 0x000002B2E52B48D0>, <app.database.models.Group object at 0x000002B2E52B49E0>, <app.database.models.Group object at 0x000002B2E52B4AF0>, <app.database.models.Group object at 0x000002B2E52B4C00>, <app.database.models.Group object at 0x000002B2E52B4D10>, <app.database.models.Group object at 0x000002B2E52B4E20>, <app.database.models.Group object at 0x000002B2E52B4F30>, <app.database.models.Group object at 0x000002B2E52B5040>, <app.database.models.Group object at 0x000002B2E52B5150>, <app.database.models.Group object at 0x000002B2E52B5260>, <app.database.models.Group object at 0x000002B2E52B5370>, <app.database.models.Group object at 0x000002B2E52B5480>, <app.database.models.Group object at 0x000002B2E52B5590>, <app.database.models.Group object at 0x000002B2E52B56A0>, <app.database.models.Group object at 0x000002B2E52B57B0>, <app.database.models.Group object at 0x000002B2E52B58C0>, <app.database.models.Group object at 0x000002B2E52B59D0>, <app.database.models.Group object at 0x000002B2E52B5AE0>, <app.database.models.Group object at 0x000002B2E52B5BF0>, <app.database.models.Group object at 0x000002B2E52B5D00>, <app.database.models.Group object at 0x000002B2E52B5E10>, <app.database.models.Group object at 0x000002B2E52B5F20>, <app.database.models.Group object at 0x000002B2E52B6030>, <app.database.models.Group object at 0x000002B2E52B6140>, <app.database.models.Group object at 0x000002B2E52B6250>, <app.database.models.Group object at 0x000002B2E52B6360>, <app.database.models.Group object at 0x000002B2E52B6470>, <app.database.models.Group object at 0x000002B2E52B6580>, <app.database.models.Group object at 0x000002B2E52B6690>, <app.database.models.Group object at 0x000002B2E52B67A0>, <app.database.models.Group object at 0x000002B2E52B68B0>, <app.database.models.Group object at 0x000002B2E52B69C0>, <app.database.models.Group object at 0x000002B2E52B6AD0>, <app.database.models.Group object at 0x000002B2E52B6BE0>, <app.database.models.Group object at 0x000002B2E52B6CF0>, <app.database.models.Group object at 0x000002B2E52B6E00>, <app.database.models.Group object at 0x000002B2E52B6F10>]
2025-07-16 21:25:27,284 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:25:27,284 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 14...
2025-07-16 21:25:27,287 - DEBUG - app - [AUTO-CUTOFF] User 14 has 3 open orders.
2025-07-16 21:25:27,287 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 14...
2025-07-16 21:25:27,289 - DEBUG - app - [AUTO-CUTOFF] User 14 has 0 pending orders.
2025-07-16 21:25:27,289 - DEBUG - app - [AUTO-CUTOFF] User 14 total positions for portfolio calculation: 3
2025-07-16 21:25:27,291 - DEBUG - app - [AUTO-CUTOFF] User 14 adjusted market prices: {}
2025-07-16 21:25:27,291 - DEBUG - app - [AUTO-CUTOFF] User 14 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:25:27,291 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 14...
2025-07-16 21:25:27,605 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol BTCUSD
2025-07-16 21:25:27,606 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:25:27,606 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:25:27,606 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 14: {'balance': '9902.02000000', 'equity': '9902.02000000', 'margin': '9494.47000000', 'free_margin': '407.55000000', 'profit_loss': '0.0', 'margin_level': '104.2924986860772639231047125', 'positions': [{'order_id': '1000330-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.40000000'), 'order_price': Decimal('141908.50000000'), 'margin': Decimal('9422.73000000'), 'contract_value': Decimal('0.40000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('235.57000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000332-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('65.21517371'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000333-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('6.52134765'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:25:27,606 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 14: {'balance': '9902.02000000', 'equity': '9902.02000000', 'margin': '9494.47000000', 'free_margin': '407.55000000', 'profit_loss': '0.0', 'margin_level': '104.2924986860772639231047125', 'positions_with_pnl': [{'order_id': '1000330-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.40000000'), 'order_price': Decimal('141908.50000000'), 'margin': Decimal('9422.73000000'), 'contract_value': Decimal('0.40000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('235.57000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000332-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('65.21517371'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000333-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('6.52134765'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:25:27,607 - INFO - app - [AUTO-CUTOFF] User 14 margin_level: 104.2924986860772639231047125
2025-07-16 21:25:27,608 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 14
2025-07-16 21:25:27,608 - INFO - app - [AUTO-CUTOFF] Processing user 16 (live), group: Standard
2025-07-16 21:25:27,608 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 16 (live) from cache/DB...
2025-07-16 21:25:27,614 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:25:27,614 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:25:27,615 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:25:27,621 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECC490>, <app.database.models.Group object at 0x000002B2E4ECEAD0>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECC050>, <app.database.models.Group object at 0x000002B2E4ECF130>, <app.database.models.Group object at 0x000002B2E4ECF240>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E4ECF570>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E4ECFBD0>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E4DF7680>, <app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>, <app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E5376CF0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E53745A0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E536BDF0>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369040>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E53688D0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E536AF10>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E53696A0>, <app.database.models.Group object at 0x000002B2E536B8A0>, <app.database.models.Group object at 0x000002B2E5369260>, <app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368E20>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E53698C0>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E53699D0>, <app.database.models.Group object at 0x000002B2E53687C0>]
2025-07-16 21:25:27,622 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:25:27,622 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 16...
2025-07-16 21:25:27,625 - DEBUG - app - [AUTO-CUTOFF] User 16 has 0 open orders.
2025-07-16 21:25:27,625 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 16...
2025-07-16 21:25:27,627 - DEBUG - app - [AUTO-CUTOFF] User 16 has 0 pending orders.
2025-07-16 21:25:27,627 - WARNING - app - [AUTO-CUTOFF] User 16 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:25:27,627 - INFO - app - [AUTO-CUTOFF] Processing user 17 (live), group: Group B
2025-07-16 21:25:27,627 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 17 (live) from cache/DB...
2025-07-16 21:25:27,632 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:25:27,633 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:25:27,633 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:25:27,638 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E53767A0>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5375BF0>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E5376690>, <app.database.models.Group object at 0x000002B2E5375260>, <app.database.models.Group object at 0x000002B2E4ECEE00>, <app.database.models.Group object at 0x000002B2E4ECCC00>, <app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E536A140>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E536B9B0>, <app.database.models.Group object at 0x000002B2E5369150>, <app.database.models.Group object at 0x000002B2E5369E10>, <app.database.models.Group object at 0x000002B2E52E4050>, <app.database.models.Group object at 0x000002B2E52E4160>, <app.database.models.Group object at 0x000002B2E52E4270>, <app.database.models.Group object at 0x000002B2E52E4380>, <app.database.models.Group object at 0x000002B2E52E4490>, <app.database.models.Group object at 0x000002B2E52E45A0>, <app.database.models.Group object at 0x000002B2E52E46B0>, <app.database.models.Group object at 0x000002B2E52E47C0>, <app.database.models.Group object at 0x000002B2E52E48D0>, <app.database.models.Group object at 0x000002B2E52E49E0>, <app.database.models.Group object at 0x000002B2E52E4AF0>, <app.database.models.Group object at 0x000002B2E52E4C00>, <app.database.models.Group object at 0x000002B2E52E4D10>, <app.database.models.Group object at 0x000002B2E52E4E20>, <app.database.models.Group object at 0x000002B2E52E4F30>, <app.database.models.Group object at 0x000002B2E52E5040>, <app.database.models.Group object at 0x000002B2E52E5150>, <app.database.models.Group object at 0x000002B2E52E5260>, <app.database.models.Group object at 0x000002B2E52E5370>, <app.database.models.Group object at 0x000002B2E52E5480>, <app.database.models.Group object at 0x000002B2E52E5590>, <app.database.models.Group object at 0x000002B2E52E56A0>, <app.database.models.Group object at 0x000002B2E52E57B0>, <app.database.models.Group object at 0x000002B2E52E58C0>, <app.database.models.Group object at 0x000002B2E52E59D0>, <app.database.models.Group object at 0x000002B2E52E5AE0>, <app.database.models.Group object at 0x000002B2E52E5BF0>, <app.database.models.Group object at 0x000002B2E52E5D00>, <app.database.models.Group object at 0x000002B2E52E5E10>, <app.database.models.Group object at 0x000002B2E52E5F20>, <app.database.models.Group object at 0x000002B2E52E6030>, <app.database.models.Group object at 0x000002B2E52E6140>, <app.database.models.Group object at 0x000002B2E52E6250>, <app.database.models.Group object at 0x000002B2E52E6360>, <app.database.models.Group object at 0x000002B2E52E6470>, <app.database.models.Group object at 0x000002B2E52E6580>, <app.database.models.Group object at 0x000002B2E52E6690>, <app.database.models.Group object at 0x000002B2E52E67A0>, <app.database.models.Group object at 0x000002B2E52E68B0>, <app.database.models.Group object at 0x000002B2E52E69C0>, <app.database.models.Group object at 0x000002B2E52E6AD0>, <app.database.models.Group object at 0x000002B2E52E6BE0>, <app.database.models.Group object at 0x000002B2E52E6CF0>, <app.database.models.Group object at 0x000002B2E52E6E00>]
2025-07-16 21:25:27,639 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:25:27,639 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 17...
2025-07-16 21:25:27,642 - DEBUG - app - [AUTO-CUTOFF] User 17 has 0 open orders.
2025-07-16 21:25:27,642 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 17...
2025-07-16 21:25:27,644 - DEBUG - app - [AUTO-CUTOFF] User 17 has 0 pending orders.
2025-07-16 21:25:27,644 - WARNING - app - [AUTO-CUTOFF] User 17 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:25:27,644 - INFO - app - [AUTO-CUTOFF] Processing user 18 (live), group: Group B
2025-07-16 21:25:27,644 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 18 (live) from cache/DB...
2025-07-16 21:25:27,649 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:25:27,650 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:25:27,650 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:25:27,656 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E4ECC050>, <app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECF130>, <app.database.models.Group object at 0x000002B2E4ECF240>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E4ECF570>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E4ECFBD0>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E4DF7680>, <app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>, <app.database.models.Group object at 0x000002B2E536BDF0>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369040>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E53688D0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E536AF10>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E53696A0>, <app.database.models.Group object at 0x000002B2E536B8A0>, <app.database.models.Group object at 0x000002B2E5369260>, <app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368E20>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E53698C0>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E53699D0>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E5376CF0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E53745A0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E52E6F10>, <app.database.models.Group object at 0x000002B2E52E7020>]
2025-07-16 21:25:27,657 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:25:27,657 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 18...
2025-07-16 21:25:27,660 - DEBUG - app - [AUTO-CUTOFF] User 18 has 0 open orders.
2025-07-16 21:25:27,660 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 18...
2025-07-16 21:25:27,662 - DEBUG - app - [AUTO-CUTOFF] User 18 has 0 pending orders.
2025-07-16 21:25:27,662 - WARNING - app - [AUTO-CUTOFF] User 18 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:25:27,662 - INFO - app - [AUTO-CUTOFF] Processing user 19 (live), group: Elite
2025-07-16 21:25:27,662 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 19 (live) from cache/DB...
2025-07-16 21:25:27,666 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Elite...
2025-07-16 21:25:27,667 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Elite' from cache: None
2025-07-16 21:25:27,667 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Elite', fetching from DB.
2025-07-16 21:25:27,672 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Elite': [<app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E53767A0>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5375BF0>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E5376690>, <app.database.models.Group object at 0x000002B2E5375260>, <app.database.models.Group object at 0x000002B2E536A140>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E536B9B0>, <app.database.models.Group object at 0x000002B2E5369150>, <app.database.models.Group object at 0x000002B2E5369E10>, <app.database.models.Group object at 0x000002B2E4ECEE00>, <app.database.models.Group object at 0x000002B2E4ECCC00>, <app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E4ECEAD0>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECC490>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E52E4050>, <app.database.models.Group object at 0x000002B2E52E4160>, <app.database.models.Group object at 0x000002B2E52E4270>, <app.database.models.Group object at 0x000002B2E52E4380>, <app.database.models.Group object at 0x000002B2E52E4490>, <app.database.models.Group object at 0x000002B2E52E45A0>, <app.database.models.Group object at 0x000002B2E52E46B0>, <app.database.models.Group object at 0x000002B2E52E47C0>, <app.database.models.Group object at 0x000002B2E52E48D0>, <app.database.models.Group object at 0x000002B2E52E49E0>, <app.database.models.Group object at 0x000002B2E52E4AF0>, <app.database.models.Group object at 0x000002B2E52E4C00>, <app.database.models.Group object at 0x000002B2E52E4D10>, <app.database.models.Group object at 0x000002B2E52E4E20>, <app.database.models.Group object at 0x000002B2E52E4F30>, <app.database.models.Group object at 0x000002B2E52E5040>, <app.database.models.Group object at 0x000002B2E52E5150>, <app.database.models.Group object at 0x000002B2E52E5260>, <app.database.models.Group object at 0x000002B2E52E5370>, <app.database.models.Group object at 0x000002B2E52E5480>, <app.database.models.Group object at 0x000002B2E52E5590>, <app.database.models.Group object at 0x000002B2E52E56A0>, <app.database.models.Group object at 0x000002B2E52E57B0>, <app.database.models.Group object at 0x000002B2E52E58C0>, <app.database.models.Group object at 0x000002B2E52E59D0>, <app.database.models.Group object at 0x000002B2E52E5AE0>, <app.database.models.Group object at 0x000002B2E52E5BF0>, <app.database.models.Group object at 0x000002B2E52E5D00>, <app.database.models.Group object at 0x000002B2E52E5E10>, <app.database.models.Group object at 0x000002B2E52E5F20>, <app.database.models.Group object at 0x000002B2E52E6030>, <app.database.models.Group object at 0x000002B2E52E6140>, <app.database.models.Group object at 0x000002B2E52E6250>, <app.database.models.Group object at 0x000002B2E52E6360>, <app.database.models.Group object at 0x000002B2E52E6470>, <app.database.models.Group object at 0x000002B2E52E6580>, <app.database.models.Group object at 0x000002B2E52E6690>, <app.database.models.Group object at 0x000002B2E52E67A0>, <app.database.models.Group object at 0x000002B2E52E68B0>, <app.database.models.Group object at 0x000002B2E52E69C0>, <app.database.models.Group object at 0x000002B2E52E6AD0>, <app.database.models.Group object at 0x000002B2E52E6BE0>]
2025-07-16 21:25:27,673 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Elite': {'sending_orders': 'barclays'}
2025-07-16 21:25:27,673 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 19...
2025-07-16 21:25:27,676 - DEBUG - app - [AUTO-CUTOFF] User 19 has 0 open orders.
2025-07-16 21:25:27,676 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 19...
2025-07-16 21:25:27,678 - DEBUG - app - [AUTO-CUTOFF] User 19 has 0 pending orders.
2025-07-16 21:25:27,678 - WARNING - app - [AUTO-CUTOFF] User 19 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:25:27,678 - INFO - app - [AUTO-CUTOFF] Processing user 20 (live), group: Standard
2025-07-16 21:25:27,678 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 20 (live) from cache/DB...
2025-07-16 21:25:27,682 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:25:27,683 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:25:27,683 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:25:27,688 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E4ECC050>, <app.database.models.Group object at 0x000002B2E4ECF570>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E4ECFBD0>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E4DF7680>, <app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>, <app.database.models.Group object at 0x000002B2E536BDF0>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369040>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E53688D0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E536AF10>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E53696A0>, <app.database.models.Group object at 0x000002B2E536B8A0>, <app.database.models.Group object at 0x000002B2E5369260>, <app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368E20>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E53698C0>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E53699D0>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E5376CF0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E53745A0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5376360>]
2025-07-16 21:25:27,689 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:25:27,689 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 20...
2025-07-16 21:25:27,692 - DEBUG - app - [AUTO-CUTOFF] User 20 has 0 open orders.
2025-07-16 21:25:27,692 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 20...
2025-07-16 21:25:27,694 - DEBUG - app - [AUTO-CUTOFF] User 20 has 0 pending orders.
2025-07-16 21:25:27,694 - WARNING - app - [AUTO-CUTOFF] User 20 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:25:27,694 - INFO - app - [AUTO-CUTOFF] Processing user 21 (live), group: Group B
2025-07-16 21:25:27,694 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 21 (live) from cache/DB...
2025-07-16 21:25:27,699 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:25:27,699 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:25:27,700 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:25:27,705 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E53767A0>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5375BF0>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E5376690>, <app.database.models.Group object at 0x000002B2E5375260>, <app.database.models.Group object at 0x000002B2E536A140>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E536B9B0>, <app.database.models.Group object at 0x000002B2E5369150>, <app.database.models.Group object at 0x000002B2E5369E10>, <app.database.models.Group object at 0x000002B2E4ECEE00>, <app.database.models.Group object at 0x000002B2E4ECCC00>, <app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E4ECEAD0>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECC490>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECF130>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECF240>, <app.database.models.Group object at 0x000002B2E52E4050>, <app.database.models.Group object at 0x000002B2E52E4160>, <app.database.models.Group object at 0x000002B2E52E4270>, <app.database.models.Group object at 0x000002B2E52E4380>, <app.database.models.Group object at 0x000002B2E52E4490>, <app.database.models.Group object at 0x000002B2E52E45A0>, <app.database.models.Group object at 0x000002B2E52E46B0>, <app.database.models.Group object at 0x000002B2E52E47C0>, <app.database.models.Group object at 0x000002B2E52E48D0>, <app.database.models.Group object at 0x000002B2E52E49E0>, <app.database.models.Group object at 0x000002B2E52E4AF0>, <app.database.models.Group object at 0x000002B2E52E4C00>, <app.database.models.Group object at 0x000002B2E52E4D10>, <app.database.models.Group object at 0x000002B2E52E4E20>, <app.database.models.Group object at 0x000002B2E52E4F30>, <app.database.models.Group object at 0x000002B2E52E5040>, <app.database.models.Group object at 0x000002B2E52E5150>, <app.database.models.Group object at 0x000002B2E52E5260>, <app.database.models.Group object at 0x000002B2E52E5370>, <app.database.models.Group object at 0x000002B2E52E5480>, <app.database.models.Group object at 0x000002B2E52E5590>, <app.database.models.Group object at 0x000002B2E52E56A0>, <app.database.models.Group object at 0x000002B2E52E57B0>, <app.database.models.Group object at 0x000002B2E52E58C0>, <app.database.models.Group object at 0x000002B2E52E59D0>, <app.database.models.Group object at 0x000002B2E52E5AE0>, <app.database.models.Group object at 0x000002B2E52E5BF0>, <app.database.models.Group object at 0x000002B2E52E5D00>, <app.database.models.Group object at 0x000002B2E52E5E10>, <app.database.models.Group object at 0x000002B2E52E5F20>, <app.database.models.Group object at 0x000002B2E52E6030>, <app.database.models.Group object at 0x000002B2E52E6140>, <app.database.models.Group object at 0x000002B2E52E6250>, <app.database.models.Group object at 0x000002B2E52E6360>, <app.database.models.Group object at 0x000002B2E52E6470>, <app.database.models.Group object at 0x000002B2E52E6580>, <app.database.models.Group object at 0x000002B2E52E6690>, <app.database.models.Group object at 0x000002B2E52E67A0>, <app.database.models.Group object at 0x000002B2E52E68B0>, <app.database.models.Group object at 0x000002B2E52E69C0>, <app.database.models.Group object at 0x000002B2E52E6AD0>, <app.database.models.Group object at 0x000002B2E52E6BE0>, <app.database.models.Group object at 0x000002B2E52E6F10>, <app.database.models.Group object at 0x000002B2E52E7020>]
2025-07-16 21:25:27,706 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:25:27,706 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 21...
2025-07-16 21:25:27,709 - DEBUG - app - [AUTO-CUTOFF] User 21 has 0 open orders.
2025-07-16 21:25:27,709 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 21...
2025-07-16 21:25:27,711 - DEBUG - app - [AUTO-CUTOFF] User 21 has 0 pending orders.
2025-07-16 21:25:27,711 - WARNING - app - [AUTO-CUTOFF] User 21 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:25:27,711 - INFO - app - [AUTO-CUTOFF] Processing user 22 (live), group: VIP
2025-07-16 21:25:27,712 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 22 (live) from cache/DB...
2025-07-16 21:25:27,717 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group VIP...
2025-07-16 21:25:27,718 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'VIP' from cache: None
2025-07-16 21:25:27,718 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'VIP', fetching from DB.
2025-07-16 21:25:27,724 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'VIP': [<app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E4ECFBD0>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E4DF7680>, <app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>, <app.database.models.Group object at 0x000002B2E536BDF0>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369040>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E53688D0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E536AF10>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E53696A0>, <app.database.models.Group object at 0x000002B2E536B8A0>, <app.database.models.Group object at 0x000002B2E5369260>, <app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368E20>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E53698C0>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E53699D0>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E5376CF0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E53745A0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E5374F30>]
2025-07-16 21:25:27,724 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'VIP': {'sending_orders': 'barclays'}
2025-07-16 21:25:27,725 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 22...
2025-07-16 21:25:27,727 - DEBUG - app - [AUTO-CUTOFF] User 22 has 0 open orders.
2025-07-16 21:25:27,727 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 22...
2025-07-16 21:25:27,729 - DEBUG - app - [AUTO-CUTOFF] User 22 has 0 pending orders.
2025-07-16 21:25:27,729 - WARNING - app - [AUTO-CUTOFF] User 22 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:25:27,729 - INFO - app - [AUTO-CUTOFF] Processing user 23 (live), group: Group B
2025-07-16 21:25:27,729 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 23 (live) from cache/DB...
2025-07-16 21:25:27,732 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:25:27,733 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:25:27,733 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:25:27,737 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E53767A0>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5375BF0>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E5376690>, <app.database.models.Group object at 0x000002B2E5375260>, <app.database.models.Group object at 0x000002B2E536A140>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E536B9B0>, <app.database.models.Group object at 0x000002B2E5369150>, <app.database.models.Group object at 0x000002B2E5369E10>, <app.database.models.Group object at 0x000002B2E4ECEE00>, <app.database.models.Group object at 0x000002B2E4ECCC00>, <app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E4ECEAD0>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECC490>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECF130>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECF240>, <app.database.models.Group object at 0x000002B2E4ECF570>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECC050>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E52E4050>, <app.database.models.Group object at 0x000002B2E52E4160>, <app.database.models.Group object at 0x000002B2E52E4270>, <app.database.models.Group object at 0x000002B2E52E4380>, <app.database.models.Group object at 0x000002B2E52E4490>, <app.database.models.Group object at 0x000002B2E52E45A0>, <app.database.models.Group object at 0x000002B2E52E46B0>, <app.database.models.Group object at 0x000002B2E52E47C0>, <app.database.models.Group object at 0x000002B2E52E48D0>, <app.database.models.Group object at 0x000002B2E52E49E0>, <app.database.models.Group object at 0x000002B2E52E4AF0>, <app.database.models.Group object at 0x000002B2E52E4C00>, <app.database.models.Group object at 0x000002B2E52E4D10>, <app.database.models.Group object at 0x000002B2E52E4E20>, <app.database.models.Group object at 0x000002B2E52E4F30>, <app.database.models.Group object at 0x000002B2E52E5040>, <app.database.models.Group object at 0x000002B2E52E5150>, <app.database.models.Group object at 0x000002B2E52E5260>, <app.database.models.Group object at 0x000002B2E52E5370>, <app.database.models.Group object at 0x000002B2E52E5480>, <app.database.models.Group object at 0x000002B2E52E5590>, <app.database.models.Group object at 0x000002B2E52E56A0>, <app.database.models.Group object at 0x000002B2E52E57B0>, <app.database.models.Group object at 0x000002B2E52E58C0>, <app.database.models.Group object at 0x000002B2E52E59D0>, <app.database.models.Group object at 0x000002B2E52E5AE0>, <app.database.models.Group object at 0x000002B2E52E5BF0>, <app.database.models.Group object at 0x000002B2E52E5D00>, <app.database.models.Group object at 0x000002B2E52E5E10>, <app.database.models.Group object at 0x000002B2E52E5F20>, <app.database.models.Group object at 0x000002B2E52E6030>, <app.database.models.Group object at 0x000002B2E52E6140>, <app.database.models.Group object at 0x000002B2E52E6250>, <app.database.models.Group object at 0x000002B2E52E6360>, <app.database.models.Group object at 0x000002B2E52E6470>, <app.database.models.Group object at 0x000002B2E52E6580>, <app.database.models.Group object at 0x000002B2E52E6690>, <app.database.models.Group object at 0x000002B2E52E67A0>, <app.database.models.Group object at 0x000002B2E52E68B0>, <app.database.models.Group object at 0x000002B2E52E69C0>, <app.database.models.Group object at 0x000002B2E52E6AD0>, <app.database.models.Group object at 0x000002B2E52E6BE0>, <app.database.models.Group object at 0x000002B2E52E6F10>, <app.database.models.Group object at 0x000002B2E52E7020>]
2025-07-16 21:25:27,738 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:25:27,738 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 23...
2025-07-16 21:25:27,739 - DEBUG - app - [AUTO-CUTOFF] User 23 has 0 open orders.
2025-07-16 21:25:27,739 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 23...
2025-07-16 21:25:27,741 - DEBUG - app - [AUTO-CUTOFF] User 23 has 0 pending orders.
2025-07-16 21:25:27,741 - WARNING - app - [AUTO-CUTOFF] User 23 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:25:27,741 - INFO - app - [AUTO-CUTOFF] Processing user 25 (live), group: Group B
2025-07-16 21:25:27,741 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 25 (live) from cache/DB...
2025-07-16 21:25:27,747 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:25:27,747 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:25:27,747 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:25:27,752 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E4DF7680>, <app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>, <app.database.models.Group object at 0x000002B2E536BDF0>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369040>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E53688D0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E536AF10>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E53696A0>, <app.database.models.Group object at 0x000002B2E536B8A0>, <app.database.models.Group object at 0x000002B2E5369260>, <app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368E20>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E53698C0>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E53699D0>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E5376CF0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E53745A0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E52E6CF0>, <app.database.models.Group object at 0x000002B2E52E6E00>]
2025-07-16 21:25:27,753 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:25:27,753 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 25...
2025-07-16 21:25:27,755 - DEBUG - app - [AUTO-CUTOFF] User 25 has 0 open orders.
2025-07-16 21:25:27,755 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 25...
2025-07-16 21:25:27,756 - DEBUG - app - [AUTO-CUTOFF] User 25 has 0 pending orders.
2025-07-16 21:25:27,756 - WARNING - app - [AUTO-CUTOFF] User 25 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:25:27,756 - INFO - app - [AUTO-CUTOFF] Processing user 26 (live), group: Royal+
2025-07-16 21:25:27,756 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 26 (live) from cache/DB...
2025-07-16 21:25:27,759 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Royal+...
2025-07-16 21:25:27,759 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Royal+' from cache: None
2025-07-16 21:25:27,759 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Royal+', fetching from DB.
2025-07-16 21:25:27,762 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Royal+': [<app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E53767A0>, <app.database.models.Group object at 0x000002B2E5375BF0>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E5376690>, <app.database.models.Group object at 0x000002B2E5375260>, <app.database.models.Group object at 0x000002B2E536A140>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E536B9B0>, <app.database.models.Group object at 0x000002B2E5369150>, <app.database.models.Group object at 0x000002B2E5369E10>, <app.database.models.Group object at 0x000002B2E4ECEE00>, <app.database.models.Group object at 0x000002B2E4ECCC00>, <app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E4ECEAD0>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECC490>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECF130>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECF240>, <app.database.models.Group object at 0x000002B2E4ECF570>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECC050>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECFBD0>, <app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E52E4050>, <app.database.models.Group object at 0x000002B2E52E4160>, <app.database.models.Group object at 0x000002B2E52E4270>, <app.database.models.Group object at 0x000002B2E52E4380>, <app.database.models.Group object at 0x000002B2E52E4490>, <app.database.models.Group object at 0x000002B2E52E45A0>, <app.database.models.Group object at 0x000002B2E52E46B0>, <app.database.models.Group object at 0x000002B2E52E47C0>, <app.database.models.Group object at 0x000002B2E52E48D0>, <app.database.models.Group object at 0x000002B2E52E49E0>, <app.database.models.Group object at 0x000002B2E52E4AF0>, <app.database.models.Group object at 0x000002B2E52E4C00>, <app.database.models.Group object at 0x000002B2E52E4D10>, <app.database.models.Group object at 0x000002B2E52E4E20>, <app.database.models.Group object at 0x000002B2E52E4F30>, <app.database.models.Group object at 0x000002B2E52E5040>, <app.database.models.Group object at 0x000002B2E52E5150>, <app.database.models.Group object at 0x000002B2E52E5260>, <app.database.models.Group object at 0x000002B2E52E5370>, <app.database.models.Group object at 0x000002B2E52E5480>, <app.database.models.Group object at 0x000002B2E52E5590>, <app.database.models.Group object at 0x000002B2E52E56A0>, <app.database.models.Group object at 0x000002B2E52E57B0>, <app.database.models.Group object at 0x000002B2E52E58C0>, <app.database.models.Group object at 0x000002B2E52E59D0>, <app.database.models.Group object at 0x000002B2E52E5AE0>, <app.database.models.Group object at 0x000002B2E52E5BF0>, <app.database.models.Group object at 0x000002B2E52E5D00>, <app.database.models.Group object at 0x000002B2E52E5E10>, <app.database.models.Group object at 0x000002B2E52E5F20>, <app.database.models.Group object at 0x000002B2E52E6030>, <app.database.models.Group object at 0x000002B2E52E6140>, <app.database.models.Group object at 0x000002B2E52E6250>, <app.database.models.Group object at 0x000002B2E52E6360>, <app.database.models.Group object at 0x000002B2E52E6470>, <app.database.models.Group object at 0x000002B2E52E6580>, <app.database.models.Group object at 0x000002B2E52E6690>, <app.database.models.Group object at 0x000002B2E52E67A0>, <app.database.models.Group object at 0x000002B2E52E68B0>, <app.database.models.Group object at 0x000002B2E52E69C0>, <app.database.models.Group object at 0x000002B2E52E6AD0>, <app.database.models.Group object at 0x000002B2E52E6BE0>]
2025-07-16 21:25:27,762 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Royal+': {'sending_orders': 'barclays'}
2025-07-16 21:25:27,762 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 26...
2025-07-16 21:25:27,764 - DEBUG - app - [AUTO-CUTOFF] User 26 has 2 open orders.
2025-07-16 21:25:27,764 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 26...
2025-07-16 21:25:27,766 - DEBUG - app - [AUTO-CUTOFF] User 26 has 0 pending orders.
2025-07-16 21:25:27,766 - DEBUG - app - [AUTO-CUTOFF] User 26 total positions for portfolio calculation: 2
2025-07-16 21:25:27,766 - DEBUG - app - [AUTO-CUTOFF] User 26 adjusted market prices: {}
2025-07-16 21:25:27,766 - DEBUG - app - [AUTO-CUTOFF] User 26 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:25:27,767 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 26...
2025-07-16 21:25:28,056 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol XAGUSD
2025-07-16 21:25:28,056 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol BTCUSD
2025-07-16 21:25:28,056 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 26: {'balance': '184345.81000000', 'equity': '184345.81000000', 'margin': '146484.47000000', 'free_margin': '37861.34000000', 'profit_loss': '0.0', 'margin_level': '125.8466580109140579885362592', 'positions': [{'order_id': '7987141755', 'order_company_name': 'XAGUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('41.09800000'), 'margin': Decimal('19.54000000'), 'contract_value': Decimal('50.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1116628265', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('6.00000000'), 'order_price': Decimal('132091.90000000'), 'margin': Decimal('146464.93000000'), 'contract_value': Decimal('6.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3661.62000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:25:28,056 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 26: {'balance': '184345.81000000', 'equity': '184345.81000000', 'margin': '146484.47000000', 'free_margin': '37861.34000000', 'profit_loss': '0.0', 'margin_level': '125.8466580109140579885362592', 'positions_with_pnl': [{'order_id': '7987141755', 'order_company_name': 'XAGUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('41.09800000'), 'margin': Decimal('19.54000000'), 'contract_value': Decimal('50.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1116628265', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('6.00000000'), 'order_price': Decimal('132091.90000000'), 'margin': Decimal('146464.93000000'), 'contract_value': Decimal('6.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3661.62000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:25:28,057 - INFO - app - [AUTO-CUTOFF] User 26 margin_level: 125.8466580109140579885362592
2025-07-16 21:25:28,057 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 26
2025-07-16 21:25:28,057 - INFO - app - [AUTO-CUTOFF] Processing user 1 (demo), group: Group B
2025-07-16 21:25:28,057 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 1 (demo) from cache/DB...
2025-07-16 21:25:28,060 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:25:28,061 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:25:28,061 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:25:28,064 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4DF7680>, <app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>, <app.database.models.Group object at 0x000002B2E536BDF0>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369040>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E53688D0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E536AF10>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E53696A0>, <app.database.models.Group object at 0x000002B2E536B8A0>, <app.database.models.Group object at 0x000002B2E5369260>, <app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368E20>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E53698C0>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E53699D0>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E5376CF0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E53745A0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E52E6CF0>, <app.database.models.Group object at 0x000002B2E52E6E00>]
2025-07-16 21:25:28,064 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:25:28,064 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 1...
2025-07-16 21:25:28,066 - DEBUG - app - [AUTO-CUTOFF] User 1 has 2 open orders.
2025-07-16 21:25:28,066 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 1...
2025-07-16 21:25:28,068 - DEBUG - app - [AUTO-CUTOFF] User 1 has 1 pending orders.
2025-07-16 21:25:28,068 - DEBUG - app - [AUTO-CUTOFF] User 1 total positions for portfolio calculation: 3
2025-07-16 21:25:28,069 - DEBUG - app - [AUTO-CUTOFF] User 1 adjusted market prices: {}
2025-07-16 21:25:28,069 - DEBUG - app - [AUTO-CUTOFF] User 1 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:25:28,069 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 1...
2025-07-16 21:25:28,380 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:25:28,381 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:25:28,381 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 1: {'balance': '17011.54000000', 'equity': '17011.54000000', 'margin': '6.54000000', 'free_margin': '17005.00000000', 'profit_loss': '0.0', 'margin_level': '260115.2905198776758409785933', 'positions': [{'order_id': '1000052-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.66800000'), 'margin': Decimal('6.54341805'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000053-001', 'order_company_name': 'AUDJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.56000000'), 'margin': Decimal('6.54258453'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:25:28,381 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 1: {'balance': '17011.54000000', 'equity': '17011.54000000', 'margin': '6.54000000', 'free_margin': '17005.00000000', 'profit_loss': '0.0', 'margin_level': '260115.2905198776758409785933', 'positions_with_pnl': [{'order_id': '1000052-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.66800000'), 'margin': Decimal('6.54341805'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000053-001', 'order_company_name': 'AUDJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.56000000'), 'margin': Decimal('6.54258453'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:25:28,382 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:28,385 - INFO - app - [AUTO-CUTOFF] User 1 margin_level: 260115.2905198776758409785933
2025-07-16 21:25:28,386 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:28,387 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 1
2025-07-16 21:25:28,387 - INFO - app - [AUTO-CUTOFF] Processing user 2 (demo), group: 
2025-07-16 21:25:28,387 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 2 (demo) from cache/DB...
2025-07-16 21:25:28,394 - WARNING - app - [AUTO-CUTOFF] User 2 has no group_name set. Skipping portfolio update.
2025-07-16 21:25:28,394 - INFO - app - [AUTO-CUTOFF] Processing user 3 (demo), group: string
2025-07-16 21:25:28,394 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 3 (demo) from cache/DB...
2025-07-16 21:25:28,400 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group string...
2025-07-16 21:25:28,401 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'string' from cache: None
2025-07-16 21:25:28,401 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'string', fetching from DB.
2025-07-16 21:25:28,405 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'string': []
2025-07-16 21:25:28,405 - ERROR - app - [AUTO-CUTOFF] Group symbol settings not found in DB for group 'string'. Skipping portfolio update for user 3.
2025-07-16 21:25:28,406 - INFO - app - [AUTO-CUTOFF] Processing user 4 (demo), group: Group B
2025-07-16 21:25:28,406 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 4 (demo) from cache/DB...
2025-07-16 21:25:28,407 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:25:28,408 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:25:28,408 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:25:28,416 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E5376CF0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E53745A0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374AF0>, <app.database.models.Group object at 0x000002B2E5375260>, <app.database.models.Group object at 0x000002B2E5375E10>, <app.database.models.Group object at 0x000002B2E5374380>, <app.database.models.Group object at 0x000002B2E5375BF0>, <app.database.models.Group object at 0x000002B2E53767A0>, <app.database.models.Group object at 0x000002B2E5376690>, <app.database.models.Group object at 0x000002B2E536BDF0>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369040>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E53688D0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E536AF10>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E53696A0>, <app.database.models.Group object at 0x000002B2E536B8A0>, <app.database.models.Group object at 0x000002B2E5369260>, <app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368E20>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E53698C0>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E53699D0>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E536B9B0>, <app.database.models.Group object at 0x000002B2E5368270>]
2025-07-16 21:25:28,417 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:25:28,417 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 4...
2025-07-16 21:25:28,421 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 open orders.
2025-07-16 21:25:28,421 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 4...
2025-07-16 21:25:28,424 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 pending orders.
2025-07-16 21:25:28,424 - WARNING - app - [AUTO-CUTOFF] User 4 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:25:28,424 - INFO - app - [AUTO-CUTOFF] Processing user 5 (demo), group: None
2025-07-16 21:25:28,424 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 5 (demo) from cache/DB...
2025-07-16 21:25:28,431 - WARNING - app - [AUTO-CUTOFF] User 5 has no group_name set. Skipping portfolio update.
2025-07-16 21:25:28,431 - INFO - app - [AUTO-CUTOFF] Processing user 6 (demo), group: None
2025-07-16 21:25:28,431 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 6 (demo) from cache/DB...
2025-07-16 21:25:28,437 - WARNING - app - [AUTO-CUTOFF] User 6 has no group_name set. Skipping portfolio update.
2025-07-16 21:25:28,437 - INFO - app - [AUTO-CUTOFF] Processing user 9 (demo), group: Group B
2025-07-16 21:25:28,437 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 9 (demo) from cache/DB...
2025-07-16 21:25:28,438 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:25:28,439 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:25:28,439 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:25:28,447 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>, <app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECD260>, <app.database.models.Group object at 0x000002B2E4ECD370>, <app.database.models.Group object at 0x000002B2E4ECEE00>, <app.database.models.Group object at 0x000002B2E4ECCC00>, <app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E4ECEAD0>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECC490>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECF130>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECF240>, <app.database.models.Group object at 0x000002B2E4ECF570>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECC050>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECFBD0>, <app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E526C050>, <app.database.models.Group object at 0x000002B2E526C160>, <app.database.models.Group object at 0x000002B2E526C270>, <app.database.models.Group object at 0x000002B2E526C380>, <app.database.models.Group object at 0x000002B2E526C490>, <app.database.models.Group object at 0x000002B2E526C5A0>, <app.database.models.Group object at 0x000002B2E526C6B0>, <app.database.models.Group object at 0x000002B2E526C7C0>, <app.database.models.Group object at 0x000002B2E526C8D0>, <app.database.models.Group object at 0x000002B2E526C9E0>, <app.database.models.Group object at 0x000002B2E526CAF0>, <app.database.models.Group object at 0x000002B2E526CC00>, <app.database.models.Group object at 0x000002B2E526CD10>, <app.database.models.Group object at 0x000002B2E526CE20>, <app.database.models.Group object at 0x000002B2E526CF30>, <app.database.models.Group object at 0x000002B2E526D040>, <app.database.models.Group object at 0x000002B2E526D150>, <app.database.models.Group object at 0x000002B2E526D260>, <app.database.models.Group object at 0x000002B2E526D370>, <app.database.models.Group object at 0x000002B2E526D480>, <app.database.models.Group object at 0x000002B2E526D590>, <app.database.models.Group object at 0x000002B2E526D6A0>, <app.database.models.Group object at 0x000002B2E526D7B0>, <app.database.models.Group object at 0x000002B2E526D8C0>, <app.database.models.Group object at 0x000002B2E526D9D0>, <app.database.models.Group object at 0x000002B2E526DAE0>, <app.database.models.Group object at 0x000002B2E526DBF0>, <app.database.models.Group object at 0x000002B2E526DD00>, <app.database.models.Group object at 0x000002B2E526DE10>, <app.database.models.Group object at 0x000002B2E526DF20>, <app.database.models.Group object at 0x000002B2E526E030>, <app.database.models.Group object at 0x000002B2E526E140>, <app.database.models.Group object at 0x000002B2E526E250>, <app.database.models.Group object at 0x000002B2E526E360>, <app.database.models.Group object at 0x000002B2E526E470>, <app.database.models.Group object at 0x000002B2E526E580>, <app.database.models.Group object at 0x000002B2E526E690>, <app.database.models.Group object at 0x000002B2E526E7A0>, <app.database.models.Group object at 0x000002B2E526E8B0>, <app.database.models.Group object at 0x000002B2E526E9C0>, <app.database.models.Group object at 0x000002B2E526EAD0>, <app.database.models.Group object at 0x000002B2E526EBE0>, <app.database.models.Group object at 0x000002B2E526ECF0>, <app.database.models.Group object at 0x000002B2E526EE00>]
2025-07-16 21:25:28,448 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:25:28,448 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 9...
2025-07-16 21:25:28,453 - DEBUG - app - [AUTO-CUTOFF] User 9 has 28 open orders.
2025-07-16 21:25:28,454 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 9...
2025-07-16 21:25:28,457 - DEBUG - app - [AUTO-CUTOFF] User 9 has 6 pending orders.
2025-07-16 21:25:28,457 - DEBUG - app - [AUTO-CUTOFF] User 9 total positions for portfolio calculation: 34
2025-07-16 21:25:28,458 - DEBUG - app - [AUTO-CUTOFF] User 9 adjusted market prices: {}
2025-07-16 21:25:28,459 - DEBUG - app - [AUTO-CUTOFF] User 9 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:25:28,459 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 9...
2025-07-16 21:25:28,744 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDUSD
2025-07-16 21:25:28,745 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDUSD
2025-07-16 21:25:28,745 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFSGD
2025-07-16 21:25:28,745 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFSGD
2025-07-16 21:25:28,745 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CADJPY
2025-07-16 21:25:28,745 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CADJPY
2025-07-16 21:25:28,745 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:25:28,745 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:25:28,745 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFJPY
2025-07-16 21:25:28,745 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFJPY
2025-07-16 21:25:28,745 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:25:28,745 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:25:28,745 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURGBP
2025-07-16 21:25:28,746 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURJPY
2025-07-16 21:25:28,746 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURJPY
2025-07-16 21:25:28,746 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURNZD
2025-07-16 21:25:28,746 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURNZD
2025-07-16 21:25:28,746 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:25:28,746 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:25:28,746 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:25:28,746 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:25:28,746 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol NZDJPY
2025-07-16 21:25:28,746 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDCHF
2025-07-16 21:25:28,746 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDCHF
2025-07-16 21:25:28,746 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDNOK
2025-07-16 21:25:28,746 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDNOK
2025-07-16 21:25:28,747 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDSGD
2025-07-16 21:25:28,747 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDTRY
2025-07-16 21:25:28,747 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 9: {'balance': '98181.73000000', 'equity': '98181.73000000', 'margin': '1917.31000000', 'free_margin': '96264.42000000', 'profit_loss': '0.0', 'margin_level': '5120.806233733720681579921870', 'positions': [{'order_id': '2504219016', 'order_company_name': 'AUDUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.64743000'), 'margin': Decimal('64.74000000'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4208488950', 'order_company_name': 'AUDUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('0.64707000'), 'margin': Decimal('142.36000000'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1409905880', 'order_company_name': 'CHFSGD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57561500'), 'margin': Decimal('122.35389131'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7183762766', 'order_company_name': 'CHFSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57505500'), 'margin': Decimal('122.31506360'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9716387266', 'order_company_name': 'CADJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.24150000'), 'margin': Decimal('109.44987397'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9899743248', 'order_company_name': 'CADJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.27050000'), 'margin': Decimal('109.47824594'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2965066905', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('1.77481000'), 'margin': Decimal('252.73304420'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6518780780', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.21000000'), 'order_price': Decimal('1.77439000'), 'margin': Decimal('241.18574740'), 'contract_value': Decimal('21000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7509572762', 'order_company_name': 'CHFJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.15500000'), 'margin': Decimal('122.35584187'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7522048723', 'order_company_name': 'CHFJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.09500000'), 'margin': Decimal('122.31379417'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6209391896', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77480000'), 'margin': Decimal('57.44317680'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8581607125', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77442000'), 'margin': Decimal('57.43111760'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8951109289', 'order_company_name': 'EURGBP', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.85403000'), 'margin': Decimal('114.85104400'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7115525171', 'order_company_name': 'EURJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.26050000'), 'margin': Decimal('114.87277223'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2099467271', 'order_company_name': 'EURJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.23150000'), 'margin': Decimal('114.85285533'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4283527369', 'order_company_name': 'EURNZD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.91952500'), 'margin': Decimal('114.85328250'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6611902574', 'order_company_name': 'EURNZD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.92063500'), 'margin': Decimal('114.81922980'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4731664142', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34376000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8676137902', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34361000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3301052276', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34379000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2972795665', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34378000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1117118581', 'order_company_name': 'NZDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('87.10150000'), 'margin': Decimal('5.97837949'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3385451189', 'order_company_name': 'USDCHF', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81771000'), 'margin': Decimal('149.97126753'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6134727989', 'order_company_name': 'USDCHF', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81805000'), 'margin': Decimal('150.03056608'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9211531174', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.04973000'), 'margin': Decimal('100.00169162'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5200391957', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.05023000'), 'margin': Decimal('100.00169154'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5654381883', 'order_company_name': 'USDSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.31000000'), 'order_price': Decimal('1.28795000'), 'margin': Decimal('309.93393934'), 'contract_value': Decimal('31000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6985407710', 'order_company_name': 'USDTRY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('39.56087000'), 'margin': Decimal('99.98738813'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:25:28,747 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 9: {'balance': '98181.73000000', 'equity': '98181.73000000', 'margin': '1917.31000000', 'free_margin': '96264.42000000', 'profit_loss': '0.0', 'margin_level': '5120.806233733720681579921870', 'positions_with_pnl': [{'order_id': '2504219016', 'order_company_name': 'AUDUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.64743000'), 'margin': Decimal('64.74000000'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4208488950', 'order_company_name': 'AUDUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('0.64707000'), 'margin': Decimal('142.36000000'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1409905880', 'order_company_name': 'CHFSGD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57561500'), 'margin': Decimal('122.35389131'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7183762766', 'order_company_name': 'CHFSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57505500'), 'margin': Decimal('122.31506360'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9716387266', 'order_company_name': 'CADJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.24150000'), 'margin': Decimal('109.44987397'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9899743248', 'order_company_name': 'CADJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.27050000'), 'margin': Decimal('109.47824594'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2965066905', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('1.77481000'), 'margin': Decimal('252.73304420'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6518780780', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.21000000'), 'order_price': Decimal('1.77439000'), 'margin': Decimal('241.18574740'), 'contract_value': Decimal('21000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7509572762', 'order_company_name': 'CHFJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.15500000'), 'margin': Decimal('122.35584187'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7522048723', 'order_company_name': 'CHFJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.09500000'), 'margin': Decimal('122.31379417'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6209391896', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77480000'), 'margin': Decimal('57.44317680'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8581607125', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77442000'), 'margin': Decimal('57.43111760'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8951109289', 'order_company_name': 'EURGBP', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.85403000'), 'margin': Decimal('114.85104400'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7115525171', 'order_company_name': 'EURJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.26050000'), 'margin': Decimal('114.87277223'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2099467271', 'order_company_name': 'EURJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.23150000'), 'margin': Decimal('114.85285533'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4283527369', 'order_company_name': 'EURNZD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.91952500'), 'margin': Decimal('114.85328250'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6611902574', 'order_company_name': 'EURNZD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.92063500'), 'margin': Decimal('114.81922980'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4731664142', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34376000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8676137902', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34361000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3301052276', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34379000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2972795665', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34378000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1117118581', 'order_company_name': 'NZDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('87.10150000'), 'margin': Decimal('5.97837949'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3385451189', 'order_company_name': 'USDCHF', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81771000'), 'margin': Decimal('149.97126753'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6134727989', 'order_company_name': 'USDCHF', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81805000'), 'margin': Decimal('150.03056608'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9211531174', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.04973000'), 'margin': Decimal('100.00169162'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5200391957', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.05023000'), 'margin': Decimal('100.00169154'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5654381883', 'order_company_name': 'USDSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.31000000'), 'order_price': Decimal('1.28795000'), 'margin': Decimal('309.93393934'), 'contract_value': Decimal('31000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6985407710', 'order_company_name': 'USDTRY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('39.56087000'), 'margin': Decimal('99.98738813'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:25:28,749 - INFO - app - [AUTO-CUTOFF] User 9 margin_level: 5120.806233733720681579921870
2025-07-16 21:25:28,750 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 9
2025-07-16 21:25:28,750 - INFO - app - [AUTO-CUTOFF] Processing user 10 (demo), group: Group B
2025-07-16 21:25:28,750 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 10 (demo) from cache/DB...
2025-07-16 21:25:28,751 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:25:28,752 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:25:28,752 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:25:28,758 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>, <app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECD260>, <app.database.models.Group object at 0x000002B2E4ECD370>, <app.database.models.Group object at 0x000002B2E4ECEE00>, <app.database.models.Group object at 0x000002B2E4ECCC00>, <app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E4ECEAD0>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECC490>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECF130>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECF240>, <app.database.models.Group object at 0x000002B2E4ECF570>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECC050>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECFBD0>, <app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E526C050>, <app.database.models.Group object at 0x000002B2E526C160>, <app.database.models.Group object at 0x000002B2E526C270>, <app.database.models.Group object at 0x000002B2E526C380>, <app.database.models.Group object at 0x000002B2E526C490>, <app.database.models.Group object at 0x000002B2E526C5A0>, <app.database.models.Group object at 0x000002B2E526C6B0>, <app.database.models.Group object at 0x000002B2E526C7C0>, <app.database.models.Group object at 0x000002B2E526C8D0>, <app.database.models.Group object at 0x000002B2E526C9E0>, <app.database.models.Group object at 0x000002B2E526CAF0>, <app.database.models.Group object at 0x000002B2E526CC00>, <app.database.models.Group object at 0x000002B2E526CD10>, <app.database.models.Group object at 0x000002B2E526CE20>, <app.database.models.Group object at 0x000002B2E526CF30>, <app.database.models.Group object at 0x000002B2E526D040>, <app.database.models.Group object at 0x000002B2E526D150>, <app.database.models.Group object at 0x000002B2E526D260>, <app.database.models.Group object at 0x000002B2E526D370>, <app.database.models.Group object at 0x000002B2E526D480>, <app.database.models.Group object at 0x000002B2E526D590>, <app.database.models.Group object at 0x000002B2E526D6A0>, <app.database.models.Group object at 0x000002B2E526D7B0>, <app.database.models.Group object at 0x000002B2E526D8C0>, <app.database.models.Group object at 0x000002B2E526D9D0>, <app.database.models.Group object at 0x000002B2E526DAE0>, <app.database.models.Group object at 0x000002B2E526DBF0>, <app.database.models.Group object at 0x000002B2E526DD00>, <app.database.models.Group object at 0x000002B2E526DE10>, <app.database.models.Group object at 0x000002B2E526DF20>, <app.database.models.Group object at 0x000002B2E526E030>, <app.database.models.Group object at 0x000002B2E526E140>, <app.database.models.Group object at 0x000002B2E526E250>, <app.database.models.Group object at 0x000002B2E526E360>, <app.database.models.Group object at 0x000002B2E526E470>, <app.database.models.Group object at 0x000002B2E526E580>, <app.database.models.Group object at 0x000002B2E526E690>, <app.database.models.Group object at 0x000002B2E526E7A0>, <app.database.models.Group object at 0x000002B2E526E8B0>, <app.database.models.Group object at 0x000002B2E526E9C0>, <app.database.models.Group object at 0x000002B2E526EAD0>, <app.database.models.Group object at 0x000002B2E526EBE0>, <app.database.models.Group object at 0x000002B2E526ECF0>, <app.database.models.Group object at 0x000002B2E526EE00>]
2025-07-16 21:25:28,759 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:25:28,759 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 10...
2025-07-16 21:25:28,764 - DEBUG - app - [AUTO-CUTOFF] User 10 has 0 open orders.
2025-07-16 21:25:28,764 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 10...
2025-07-16 21:25:28,774 - DEBUG - app.firebase_stream - Firebase listener triggered (30). Event Type: patch, Path: /. Timestamp: 1752726328.7743084
2025-07-16 21:25:28,774 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.0060000000', 'o': '87.9980000000'}, 'USDJPY': {'b': '148.5980000000', 'o': '148.5930000000'}, 'CADCHF': {'b': '0.5853100000', 'o': '0.5852900000'}, 'USDSGD': {'b': '1.2856700000',
2025-07-16 21:25:28,776 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.0060000000', 'o': '87.9980000000'}, 'USDJPY': {'b': '148.5980000000', 'o': '148.5930000000'}, 'CADCHF': {'b': '0.5853100000', 'o': '0.5852900000'}, 'USDSGD': {'b': '1.2856700000',...
2025-07-16 21:25:28,776 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:28,776 - DEBUG - app - [AUTO-CUTOFF] User 10 has 1 pending orders.
2025-07-16 21:25:28,776 - DEBUG - app - [AUTO-CUTOFF] User 10 total positions for portfolio calculation: 1
2025-07-16 21:25:28,778 - DEBUG - app - [AUTO-CUTOFF] User 10 adjusted market prices: {}
2025-07-16 21:25:28,778 - DEBUG - app - [AUTO-CUTOFF] User 10 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:25:28,778 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 10...
2025-07-16 21:25:29,060 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 10: {'balance': '9958.40000000', 'equity': '9958.40000000', 'margin': '39.25000000', 'free_margin': '9919.15000000', 'profit_loss': '0.0', 'margin_level': '25371.71974522292993630573248', 'positions': [], 'margin_call': False}
2025-07-16 21:25:29,060 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 10: {'balance': '9958.40000000', 'equity': '9958.40000000', 'margin': '39.25000000', 'free_margin': '9919.15000000', 'profit_loss': '0.0', 'margin_level': '25371.71974522292993630573248', 'positions_with_pnl': [], 'margin_call': False}
2025-07-16 21:25:29,062 - INFO - app - [AUTO-CUTOFF] User 10 margin_level: 25371.71974522292993630573248
2025-07-16 21:25:29,066 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 10
2025-07-16 21:25:29,066 - INFO - app - [AUTO-CUTOFF] Processing user 11 (demo), group: Group B
2025-07-16 21:25:29,066 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 11 (demo) from cache/DB...
2025-07-16 21:25:29,068 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:25:29,071 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:25:29,071 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:25:29,077 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>, <app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECD260>, <app.database.models.Group object at 0x000002B2E4ECD370>, <app.database.models.Group object at 0x000002B2E4ECEE00>, <app.database.models.Group object at 0x000002B2E4ECCC00>, <app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E4ECEAD0>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECC490>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECF130>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECF240>, <app.database.models.Group object at 0x000002B2E4ECF570>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECC050>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECFBD0>, <app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E526C050>, <app.database.models.Group object at 0x000002B2E526C160>, <app.database.models.Group object at 0x000002B2E526C270>, <app.database.models.Group object at 0x000002B2E526C380>, <app.database.models.Group object at 0x000002B2E526C490>, <app.database.models.Group object at 0x000002B2E526C5A0>, <app.database.models.Group object at 0x000002B2E526C6B0>, <app.database.models.Group object at 0x000002B2E526C7C0>, <app.database.models.Group object at 0x000002B2E526C8D0>, <app.database.models.Group object at 0x000002B2E526C9E0>, <app.database.models.Group object at 0x000002B2E526CAF0>, <app.database.models.Group object at 0x000002B2E526CC00>, <app.database.models.Group object at 0x000002B2E526CD10>, <app.database.models.Group object at 0x000002B2E526CE20>, <app.database.models.Group object at 0x000002B2E526CF30>, <app.database.models.Group object at 0x000002B2E526D040>, <app.database.models.Group object at 0x000002B2E526D150>, <app.database.models.Group object at 0x000002B2E526D260>, <app.database.models.Group object at 0x000002B2E526D370>, <app.database.models.Group object at 0x000002B2E526D480>, <app.database.models.Group object at 0x000002B2E526D590>, <app.database.models.Group object at 0x000002B2E526D6A0>, <app.database.models.Group object at 0x000002B2E526D7B0>, <app.database.models.Group object at 0x000002B2E526D8C0>, <app.database.models.Group object at 0x000002B2E526D9D0>, <app.database.models.Group object at 0x000002B2E526DAE0>, <app.database.models.Group object at 0x000002B2E526DBF0>, <app.database.models.Group object at 0x000002B2E526DD00>, <app.database.models.Group object at 0x000002B2E526DE10>, <app.database.models.Group object at 0x000002B2E526DF20>, <app.database.models.Group object at 0x000002B2E526E030>, <app.database.models.Group object at 0x000002B2E526E140>, <app.database.models.Group object at 0x000002B2E526E250>, <app.database.models.Group object at 0x000002B2E526E360>, <app.database.models.Group object at 0x000002B2E526E470>, <app.database.models.Group object at 0x000002B2E526E580>, <app.database.models.Group object at 0x000002B2E526E690>, <app.database.models.Group object at 0x000002B2E526E7A0>, <app.database.models.Group object at 0x000002B2E526E8B0>, <app.database.models.Group object at 0x000002B2E526E9C0>, <app.database.models.Group object at 0x000002B2E526EAD0>, <app.database.models.Group object at 0x000002B2E526EBE0>, <app.database.models.Group object at 0x000002B2E526ECF0>, <app.database.models.Group object at 0x000002B2E526EE00>]
2025-07-16 21:25:29,079 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:25:29,079 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 11...
2025-07-16 21:25:29,081 - DEBUG - app - [AUTO-CUTOFF] User 11 has 1 open orders.
2025-07-16 21:25:29,081 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 11...
2025-07-16 21:25:29,084 - DEBUG - app - [AUTO-CUTOFF] User 11 has 0 pending orders.
2025-07-16 21:25:29,084 - DEBUG - app - [AUTO-CUTOFF] User 11 total positions for portfolio calculation: 1
2025-07-16 21:25:29,088 - DEBUG - app - [AUTO-CUTOFF] User 11 adjusted market prices: {}
2025-07-16 21:25:29,088 - DEBUG - app - [AUTO-CUTOFF] User 11 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:25:29,088 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 11...
2025-07-16 21:25:29,400 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-07-16 21:25:29,400 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 11: {'balance': '99998.61000000', 'equity': '99998.61000000', 'margin': '6.55000000', 'free_margin': '99992.06000000', 'profit_loss': '0.0', 'margin_level': '1526696.335877862595419847328', 'positions': [{'order_id': '1000099-001', 'order_company_name': 'AUDCAD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('0.89752000'), 'margin': Decimal('6.55364428'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 11, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:25:29,401 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 11: {'balance': '99998.61000000', 'equity': '99998.61000000', 'margin': '6.55000000', 'free_margin': '99992.06000000', 'profit_loss': '0.0', 'margin_level': '1526696.335877862595419847328', 'positions_with_pnl': [{'order_id': '1000099-001', 'order_company_name': 'AUDCAD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('0.89752000'), 'margin': Decimal('6.55364428'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 11, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:25:29,404 - INFO - app - [AUTO-CUTOFF] User 11 margin_level: 1526696.335877862595419847328
2025-07-16 21:25:29,405 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:29,407 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 11
2025-07-16 21:25:29,407 - INFO - app - [AUTO-CUTOFF] Processing user 12 (demo), group: Group B
2025-07-16 21:25:29,407 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 12 (demo) from cache/DB...
2025-07-16 21:25:29,411 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:25:29,415 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:25:29,415 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:25:29,417 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:29,426 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>, <app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECD260>, <app.database.models.Group object at 0x000002B2E4ECD370>, <app.database.models.Group object at 0x000002B2E4ECEE00>, <app.database.models.Group object at 0x000002B2E4ECCC00>, <app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E4ECEAD0>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECC490>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECF130>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECF240>, <app.database.models.Group object at 0x000002B2E4ECF570>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECC050>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECFBD0>, <app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E526C050>, <app.database.models.Group object at 0x000002B2E526C160>, <app.database.models.Group object at 0x000002B2E526C270>, <app.database.models.Group object at 0x000002B2E526C380>, <app.database.models.Group object at 0x000002B2E526C490>, <app.database.models.Group object at 0x000002B2E526C5A0>, <app.database.models.Group object at 0x000002B2E526C6B0>, <app.database.models.Group object at 0x000002B2E526C7C0>, <app.database.models.Group object at 0x000002B2E526C8D0>, <app.database.models.Group object at 0x000002B2E526C9E0>, <app.database.models.Group object at 0x000002B2E526CAF0>, <app.database.models.Group object at 0x000002B2E526CC00>, <app.database.models.Group object at 0x000002B2E526CD10>, <app.database.models.Group object at 0x000002B2E526CE20>, <app.database.models.Group object at 0x000002B2E526CF30>, <app.database.models.Group object at 0x000002B2E526D040>, <app.database.models.Group object at 0x000002B2E526D150>, <app.database.models.Group object at 0x000002B2E526D260>, <app.database.models.Group object at 0x000002B2E526D370>, <app.database.models.Group object at 0x000002B2E526D480>, <app.database.models.Group object at 0x000002B2E526D590>, <app.database.models.Group object at 0x000002B2E526D6A0>, <app.database.models.Group object at 0x000002B2E526D7B0>, <app.database.models.Group object at 0x000002B2E526D8C0>, <app.database.models.Group object at 0x000002B2E526D9D0>, <app.database.models.Group object at 0x000002B2E526DAE0>, <app.database.models.Group object at 0x000002B2E526DBF0>, <app.database.models.Group object at 0x000002B2E526DD00>, <app.database.models.Group object at 0x000002B2E526DE10>, <app.database.models.Group object at 0x000002B2E526DF20>, <app.database.models.Group object at 0x000002B2E526E030>, <app.database.models.Group object at 0x000002B2E526E140>, <app.database.models.Group object at 0x000002B2E526E250>, <app.database.models.Group object at 0x000002B2E526E360>, <app.database.models.Group object at 0x000002B2E526E470>, <app.database.models.Group object at 0x000002B2E526E580>, <app.database.models.Group object at 0x000002B2E526E690>, <app.database.models.Group object at 0x000002B2E526E7A0>, <app.database.models.Group object at 0x000002B2E526E8B0>, <app.database.models.Group object at 0x000002B2E526E9C0>, <app.database.models.Group object at 0x000002B2E526EAD0>, <app.database.models.Group object at 0x000002B2E526EBE0>, <app.database.models.Group object at 0x000002B2E526ECF0>, <app.database.models.Group object at 0x000002B2E526EE00>]
2025-07-16 21:25:29,430 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:25:29,430 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 12...
2025-07-16 21:25:29,435 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 open orders.
2025-07-16 21:25:29,435 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 12...
2025-07-16 21:25:29,438 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 pending orders.
2025-07-16 21:25:29,439 - WARNING - app - [AUTO-CUTOFF] User 12 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:25:29,439 - INFO - app - [AUTO-CUTOFF] Processing user 13 (demo), group: Group B
2025-07-16 21:25:29,439 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 13 (demo) from cache/DB...
2025-07-16 21:25:29,441 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:25:29,442 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:25:29,442 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:25:29,451 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>, <app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECD260>, <app.database.models.Group object at 0x000002B2E4ECD370>, <app.database.models.Group object at 0x000002B2E4ECEE00>, <app.database.models.Group object at 0x000002B2E4ECCC00>, <app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E4ECEAD0>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECC490>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECF130>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECF240>, <app.database.models.Group object at 0x000002B2E4ECF570>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECC050>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECFBD0>, <app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E526C050>, <app.database.models.Group object at 0x000002B2E526C160>, <app.database.models.Group object at 0x000002B2E526C270>, <app.database.models.Group object at 0x000002B2E526C380>, <app.database.models.Group object at 0x000002B2E526C490>, <app.database.models.Group object at 0x000002B2E526C5A0>, <app.database.models.Group object at 0x000002B2E526C6B0>, <app.database.models.Group object at 0x000002B2E526C7C0>, <app.database.models.Group object at 0x000002B2E526C8D0>, <app.database.models.Group object at 0x000002B2E526C9E0>, <app.database.models.Group object at 0x000002B2E526CAF0>, <app.database.models.Group object at 0x000002B2E526CC00>, <app.database.models.Group object at 0x000002B2E526CD10>, <app.database.models.Group object at 0x000002B2E526CE20>, <app.database.models.Group object at 0x000002B2E526CF30>, <app.database.models.Group object at 0x000002B2E526D040>, <app.database.models.Group object at 0x000002B2E526D150>, <app.database.models.Group object at 0x000002B2E526D260>, <app.database.models.Group object at 0x000002B2E526D370>, <app.database.models.Group object at 0x000002B2E526D480>, <app.database.models.Group object at 0x000002B2E526D590>, <app.database.models.Group object at 0x000002B2E526D6A0>, <app.database.models.Group object at 0x000002B2E526D7B0>, <app.database.models.Group object at 0x000002B2E526D8C0>, <app.database.models.Group object at 0x000002B2E526D9D0>, <app.database.models.Group object at 0x000002B2E526DAE0>, <app.database.models.Group object at 0x000002B2E526DBF0>, <app.database.models.Group object at 0x000002B2E526DD00>, <app.database.models.Group object at 0x000002B2E526DE10>, <app.database.models.Group object at 0x000002B2E526DF20>, <app.database.models.Group object at 0x000002B2E526E030>, <app.database.models.Group object at 0x000002B2E526E140>, <app.database.models.Group object at 0x000002B2E526E250>, <app.database.models.Group object at 0x000002B2E526E360>, <app.database.models.Group object at 0x000002B2E526E470>, <app.database.models.Group object at 0x000002B2E526E580>, <app.database.models.Group object at 0x000002B2E526E690>, <app.database.models.Group object at 0x000002B2E526E7A0>, <app.database.models.Group object at 0x000002B2E526E8B0>, <app.database.models.Group object at 0x000002B2E526E9C0>, <app.database.models.Group object at 0x000002B2E526EAD0>, <app.database.models.Group object at 0x000002B2E526EBE0>, <app.database.models.Group object at 0x000002B2E526ECF0>, <app.database.models.Group object at 0x000002B2E526EE00>]
2025-07-16 21:25:29,452 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:25:29,453 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 13...
2025-07-16 21:25:29,456 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 open orders.
2025-07-16 21:25:29,457 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 13...
2025-07-16 21:25:29,460 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 pending orders.
2025-07-16 21:25:29,460 - WARNING - app - [AUTO-CUTOFF] User 13 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:25:30,440 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:30,444 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:31,108 - DEBUG - app.firebase_stream - Firebase listener triggered (31). Event Type: patch, Path: /. Timestamp: 1752726331.1080675
2025-07-16 21:25:31,109 - DEBUG - app.firebase_stream - Prepared batch update for 18 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '88.0060000000', 'o': '87.9990000000'}, 'GBPAUD': {'b': '2.0650900000', 'o': '2.0649200000'}, 'CADCHF': {'b': '0.5853100000', '
2025-07-16 21:25:31,110 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '88.0060000000', 'o': '87.9990000000'}, 'GBPAUD': {'b': '2.0650900000', 'o': '2.0649200000'}, 'CADCHF': {'b': '0.5853100000', '...
2025-07-16 21:25:31,114 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:31,448 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:31,451 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:32,461 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:32,465 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:33,465 - DEBUG - app.firebase_stream - Firebase listener triggered (32). Event Type: patch, Path: /. Timestamp: 1752726333.465357
2025-07-16 21:25:33,465 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0497000000', 'o': '13.0444000000'}, 'NZDJPY': {'b': '88.0070000000', 'o': '88.0010000000'}, 'GBPAUD': {'b': '2.0650700000', 'o': '2.0649200000'}, 'USDJPY': {'b': '148.5980000000',
2025-07-16 21:25:33,466 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0497000000', 'o': '13.0444000000'}, 'NZDJPY': {'b': '88.0070000000', 'o': '88.0010000000'}, 'GBPAUD': {'b': '2.0650700000', 'o': '2.0649200000'}, 'USDJPY': {'b': '148.5980000000',...
2025-07-16 21:25:33,468 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:33,469 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:33,478 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:34,496 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:34,499 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:35,504 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:35,507 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:35,719 - DEBUG - app.firebase_stream - Firebase listener triggered (33). Event Type: patch, Path: /. Timestamp: 1752726335.7195117
2025-07-16 21:25:35,720 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0493000000', 'o': '13.0440000000'}, 'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'GBPAUD': {'b': '2.0650900000', 'o': '2.0649200000'}, 'CADCHF': {'b': '0.5853100000', '
2025-07-16 21:25:35,721 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0493000000', 'o': '13.0440000000'}, 'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'GBPAUD': {'b': '2.0650900000', 'o': '2.0649200000'}, 'CADCHF': {'b': '0.5853100000', '...
2025-07-16 21:25:35,726 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:36,517 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:36,521 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:37,536 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:37,539 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:38,076 - DEBUG - app.firebase_stream - Firebase listener triggered (34). Event Type: patch, Path: /. Timestamp: 1752726338.0764103
2025-07-16 21:25:38,076 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.0070000000', 'o': '88.0000000000'}, 'GBPAUD': {'b': '2.0650700000', 'o': '2.0648900000'}, 'CADCHF': {'b': '0.5853100000', 'o': '0.5852800000'}, 'EURNZD': {'b': '1.9620100000', 'o'
2025-07-16 21:25:38,077 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.0070000000', 'o': '88.0000000000'}, 'GBPAUD': {'b': '2.0650700000', 'o': '2.0648900000'}, 'CADCHF': {'b': '0.5853100000', 'o': '0.5852800000'}, 'EURNZD': {'b': '1.9620100000', 'o'...
2025-07-16 21:25:38,078 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:38,550 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:38,553 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:39,557 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:39,561 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:40,325 - DEBUG - app.firebase_stream - Firebase listener triggered (35). Event Type: patch, Path: /. Timestamp: 1752726340.3256593
2025-07-16 21:25:40,326 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.0070000000', 'o': '87.9980000000'}, 'GBPAUD': {'b': '2.0650900000', 'o': '2.0649100000'}, 'CADCHF': {'b': '0.5853100000', 'o': '0.5852900000'}, 'EURNZD': {'b': '1.9619900000', 'o'
2025-07-16 21:25:40,331 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.0070000000', 'o': '87.9980000000'}, 'GBPAUD': {'b': '2.0650900000', 'o': '2.0649100000'}, 'CADCHF': {'b': '0.5853100000', 'o': '0.5852900000'}, 'EURNZD': {'b': '1.9619900000', 'o'...
2025-07-16 21:25:40,332 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:40,574 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:40,578 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:41,590 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:41,595 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:42,603 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:42,609 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:42,672 - DEBUG - app.firebase_stream - Firebase listener triggered (36). Event Type: patch, Path: /. Timestamp: 1752726342.672912
2025-07-16 21:25:42,673 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0000000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '88.0040000000', 'o': '88.0000000000'}, 'GBPAUD': {'b': '2.0651200000', 'o': '2.0649400000'}, 'USDCNH': {'b': '7.1820600000', '
2025-07-16 21:25:42,674 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0000000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '88.0040000000', 'o': '88.0000000000'}, 'GBPAUD': {'b': '2.0651200000', 'o': '2.0649400000'}, 'USDCNH': {'b': '7.1820600000', '...
2025-07-16 21:25:42,679 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:43,615 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:43,619 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:44,625 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:44,628 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:44,917 - DEBUG - app.firebase_stream - Firebase listener triggered (37). Event Type: patch, Path: /. Timestamp: 1752726344.9175794
2025-07-16 21:25:44,917 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0020000000', 'o': '37.9940000000'}, 'NZDJPY': {'b': '88.0070000000', 'o': '87.9990000000'}, 'GBPAUD': {'b': '2.0650700000', 'o': '2.0649400000'}, 'CADCHF': {'b': '0.5853100000', '
2025-07-16 21:25:44,918 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'XAGUSD': {'b': '38.0020000000', 'o': '37.9940000000'}, 'NZDJPY': {'b': '88.0070000000', 'o': '87.9990000000'}, 'GBPAUD': {'b': '2.0650700000', 'o': '2.0649400000'}, 'CADCHF': {'b': '0.5853100000', '...
2025-07-16 21:25:44,918 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:45,643 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:45,648 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:46,664 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:46,669 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:47,288 - DEBUG - app.firebase_stream - Firebase listener triggered (38). Event Type: patch, Path: /. Timestamp: 1752726347.2884877
2025-07-16 21:25:47,288 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.0030000000', 'o': '87.9940000000'}, 'GBPAUD': {'b': '2.0651300000', 'o': '2.0649400000'}, 'USDJPY': {'b': '148.5970000000', 'o': '148.5920000000'}, 'EURNZD': {'b': '1.9620600000',
2025-07-16 21:25:47,294 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.0030000000', 'o': '87.9940000000'}, 'GBPAUD': {'b': '2.0651300000', 'o': '2.0649400000'}, 'USDJPY': {'b': '148.5970000000', 'o': '148.5920000000'}, 'EURNZD': {'b': '1.9620600000',...
2025-07-16 21:25:47,294 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:47,680 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:47,683 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:48,687 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:48,691 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:49,644 - DEBUG - app.firebase_stream - Firebase listener triggered (39). Event Type: patch, Path: /. Timestamp: 1752726349.6440048
2025-07-16 21:25:49,644 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0490000000', 'o': '13.0437000000'}, 'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '88.0040000000', 'o': '87.9940000000'}, 'GBPAUD': {'b': '2.0651200000',
2025-07-16 21:25:49,645 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0490000000', 'o': '13.0437000000'}, 'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '88.0040000000', 'o': '87.9940000000'}, 'GBPAUD': {'b': '2.0651200000',...
2025-07-16 21:25:49,650 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:49,702 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:49,705 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:50,712 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:50,717 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:51,721 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:51,724 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:52,005 - DEBUG - app.firebase_stream - Firebase listener triggered (40). Event Type: patch, Path: /. Timestamp: 1752726352.0055249
2025-07-16 21:25:52,006 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9940000000'}, 'NZDJPY': {'b': '88.0030000000', 'o': '87.9940000000'}, 'GBPAUD': {'b': '2.0651300000', 'o': '2.0649400000'}, 'BTCUSD': {'b': '118264.500000000
2025-07-16 21:25:52,006 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9940000000'}, 'NZDJPY': {'b': '88.0030000000', 'o': '87.9940000000'}, 'GBPAUD': {'b': '2.0651300000', 'o': '2.0649400000'}, 'BTCUSD': {'b': '118264.500000000...
2025-07-16 21:25:52,007 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:52,734 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:52,738 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:53,744 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:53,747 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:54,257 - DEBUG - app.firebase_stream - Firebase listener triggered (41). Event Type: patch, Path: /. Timestamp: 1752726354.2575033
2025-07-16 21:25:54,258 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0500000000', 'o': '13.0432000000'}, 'XAGUSD': {'b': '38.0030000000', 'o': '37.9950000000'}, 'NZDJPY': {'b': '88.0000000000', 'o': '87.9940000000'}, 'GBPAUD': {'b': '2.0651200000',
2025-07-16 21:25:54,258 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0500000000', 'o': '13.0432000000'}, 'XAGUSD': {'b': '38.0030000000', 'o': '37.9950000000'}, 'NZDJPY': {'b': '88.0000000000', 'o': '87.9940000000'}, 'GBPAUD': {'b': '2.0651200000',...
2025-07-16 21:25:54,259 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:54,764 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:54,768 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:55,780 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:55,783 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:56,588 - DEBUG - app.firebase_stream - Firebase listener triggered (42). Event Type: patch, Path: /. Timestamp: 1752726356.5880802
2025-07-16 21:25:56,588 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0430000000'}, 'XAGUSD': {'b': '38.0020000000', 'o': '37.9940000000'}, 'NZDJPY': {'b': '88.0030000000', 'o': '87.9940000000'}, 'GBPAUD': {'b': '2.0651000000',
2025-07-16 21:25:56,589 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0430000000'}, 'XAGUSD': {'b': '38.0020000000', 'o': '37.9940000000'}, 'NZDJPY': {'b': '88.0030000000', 'o': '87.9940000000'}, 'GBPAUD': {'b': '2.0651000000',...
2025-07-16 21:25:56,591 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:56,786 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:56,790 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:57,804 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:57,808 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:58,813 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:58,817 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:25:58,851 - DEBUG - app.firebase_stream - Firebase listener triggered (43). Event Type: patch, Path: /. Timestamp: 1752726358.851197
2025-07-16 21:25:58,851 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0492000000', 'o': '13.0439000000'}, 'XAGUSD': {'b': '38.0040000000', 'o': '37.9970000000'}, 'NZDJPY': {'b': '88.0030000000', 'o': '87.9960000000'}, 'GBPAUD': {'b': '2.0650900000',
2025-07-16 21:25:58,852 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0492000000', 'o': '13.0439000000'}, 'XAGUSD': {'b': '38.0040000000', 'o': '37.9970000000'}, 'NZDJPY': {'b': '88.0030000000', 'o': '87.9960000000'}, 'GBPAUD': {'b': '2.0650900000',...
2025-07-16 21:25:58,852 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:25:59,819 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:25:59,826 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:00,838 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:00,843 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:01,219 - DEBUG - app.firebase_stream - Firebase listener triggered (44). Event Type: patch, Path: /. Timestamp: 1752726361.2192717
2025-07-16 21:26:01,220 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.0070000000', 'o': '87.9980000000'}, 'GBPAUD': {'b': '2.0650700000', 'o': '2.0649000000'}, 'USDJPY': {'b': '148.6120000000', 'o': '148.6070000000'}, 'USDCNH': {'b': '7.1821100000',
2025-07-16 21:26:01,221 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.0070000000', 'o': '87.9980000000'}, 'GBPAUD': {'b': '2.0650700000', 'o': '2.0649000000'}, 'USDJPY': {'b': '148.6120000000', 'o': '148.6070000000'}, 'USDCNH': {'b': '7.1821100000',...
2025-07-16 21:26:01,225 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:26:01,848 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:01,852 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:02,870 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:02,874 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:03,516 - DEBUG - app.firebase_stream - Firebase listener triggered (45). Event Type: patch, Path: /. Timestamp: 1752726363.516795
2025-07-16 21:26:03,517 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9960000000'}, 'NZDJPY': {'b': '88.0030000000', 'o': '87.9940000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649400000'}, 'USDCNH': {'b': '7.1821400000', '
2025-07-16 21:26:03,517 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9960000000'}, 'NZDJPY': {'b': '88.0030000000', 'o': '87.9940000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649400000'}, 'USDCNH': {'b': '7.1821400000', '...
2025-07-16 21:26:03,517 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:26:03,889 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:03,894 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:04,899 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:04,902 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:05,815 - DEBUG - app.firebase_stream - Firebase listener triggered (46). Event Type: patch, Path: /. Timestamp: 1752726365.8159058
2025-07-16 21:26:05,816 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0495000000', 'o': '13.0442000000'}, 'XAGUSD': {'b': '38.0030000000', 'o': '37.9950000000'}, 'NZDJPY': {'b': '88.0030000000', 'o': '87.9960000000'}, 'USDJPY': {'b': '148.6000000000
2025-07-16 21:26:05,816 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0495000000', 'o': '13.0442000000'}, 'XAGUSD': {'b': '38.0030000000', 'o': '37.9950000000'}, 'NZDJPY': {'b': '88.0030000000', 'o': '87.9960000000'}, 'USDJPY': {'b': '148.6000000000...
2025-07-16 21:26:05,816 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:26:05,909 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:05,913 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:06,916 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:06,919 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:07,933 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:07,939 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:08,179 - DEBUG - app.firebase_stream - Firebase listener triggered (47). Event Type: patch, Path: /. Timestamp: 1752726368.1793826
2025-07-16 21:26:08,179 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0020000000', 'o': '37.9940000000'}, 'NZDJPY': {'b': '88.0030000000', 'o': '87.9950000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649100000'}, 'USDJPY': {'b': '148.6010000000',
2025-07-16 21:26:08,180 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0020000000', 'o': '37.9940000000'}, 'NZDJPY': {'b': '88.0030000000', 'o': '87.9950000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649100000'}, 'USDJPY': {'b': '148.6010000000',...
2025-07-16 21:26:08,180 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:26:08,942 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:08,946 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:09,951 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:09,955 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:10,437 - DEBUG - app.firebase_stream - Firebase listener triggered (48). Event Type: patch, Path: /. Timestamp: 1752726370.4369724
2025-07-16 21:26:10,437 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.0040000000', 'o': '87.9950000000'}, 'GBPAUD': {'b': '2.0650900000', 'o': '2.0649100000'}, 'BTCUSD': {'b': '118261.9000000000', 'o': '118261.8000000000'}, 'USDJPY': {'b': '148.6020
2025-07-16 21:26:10,438 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.0040000000', 'o': '87.9950000000'}, 'GBPAUD': {'b': '2.0650900000', 'o': '2.0649100000'}, 'BTCUSD': {'b': '118261.9000000000', 'o': '118261.8000000000'}, 'USDJPY': {'b': '148.6020...
2025-07-16 21:26:10,443 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:26:10,964 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:10,968 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:11,979 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:11,983 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:12,781 - DEBUG - app.firebase_stream - Firebase listener triggered (49). Event Type: patch, Path: /. Timestamp: 1752726372.781848
2025-07-16 21:26:12,782 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.0030000000', 'o': '87.9970000000'}, 'GBPAUD': {'b': '2.0650800000', 'o': '2.0649100000'}, 'BTCUSD': {'b': '118264.5000000000', 'o': '118264.4000000000'}, 'USDJPY': {'b': '148.6030
2025-07-16 21:26:12,783 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'NZDJPY': {'b': '88.0030000000', 'o': '87.9970000000'}, 'GBPAUD': {'b': '2.0650800000', 'o': '2.0649100000'}, 'BTCUSD': {'b': '118264.5000000000', 'o': '118264.4000000000'}, 'USDJPY': {'b': '148.6030...
2025-07-16 21:26:12,783 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:26:12,995 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:13,000 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:14,003 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:14,006 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:15,012 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:15,035 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:15,042 - DEBUG - app.firebase_stream - Firebase listener triggered (50). Event Type: patch, Path: /. Timestamp: 1752726375.0428383
2025-07-16 21:26:15,043 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0040000000', 'o': '37.9970000000'}, 'NZDJPY': {'b': '88.0110000000', 'o': '88.0040000000'}, 'GBPAUD': {'b': '2.0650900000', 'o': '2.0649100000'}, 'BTCUSD': {'b': '118261.900000000
2025-07-16 21:26:15,044 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0040000000', 'o': '37.9970000000'}, 'NZDJPY': {'b': '88.0110000000', 'o': '88.0040000000'}, 'GBPAUD': {'b': '2.0650900000', 'o': '2.0649100000'}, 'BTCUSD': {'b': '118261.900000000...
2025-07-16 21:26:15,044 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:26:16,049 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:16,052 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:17,071 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:17,075 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:17,338 - DEBUG - app.firebase_stream - Firebase listener triggered (51). Event Type: patch, Path: /. Timestamp: 1752726377.338745
2025-07-16 21:26:17,339 - DEBUG - app.firebase_stream - Prepared batch update for 36 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0020000000', 'o': '37.9940000000'}, 'NZDJPY': {'b': '88.0080000000', 'o': '88.0010000000'}, 'GBPAUD': {'b': '2.0650800000', 'o': '2.0649200000'}, 'USDJPY': {'b': '148.6090000000',
2025-07-16 21:26:17,339 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0020000000', 'o': '37.9940000000'}, 'NZDJPY': {'b': '88.0080000000', 'o': '88.0010000000'}, 'GBPAUD': {'b': '2.0650800000', 'o': '2.0649200000'}, 'USDJPY': {'b': '148.6090000000',...
2025-07-16 21:26:17,339 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:26:18,085 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:18,090 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:19,095 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:19,099 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:19,641 - DEBUG - app.firebase_stream - Firebase listener triggered (52). Event Type: patch, Path: /. Timestamp: 1752726379.6411116
2025-07-16 21:26:19,641 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0040000000', 'o': '37.9970000000'}, 'NZDJPY': {'b': '88.0110000000', 'o': '88.0020000000'}, 'BTCUSD': {'b': '118264.5000000000', 'o': '118264.4000000000'}, 'CADCHF': {'b': '0.5852
2025-07-16 21:26:19,642 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0040000000', 'o': '37.9970000000'}, 'NZDJPY': {'b': '88.0110000000', 'o': '88.0020000000'}, 'BTCUSD': {'b': '118264.5000000000', 'o': '118264.4000000000'}, 'CADCHF': {'b': '0.5852...
2025-07-16 21:26:19,642 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:26:20,101 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:20,105 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:21,108 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:21,113 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:21,992 - DEBUG - app.firebase_stream - Firebase listener triggered (53). Event Type: patch, Path: /. Timestamp: 1752726381.9920752
2025-07-16 21:26:21,992 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0020000000', 'o': '37.9940000000'}, 'NZDJPY': {'b': '88.0110000000', 'o': '88.0040000000'}, 'BTCUSD': {'b': '118261.9000000000', 'o': '118261.8000000000'}, 'USDJPY': {'b': '148.61
2025-07-16 21:26:21,993 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0020000000', 'o': '37.9940000000'}, 'NZDJPY': {'b': '88.0110000000', 'o': '88.0040000000'}, 'BTCUSD': {'b': '118261.9000000000', 'o': '118261.8000000000'}, 'USDJPY': {'b': '148.61...
2025-07-16 21:26:21,998 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:26:22,116 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:22,121 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:22,539 - INFO - app - [AUTO-CUTOFF] Starting update_all_users_dynamic_portfolio job...
2025-07-16 21:26:22,539 - INFO - app - [AUTO-CUTOFF] update_all_users_dynamic_portfolio heartbeat: task is alive and running.
2025-07-16 21:26:22,539 - INFO - app - [AUTO-CUTOFF] Fetching all active users (live and demo)...
2025-07-16 21:26:22,548 - INFO - app - [AUTO-CUTOFF] Found 19 live users and 11 demo users.
2025-07-16 21:26:22,548 - INFO - app - [AUTO-CUTOFF] Processing 30 users for dynamic portfolio update...
2025-07-16 21:26:22,548 - INFO - app - [AUTO-CUTOFF] Processing user 4 (live), group: Group B
2025-07-16 21:26:22,548 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 4 (live) from cache/DB...
2025-07-16 21:26:22,549 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:26:22,549 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:26:22,549 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:26:22,556 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E4ECCC00>, <app.database.models.Group object at 0x000002B2E4ECD370>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4ECFBD0>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECD260>, <app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECEAD0>, <app.database.models.Group object at 0x000002B2E4ECF130>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E53758C0>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5377350>, <app.database.models.Group object at 0x000002B2E53745A0>, <app.database.models.Group object at 0x000002B2E5376CF0>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377F00>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374AF0>, <app.database.models.Group object at 0x000002B2E5375260>, <app.database.models.Group object at 0x000002B2E5375E10>, <app.database.models.Group object at 0x000002B2E5374380>, <app.database.models.Group object at 0x000002B2E5375BF0>, <app.database.models.Group object at 0x000002B2E53767A0>, <app.database.models.Group object at 0x000002B2E5376690>, <app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E536B130>, <app.database.models.Group object at 0x000002B2E536BAC0>, <app.database.models.Group object at 0x000002B2E5369F20>, <app.database.models.Group object at 0x000002B2E5369150>]
2025-07-16 21:26:22,557 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:26:22,557 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 4...
2025-07-16 21:26:22,559 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 open orders.
2025-07-16 21:26:22,560 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 4...
2025-07-16 21:26:22,561 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 pending orders.
2025-07-16 21:26:22,561 - WARNING - app - [AUTO-CUTOFF] User 4 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:26:22,561 - INFO - app - [AUTO-CUTOFF] Processing user 5 (live), group: Admin
2025-07-16 21:26:22,562 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 5 (live) from cache/DB...
2025-07-16 21:26:22,565 - WARNING - app - [AUTO-CUTOFF] No user data found for user 5 (live). Skipping portfolio update.
2025-07-16 21:26:22,565 - INFO - app - [AUTO-CUTOFF] Processing user 8 (live), group: string
2025-07-16 21:26:22,566 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 8 (live) from cache/DB...
2025-07-16 21:26:22,566 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group string...
2025-07-16 21:26:22,567 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'string' from cache: None
2025-07-16 21:26:22,567 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'string', fetching from DB.
2025-07-16 21:26:22,570 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'string': []
2025-07-16 21:26:22,570 - ERROR - app - [AUTO-CUTOFF] Group symbol settings not found in DB for group 'string'. Skipping portfolio update for user 8.
2025-07-16 21:26:22,570 - INFO - app - [AUTO-CUTOFF] Processing user 9 (live), group: Standard
2025-07-16 21:26:22,570 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 9 (live) from cache/DB...
2025-07-16 21:26:22,571 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:26:22,571 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:26:22,572 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:26:22,576 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x000002B2E5376CF0>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377F00>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374AF0>, <app.database.models.Group object at 0x000002B2E5375260>, <app.database.models.Group object at 0x000002B2E5375E10>, <app.database.models.Group object at 0x000002B2E5374380>, <app.database.models.Group object at 0x000002B2E5375BF0>, <app.database.models.Group object at 0x000002B2E53767A0>, <app.database.models.Group object at 0x000002B2E5376690>, <app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E4ECCC00>, <app.database.models.Group object at 0x000002B2E4ECD370>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4ECFBD0>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECD260>, <app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECEAD0>, <app.database.models.Group object at 0x000002B2E4ECF130>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E4ECEE00>, <app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E536B130>, <app.database.models.Group object at 0x000002B2E536BAC0>]
2025-07-16 21:26:22,577 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:26:22,577 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 9...
2025-07-16 21:26:22,580 - DEBUG - app - [AUTO-CUTOFF] User 9 has 1 open orders.
2025-07-16 21:26:22,580 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 9...
2025-07-16 21:26:22,582 - DEBUG - app - [AUTO-CUTOFF] User 9 has 0 pending orders.
2025-07-16 21:26:22,582 - DEBUG - app - [AUTO-CUTOFF] User 9 total positions for portfolio calculation: 1
2025-07-16 21:26:22,583 - DEBUG - app - [AUTO-CUTOFF] User 9 adjusted market prices: {}
2025-07-16 21:26:22,583 - DEBUG - app - [AUTO-CUTOFF] User 9 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:26:22,583 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 9...
2025-07-16 21:26:22,867 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol BTCUSD
2025-07-16 21:26:22,867 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 99.90738313495848051220798402% which is below threshold 100.0%
2025-07-16 21:26:22,868 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 9: {'balance': '9794.75000000', 'equity': '9794.75000000', 'margin': '9803.83000000', 'free_margin': '-9.08000000', 'profit_loss': '0.0', 'margin_level': '99.90738313495848051220798402', 'positions': [{'order_id': '1000341-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.41000000'), 'order_price': Decimal('141921.60000000'), 'margin': Decimal('9773.83000000'), 'contract_value': Decimal('0.41000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('244.35000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': True}
2025-07-16 21:26:22,868 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 9: {'balance': '9794.75000000', 'equity': '9794.75000000', 'margin': '9803.83000000', 'free_margin': '-9.08000000', 'profit_loss': '0.0', 'margin_level': '99.90738313495848051220798402', 'positions_with_pnl': [{'order_id': '1000341-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.41000000'), 'order_price': Decimal('141921.60000000'), 'margin': Decimal('9773.83000000'), 'contract_value': Decimal('0.41000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('244.35000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': True}
2025-07-16 21:26:22,869 - INFO - app - [AUTO-CUTOFF] User 9 margin_level: 99.90738313495848051220798402
2025-07-16 21:26:24,232 - DEBUG - app.firebase_stream - Firebase listener triggered (54). Event Type: patch, Path: /. Timestamp: 1752726384.2322927
2025-07-16 21:26:24,232 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0494000000', 'o': '13.0441000000'}, 'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '88.0090000000', 'o': '88.0020000000'}, 'GBPAUD': {'b': '2.0650900000',
2025-07-16 21:26:24,232 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0494000000', 'o': '13.0441000000'}, 'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '88.0090000000', 'o': '88.0020000000'}, 'GBPAUD': {'b': '2.0650900000',...
2025-07-16 21:26:24,232 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:26:26,261 - INFO - app - [AUTO-CUTOFF] Sent margin call warning email (HTML) to user 9 at kodideladinesh123@gmail.com
2025-07-16 21:26:26,263 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:26,265 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 9
2025-07-16 21:26:26,265 - INFO - app - [AUTO-CUTOFF] Processing user 10 (live), group: Group B
2025-07-16 21:26:26,265 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 10 (live) from cache/DB...
2025-07-16 21:26:26,270 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:26:26,275 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:26,279 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:26:26,279 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:26:26,295 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E5369150>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E536BDF0>, <app.database.models.Group object at 0x000002B2E53696A0>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E5369040>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E536B8A0>, <app.database.models.Group object at 0x000002B2E5369260>, <app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368E20>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E53698C0>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E53699D0>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E536B9B0>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E536A140>, <app.database.models.Group object at 0x000002B2E5369E10>, <app.database.models.Group object at 0x000002B2E52F0050>, <app.database.models.Group object at 0x000002B2E52F0160>, <app.database.models.Group object at 0x000002B2E52F0270>, <app.database.models.Group object at 0x000002B2E52F0380>, <app.database.models.Group object at 0x000002B2E52F0490>, <app.database.models.Group object at 0x000002B2E52F05A0>, <app.database.models.Group object at 0x000002B2E52F06B0>, <app.database.models.Group object at 0x000002B2E52F07C0>, <app.database.models.Group object at 0x000002B2E52F08D0>, <app.database.models.Group object at 0x000002B2E52F09E0>, <app.database.models.Group object at 0x000002B2E52F0AF0>, <app.database.models.Group object at 0x000002B2E52F0C00>, <app.database.models.Group object at 0x000002B2E52F0D10>, <app.database.models.Group object at 0x000002B2E52F0E20>, <app.database.models.Group object at 0x000002B2E52F0F30>, <app.database.models.Group object at 0x000002B2E52F1040>, <app.database.models.Group object at 0x000002B2E52F1150>, <app.database.models.Group object at 0x000002B2E52F1260>, <app.database.models.Group object at 0x000002B2E52F1370>, <app.database.models.Group object at 0x000002B2E52F1480>, <app.database.models.Group object at 0x000002B2E52F1590>, <app.database.models.Group object at 0x000002B2E52F16A0>, <app.database.models.Group object at 0x000002B2E52F17B0>, <app.database.models.Group object at 0x000002B2E52F18C0>, <app.database.models.Group object at 0x000002B2E52F19D0>, <app.database.models.Group object at 0x000002B2E52F1AE0>, <app.database.models.Group object at 0x000002B2E52F1BF0>, <app.database.models.Group object at 0x000002B2E52F1D00>, <app.database.models.Group object at 0x000002B2E52F1E10>, <app.database.models.Group object at 0x000002B2E52F1F20>, <app.database.models.Group object at 0x000002B2E52F2030>, <app.database.models.Group object at 0x000002B2E52F2140>, <app.database.models.Group object at 0x000002B2E52F2250>, <app.database.models.Group object at 0x000002B2E52F2360>, <app.database.models.Group object at 0x000002B2E52F2470>, <app.database.models.Group object at 0x000002B2E52F2580>, <app.database.models.Group object at 0x000002B2E52F2690>, <app.database.models.Group object at 0x000002B2E52F27A0>, <app.database.models.Group object at 0x000002B2E52F28B0>, <app.database.models.Group object at 0x000002B2E52F29C0>, <app.database.models.Group object at 0x000002B2E52F2AD0>, <app.database.models.Group object at 0x000002B2E52F2BE0>, <app.database.models.Group object at 0x000002B2E52F2CF0>, <app.database.models.Group object at 0x000002B2E52F2E00>, <app.database.models.Group object at 0x000002B2E52F2F10>, <app.database.models.Group object at 0x000002B2E52F3020>, <app.database.models.Group object at 0x000002B2E52F3130>, <app.database.models.Group object at 0x000002B2E52F3240>, <app.database.models.Group object at 0x000002B2E52F3350>, <app.database.models.Group object at 0x000002B2E52F3460>, <app.database.models.Group object at 0x000002B2E52F3570>]
2025-07-16 21:26:26,300 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:26:26,300 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 10...
2025-07-16 21:26:26,306 - DEBUG - app - [AUTO-CUTOFF] User 10 has 0 open orders.
2025-07-16 21:26:26,307 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 10...
2025-07-16 21:26:26,314 - DEBUG - app - [AUTO-CUTOFF] User 10 has 0 pending orders.
2025-07-16 21:26:26,314 - WARNING - app - [AUTO-CUTOFF] User 10 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:26:26,314 - INFO - app - [AUTO-CUTOFF] Processing user 11 (live), group: Group B
2025-07-16 21:26:26,314 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 11 (live) from cache/DB...
2025-07-16 21:26:26,319 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:26:26,323 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:26:26,323 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:26:26,336 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E5369150>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E536BDF0>, <app.database.models.Group object at 0x000002B2E53696A0>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E5369040>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E536B8A0>, <app.database.models.Group object at 0x000002B2E5369260>, <app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368E20>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E53698C0>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E53699D0>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E536B9B0>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E536A140>, <app.database.models.Group object at 0x000002B2E5369E10>, <app.database.models.Group object at 0x000002B2E52F0050>, <app.database.models.Group object at 0x000002B2E52F0160>, <app.database.models.Group object at 0x000002B2E52F0270>, <app.database.models.Group object at 0x000002B2E52F0380>, <app.database.models.Group object at 0x000002B2E52F0490>, <app.database.models.Group object at 0x000002B2E52F05A0>, <app.database.models.Group object at 0x000002B2E52F06B0>, <app.database.models.Group object at 0x000002B2E52F07C0>, <app.database.models.Group object at 0x000002B2E52F08D0>, <app.database.models.Group object at 0x000002B2E52F09E0>, <app.database.models.Group object at 0x000002B2E52F0AF0>, <app.database.models.Group object at 0x000002B2E52F0C00>, <app.database.models.Group object at 0x000002B2E52F0D10>, <app.database.models.Group object at 0x000002B2E52F0E20>, <app.database.models.Group object at 0x000002B2E52F0F30>, <app.database.models.Group object at 0x000002B2E52F1040>, <app.database.models.Group object at 0x000002B2E52F1150>, <app.database.models.Group object at 0x000002B2E52F1260>, <app.database.models.Group object at 0x000002B2E52F1370>, <app.database.models.Group object at 0x000002B2E52F1480>, <app.database.models.Group object at 0x000002B2E52F1590>, <app.database.models.Group object at 0x000002B2E52F16A0>, <app.database.models.Group object at 0x000002B2E52F17B0>, <app.database.models.Group object at 0x000002B2E52F18C0>, <app.database.models.Group object at 0x000002B2E52F19D0>, <app.database.models.Group object at 0x000002B2E52F1AE0>, <app.database.models.Group object at 0x000002B2E52F1BF0>, <app.database.models.Group object at 0x000002B2E52F1D00>, <app.database.models.Group object at 0x000002B2E52F1E10>, <app.database.models.Group object at 0x000002B2E52F1F20>, <app.database.models.Group object at 0x000002B2E52F2030>, <app.database.models.Group object at 0x000002B2E52F2140>, <app.database.models.Group object at 0x000002B2E52F2250>, <app.database.models.Group object at 0x000002B2E52F2360>, <app.database.models.Group object at 0x000002B2E52F2470>, <app.database.models.Group object at 0x000002B2E52F2580>, <app.database.models.Group object at 0x000002B2E52F2690>, <app.database.models.Group object at 0x000002B2E52F27A0>, <app.database.models.Group object at 0x000002B2E52F28B0>, <app.database.models.Group object at 0x000002B2E52F29C0>, <app.database.models.Group object at 0x000002B2E52F2AD0>, <app.database.models.Group object at 0x000002B2E52F2BE0>, <app.database.models.Group object at 0x000002B2E52F2CF0>, <app.database.models.Group object at 0x000002B2E52F2E00>, <app.database.models.Group object at 0x000002B2E52F2F10>, <app.database.models.Group object at 0x000002B2E52F3020>, <app.database.models.Group object at 0x000002B2E52F3130>, <app.database.models.Group object at 0x000002B2E52F3240>, <app.database.models.Group object at 0x000002B2E52F3350>, <app.database.models.Group object at 0x000002B2E52F3460>, <app.database.models.Group object at 0x000002B2E52F3570>]
2025-07-16 21:26:26,340 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:26:26,340 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 11...
2025-07-16 21:26:26,345 - DEBUG - app - [AUTO-CUTOFF] User 11 has 0 open orders.
2025-07-16 21:26:26,345 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 11...
2025-07-16 21:26:26,349 - DEBUG - app - [AUTO-CUTOFF] User 11 has 0 pending orders.
2025-07-16 21:26:26,349 - WARNING - app - [AUTO-CUTOFF] User 11 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:26:26,349 - INFO - app - [AUTO-CUTOFF] Processing user 12 (live), group: Standard
2025-07-16 21:26:26,349 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 12 (live) from cache/DB...
2025-07-16 21:26:26,352 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:26:26,354 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:26:26,354 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:26:26,363 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x000002B2E5369F20>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECEAD0>, <app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECD260>, <app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECD370>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E4ECF240>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E4ECEE00>, <app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E4ECC050>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E53758C0>, <app.database.models.Group object at 0x000002B2E5376CF0>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377F00>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374AF0>, <app.database.models.Group object at 0x000002B2E5375260>, <app.database.models.Group object at 0x000002B2E5375E10>, <app.database.models.Group object at 0x000002B2E5374380>, <app.database.models.Group object at 0x000002B2E5375BF0>, <app.database.models.Group object at 0x000002B2E53767A0>, <app.database.models.Group object at 0x000002B2E5376690>]
2025-07-16 21:26:26,366 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:26:26,366 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 12...
2025-07-16 21:26:26,372 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 open orders.
2025-07-16 21:26:26,372 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 12...
2025-07-16 21:26:26,376 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 pending orders.
2025-07-16 21:26:26,376 - WARNING - app - [AUTO-CUTOFF] User 12 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:26:26,376 - INFO - app - [AUTO-CUTOFF] Processing user 13 (live), group: Group B
2025-07-16 21:26:26,377 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 13 (live) from cache/DB...
2025-07-16 21:26:26,379 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:26:26,380 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:26:26,380 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:26:26,387 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E53696A0>, <app.database.models.Group object at 0x000002B2E536BDF0>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5369040>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E5369150>, <app.database.models.Group object at 0x000002B2E536BAC0>, <app.database.models.Group object at 0x000002B2E53688D0>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E536B8A0>, <app.database.models.Group object at 0x000002B2E5369260>, <app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368E20>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E53698C0>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E53699D0>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E536B9B0>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E536A140>, <app.database.models.Group object at 0x000002B2E5369E10>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E536B130>, <app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E5377350>, <app.database.models.Group object at 0x000002B2E53745A0>, <app.database.models.Group object at 0x000002B2E52C4050>, <app.database.models.Group object at 0x000002B2E52C4160>, <app.database.models.Group object at 0x000002B2E52C4270>, <app.database.models.Group object at 0x000002B2E52C4380>, <app.database.models.Group object at 0x000002B2E52C4490>, <app.database.models.Group object at 0x000002B2E52C45A0>, <app.database.models.Group object at 0x000002B2E52C46B0>, <app.database.models.Group object at 0x000002B2E52C47C0>, <app.database.models.Group object at 0x000002B2E52C48D0>, <app.database.models.Group object at 0x000002B2E52C49E0>, <app.database.models.Group object at 0x000002B2E52C4AF0>, <app.database.models.Group object at 0x000002B2E52C4C00>, <app.database.models.Group object at 0x000002B2E52C4D10>, <app.database.models.Group object at 0x000002B2E52C4E20>, <app.database.models.Group object at 0x000002B2E52C4F30>, <app.database.models.Group object at 0x000002B2E52C5040>, <app.database.models.Group object at 0x000002B2E52C5150>, <app.database.models.Group object at 0x000002B2E52C5260>, <app.database.models.Group object at 0x000002B2E52C5370>, <app.database.models.Group object at 0x000002B2E52C5480>, <app.database.models.Group object at 0x000002B2E52C5590>, <app.database.models.Group object at 0x000002B2E52C56A0>, <app.database.models.Group object at 0x000002B2E52C57B0>, <app.database.models.Group object at 0x000002B2E52C58C0>, <app.database.models.Group object at 0x000002B2E52C59D0>, <app.database.models.Group object at 0x000002B2E52C5AE0>, <app.database.models.Group object at 0x000002B2E52C5BF0>, <app.database.models.Group object at 0x000002B2E52C5D00>, <app.database.models.Group object at 0x000002B2E52C5E10>, <app.database.models.Group object at 0x000002B2E52C5F20>, <app.database.models.Group object at 0x000002B2E52C6030>, <app.database.models.Group object at 0x000002B2E52C6140>, <app.database.models.Group object at 0x000002B2E52C6250>, <app.database.models.Group object at 0x000002B2E52C6360>, <app.database.models.Group object at 0x000002B2E52C6470>, <app.database.models.Group object at 0x000002B2E52C6580>, <app.database.models.Group object at 0x000002B2E52C6690>, <app.database.models.Group object at 0x000002B2E52C67A0>, <app.database.models.Group object at 0x000002B2E52C68B0>, <app.database.models.Group object at 0x000002B2E52C69C0>, <app.database.models.Group object at 0x000002B2E52C6AD0>]
2025-07-16 21:26:26,388 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:26:26,388 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 13...
2025-07-16 21:26:26,391 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 open orders.
2025-07-16 21:26:26,391 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 13...
2025-07-16 21:26:26,394 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 pending orders.
2025-07-16 21:26:26,394 - WARNING - app - [AUTO-CUTOFF] User 13 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:26:26,394 - INFO - app - [AUTO-CUTOFF] Processing user 14 (live), group: Standard
2025-07-16 21:26:26,394 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 14 (live) from cache/DB...
2025-07-16 21:26:26,395 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:26:26,395 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:26:26,396 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:26:26,401 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377F00>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374AF0>, <app.database.models.Group object at 0x000002B2E5375260>, <app.database.models.Group object at 0x000002B2E5375E10>, <app.database.models.Group object at 0x000002B2E5374380>, <app.database.models.Group object at 0x000002B2E5375BF0>, <app.database.models.Group object at 0x000002B2E53767A0>, <app.database.models.Group object at 0x000002B2E5376690>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECEAD0>, <app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECD260>, <app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECD370>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E4ECF240>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E4ECEE00>, <app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E4ECC050>, <app.database.models.Group object at 0x000002B2E4ECFBD0>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>]
2025-07-16 21:26:26,402 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:26:26,402 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 14...
2025-07-16 21:26:26,405 - DEBUG - app - [AUTO-CUTOFF] User 14 has 3 open orders.
2025-07-16 21:26:26,406 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 14...
2025-07-16 21:26:26,408 - DEBUG - app - [AUTO-CUTOFF] User 14 has 0 pending orders.
2025-07-16 21:26:26,408 - DEBUG - app - [AUTO-CUTOFF] User 14 total positions for portfolio calculation: 3
2025-07-16 21:26:26,410 - DEBUG - app - [AUTO-CUTOFF] User 14 adjusted market prices: {}
2025-07-16 21:26:26,410 - DEBUG - app - [AUTO-CUTOFF] User 14 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:26:26,410 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 14...
2025-07-16 21:26:26,595 - DEBUG - app.firebase_stream - Firebase listener triggered (55). Event Type: patch, Path: /. Timestamp: 1752726386.5951076
2025-07-16 21:26:26,595 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0020000000', 'o': '37.9940000000'}, 'NZDJPY': {'b': '88.0120000000', 'o': '88.0040000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649100000'}, 'BTCUSD': {'b': '118264.500000000
2025-07-16 21:26:26,595 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0020000000', 'o': '37.9940000000'}, 'NZDJPY': {'b': '88.0120000000', 'o': '88.0040000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649100000'}, 'BTCUSD': {'b': '118264.500000000...
2025-07-16 21:26:26,595 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:26:26,791 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol BTCUSD
2025-07-16 21:26:26,792 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:26:26,792 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:26:26,792 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 14: {'balance': '9902.02000000', 'equity': '9902.02000000', 'margin': '9494.47000000', 'free_margin': '407.55000000', 'profit_loss': '0.0', 'margin_level': '104.2924986860772639231047125', 'positions': [{'order_id': '1000330-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.40000000'), 'order_price': Decimal('141908.50000000'), 'margin': Decimal('9422.73000000'), 'contract_value': Decimal('0.40000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('235.57000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000332-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('65.21517371'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000333-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('6.52134765'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:26:26,792 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 14: {'balance': '9902.02000000', 'equity': '9902.02000000', 'margin': '9494.47000000', 'free_margin': '407.55000000', 'profit_loss': '0.0', 'margin_level': '104.2924986860772639231047125', 'positions_with_pnl': [{'order_id': '1000330-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.40000000'), 'order_price': Decimal('141908.50000000'), 'margin': Decimal('9422.73000000'), 'contract_value': Decimal('0.40000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('235.57000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000332-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('65.21517371'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000333-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('6.52134765'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:26:26,794 - INFO - app - [AUTO-CUTOFF] User 14 margin_level: 104.2924986860772639231047125
2025-07-16 21:26:26,796 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 14
2025-07-16 21:26:26,796 - INFO - app - [AUTO-CUTOFF] Processing user 16 (live), group: Standard
2025-07-16 21:26:26,797 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 16 (live) from cache/DB...
2025-07-16 21:26:26,803 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:26:26,810 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:26:26,810 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:26:26,819 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377F00>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374AF0>, <app.database.models.Group object at 0x000002B2E5375260>, <app.database.models.Group object at 0x000002B2E5375E10>, <app.database.models.Group object at 0x000002B2E5374380>, <app.database.models.Group object at 0x000002B2E5375BF0>, <app.database.models.Group object at 0x000002B2E53767A0>, <app.database.models.Group object at 0x000002B2E5376690>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECEAD0>, <app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECD260>, <app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECD370>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E4ECF240>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E4ECEE00>, <app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E4ECC050>, <app.database.models.Group object at 0x000002B2E4ECFBD0>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>]
2025-07-16 21:26:26,825 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:26:26,825 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 16...
2025-07-16 21:26:26,830 - DEBUG - app - [AUTO-CUTOFF] User 16 has 0 open orders.
2025-07-16 21:26:26,830 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 16...
2025-07-16 21:26:26,837 - DEBUG - app - [AUTO-CUTOFF] User 16 has 0 pending orders.
2025-07-16 21:26:26,837 - WARNING - app - [AUTO-CUTOFF] User 16 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:26:26,837 - INFO - app - [AUTO-CUTOFF] Processing user 17 (live), group: Group B
2025-07-16 21:26:26,837 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 17 (live) from cache/DB...
2025-07-16 21:26:26,840 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:26:26,843 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:26:26,843 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:26:26,854 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E536BDF0>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369040>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E5368E20>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E536BAC0>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5369150>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E53699D0>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E536B9B0>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E536A140>, <app.database.models.Group object at 0x000002B2E5369E10>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E536B130>, <app.database.models.Group object at 0x000002B2E5369F20>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E52C8050>, <app.database.models.Group object at 0x000002B2E52C8160>, <app.database.models.Group object at 0x000002B2E52C8270>, <app.database.models.Group object at 0x000002B2E52C8380>, <app.database.models.Group object at 0x000002B2E52C8490>, <app.database.models.Group object at 0x000002B2E52C85A0>, <app.database.models.Group object at 0x000002B2E52C86B0>, <app.database.models.Group object at 0x000002B2E52C87C0>, <app.database.models.Group object at 0x000002B2E52C88D0>, <app.database.models.Group object at 0x000002B2E52C89E0>, <app.database.models.Group object at 0x000002B2E52C8AF0>, <app.database.models.Group object at 0x000002B2E52C8C00>, <app.database.models.Group object at 0x000002B2E52C8D10>, <app.database.models.Group object at 0x000002B2E52C8E20>, <app.database.models.Group object at 0x000002B2E52C8F30>, <app.database.models.Group object at 0x000002B2E52C9040>, <app.database.models.Group object at 0x000002B2E52C9150>, <app.database.models.Group object at 0x000002B2E52C9260>, <app.database.models.Group object at 0x000002B2E52C9370>, <app.database.models.Group object at 0x000002B2E52C9480>, <app.database.models.Group object at 0x000002B2E52C9590>, <app.database.models.Group object at 0x000002B2E52C96A0>, <app.database.models.Group object at 0x000002B2E52C97B0>, <app.database.models.Group object at 0x000002B2E52C98C0>, <app.database.models.Group object at 0x000002B2E52C99D0>, <app.database.models.Group object at 0x000002B2E52C9AE0>, <app.database.models.Group object at 0x000002B2E52C9BF0>, <app.database.models.Group object at 0x000002B2E52C9D00>, <app.database.models.Group object at 0x000002B2E52C9E10>, <app.database.models.Group object at 0x000002B2E52C9F20>, <app.database.models.Group object at 0x000002B2E52CA030>, <app.database.models.Group object at 0x000002B2E52CA140>, <app.database.models.Group object at 0x000002B2E52CA250>, <app.database.models.Group object at 0x000002B2E52CA360>, <app.database.models.Group object at 0x000002B2E52CA470>, <app.database.models.Group object at 0x000002B2E52CA580>, <app.database.models.Group object at 0x000002B2E52CA690>, <app.database.models.Group object at 0x000002B2E52CA7A0>, <app.database.models.Group object at 0x000002B2E52CA8B0>, <app.database.models.Group object at 0x000002B2E52CA9C0>, <app.database.models.Group object at 0x000002B2E52CAAD0>, <app.database.models.Group object at 0x000002B2E52CABE0>, <app.database.models.Group object at 0x000002B2E52CACF0>, <app.database.models.Group object at 0x000002B2E52CAE00>, <app.database.models.Group object at 0x000002B2E52CAF10>, <app.database.models.Group object at 0x000002B2E52CB020>, <app.database.models.Group object at 0x000002B2E52CB130>, <app.database.models.Group object at 0x000002B2E52CB240>, <app.database.models.Group object at 0x000002B2E52CB350>]
2025-07-16 21:26:26,859 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:26:26,859 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 17...
2025-07-16 21:26:26,863 - DEBUG - app - [AUTO-CUTOFF] User 17 has 0 open orders.
2025-07-16 21:26:26,863 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 17...
2025-07-16 21:26:26,868 - DEBUG - app - [AUTO-CUTOFF] User 17 has 0 pending orders.
2025-07-16 21:26:26,868 - WARNING - app - [AUTO-CUTOFF] User 17 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:26:26,868 - INFO - app - [AUTO-CUTOFF] Processing user 18 (live), group: Group B
2025-07-16 21:26:26,868 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 18 (live) from cache/DB...
2025-07-16 21:26:26,871 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:26:26,877 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:26:26,877 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:26:26,887 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E536BDF0>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369040>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E5368E20>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E536BAC0>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5369150>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E53699D0>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E536B9B0>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E536A140>, <app.database.models.Group object at 0x000002B2E5369E10>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E536B130>, <app.database.models.Group object at 0x000002B2E5369F20>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E52C8050>, <app.database.models.Group object at 0x000002B2E52C8160>, <app.database.models.Group object at 0x000002B2E52C8270>, <app.database.models.Group object at 0x000002B2E52C8380>, <app.database.models.Group object at 0x000002B2E52C8490>, <app.database.models.Group object at 0x000002B2E52C85A0>, <app.database.models.Group object at 0x000002B2E52C86B0>, <app.database.models.Group object at 0x000002B2E52C87C0>, <app.database.models.Group object at 0x000002B2E52C88D0>, <app.database.models.Group object at 0x000002B2E52C89E0>, <app.database.models.Group object at 0x000002B2E52C8AF0>, <app.database.models.Group object at 0x000002B2E52C8C00>, <app.database.models.Group object at 0x000002B2E52C8D10>, <app.database.models.Group object at 0x000002B2E52C8E20>, <app.database.models.Group object at 0x000002B2E52C8F30>, <app.database.models.Group object at 0x000002B2E52C9040>, <app.database.models.Group object at 0x000002B2E52C9150>, <app.database.models.Group object at 0x000002B2E52C9260>, <app.database.models.Group object at 0x000002B2E52C9370>, <app.database.models.Group object at 0x000002B2E52C9480>, <app.database.models.Group object at 0x000002B2E52C9590>, <app.database.models.Group object at 0x000002B2E52C96A0>, <app.database.models.Group object at 0x000002B2E52C97B0>, <app.database.models.Group object at 0x000002B2E52C98C0>, <app.database.models.Group object at 0x000002B2E52C99D0>, <app.database.models.Group object at 0x000002B2E52C9AE0>, <app.database.models.Group object at 0x000002B2E52C9BF0>, <app.database.models.Group object at 0x000002B2E52C9D00>, <app.database.models.Group object at 0x000002B2E52C9E10>, <app.database.models.Group object at 0x000002B2E52C9F20>, <app.database.models.Group object at 0x000002B2E52CA030>, <app.database.models.Group object at 0x000002B2E52CA140>, <app.database.models.Group object at 0x000002B2E52CA250>, <app.database.models.Group object at 0x000002B2E52CA360>, <app.database.models.Group object at 0x000002B2E52CA470>, <app.database.models.Group object at 0x000002B2E52CA580>, <app.database.models.Group object at 0x000002B2E52CA690>, <app.database.models.Group object at 0x000002B2E52CA7A0>, <app.database.models.Group object at 0x000002B2E52CA8B0>, <app.database.models.Group object at 0x000002B2E52CA9C0>, <app.database.models.Group object at 0x000002B2E52CAAD0>, <app.database.models.Group object at 0x000002B2E52CABE0>, <app.database.models.Group object at 0x000002B2E52CACF0>, <app.database.models.Group object at 0x000002B2E52CAE00>, <app.database.models.Group object at 0x000002B2E52CAF10>, <app.database.models.Group object at 0x000002B2E52CB020>, <app.database.models.Group object at 0x000002B2E52CB130>, <app.database.models.Group object at 0x000002B2E52CB240>, <app.database.models.Group object at 0x000002B2E52CB350>]
2025-07-16 21:26:26,889 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:26:26,889 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 18...
2025-07-16 21:26:26,895 - DEBUG - app - [AUTO-CUTOFF] User 18 has 0 open orders.
2025-07-16 21:26:26,895 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 18...
2025-07-16 21:26:26,900 - DEBUG - app - [AUTO-CUTOFF] User 18 has 0 pending orders.
2025-07-16 21:26:26,900 - WARNING - app - [AUTO-CUTOFF] User 18 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:26:26,900 - INFO - app - [AUTO-CUTOFF] Processing user 19 (live), group: Elite
2025-07-16 21:26:26,901 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 19 (live) from cache/DB...
2025-07-16 21:26:26,902 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Elite...
2025-07-16 21:26:26,904 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Elite' from cache: None
2025-07-16 21:26:26,904 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Elite', fetching from DB.
2025-07-16 21:26:26,914 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Elite': [<app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECEE00>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECFBD0>, <app.database.models.Group object at 0x000002B2E4ECC050>, <app.database.models.Group object at 0x000002B2E4ECD260>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E4ECD370>, <app.database.models.Group object at 0x000002B2E4ECCC00>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E53688D0>, <app.database.models.Group object at 0x000002B2E53698C0>, <app.database.models.Group object at 0x000002B2E53696A0>, <app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E53758C0>, <app.database.models.Group object at 0x000002B2E5377350>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377F00>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374AF0>, <app.database.models.Group object at 0x000002B2E5375260>]
2025-07-16 21:26:26,916 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Elite': {'sending_orders': 'barclays'}
2025-07-16 21:26:26,916 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 19...
2025-07-16 21:26:26,919 - DEBUG - app - [AUTO-CUTOFF] User 19 has 0 open orders.
2025-07-16 21:26:26,919 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 19...
2025-07-16 21:26:26,922 - DEBUG - app - [AUTO-CUTOFF] User 19 has 0 pending orders.
2025-07-16 21:26:26,922 - WARNING - app - [AUTO-CUTOFF] User 19 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:26:26,922 - INFO - app - [AUTO-CUTOFF] Processing user 20 (live), group: Standard
2025-07-16 21:26:26,923 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 20 (live) from cache/DB...
2025-07-16 21:26:26,924 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:26:26,925 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:26:26,925 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:26:26,932 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E5368E20>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E536BAC0>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5369150>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E53699D0>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E536B9B0>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E536A140>, <app.database.models.Group object at 0x000002B2E5369E10>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E536B130>, <app.database.models.Group object at 0x000002B2E5369F20>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>, <app.database.models.Group object at 0x000002B2E4ECC490>, <app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECF240>, <app.database.models.Group object at 0x000002B2E4ECEAD0>, <app.database.models.Group object at 0x000002B2E5375E10>, <app.database.models.Group object at 0x000002B2E5374380>, <app.database.models.Group object at 0x000002B2E5375BF0>, <app.database.models.Group object at 0x000002B2E53767A0>, <app.database.models.Group object at 0x000002B2E5376690>, <app.database.models.Group object at 0x000002B2E53745A0>, <app.database.models.Group object at 0x000002B2E5376CF0>, <app.database.models.Group object at 0x000002B2E52C8050>, <app.database.models.Group object at 0x000002B2E52C8160>, <app.database.models.Group object at 0x000002B2E52C8270>, <app.database.models.Group object at 0x000002B2E52C8380>, <app.database.models.Group object at 0x000002B2E52C8490>, <app.database.models.Group object at 0x000002B2E52C85A0>, <app.database.models.Group object at 0x000002B2E52C86B0>, <app.database.models.Group object at 0x000002B2E52C87C0>, <app.database.models.Group object at 0x000002B2E52C88D0>, <app.database.models.Group object at 0x000002B2E52C89E0>, <app.database.models.Group object at 0x000002B2E52C8AF0>, <app.database.models.Group object at 0x000002B2E52C8C00>, <app.database.models.Group object at 0x000002B2E52C8D10>, <app.database.models.Group object at 0x000002B2E52C8E20>, <app.database.models.Group object at 0x000002B2E52C8F30>, <app.database.models.Group object at 0x000002B2E52C9040>, <app.database.models.Group object at 0x000002B2E52C9150>, <app.database.models.Group object at 0x000002B2E52C9260>, <app.database.models.Group object at 0x000002B2E52C9370>, <app.database.models.Group object at 0x000002B2E52C9480>, <app.database.models.Group object at 0x000002B2E52C9590>, <app.database.models.Group object at 0x000002B2E52C96A0>, <app.database.models.Group object at 0x000002B2E52C97B0>, <app.database.models.Group object at 0x000002B2E52C98C0>, <app.database.models.Group object at 0x000002B2E52C99D0>, <app.database.models.Group object at 0x000002B2E52C9AE0>, <app.database.models.Group object at 0x000002B2E52C9BF0>, <app.database.models.Group object at 0x000002B2E52C9D00>, <app.database.models.Group object at 0x000002B2E52C9E10>, <app.database.models.Group object at 0x000002B2E52C9F20>, <app.database.models.Group object at 0x000002B2E52CA030>, <app.database.models.Group object at 0x000002B2E52CA140>, <app.database.models.Group object at 0x000002B2E52CA250>, <app.database.models.Group object at 0x000002B2E52CA360>, <app.database.models.Group object at 0x000002B2E52CA470>, <app.database.models.Group object at 0x000002B2E52CA580>, <app.database.models.Group object at 0x000002B2E52CA690>, <app.database.models.Group object at 0x000002B2E52CA7A0>, <app.database.models.Group object at 0x000002B2E52CA8B0>]
2025-07-16 21:26:26,934 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:26:26,934 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 20...
2025-07-16 21:26:26,937 - DEBUG - app - [AUTO-CUTOFF] User 20 has 0 open orders.
2025-07-16 21:26:26,937 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 20...
2025-07-16 21:26:26,940 - DEBUG - app - [AUTO-CUTOFF] User 20 has 0 pending orders.
2025-07-16 21:26:26,940 - WARNING - app - [AUTO-CUTOFF] User 20 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:26:26,940 - INFO - app - [AUTO-CUTOFF] Processing user 21 (live), group: Group B
2025-07-16 21:26:26,940 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 21 (live) from cache/DB...
2025-07-16 21:26:26,941 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:26:26,941 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:26:26,941 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:26:26,947 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E4ECEE00>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECFBD0>, <app.database.models.Group object at 0x000002B2E4ECC050>, <app.database.models.Group object at 0x000002B2E4ECD260>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E4ECD370>, <app.database.models.Group object at 0x000002B2E4ECCC00>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E53758C0>, <app.database.models.Group object at 0x000002B2E5377350>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377F00>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374AF0>, <app.database.models.Group object at 0x000002B2E5375260>, <app.database.models.Group object at 0x000002B2E53688D0>, <app.database.models.Group object at 0x000002B2E53698C0>, <app.database.models.Group object at 0x000002B2E53696A0>, <app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E52CA9C0>, <app.database.models.Group object at 0x000002B2E52CAAD0>]
2025-07-16 21:26:26,949 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:26:26,949 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 21...
2025-07-16 21:26:26,951 - DEBUG - app - [AUTO-CUTOFF] User 21 has 0 open orders.
2025-07-16 21:26:26,952 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 21...
2025-07-16 21:26:26,954 - DEBUG - app - [AUTO-CUTOFF] User 21 has 0 pending orders.
2025-07-16 21:26:26,955 - WARNING - app - [AUTO-CUTOFF] User 21 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:26:26,955 - INFO - app - [AUTO-CUTOFF] Processing user 22 (live), group: VIP
2025-07-16 21:26:26,955 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 22 (live) from cache/DB...
2025-07-16 21:26:26,955 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group VIP...
2025-07-16 21:26:26,956 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'VIP' from cache: None
2025-07-16 21:26:26,956 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'VIP', fetching from DB.
2025-07-16 21:26:26,963 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'VIP': [<app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5368E20>, <app.database.models.Group object at 0x000002B2E5369150>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E53699D0>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E536B9B0>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E536A140>, <app.database.models.Group object at 0x000002B2E5369E10>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E536B130>, <app.database.models.Group object at 0x000002B2E5369F20>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>, <app.database.models.Group object at 0x000002B2E5375E10>, <app.database.models.Group object at 0x000002B2E5374380>, <app.database.models.Group object at 0x000002B2E5375BF0>, <app.database.models.Group object at 0x000002B2E53767A0>, <app.database.models.Group object at 0x000002B2E5376690>, <app.database.models.Group object at 0x000002B2E53745A0>, <app.database.models.Group object at 0x000002B2E5376CF0>, <app.database.models.Group object at 0x000002B2E4ECC490>, <app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECF240>, <app.database.models.Group object at 0x000002B2E4ECEAD0>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E52C8050>, <app.database.models.Group object at 0x000002B2E52C8160>, <app.database.models.Group object at 0x000002B2E52C8270>, <app.database.models.Group object at 0x000002B2E52C8380>, <app.database.models.Group object at 0x000002B2E52C8490>, <app.database.models.Group object at 0x000002B2E52C85A0>, <app.database.models.Group object at 0x000002B2E52C86B0>, <app.database.models.Group object at 0x000002B2E52C87C0>, <app.database.models.Group object at 0x000002B2E52C88D0>, <app.database.models.Group object at 0x000002B2E52C89E0>, <app.database.models.Group object at 0x000002B2E52C8AF0>, <app.database.models.Group object at 0x000002B2E52C8C00>, <app.database.models.Group object at 0x000002B2E52C8D10>, <app.database.models.Group object at 0x000002B2E52C8E20>, <app.database.models.Group object at 0x000002B2E52C8F30>, <app.database.models.Group object at 0x000002B2E52C9040>, <app.database.models.Group object at 0x000002B2E52C9150>, <app.database.models.Group object at 0x000002B2E52C9260>, <app.database.models.Group object at 0x000002B2E52C9370>, <app.database.models.Group object at 0x000002B2E52C9480>, <app.database.models.Group object at 0x000002B2E52C9590>, <app.database.models.Group object at 0x000002B2E52C96A0>, <app.database.models.Group object at 0x000002B2E52C97B0>, <app.database.models.Group object at 0x000002B2E52C98C0>, <app.database.models.Group object at 0x000002B2E52C99D0>, <app.database.models.Group object at 0x000002B2E52C9AE0>, <app.database.models.Group object at 0x000002B2E52C9BF0>, <app.database.models.Group object at 0x000002B2E52C9D00>, <app.database.models.Group object at 0x000002B2E52C9E10>, <app.database.models.Group object at 0x000002B2E52C9F20>, <app.database.models.Group object at 0x000002B2E52CA030>, <app.database.models.Group object at 0x000002B2E52CA140>, <app.database.models.Group object at 0x000002B2E52CA250>, <app.database.models.Group object at 0x000002B2E52CA360>, <app.database.models.Group object at 0x000002B2E52CA470>, <app.database.models.Group object at 0x000002B2E52CA580>, <app.database.models.Group object at 0x000002B2E52CA690>, <app.database.models.Group object at 0x000002B2E52CA7A0>, <app.database.models.Group object at 0x000002B2E52CA8B0>]
2025-07-16 21:26:26,965 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'VIP': {'sending_orders': 'barclays'}
2025-07-16 21:26:26,965 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 22...
2025-07-16 21:26:26,968 - DEBUG - app - [AUTO-CUTOFF] User 22 has 0 open orders.
2025-07-16 21:26:26,968 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 22...
2025-07-16 21:26:26,971 - DEBUG - app - [AUTO-CUTOFF] User 22 has 0 pending orders.
2025-07-16 21:26:26,971 - WARNING - app - [AUTO-CUTOFF] User 22 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:26:26,971 - INFO - app - [AUTO-CUTOFF] Processing user 23 (live), group: Group B
2025-07-16 21:26:26,971 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 23 (live) from cache/DB...
2025-07-16 21:26:26,972 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:26:26,973 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:26:26,973 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:26:26,980 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E4ECD260>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E4ECD370>, <app.database.models.Group object at 0x000002B2E4ECCC00>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E53758C0>, <app.database.models.Group object at 0x000002B2E5377350>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377F00>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374AF0>, <app.database.models.Group object at 0x000002B2E5375260>, <app.database.models.Group object at 0x000002B2E53688D0>, <app.database.models.Group object at 0x000002B2E53698C0>, <app.database.models.Group object at 0x000002B2E53696A0>, <app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E536BAC0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E52CA9C0>, <app.database.models.Group object at 0x000002B2E52CAAD0>]
2025-07-16 21:26:26,981 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:26:26,981 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 23...
2025-07-16 21:26:26,985 - DEBUG - app - [AUTO-CUTOFF] User 23 has 0 open orders.
2025-07-16 21:26:26,985 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 23...
2025-07-16 21:26:26,987 - DEBUG - app - [AUTO-CUTOFF] User 23 has 0 pending orders.
2025-07-16 21:26:26,987 - WARNING - app - [AUTO-CUTOFF] User 23 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:26:26,988 - INFO - app - [AUTO-CUTOFF] Processing user 25 (live), group: Group B
2025-07-16 21:26:26,988 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 25 (live) from cache/DB...
2025-07-16 21:26:26,988 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:26:26,989 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:26:26,989 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:26:26,995 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E4ECD260>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECEF10>, <app.database.models.Group object at 0x000002B2E4ECDF20>, <app.database.models.Group object at 0x000002B2E4ECF460>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E4ECD370>, <app.database.models.Group object at 0x000002B2E4ECCC00>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E53758C0>, <app.database.models.Group object at 0x000002B2E5377350>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377F00>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374AF0>, <app.database.models.Group object at 0x000002B2E5375260>, <app.database.models.Group object at 0x000002B2E53688D0>, <app.database.models.Group object at 0x000002B2E53698C0>, <app.database.models.Group object at 0x000002B2E53696A0>, <app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E536BAC0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E52CA9C0>, <app.database.models.Group object at 0x000002B2E52CAAD0>]
2025-07-16 21:26:26,996 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:26:26,996 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 25...
2025-07-16 21:26:26,998 - DEBUG - app - [AUTO-CUTOFF] User 25 has 0 open orders.
2025-07-16 21:26:26,998 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 25...
2025-07-16 21:26:27,000 - DEBUG - app - [AUTO-CUTOFF] User 25 has 0 pending orders.
2025-07-16 21:26:27,000 - WARNING - app - [AUTO-CUTOFF] User 25 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:26:27,000 - INFO - app - [AUTO-CUTOFF] Processing user 26 (live), group: Royal+
2025-07-16 21:26:27,000 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 26 (live) from cache/DB...
2025-07-16 21:26:27,001 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Royal+...
2025-07-16 21:26:27,001 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Royal+' from cache: None
2025-07-16 21:26:27,001 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Royal+', fetching from DB.
2025-07-16 21:26:27,004 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Royal+': [<app.database.models.Group object at 0x000002B2E5369150>, <app.database.models.Group object at 0x000002B2E5368E20>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E53699D0>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E536B9B0>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E536A140>, <app.database.models.Group object at 0x000002B2E5369E10>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E536B130>, <app.database.models.Group object at 0x000002B2E5369F20>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>, <app.database.models.Group object at 0x000002B2E5375E10>, <app.database.models.Group object at 0x000002B2E5374380>, <app.database.models.Group object at 0x000002B2E5375BF0>, <app.database.models.Group object at 0x000002B2E53767A0>, <app.database.models.Group object at 0x000002B2E5376690>, <app.database.models.Group object at 0x000002B2E53745A0>, <app.database.models.Group object at 0x000002B2E5376CF0>, <app.database.models.Group object at 0x000002B2E4ECC490>, <app.database.models.Group object at 0x000002B2E4ECF020>, <app.database.models.Group object at 0x000002B2E4ECF350>, <app.database.models.Group object at 0x000002B2E4ECF240>, <app.database.models.Group object at 0x000002B2E4ECEAD0>, <app.database.models.Group object at 0x000002B2E4ECD040>, <app.database.models.Group object at 0x000002B2E4ECEBE0>, <app.database.models.Group object at 0x000002B2E4ECECF0>, <app.database.models.Group object at 0x000002B2E4ECE030>, <app.database.models.Group object at 0x000002B2E4ECC050>, <app.database.models.Group object at 0x000002B2E4ECFBD0>, <app.database.models.Group object at 0x000002B2E4ECFCE0>, <app.database.models.Group object at 0x000002B2E4ECEE00>, <app.database.models.Group object at 0x000002B2E52C8050>, <app.database.models.Group object at 0x000002B2E52C8160>, <app.database.models.Group object at 0x000002B2E52C8270>, <app.database.models.Group object at 0x000002B2E52C8380>, <app.database.models.Group object at 0x000002B2E52C8490>, <app.database.models.Group object at 0x000002B2E52C85A0>, <app.database.models.Group object at 0x000002B2E52C86B0>, <app.database.models.Group object at 0x000002B2E52C87C0>, <app.database.models.Group object at 0x000002B2E52C88D0>, <app.database.models.Group object at 0x000002B2E52C89E0>, <app.database.models.Group object at 0x000002B2E52C8AF0>, <app.database.models.Group object at 0x000002B2E52C8C00>, <app.database.models.Group object at 0x000002B2E52C8D10>, <app.database.models.Group object at 0x000002B2E52C8E20>, <app.database.models.Group object at 0x000002B2E52C8F30>, <app.database.models.Group object at 0x000002B2E52C9040>, <app.database.models.Group object at 0x000002B2E52C9150>, <app.database.models.Group object at 0x000002B2E52C9260>, <app.database.models.Group object at 0x000002B2E52C9370>, <app.database.models.Group object at 0x000002B2E52C9480>, <app.database.models.Group object at 0x000002B2E52C9590>, <app.database.models.Group object at 0x000002B2E52C96A0>, <app.database.models.Group object at 0x000002B2E52C97B0>, <app.database.models.Group object at 0x000002B2E52C98C0>, <app.database.models.Group object at 0x000002B2E52C99D0>, <app.database.models.Group object at 0x000002B2E52C9AE0>, <app.database.models.Group object at 0x000002B2E52C9BF0>, <app.database.models.Group object at 0x000002B2E52C9D00>, <app.database.models.Group object at 0x000002B2E52C9E10>, <app.database.models.Group object at 0x000002B2E52C9F20>, <app.database.models.Group object at 0x000002B2E52CA030>, <app.database.models.Group object at 0x000002B2E52CA140>, <app.database.models.Group object at 0x000002B2E52CA250>, <app.database.models.Group object at 0x000002B2E52CA360>, <app.database.models.Group object at 0x000002B2E52CA470>, <app.database.models.Group object at 0x000002B2E52CA580>, <app.database.models.Group object at 0x000002B2E52CA690>, <app.database.models.Group object at 0x000002B2E52CA7A0>, <app.database.models.Group object at 0x000002B2E52CA8B0>]
2025-07-16 21:26:27,005 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Royal+': {'sending_orders': 'barclays'}
2025-07-16 21:26:27,005 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 26...
2025-07-16 21:26:27,008 - DEBUG - app - [AUTO-CUTOFF] User 26 has 2 open orders.
2025-07-16 21:26:27,008 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 26...
2025-07-16 21:26:27,010 - DEBUG - app - [AUTO-CUTOFF] User 26 has 0 pending orders.
2025-07-16 21:26:27,010 - DEBUG - app - [AUTO-CUTOFF] User 26 total positions for portfolio calculation: 2
2025-07-16 21:26:27,011 - DEBUG - app - [AUTO-CUTOFF] User 26 adjusted market prices: {}
2025-07-16 21:26:27,011 - DEBUG - app - [AUTO-CUTOFF] User 26 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:26:27,011 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 26...
2025-07-16 21:26:27,408 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol XAGUSD
2025-07-16 21:26:27,408 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol BTCUSD
2025-07-16 21:26:27,408 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 26: {'balance': '184345.81000000', 'equity': '184345.81000000', 'margin': '146484.47000000', 'free_margin': '37861.34000000', 'profit_loss': '0.0', 'margin_level': '125.8466580109140579885362592', 'positions': [{'order_id': '7987141755', 'order_company_name': 'XAGUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('41.09800000'), 'margin': Decimal('19.54000000'), 'contract_value': Decimal('50.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1116628265', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('6.00000000'), 'order_price': Decimal('132091.90000000'), 'margin': Decimal('146464.93000000'), 'contract_value': Decimal('6.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3661.62000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:26:27,409 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 26: {'balance': '184345.81000000', 'equity': '184345.81000000', 'margin': '146484.47000000', 'free_margin': '37861.34000000', 'profit_loss': '0.0', 'margin_level': '125.8466580109140579885362592', 'positions_with_pnl': [{'order_id': '7987141755', 'order_company_name': 'XAGUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('41.09800000'), 'margin': Decimal('19.54000000'), 'contract_value': Decimal('50.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1116628265', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('6.00000000'), 'order_price': Decimal('132091.90000000'), 'margin': Decimal('146464.93000000'), 'contract_value': Decimal('6.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3661.62000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:26:27,410 - INFO - app - [AUTO-CUTOFF] User 26 margin_level: 125.8466580109140579885362592
2025-07-16 21:26:27,411 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:27,413 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 26
2025-07-16 21:26:27,413 - INFO - app - [AUTO-CUTOFF] Processing user 1 (demo), group: Group B
2025-07-16 21:26:27,414 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 1 (demo) from cache/DB...
2025-07-16 21:26:27,416 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:26:27,417 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:27,417 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:26:27,417 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:26:27,428 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E4DF7680>, <app.database.models.Group object at 0x000002B2E4ECCD10>, <app.database.models.Group object at 0x000002B2E4ECF9B0>, <app.database.models.Group object at 0x000002B2E4ECF790>, <app.database.models.Group object at 0x000002B2E4ECD480>, <app.database.models.Group object at 0x000002B2E4ECF8A0>, <app.database.models.Group object at 0x000002B2E4ECCE20>, <app.database.models.Group object at 0x000002B2E4ECFDF0>, <app.database.models.Group object at 0x000002B2E4ECC380>, <app.database.models.Group object at 0x000002B2E4ECCF30>, <app.database.models.Group object at 0x000002B2E4ECFF00>, <app.database.models.Group object at 0x000002B2E4ECD370>, <app.database.models.Group object at 0x000002B2E4ECCC00>, <app.database.models.Group object at 0x000002B2E4ECF680>, <app.database.models.Group object at 0x000002B2E4ECFAC0>, <app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E53758C0>, <app.database.models.Group object at 0x000002B2E5377350>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377F00>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374AF0>, <app.database.models.Group object at 0x000002B2E5375260>, <app.database.models.Group object at 0x000002B2E536AF10>, <app.database.models.Group object at 0x000002B2E53688D0>, <app.database.models.Group object at 0x000002B2E53698C0>, <app.database.models.Group object at 0x000002B2E53696A0>, <app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E536BAC0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E5369480>]
2025-07-16 21:26:27,430 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:26:27,430 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 1...
2025-07-16 21:26:27,436 - DEBUG - app - [AUTO-CUTOFF] User 1 has 2 open orders.
2025-07-16 21:26:27,437 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 1...
2025-07-16 21:26:27,441 - DEBUG - app - [AUTO-CUTOFF] User 1 has 1 pending orders.
2025-07-16 21:26:27,442 - DEBUG - app - [AUTO-CUTOFF] User 1 total positions for portfolio calculation: 3
2025-07-16 21:26:27,443 - DEBUG - app - [AUTO-CUTOFF] User 1 adjusted market prices: {}
2025-07-16 21:26:27,443 - DEBUG - app - [AUTO-CUTOFF] User 1 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:26:27,443 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 1...
2025-07-16 21:26:27,814 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:26:27,814 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:26:27,814 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 1: {'balance': '17011.54000000', 'equity': '17011.54000000', 'margin': '6.54000000', 'free_margin': '17005.00000000', 'profit_loss': '0.0', 'margin_level': '260115.2905198776758409785933', 'positions': [{'order_id': '1000052-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.66800000'), 'margin': Decimal('6.54341805'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000053-001', 'order_company_name': 'AUDJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.56000000'), 'margin': Decimal('6.54258453'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:26:27,814 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 1: {'balance': '17011.54000000', 'equity': '17011.54000000', 'margin': '6.54000000', 'free_margin': '17005.00000000', 'profit_loss': '0.0', 'margin_level': '260115.2905198776758409785933', 'positions_with_pnl': [{'order_id': '1000052-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.66800000'), 'margin': Decimal('6.54341805'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000053-001', 'order_company_name': 'AUDJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.56000000'), 'margin': Decimal('6.54258453'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:26:27,816 - INFO - app - [AUTO-CUTOFF] User 1 margin_level: 260115.2905198776758409785933
2025-07-16 21:26:27,817 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 1
2025-07-16 21:26:27,817 - INFO - app - [AUTO-CUTOFF] Processing user 2 (demo), group: 
2025-07-16 21:26:27,817 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 2 (demo) from cache/DB...
2025-07-16 21:26:27,818 - WARNING - app - [AUTO-CUTOFF] User 2 has no group_name set. Skipping portfolio update.
2025-07-16 21:26:27,818 - INFO - app - [AUTO-CUTOFF] Processing user 3 (demo), group: string
2025-07-16 21:26:27,818 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 3 (demo) from cache/DB...
2025-07-16 21:26:27,819 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group string...
2025-07-16 21:26:27,820 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'string' from cache: None
2025-07-16 21:26:27,820 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'string', fetching from DB.
2025-07-16 21:26:27,822 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'string': []
2025-07-16 21:26:27,822 - ERROR - app - [AUTO-CUTOFF] Group symbol settings not found in DB for group 'string'. Skipping portfolio update for user 3.
2025-07-16 21:26:27,822 - INFO - app - [AUTO-CUTOFF] Processing user 4 (demo), group: Group B
2025-07-16 21:26:27,822 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 4 (demo) from cache/DB...
2025-07-16 21:26:27,822 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:26:27,822 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:26:27,822 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:26:27,825 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E536BAC0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E536B8A0>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E5369150>, <app.database.models.Group object at 0x000002B2E536B9B0>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E5369260>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E536A140>, <app.database.models.Group object at 0x000002B2E5369E10>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E536B130>, <app.database.models.Group object at 0x000002B2E5369F20>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E4DF7680>, <app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>, <app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E53758C0>, <app.database.models.Group object at 0x000002B2E5377350>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377F00>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374AF0>, <app.database.models.Group object at 0x000002B2E5375260>]
2025-07-16 21:26:27,826 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:26:27,826 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 4...
2025-07-16 21:26:27,828 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 open orders.
2025-07-16 21:26:27,828 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 4...
2025-07-16 21:26:27,830 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 pending orders.
2025-07-16 21:26:27,830 - WARNING - app - [AUTO-CUTOFF] User 4 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:26:27,830 - INFO - app - [AUTO-CUTOFF] Processing user 5 (demo), group: None
2025-07-16 21:26:27,830 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 5 (demo) from cache/DB...
2025-07-16 21:26:27,831 - WARNING - app - [AUTO-CUTOFF] User 5 has no group_name set. Skipping portfolio update.
2025-07-16 21:26:27,831 - INFO - app - [AUTO-CUTOFF] Processing user 6 (demo), group: None
2025-07-16 21:26:27,831 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 6 (demo) from cache/DB...
2025-07-16 21:26:27,832 - WARNING - app - [AUTO-CUTOFF] User 6 has no group_name set. Skipping portfolio update.
2025-07-16 21:26:27,832 - INFO - app - [AUTO-CUTOFF] Processing user 9 (demo), group: Group B
2025-07-16 21:26:27,832 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 9 (demo) from cache/DB...
2025-07-16 21:26:27,832 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:26:27,833 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:26:27,833 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:26:27,841 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E536BAC0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E536B8A0>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E5369150>, <app.database.models.Group object at 0x000002B2E536B9B0>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E5369260>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E536A140>, <app.database.models.Group object at 0x000002B2E5369E10>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E536B130>, <app.database.models.Group object at 0x000002B2E5369F20>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E4DF7680>, <app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>, <app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E53758C0>, <app.database.models.Group object at 0x000002B2E5377350>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377F00>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374AF0>, <app.database.models.Group object at 0x000002B2E5375260>]
2025-07-16 21:26:27,843 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:26:27,843 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 9...
2025-07-16 21:26:27,847 - DEBUG - app - [AUTO-CUTOFF] User 9 has 28 open orders.
2025-07-16 21:26:27,847 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 9...
2025-07-16 21:26:27,850 - DEBUG - app - [AUTO-CUTOFF] User 9 has 6 pending orders.
2025-07-16 21:26:27,850 - DEBUG - app - [AUTO-CUTOFF] User 9 total positions for portfolio calculation: 34
2025-07-16 21:26:27,852 - DEBUG - app - [AUTO-CUTOFF] User 9 adjusted market prices: {}
2025-07-16 21:26:27,852 - DEBUG - app - [AUTO-CUTOFF] User 9 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:26:27,852 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 9...
2025-07-16 21:26:28,157 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDUSD
2025-07-16 21:26:28,157 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDUSD
2025-07-16 21:26:28,158 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFSGD
2025-07-16 21:26:28,158 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFSGD
2025-07-16 21:26:28,158 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CADJPY
2025-07-16 21:26:28,159 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CADJPY
2025-07-16 21:26:28,159 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:26:28,159 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:26:28,159 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFJPY
2025-07-16 21:26:28,159 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFJPY
2025-07-16 21:26:28,160 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:26:28,160 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:26:28,160 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURGBP
2025-07-16 21:26:28,160 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURJPY
2025-07-16 21:26:28,160 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURJPY
2025-07-16 21:26:28,160 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURNZD
2025-07-16 21:26:28,161 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURNZD
2025-07-16 21:26:28,161 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:26:28,161 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:26:28,161 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:26:28,161 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:26:28,162 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol NZDJPY
2025-07-16 21:26:28,162 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDCHF
2025-07-16 21:26:28,162 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDCHF
2025-07-16 21:26:28,162 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDNOK
2025-07-16 21:26:28,162 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDNOK
2025-07-16 21:26:28,162 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDSGD
2025-07-16 21:26:28,163 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDTRY
2025-07-16 21:26:28,164 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 9: {'balance': '98181.73000000', 'equity': '98181.73000000', 'margin': '1917.31000000', 'free_margin': '96264.42000000', 'profit_loss': '0.0', 'margin_level': '5120.806233733720681579921870', 'positions': [{'order_id': '2504219016', 'order_company_name': 'AUDUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.64743000'), 'margin': Decimal('64.74000000'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4208488950', 'order_company_name': 'AUDUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('0.64707000'), 'margin': Decimal('142.36000000'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1409905880', 'order_company_name': 'CHFSGD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57561500'), 'margin': Decimal('122.35389131'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7183762766', 'order_company_name': 'CHFSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57505500'), 'margin': Decimal('122.31506360'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9716387266', 'order_company_name': 'CADJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.24150000'), 'margin': Decimal('109.44987397'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9899743248', 'order_company_name': 'CADJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.27050000'), 'margin': Decimal('109.47824594'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2965066905', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('1.77481000'), 'margin': Decimal('252.73304420'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6518780780', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.21000000'), 'order_price': Decimal('1.77439000'), 'margin': Decimal('241.18574740'), 'contract_value': Decimal('21000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7509572762', 'order_company_name': 'CHFJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.15500000'), 'margin': Decimal('122.35584187'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7522048723', 'order_company_name': 'CHFJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.09500000'), 'margin': Decimal('122.31379417'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6209391896', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77480000'), 'margin': Decimal('57.44317680'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8581607125', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77442000'), 'margin': Decimal('57.43111760'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8951109289', 'order_company_name': 'EURGBP', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.85403000'), 'margin': Decimal('114.85104400'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7115525171', 'order_company_name': 'EURJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.26050000'), 'margin': Decimal('114.87277223'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2099467271', 'order_company_name': 'EURJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.23150000'), 'margin': Decimal('114.85285533'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4283527369', 'order_company_name': 'EURNZD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.91952500'), 'margin': Decimal('114.85328250'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6611902574', 'order_company_name': 'EURNZD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.92063500'), 'margin': Decimal('114.81922980'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4731664142', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34376000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8676137902', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34361000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3301052276', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34379000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2972795665', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34378000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1117118581', 'order_company_name': 'NZDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('87.10150000'), 'margin': Decimal('5.97837949'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3385451189', 'order_company_name': 'USDCHF', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81771000'), 'margin': Decimal('149.97126753'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6134727989', 'order_company_name': 'USDCHF', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81805000'), 'margin': Decimal('150.03056608'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9211531174', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.04973000'), 'margin': Decimal('100.00169162'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5200391957', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.05023000'), 'margin': Decimal('100.00169154'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5654381883', 'order_company_name': 'USDSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.31000000'), 'order_price': Decimal('1.28795000'), 'margin': Decimal('309.93393934'), 'contract_value': Decimal('31000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6985407710', 'order_company_name': 'USDTRY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('39.56087000'), 'margin': Decimal('99.98738813'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:26:28,166 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 9: {'balance': '98181.73000000', 'equity': '98181.73000000', 'margin': '1917.31000000', 'free_margin': '96264.42000000', 'profit_loss': '0.0', 'margin_level': '5120.806233733720681579921870', 'positions_with_pnl': [{'order_id': '2504219016', 'order_company_name': 'AUDUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.64743000'), 'margin': Decimal('64.74000000'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4208488950', 'order_company_name': 'AUDUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('0.64707000'), 'margin': Decimal('142.36000000'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1409905880', 'order_company_name': 'CHFSGD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57561500'), 'margin': Decimal('122.35389131'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7183762766', 'order_company_name': 'CHFSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57505500'), 'margin': Decimal('122.31506360'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9716387266', 'order_company_name': 'CADJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.24150000'), 'margin': Decimal('109.44987397'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9899743248', 'order_company_name': 'CADJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.27050000'), 'margin': Decimal('109.47824594'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2965066905', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('1.77481000'), 'margin': Decimal('252.73304420'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6518780780', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.21000000'), 'order_price': Decimal('1.77439000'), 'margin': Decimal('241.18574740'), 'contract_value': Decimal('21000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7509572762', 'order_company_name': 'CHFJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.15500000'), 'margin': Decimal('122.35584187'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7522048723', 'order_company_name': 'CHFJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.09500000'), 'margin': Decimal('122.31379417'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6209391896', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77480000'), 'margin': Decimal('57.44317680'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8581607125', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77442000'), 'margin': Decimal('57.43111760'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8951109289', 'order_company_name': 'EURGBP', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.85403000'), 'margin': Decimal('114.85104400'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7115525171', 'order_company_name': 'EURJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.26050000'), 'margin': Decimal('114.87277223'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2099467271', 'order_company_name': 'EURJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.23150000'), 'margin': Decimal('114.85285533'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4283527369', 'order_company_name': 'EURNZD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.91952500'), 'margin': Decimal('114.85328250'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6611902574', 'order_company_name': 'EURNZD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.92063500'), 'margin': Decimal('114.81922980'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4731664142', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34376000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8676137902', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34361000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3301052276', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34379000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2972795665', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34378000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1117118581', 'order_company_name': 'NZDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('87.10150000'), 'margin': Decimal('5.97837949'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3385451189', 'order_company_name': 'USDCHF', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81771000'), 'margin': Decimal('149.97126753'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6134727989', 'order_company_name': 'USDCHF', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81805000'), 'margin': Decimal('150.03056608'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9211531174', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.04973000'), 'margin': Decimal('100.00169162'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5200391957', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.05023000'), 'margin': Decimal('100.00169154'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5654381883', 'order_company_name': 'USDSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.31000000'), 'order_price': Decimal('1.28795000'), 'margin': Decimal('309.93393934'), 'contract_value': Decimal('31000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6985407710', 'order_company_name': 'USDTRY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('39.56087000'), 'margin': Decimal('99.98738813'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:26:28,168 - INFO - app - [AUTO-CUTOFF] User 9 margin_level: 5120.806233733720681579921870
2025-07-16 21:26:28,169 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 9
2025-07-16 21:26:28,169 - INFO - app - [AUTO-CUTOFF] Processing user 10 (demo), group: Group B
2025-07-16 21:26:28,169 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 10 (demo) from cache/DB...
2025-07-16 21:26:28,170 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:26:28,171 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:26:28,171 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:26:28,184 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E536BAC0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E536B8A0>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E5369150>, <app.database.models.Group object at 0x000002B2E536B9B0>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E5369260>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E536A140>, <app.database.models.Group object at 0x000002B2E5369E10>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E536B130>, <app.database.models.Group object at 0x000002B2E5369F20>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E4DF7680>, <app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>, <app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E53758C0>, <app.database.models.Group object at 0x000002B2E5377350>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377F00>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374AF0>, <app.database.models.Group object at 0x000002B2E5375260>]
2025-07-16 21:26:28,186 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:26:28,186 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 10...
2025-07-16 21:26:28,191 - DEBUG - app - [AUTO-CUTOFF] User 10 has 0 open orders.
2025-07-16 21:26:28,192 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 10...
2025-07-16 21:26:28,197 - DEBUG - app - [AUTO-CUTOFF] User 10 has 1 pending orders.
2025-07-16 21:26:28,197 - DEBUG - app - [AUTO-CUTOFF] User 10 total positions for portfolio calculation: 1
2025-07-16 21:26:28,199 - DEBUG - app - [AUTO-CUTOFF] User 10 adjusted market prices: {}
2025-07-16 21:26:28,199 - DEBUG - app - [AUTO-CUTOFF] User 10 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:26:28,199 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 10...
2025-07-16 21:26:28,492 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 10: {'balance': '9958.40000000', 'equity': '9958.40000000', 'margin': '39.25000000', 'free_margin': '9919.15000000', 'profit_loss': '0.0', 'margin_level': '25371.71974522292993630573248', 'positions': [], 'margin_call': False}
2025-07-16 21:26:28,492 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 10: {'balance': '9958.40000000', 'equity': '9958.40000000', 'margin': '39.25000000', 'free_margin': '9919.15000000', 'profit_loss': '0.0', 'margin_level': '25371.71974522292993630573248', 'positions_with_pnl': [], 'margin_call': False}
2025-07-16 21:26:28,493 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:28,495 - INFO - app - [AUTO-CUTOFF] User 10 margin_level: 25371.71974522292993630573248
2025-07-16 21:26:28,497 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 10
2025-07-16 21:26:28,497 - INFO - app - [AUTO-CUTOFF] Processing user 11 (demo), group: Group B
2025-07-16 21:26:28,497 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 11 (demo) from cache/DB...
2025-07-16 21:26:28,498 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:28,499 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:26:28,500 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:26:28,501 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:26:28,510 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E536BAC0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E536B8A0>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E5369150>, <app.database.models.Group object at 0x000002B2E536B9B0>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E5369260>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E536A140>, <app.database.models.Group object at 0x000002B2E5369E10>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E536B130>, <app.database.models.Group object at 0x000002B2E5369F20>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E4DF7680>, <app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>, <app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E53758C0>, <app.database.models.Group object at 0x000002B2E5377350>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377F00>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374AF0>, <app.database.models.Group object at 0x000002B2E5375260>]
2025-07-16 21:26:28,512 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:26:28,512 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 11...
2025-07-16 21:26:28,517 - DEBUG - app - [AUTO-CUTOFF] User 11 has 1 open orders.
2025-07-16 21:26:28,517 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 11...
2025-07-16 21:26:28,520 - DEBUG - app - [AUTO-CUTOFF] User 11 has 0 pending orders.
2025-07-16 21:26:28,520 - DEBUG - app - [AUTO-CUTOFF] User 11 total positions for portfolio calculation: 1
2025-07-16 21:26:28,522 - DEBUG - app - [AUTO-CUTOFF] User 11 adjusted market prices: {}
2025-07-16 21:26:28,522 - DEBUG - app - [AUTO-CUTOFF] User 11 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:26:28,522 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 11...
2025-07-16 21:26:28,851 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-07-16 21:26:28,851 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 11: {'balance': '99998.61000000', 'equity': '99998.61000000', 'margin': '6.55000000', 'free_margin': '99992.06000000', 'profit_loss': '0.0', 'margin_level': '1526696.335877862595419847328', 'positions': [{'order_id': '1000099-001', 'order_company_name': 'AUDCAD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('0.89752000'), 'margin': Decimal('6.55364428'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 11, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:26:28,852 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 11: {'balance': '99998.61000000', 'equity': '99998.61000000', 'margin': '6.55000000', 'free_margin': '99992.06000000', 'profit_loss': '0.0', 'margin_level': '1526696.335877862595419847328', 'positions_with_pnl': [{'order_id': '1000099-001', 'order_company_name': 'AUDCAD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('0.89752000'), 'margin': Decimal('6.55364428'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 11, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:26:28,865 - INFO - app - [AUTO-CUTOFF] User 11 margin_level: 1526696.335877862595419847328
2025-07-16 21:26:28,870 - DEBUG - app.firebase_stream - Firebase listener triggered (56). Event Type: patch, Path: /. Timestamp: 1752726388.870593
2025-07-16 21:26:28,872 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.0110000000', 'o': '88.0010000000'}, 'GBPAUD': {'b': '2.0650900000', 'o': '2.0649100000'}, 'BTCUSD': {'b': '118261.9000000000', 'o': '118261.8000000000'}, 'USDJPY': {'b': '148.6080
2025-07-16 21:26:28,872 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.0110000000', 'o': '88.0010000000'}, 'GBPAUD': {'b': '2.0650900000', 'o': '2.0649100000'}, 'BTCUSD': {'b': '118261.9000000000', 'o': '118261.8000000000'}, 'USDJPY': {'b': '148.6080...
2025-07-16 21:26:28,872 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:26:28,873 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 11
2025-07-16 21:26:28,874 - INFO - app - [AUTO-CUTOFF] Processing user 12 (demo), group: Group B
2025-07-16 21:26:28,874 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 12 (demo) from cache/DB...
2025-07-16 21:26:28,877 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:26:28,881 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:26:28,881 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:26:28,893 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E536BAC0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E536B8A0>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E5369150>, <app.database.models.Group object at 0x000002B2E536B9B0>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E5369260>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E536A140>, <app.database.models.Group object at 0x000002B2E5369E10>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E536B130>, <app.database.models.Group object at 0x000002B2E5369F20>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E4DF7680>, <app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>, <app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E53758C0>, <app.database.models.Group object at 0x000002B2E5377350>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377F00>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374AF0>, <app.database.models.Group object at 0x000002B2E5375260>]
2025-07-16 21:26:28,901 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:26:28,901 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 12...
2025-07-16 21:26:28,909 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 open orders.
2025-07-16 21:26:28,909 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 12...
2025-07-16 21:26:28,915 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 pending orders.
2025-07-16 21:26:28,915 - WARNING - app - [AUTO-CUTOFF] User 12 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:26:28,915 - INFO - app - [AUTO-CUTOFF] Processing user 13 (demo), group: Group B
2025-07-16 21:26:28,915 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 13 (demo) from cache/DB...
2025-07-16 21:26:28,919 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:26:28,923 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:26:28,924 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:26:28,936 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x000002B2E53686B0>, <app.database.models.Group object at 0x000002B2E5368F30>, <app.database.models.Group object at 0x000002B2E5368C00>, <app.database.models.Group object at 0x000002B2E536B790>, <app.database.models.Group object at 0x000002B2E5369D00>, <app.database.models.Group object at 0x000002B2E5369BF0>, <app.database.models.Group object at 0x000002B2E5369AE0>, <app.database.models.Group object at 0x000002B2E536A030>, <app.database.models.Group object at 0x000002B2E536BAC0>, <app.database.models.Group object at 0x000002B2E53697B0>, <app.database.models.Group object at 0x000002B2E5369370>, <app.database.models.Group object at 0x000002B2E53689E0>, <app.database.models.Group object at 0x000002B2E5368380>, <app.database.models.Group object at 0x000002B2E536BBD0>, <app.database.models.Group object at 0x000002B2E5369590>, <app.database.models.Group object at 0x000002B2E5369480>, <app.database.models.Group object at 0x000002B2E536B8A0>, <app.database.models.Group object at 0x000002B2E5368490>, <app.database.models.Group object at 0x000002B2E53685A0>, <app.database.models.Group object at 0x000002B2E5369150>, <app.database.models.Group object at 0x000002B2E536B9B0>, <app.database.models.Group object at 0x000002B2E53687C0>, <app.database.models.Group object at 0x000002B2E5369260>, <app.database.models.Group object at 0x000002B2E5368160>, <app.database.models.Group object at 0x000002B2E5368270>, <app.database.models.Group object at 0x000002B2E536A140>, <app.database.models.Group object at 0x000002B2E5369E10>, <app.database.models.Group object at 0x000002B2E5368AF0>, <app.database.models.Group object at 0x000002B2E536AE00>, <app.database.models.Group object at 0x000002B2E536B130>, <app.database.models.Group object at 0x000002B2E5369F20>, <app.database.models.Group object at 0x000002B2E5368050>, <app.database.models.Group object at 0x000002B2E4DF7680>, <app.database.models.Group object at 0x000002B2E4DF58C0>, <app.database.models.Group object at 0x000002B2E4DF78A0>, <app.database.models.Group object at 0x000002B2E5376BE0>, <app.database.models.Group object at 0x000002B2E53758C0>, <app.database.models.Group object at 0x000002B2E5377350>, <app.database.models.Group object at 0x000002B2E5376E00>, <app.database.models.Group object at 0x000002B2E53778A0>, <app.database.models.Group object at 0x000002B2E5377BD0>, <app.database.models.Group object at 0x000002B2E53779B0>, <app.database.models.Group object at 0x000002B2E5377F00>, <app.database.models.Group object at 0x000002B2E5377680>, <app.database.models.Group object at 0x000002B2E5375150>, <app.database.models.Group object at 0x000002B2E5375590>, <app.database.models.Group object at 0x000002B2E5377AC0>, <app.database.models.Group object at 0x000002B2E5374270>, <app.database.models.Group object at 0x000002B2E5376140>, <app.database.models.Group object at 0x000002B2E53746B0>, <app.database.models.Group object at 0x000002B2E5374C00>, <app.database.models.Group object at 0x000002B2E5376F10>, <app.database.models.Group object at 0x000002B2E53769C0>, <app.database.models.Group object at 0x000002B2E53768B0>, <app.database.models.Group object at 0x000002B2E5375AE0>, <app.database.models.Group object at 0x000002B2E5375F20>, <app.database.models.Group object at 0x000002B2E5377020>, <app.database.models.Group object at 0x000002B2E5376360>, <app.database.models.Group object at 0x000002B2E5374F30>, <app.database.models.Group object at 0x000002B2E5376580>, <app.database.models.Group object at 0x000002B2E5376470>, <app.database.models.Group object at 0x000002B2E53759D0>, <app.database.models.Group object at 0x000002B2E5376AD0>, <app.database.models.Group object at 0x000002B2E5375D00>, <app.database.models.Group object at 0x000002B2E5375370>, <app.database.models.Group object at 0x000002B2E5377130>, <app.database.models.Group object at 0x000002B2E5377790>, <app.database.models.Group object at 0x000002B2E5377570>, <app.database.models.Group object at 0x000002B2E5376250>, <app.database.models.Group object at 0x000002B2E5374D10>, <app.database.models.Group object at 0x000002B2E5377240>, <app.database.models.Group object at 0x000002B2E5377CE0>, <app.database.models.Group object at 0x000002B2E5377DF0>, <app.database.models.Group object at 0x000002B2E5374E20>, <app.database.models.Group object at 0x000002B2E5374050>, <app.database.models.Group object at 0x000002B2E5377460>, <app.database.models.Group object at 0x000002B2E5376030>, <app.database.models.Group object at 0x000002B2E5374AF0>, <app.database.models.Group object at 0x000002B2E5375260>]
2025-07-16 21:26:28,939 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:26:28,940 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 13...
2025-07-16 21:26:28,945 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 open orders.
2025-07-16 21:26:28,946 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 13...
2025-07-16 21:26:28,950 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 pending orders.
2025-07-16 21:26:28,950 - WARNING - app - [AUTO-CUTOFF] User 13 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:26:29,510 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:29,514 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:30,516 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:30,521 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:31,151 - DEBUG - app.firebase_stream - Firebase listener triggered (57). Event Type: patch, Path: /. Timestamp: 1752726391.1515987
2025-07-16 21:26:31,152 - DEBUG - app.firebase_stream - Prepared batch update for 16 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.0110000000', 'o': '88.0020000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649100000'}, 'USDJPY': {'b': '148.6120000000', 'o': '148.6080000000'}, 'CADCHF': {'b': '0.5852800000',
2025-07-16 21:26:31,153 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.0110000000', 'o': '88.0020000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649100000'}, 'USDJPY': {'b': '148.6120000000', 'o': '148.6080000000'}, 'CADCHF': {'b': '0.5852800000',...
2025-07-16 21:26:31,155 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:26:31,532 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:31,537 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:32,545 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:32,550 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:33,445 - DEBUG - app.firebase_stream - Firebase listener triggered (58). Event Type: patch, Path: /. Timestamp: 1752726393.445532
2025-07-16 21:26:33,445 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.0100000000', 'o': '88.0030000000'}, 'USDJPY': {'b': '148.6070000000', 'o': '148.6020000000'}, 'CADCHF': {'b': '0.5852900000', 'o': '0.5852800000'}, 'AUDJPY': {'b': '96.3660000000'
2025-07-16 21:26:33,446 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.0100000000', 'o': '88.0030000000'}, 'USDJPY': {'b': '148.6070000000', 'o': '148.6020000000'}, 'CADCHF': {'b': '0.5852900000', 'o': '0.5852800000'}, 'AUDJPY': {'b': '96.3660000000'...
2025-07-16 21:26:33,446 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:26:33,560 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:33,564 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:34,575 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:34,580 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:35,602 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:35,608 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:35,837 - DEBUG - app.firebase_stream - Firebase listener triggered (59). Event Type: patch, Path: /. Timestamp: 1752726395.8377633
2025-07-16 21:26:35,838 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9950000000'}, 'NZDJPY': {'b': '88.0100000000', 'o': '88.0010000000'}, 'GBPAUD': {'b': '2.0650900000', 'o': '2.0649400000'}, 'BTCUSD': {'b': '118236.000000000
2025-07-16 21:26:35,838 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9950000000'}, 'NZDJPY': {'b': '88.0100000000', 'o': '88.0010000000'}, 'GBPAUD': {'b': '2.0650900000', 'o': '2.0649400000'}, 'BTCUSD': {'b': '118236.000000000...
2025-07-16 21:26:35,839 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:26:36,622 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:36,626 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:37,635 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:37,639 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:38,082 - DEBUG - app.firebase_stream - Firebase listener triggered (60). Event Type: patch, Path: /. Timestamp: 1752726398.0827706
2025-07-16 21:26:38,083 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.0100000000', 'o': '88.0020000000'}, 'GBPAUD': {'b': '2.0650800000', 'o': '2.0649400000'}, 'USDJPY': {'b': '148.6070000000', 'o': '148.6020000000'}, 'CADCHF': {'b': '0.5852900000',
2025-07-16 21:26:38,084 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.0100000000', 'o': '88.0020000000'}, 'GBPAUD': {'b': '2.0650800000', 'o': '2.0649400000'}, 'USDJPY': {'b': '148.6070000000', 'o': '148.6020000000'}, 'CADCHF': {'b': '0.5852900000',...
2025-07-16 21:26:38,084 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:26:38,651 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:38,655 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:39,661 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:39,667 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:40,421 - DEBUG - app.firebase_stream - Firebase listener triggered (61). Event Type: patch, Path: /. Timestamp: 1752726400.4212065
2025-07-16 21:26:40,421 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0020000000', 'o': '37.9940000000'}, 'NZDJPY': {'b': '88.0100000000', 'o': '88.0030000000'}, 'GBPAUD': {'b': '2.0650800000', 'o': '2.0649200000'}, 'USDJPY': {'b': '148.6090000000',
2025-07-16 21:26:40,421 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0020000000', 'o': '37.9940000000'}, 'NZDJPY': {'b': '88.0100000000', 'o': '88.0030000000'}, 'GBPAUD': {'b': '2.0650800000', 'o': '2.0649200000'}, 'USDJPY': {'b': '148.6090000000',...
2025-07-16 21:26:40,421 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:26:40,683 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:40,687 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:40,913 - INFO - app - Application shutdown initiated
2025-07-16 21:26:40,913 - INFO - app - Scheduler shutdown completed
2025-07-16 21:26:40,914 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-07-16 21:26:42,668 - INFO - app.firebase_stream - Firebase listener closed.
2025-07-16 21:26:42,668 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-07-16 21:26:42,668 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:26:42,671 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:26:42,674 - INFO - app - Redis connection closed
2025-07-16 21:26:42,675 - INFO - app - Application shutdown completed
2025-07-16 21:27:01,654 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-16 21:27:01,676 - INFO - app.core.config - .env file loaded successfully.
2025-07-16 21:27:01,689 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-16 21:27:01,689 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-16 21:27:01,979 - INFO - app - Application starting up - Trading system initialized
2025-07-16 21:27:01,979 - INFO - app - SL/TP Epsilon accuracy configured: 0.00001
2025-07-16 21:27:01,979 - INFO - app - Environment: DEVELOPMENT
2025-07-16 21:27:02,033 - INFO - app - Application startup initiated
2025-07-16 21:27:02,033 - INFO - app - Initializing core services...
2025-07-16 21:27:02,088 - INFO - app - Firebase initialized
2025-07-16 21:27:02,089 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-07-16 21:27:06,153 - WARNING - app - Redis initialization failed
2025-07-16 21:27:06,158 - INFO - app - [SWAP] daily_swap_charge_job triggered
2025-07-16 21:27:06,158 - INFO - app - [AUTO-CUTOFF] Scheduled update_all_users_dynamic_portfolio job to run every 1 minute.
2025-07-16 21:27:06,159 - INFO - app - Scheduler initialized
2025-07-16 21:27:06,159 - INFO - app - Background tasks initialized
2025-07-16 21:27:07,548 - INFO - app - Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-07-16 21:27:07,549 - INFO - app - Application startup completed successfully
2025-07-16 21:27:07,549 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-16 21:27:07,549 - DEBUG - app.firebase_stream - Successfully got running event loop in process_firebase_events task.
2025-07-16 21:27:07,550 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-07-16 21:27:08,269 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-16 21:27:08,284 - DEBUG - app.firebase_stream - Firebase listener triggered (1). Event Type: put, Path: /. Timestamp: 1752726428.284801
2025-07-16 21:27:08,285 - DEBUG - app.firebase_stream - Prepared batch update for 48 symbols from root path for queue. Preview: {'AUDCAD': {'b': '0.8894800000', 'o': '0.8894800000'}, 'AUDCHF': {'b': '0.5205700000', 'o': '0.5205200000'}, 'AUDJPY': {'b': '96.3630000000', 'o': '96.3570000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'
2025-07-16 21:27:08,285 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'AUDCAD': {'b': '0.8894800000', 'o': '0.8894800000'}, 'AUDCHF': {'b': '0.5205700000', 'o': '0.5205200000'}, 'AUDJPY': {'b': '96.3630000000', 'o': '96.3570000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'...
2025-07-16 21:27:08,286 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type put at path /.
2025-07-16 21:27:10,322 - DEBUG - app.firebase_stream - Firebase listener triggered (2). Event Type: patch, Path: /. Timestamp: 1752726430.3229132
2025-07-16 21:27:10,323 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.0080000000', 'o': '88.0000000000'}, 'GBPAUD': {'b': '2.0651400000', 'o': '2.0649700000'}, 'CADCHF': {'b': '0.5852600000', 'o': '0.5852400000'}, 'AUDJPY': {'b': '96.3620000000', 'o
2025-07-16 21:27:10,323 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'NZDJPY': {'b': '88.0080000000', 'o': '88.0000000000'}, 'GBPAUD': {'b': '2.0651400000', 'o': '2.0649700000'}, 'CADCHF': {'b': '0.5852600000', 'o': '0.5852400000'}, 'AUDJPY': {'b': '96.3620000000', 'o...
2025-07-16 21:27:10,324 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:27:12,677 - DEBUG - app.firebase_stream - Firebase listener triggered (3). Event Type: patch, Path: /. Timestamp: 1752726432.6772761
2025-07-16 21:27:12,677 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9950000000'}, 'NZDJPY': {'b': '88.0080000000', 'o': '88.0010000000'}, 'GBPAUD': {'b': '2.0652100000', 'o': '2.0650400000'}, 'CADCHF': {'b': '0.5852600000', '
2025-07-16 21:27:12,677 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 2. Data preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9950000000'}, 'NZDJPY': {'b': '88.0080000000', 'o': '88.0010000000'}, 'GBPAUD': {'b': '2.0652100000', 'o': '2.0650400000'}, 'CADCHF': {'b': '0.5852600000', '...
2025-07-16 21:27:12,677 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:27:15,033 - DEBUG - app.firebase_stream - Firebase listener triggered (4). Event Type: patch, Path: /. Timestamp: 1752726435.0335758
2025-07-16 21:27:15,033 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '88.0030000000', 'o': '87.9980000000'}, 'GBPAUD': {'b': '2.0651500000', 'o': '2.0649600000'}, 'USDJPY': {'b': '148.6060000000',
2025-07-16 21:27:15,034 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 4. Data preview: {'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '88.0030000000', 'o': '87.9980000000'}, 'GBPAUD': {'b': '2.0651500000', 'o': '2.0649600000'}, 'USDJPY': {'b': '148.6060000000',...
2025-07-16 21:27:15,034 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:27:17,265 - DEBUG - app.firebase_stream - Firebase listener triggered (5). Event Type: patch, Path: /. Timestamp: 1752726437.265655
2025-07-16 21:27:17,266 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0490000000', 'o': '13.0437000000'}, 'NZDJPY': {'b': '88.0090000000', 'o': '88.0040000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0650800000'}, 'USDJPY': {'b': '148.6110000000',
2025-07-16 21:27:17,266 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 5. Data preview: {'GBPSEK': {'b': '13.0490000000', 'o': '13.0437000000'}, 'NZDJPY': {'b': '88.0090000000', 'o': '88.0040000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0650800000'}, 'USDJPY': {'b': '148.6110000000',...
2025-07-16 21:27:17,267 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:27:19,656 - DEBUG - app.firebase_stream - Firebase listener triggered (6). Event Type: patch, Path: /. Timestamp: 1752726439.6562586
2025-07-16 21:27:19,656 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.9950000000', 'o': '37.9880000000'}, 'NZDJPY': {'b': '88.0100000000', 'o': '88.0050000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0650900000'}, 'BTCUSD': {'b': '118221.200000000
2025-07-16 21:27:19,657 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 6. Data preview: {'XAGUSD': {'b': '37.9950000000', 'o': '37.9880000000'}, 'NZDJPY': {'b': '88.0100000000', 'o': '88.0050000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0650900000'}, 'BTCUSD': {'b': '118221.200000000...
2025-07-16 21:27:19,657 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:27:21,952 - DEBUG - app.firebase_stream - Firebase listener triggered (7). Event Type: patch, Path: /. Timestamp: 1752726441.9521854
2025-07-16 21:27:21,953 - DEBUG - app.firebase_stream - Prepared batch update for 37 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0493000000', 'o': '13.0440000000'}, 'NZDJPY': {'b': '88.0090000000', 'o': '88.0010000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0650900000'}, 'BTCUSD': {'b': '118230.000000000
2025-07-16 21:27:21,954 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 7. Data preview: {'GBPSEK': {'b': '13.0493000000', 'o': '13.0440000000'}, 'NZDJPY': {'b': '88.0090000000', 'o': '88.0010000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0650900000'}, 'BTCUSD': {'b': '118230.000000000...
2025-07-16 21:27:21,954 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:27:24,219 - DEBUG - app.firebase_stream - Firebase listener triggered (8). Event Type: patch, Path: /. Timestamp: 1752726444.2192507
2025-07-16 21:27:24,219 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0437000000'}, 'NZDJPY': {'b': '88.0060000000', 'o': '87.9970000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0650900000'}, 'BTCUSD': {'b': '118221.200000000
2025-07-16 21:27:24,220 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 8. Data preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0437000000'}, 'NZDJPY': {'b': '88.0060000000', 'o': '87.9970000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0650900000'}, 'BTCUSD': {'b': '118221.200000000...
2025-07-16 21:27:24,220 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:27:26,521 - DEBUG - app.firebase_stream - Firebase listener triggered (9). Event Type: patch, Path: /. Timestamp: 1752726446.5213537
2025-07-16 21:27:26,521 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0493000000', 'o': '13.0440000000'}, 'NZDJPY': {'b': '87.9970000000', 'o': '87.9910000000'}, 'GBPAUD': {'b': '2.0652400000', 'o': '2.0650700000'}, 'USDJPY': {'b': '148.6020000000',
2025-07-16 21:27:26,522 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 8. Data preview: {'GBPSEK': {'b': '13.0493000000', 'o': '13.0440000000'}, 'NZDJPY': {'b': '87.9970000000', 'o': '87.9910000000'}, 'GBPAUD': {'b': '2.0652400000', 'o': '2.0650700000'}, 'USDJPY': {'b': '148.6020000000',...
2025-07-16 21:27:26,522 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:27:28,805 - DEBUG - app.firebase_stream - Firebase listener triggered (10). Event Type: patch, Path: /. Timestamp: 1752726448.8057067
2025-07-16 21:27:28,806 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9960000000', 'o': '87.9890000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0651100000'}, 'USDJPY': {'b': '148.6110000000', 'o': '148.6050000000'}, 'USDCNH': {'b': '7.1822800000',
2025-07-16 21:27:28,807 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 10. Data preview: {'NZDJPY': {'b': '87.9960000000', 'o': '87.9890000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0651100000'}, 'USDJPY': {'b': '148.6110000000', 'o': '148.6050000000'}, 'USDCNH': {'b': '7.1822800000',...
2025-07-16 21:27:28,807 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:27:31,092 - DEBUG - app.firebase_stream - Firebase listener triggered (11). Event Type: patch, Path: /. Timestamp: 1752726451.0922508
2025-07-16 21:27:31,092 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '88.0020000000', 'o': '87.9960000000'}, 'GBPAUD': {'b': '2.0652800000', 'o': '2.0651300000'}, 'BTCUSD': {'b': '118204.500000000
2025-07-16 21:27:31,092 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 11. Data preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '88.0020000000', 'o': '87.9960000000'}, 'GBPAUD': {'b': '2.0652800000', 'o': '2.0651300000'}, 'BTCUSD': {'b': '118204.500000000...
2025-07-16 21:27:31,093 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:27:33,405 - DEBUG - app.firebase_stream - Firebase listener triggered (12). Event Type: patch, Path: /. Timestamp: 1752726453.4056919
2025-07-16 21:27:33,406 - DEBUG - app.firebase_stream - Prepared batch update for 38 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0492000000', 'o': '13.0439000000'}, 'XAGUSD': {'b': '37.9950000000', 'o': '37.9880000000'}, 'NZDJPY': {'b': '87.9970000000', 'o': '87.9900000000'}, 'GBPAUD': {'b': '2.0652700000',
2025-07-16 21:27:33,406 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 11. Data preview: {'GBPSEK': {'b': '13.0492000000', 'o': '13.0439000000'}, 'XAGUSD': {'b': '37.9950000000', 'o': '37.9880000000'}, 'NZDJPY': {'b': '87.9970000000', 'o': '87.9900000000'}, 'GBPAUD': {'b': '2.0652700000',...
2025-07-16 21:27:33,406 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:27:35,724 - DEBUG - app.firebase_stream - Firebase listener triggered (13). Event Type: patch, Path: /. Timestamp: 1752726455.724406
2025-07-16 21:27:35,724 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9970000000', 'o': '87.9890000000'}, 'GBPAUD': {'b': '2.0652800000', 'o': '2.0650900000'}, 'BTCUSD': {'b': '118213.530000000
2025-07-16 21:27:35,725 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 13. Data preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9970000000', 'o': '87.9890000000'}, 'GBPAUD': {'b': '2.0652800000', 'o': '2.0650900000'}, 'BTCUSD': {'b': '118213.530000000...
2025-07-16 21:27:35,725 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:27:38,014 - DEBUG - app.firebase_stream - Firebase listener triggered (14). Event Type: patch, Path: /. Timestamp: 1752726458.0148582
2025-07-16 21:27:38,015 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0493000000', 'o': '13.0440000000'}, 'NZDJPY': {'b': '87.9960000000', 'o': '87.9890000000'}, 'GBPAUD': {'b': '2.0653100000', 'o': '2.0651300000'}, 'BTCUSD': {'b': '118204.500000000
2025-07-16 21:27:38,016 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 13. Data preview: {'GBPSEK': {'b': '13.0493000000', 'o': '13.0440000000'}, 'NZDJPY': {'b': '87.9960000000', 'o': '87.9890000000'}, 'GBPAUD': {'b': '2.0653100000', 'o': '2.0651300000'}, 'BTCUSD': {'b': '118204.500000000...
2025-07-16 21:27:38,016 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:27:40,317 - DEBUG - app.firebase_stream - Firebase listener triggered (15). Event Type: patch, Path: /. Timestamp: 1752726460.317889
2025-07-16 21:27:40,318 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9930000000', 'o': '87.9850000000'}, 'GBPAUD': {'b': '2.0653100000', 'o': '2.0651200000'}, 'USDJPY': {'b': '148.5890000000', 'o': '148.5860000000'}, 'USDCNH': {'b': '7.1822600000',
2025-07-16 21:27:40,318 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 15. Data preview: {'NZDJPY': {'b': '87.9930000000', 'o': '87.9850000000'}, 'GBPAUD': {'b': '2.0653100000', 'o': '2.0651200000'}, 'USDJPY': {'b': '148.5890000000', 'o': '148.5860000000'}, 'USDCNH': {'b': '7.1822600000',...
2025-07-16 21:27:40,318 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:27:42,679 - DEBUG - app.firebase_stream - Firebase listener triggered (16). Event Type: patch, Path: /. Timestamp: 1752726462.6792243
2025-07-16 21:27:42,679 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0492000000', 'o': '13.0439000000'}, 'XAGUSD': {'b': '38.0020000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9930000000', 'o': '87.9860000000'}, 'GBPAUD': {'b': '2.0652900000',
2025-07-16 21:27:42,680 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 16. Data preview: {'GBPSEK': {'b': '13.0492000000', 'o': '13.0439000000'}, 'XAGUSD': {'b': '38.0020000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9930000000', 'o': '87.9860000000'}, 'GBPAUD': {'b': '2.0652900000',...
2025-07-16 21:27:42,680 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:27:44,938 - DEBUG - app.firebase_stream - Firebase listener triggered (17). Event Type: patch, Path: /. Timestamp: 1752726464.938299
2025-07-16 21:27:44,938 - DEBUG - app.firebase_stream - Prepared batch update for 17 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9930000000', 'o': '87.9850000000'}, 'GBPAUD': {'b': '2.0653000000', 'o': '2.0651200000'}, 'USDSGD': {'b': '1.2856600000', 'o': '1.2856300000'}, 'SGDJPY': {'b': '115.5870000000', '
2025-07-16 21:27:44,939 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 17. Data preview: {'NZDJPY': {'b': '87.9930000000', 'o': '87.9850000000'}, 'GBPAUD': {'b': '2.0653000000', 'o': '2.0651200000'}, 'USDSGD': {'b': '1.2856600000', 'o': '1.2856300000'}, 'SGDJPY': {'b': '115.5870000000', '...
2025-07-16 21:27:44,939 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:27:47,288 - DEBUG - app.firebase_stream - Firebase listener triggered (18). Event Type: patch, Path: /. Timestamp: 1752726467.288477
2025-07-16 21:27:47,289 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPAUD': {'b': '2.0653100000', 'o': '2.0651200000'}, 'EURZAR': {'b': '20.7663600000', 'o': '20.7420300000'}, 'EURSEK': {'b': '11.3226300000', 'o': '11.3183600000'}, 'EURPLN': {'b': '4.2547200000', '
2025-07-16 21:27:47,289 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 17. Data preview: {'GBPAUD': {'b': '2.0653100000', 'o': '2.0651200000'}, 'EURZAR': {'b': '20.7663600000', 'o': '20.7420300000'}, 'EURSEK': {'b': '11.3226300000', 'o': '11.3183600000'}, 'EURPLN': {'b': '4.2547200000', '...
2025-07-16 21:27:47,289 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:27:49,658 - DEBUG - app.firebase_stream - Firebase listener triggered (19). Event Type: patch, Path: /. Timestamp: 1752726469.6583085
2025-07-16 21:27:49,658 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.9970000000', 'o': '37.9900000000'}, 'NZDJPY': {'b': '87.9930000000', 'o': '87.9840000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0650900000'}, 'CADCHF': {'b': '0.5852600000', '
2025-07-16 21:27:49,659 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 19. Data preview: {'XAGUSD': {'b': '37.9970000000', 'o': '37.9900000000'}, 'NZDJPY': {'b': '87.9930000000', 'o': '87.9840000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0650900000'}, 'CADCHF': {'b': '0.5852600000', '...
2025-07-16 21:27:49,659 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:27:51,916 - DEBUG - app.firebase_stream - Firebase listener triggered (20). Event Type: patch, Path: /. Timestamp: 1752726471.9163027
2025-07-16 21:27:51,916 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0491000000', 'o': '13.0438000000'}, 'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9830000000'}, 'GBPAUD': {'b': '2.0653900000',
2025-07-16 21:27:51,917 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 19. Data preview: {'GBPSEK': {'b': '13.0491000000', 'o': '13.0438000000'}, 'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9830000000'}, 'GBPAUD': {'b': '2.0653900000',...
2025-07-16 21:27:51,917 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:27:54,255 - DEBUG - app.firebase_stream - Firebase listener triggered (21). Event Type: patch, Path: /. Timestamp: 1752726474.2556741
2025-07-16 21:27:54,256 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9890000000', 'o': '87.9800000000'}, 'GBPAUD': {'b': '2.0653000000', 'o': '2.0651200000'}, 'USDJPY': {'b': '148.5910000000',
2025-07-16 21:27:54,256 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 21. Data preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9890000000', 'o': '87.9800000000'}, 'GBPAUD': {'b': '2.0653000000', 'o': '2.0651200000'}, 'USDJPY': {'b': '148.5910000000',...
2025-07-16 21:27:54,256 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:27:56,517 - DEBUG - app.firebase_stream - Firebase listener triggered (22). Event Type: patch, Path: /. Timestamp: 1752726476.5177653
2025-07-16 21:27:56,518 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9880000000', 'o': '87.9810000000'}, 'GBPAUD': {'b': '2.0653900000', 'o': '2.0652100000'}, 'USDJPY': {'b': '148.5910000000', 'o': '148.5860000000'}, 'USDCNH': {'b': '7.1822500000',
2025-07-16 21:27:56,518 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 22. Data preview: {'NZDJPY': {'b': '87.9880000000', 'o': '87.9810000000'}, 'GBPAUD': {'b': '2.0653900000', 'o': '2.0652100000'}, 'USDJPY': {'b': '148.5910000000', 'o': '148.5860000000'}, 'USDCNH': {'b': '7.1822500000',...
2025-07-16 21:27:56,519 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:27:58,861 - DEBUG - app.firebase_stream - Firebase listener triggered (23). Event Type: patch, Path: /. Timestamp: 1752726478.861452
2025-07-16 21:27:58,862 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9890000000', 'o': '87.9800000000'}, 'GBPAUD': {'b': '2.0653900000', 'o': '2.0652000000'}, 'USDJPY': {'b': '148.5910000000', 'o': '148.5880000000'}, 'USDCNH': {'b': '7.1822600000',
2025-07-16 21:27:58,862 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 23. Data preview: {'NZDJPY': {'b': '87.9890000000', 'o': '87.9800000000'}, 'GBPAUD': {'b': '2.0653900000', 'o': '2.0652000000'}, 'USDJPY': {'b': '148.5910000000', 'o': '148.5880000000'}, 'USDCNH': {'b': '7.1822600000',...
2025-07-16 21:27:58,862 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:01,129 - DEBUG - app.firebase_stream - Firebase listener triggered (24). Event Type: patch, Path: /. Timestamp: 1752726481.129449
2025-07-16 21:28:01,130 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '87.9890000000', 'o': '87.9810000000'}, 'GBPAUD': {'b': '2.0652900000', 'o': '2.0651600000'}, 'USDJPY': {'b': '148.5920000000',
2025-07-16 21:28:01,130 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 24. Data preview: {'XAGUSD': {'b': '37.9990000000', 'o': '37.9920000000'}, 'NZDJPY': {'b': '87.9890000000', 'o': '87.9810000000'}, 'GBPAUD': {'b': '2.0652900000', 'o': '2.0651600000'}, 'USDJPY': {'b': '148.5920000000',...
2025-07-16 21:28:01,130 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:03,480 - DEBUG - app.firebase_stream - Firebase listener triggered (25). Event Type: patch, Path: /. Timestamp: 1752726483.4808517
2025-07-16 21:28:03,481 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9890000000', 'o': '87.9800000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0650700000'}, 'BTCUSD': {'b': '118200.100000000
2025-07-16 21:28:03,482 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 25. Data preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9890000000', 'o': '87.9800000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0650700000'}, 'BTCUSD': {'b': '118200.100000000...
2025-07-16 21:28:03,482 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:05,836 - DEBUG - app.firebase_stream - Firebase listener triggered (26). Event Type: patch, Path: /. Timestamp: 1752726485.8364446
2025-07-16 21:28:05,836 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.9990000000', 'o': '37.9910000000'}, 'NZDJPY': {'b': '87.9870000000', 'o': '87.9810000000'}, 'GBPAUD': {'b': '2.0653000000', 'o': '2.0651800000'}, 'USDJPY': {'b': '148.5920000000',
2025-07-16 21:28:05,837 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 26. Data preview: {'XAGUSD': {'b': '37.9990000000', 'o': '37.9910000000'}, 'NZDJPY': {'b': '87.9870000000', 'o': '87.9810000000'}, 'GBPAUD': {'b': '2.0653000000', 'o': '2.0651800000'}, 'USDJPY': {'b': '148.5920000000',...
2025-07-16 21:28:05,837 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:06,167 - INFO - app - [AUTO-CUTOFF] Starting update_all_users_dynamic_portfolio job...
2025-07-16 21:28:06,167 - ERROR - app - [AUTO-CUTOFF] Cannot update dynamic portfolios - Redis client not available
2025-07-16 21:28:08,288 - DEBUG - app.firebase_stream - Firebase listener triggered (27). Event Type: patch, Path: /. Timestamp: 1752726488.2882903
2025-07-16 21:28:08,288 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9890000000', 'o': '87.9800000000'}, 'GBPAUD': {'b': '2.0652900000', 'o': '2.0651800000'}, 'USDJPY': {'b': '148.5930000000',
2025-07-16 21:28:08,289 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 27. Data preview: {'XAGUSD': {'b': '38.0010000000', 'o': '37.9930000000'}, 'NZDJPY': {'b': '87.9890000000', 'o': '87.9800000000'}, 'GBPAUD': {'b': '2.0652900000', 'o': '2.0651800000'}, 'USDJPY': {'b': '148.5930000000',...
2025-07-16 21:28:08,289 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:10,644 - DEBUG - app.firebase_stream - Firebase listener triggered (28). Event Type: patch, Path: /. Timestamp: 1752726490.6444647
2025-07-16 21:28:10,645 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9930000000', 'o': '87.9830000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0650900000'}, 'USDJPY': {'b': '148.5930000000', 'o': '148.5860000000'}, 'USDCNH': {'b': '7.1822600000',
2025-07-16 21:28:10,645 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 27. Data preview: {'NZDJPY': {'b': '87.9930000000', 'o': '87.9830000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0650900000'}, 'USDJPY': {'b': '148.5930000000', 'o': '148.5860000000'}, 'USDCNH': {'b': '7.1822600000',...
2025-07-16 21:28:10,646 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:12,988 - DEBUG - app.firebase_stream - Firebase listener triggered (29). Event Type: patch, Path: /. Timestamp: 1752726492.9880338
2025-07-16 21:28:12,988 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9940000000', 'o': '87.9840000000'}, 'GBPAUD': {'b': '2.0652300000', 'o': '2.0650800000'}, 'USDJPY': {'b': '148.5930000000', 'o': '148.5870000000'}, 'CADCHF': {'b': '0.5852500000',
2025-07-16 21:28:12,988 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 28. Data preview: {'NZDJPY': {'b': '87.9940000000', 'o': '87.9840000000'}, 'GBPAUD': {'b': '2.0652300000', 'o': '2.0650800000'}, 'USDJPY': {'b': '148.5930000000', 'o': '148.5870000000'}, 'CADCHF': {'b': '0.5852500000',...
2025-07-16 21:28:12,989 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:15,251 - DEBUG - app.firebase_stream - Firebase listener triggered (30). Event Type: patch, Path: /. Timestamp: 1752726495.2516727
2025-07-16 21:28:15,252 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0020000000', 'o': '37.9950000000'}, 'NZDJPY': {'b': '87.9930000000', 'o': '87.9830000000'}, 'GBPAUD': {'b': '2.0652300000', 'o': '2.0651000000'}, 'USDCNH': {'b': '7.1821300000', '
2025-07-16 21:28:15,252 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 30. Data preview: {'XAGUSD': {'b': '38.0020000000', 'o': '37.9950000000'}, 'NZDJPY': {'b': '87.9930000000', 'o': '87.9830000000'}, 'GBPAUD': {'b': '2.0652300000', 'o': '2.0651000000'}, 'USDCNH': {'b': '7.1821300000', '...
2025-07-16 21:28:15,253 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:17,611 - DEBUG - app.firebase_stream - Firebase listener triggered (31). Event Type: patch, Path: /. Timestamp: 1752726497.6117668
2025-07-16 21:28:17,612 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0497000000', 'o': '13.0436000000'}, 'XAGUSD': {'b': '38.0020000000', 'o': '37.9940000000'}, 'NZDJPY': {'b': '87.9930000000', 'o': '87.9840000000'}, 'GBPAUD': {'b': '2.0652500000',
2025-07-16 21:28:17,613 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 31. Data preview: {'GBPSEK': {'b': '13.0497000000', 'o': '13.0436000000'}, 'XAGUSD': {'b': '38.0020000000', 'o': '37.9940000000'}, 'NZDJPY': {'b': '87.9930000000', 'o': '87.9840000000'}, 'GBPAUD': {'b': '2.0652500000',...
2025-07-16 21:28:17,613 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:19,849 - DEBUG - app.firebase_stream - Firebase listener triggered (32). Event Type: patch, Path: /. Timestamp: 1752726499.849682
2025-07-16 21:28:19,850 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0050000000', 'o': '37.9980000000'}, 'NZDJPY': {'b': '87.9920000000', 'o': '87.9830000000'}, 'GBPAUD': {'b': '2.0652400000', 'o': '2.0650700000'}, 'USDCNH': {'b': '7.1821300000', '
2025-07-16 21:28:19,850 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 31. Data preview: {'XAGUSD': {'b': '38.0050000000', 'o': '37.9980000000'}, 'NZDJPY': {'b': '87.9920000000', 'o': '87.9830000000'}, 'GBPAUD': {'b': '2.0652400000', 'o': '2.0650700000'}, 'USDCNH': {'b': '7.1821300000', '...
2025-07-16 21:28:19,850 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:22,199 - DEBUG - app.firebase_stream - Firebase listener triggered (33). Event Type: patch, Path: /. Timestamp: 1752726502.1994598
2025-07-16 21:28:22,199 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9920000000', 'o': '87.9820000000'}, 'GBPAUD': {'b': '2.0652300000', 'o': '2.0650700000'}, 'BTCUSD': {'b': '118179.5000000000', 'o': '118179.4000000000'}, 'USDJPY': {'b': '148.5920
2025-07-16 21:28:22,200 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 32. Data preview: {'NZDJPY': {'b': '87.9920000000', 'o': '87.9820000000'}, 'GBPAUD': {'b': '2.0652300000', 'o': '2.0650700000'}, 'BTCUSD': {'b': '118179.5000000000', 'o': '118179.4000000000'}, 'USDJPY': {'b': '148.5920...
2025-07-16 21:28:22,200 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:24,467 - DEBUG - app.firebase_stream - Firebase listener triggered (34). Event Type: patch, Path: /. Timestamp: 1752726504.467165
2025-07-16 21:28:24,467 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0495000000', 'o': '13.0442000000'}, 'NZDJPY': {'b': '87.9930000000', 'o': '87.9830000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0650700000'}, 'BTCUSD': {'b': '118171.800000000
2025-07-16 21:28:24,468 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 33. Data preview: {'GBPSEK': {'b': '13.0495000000', 'o': '13.0442000000'}, 'NZDJPY': {'b': '87.9930000000', 'o': '87.9830000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0650700000'}, 'BTCUSD': {'b': '118171.800000000...
2025-07-16 21:28:24,468 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:26,823 - DEBUG - app.firebase_stream - Firebase listener triggered (35). Event Type: patch, Path: /. Timestamp: 1752726506.823024
2025-07-16 21:28:26,823 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9940000000', 'o': '87.9850000000'}, 'GBPAUD': {'b': '2.0652400000', 'o': '2.0650900000'}, 'BTCUSD': {'b': '118162.7000000000', 'o': '118162.6000000000'}, 'USDJPY': {'b': '148.5980
2025-07-16 21:28:26,824 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 35. Data preview: {'NZDJPY': {'b': '87.9940000000', 'o': '87.9850000000'}, 'GBPAUD': {'b': '2.0652400000', 'o': '2.0650900000'}, 'BTCUSD': {'b': '118162.7000000000', 'o': '118162.6000000000'}, 'USDJPY': {'b': '148.5980...
2025-07-16 21:28:26,824 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:29,172 - DEBUG - app.firebase_stream - Firebase listener triggered (36). Event Type: patch, Path: /. Timestamp: 1752726509.1726644
2025-07-16 21:28:29,173 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0496000000', 'o': '13.0443000000'}, 'XAGUSD': {'b': '38.0030000000', 'o': '37.9950000000'}, 'NZDJPY': {'b': '87.9920000000', 'o': '87.9840000000'}, 'GBPAUD': {'b': '2.0652600000',
2025-07-16 21:28:29,173 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 35. Data preview: {'GBPSEK': {'b': '13.0496000000', 'o': '13.0443000000'}, 'XAGUSD': {'b': '38.0030000000', 'o': '37.9950000000'}, 'NZDJPY': {'b': '87.9920000000', 'o': '87.9840000000'}, 'GBPAUD': {'b': '2.0652600000',...
2025-07-16 21:28:29,173 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:31,381 - DEBUG - app.firebase_stream - Firebase listener triggered (37). Event Type: patch, Path: /. Timestamp: 1752726511.3812022
2025-07-16 21:28:31,382 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0050000000', 'o': '37.9980000000'}, 'NZDJPY': {'b': '87.9930000000', 'o': '87.9870000000'}, 'BTCUSD': {'b': '118162.7000000000', 'o': '118162.6000000000'}, 'USDJPY': {'b': '148.59
2025-07-16 21:28:31,382 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 37. Data preview: {'XAGUSD': {'b': '38.0050000000', 'o': '37.9980000000'}, 'NZDJPY': {'b': '87.9930000000', 'o': '87.9870000000'}, 'BTCUSD': {'b': '118162.7000000000', 'o': '118162.6000000000'}, 'USDJPY': {'b': '148.59...
2025-07-16 21:28:31,383 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:33,772 - DEBUG - app.firebase_stream - Firebase listener triggered (38). Event Type: patch, Path: /. Timestamp: 1752726513.7724955
2025-07-16 21:28:33,772 - DEBUG - app.firebase_stream - Prepared batch update for 15 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9940000000', 'o': '87.9860000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0651000000'}, 'BTCUSD': {'b': '118162.6000000000', 'o': '118162.5000000000'}, 'SGDJPY': {'b': '115.5910
2025-07-16 21:28:33,773 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 37. Data preview: {'NZDJPY': {'b': '87.9940000000', 'o': '87.9860000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0651000000'}, 'BTCUSD': {'b': '118162.6000000000', 'o': '118162.5000000000'}, 'SGDJPY': {'b': '115.5910...
2025-07-16 21:28:33,773 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:36,030 - DEBUG - app.firebase_stream - Firebase listener triggered (39). Event Type: patch, Path: /. Timestamp: 1752726516.0305033
2025-07-16 21:28:36,030 - DEBUG - app.firebase_stream - Prepared batch update for 19 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9930000000', 'o': '87.9850000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0651100000'}, 'BTCUSD': {'b': '118160.3000000000', 'o': '118160.2000000000'}, 'USDJPY': {'b': '148.5980
2025-07-16 21:28:36,031 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 39. Data preview: {'NZDJPY': {'b': '87.9930000000', 'o': '87.9850000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0651100000'}, 'BTCUSD': {'b': '118160.3000000000', 'o': '118160.2000000000'}, 'USDJPY': {'b': '148.5980...
2025-07-16 21:28:36,031 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:38,405 - DEBUG - app.firebase_stream - Firebase listener triggered (40). Event Type: patch, Path: /. Timestamp: 1752726518.4053125
2025-07-16 21:28:38,405 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0500000000', 'o': '13.0438000000'}, 'NZDJPY': {'b': '87.9920000000', 'o': '87.9860000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0651000000'}, 'BTCUSD': {'b': '118156.800000000
2025-07-16 21:28:38,406 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 39. Data preview: {'GBPSEK': {'b': '13.0500000000', 'o': '13.0438000000'}, 'NZDJPY': {'b': '87.9920000000', 'o': '87.9860000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0651000000'}, 'BTCUSD': {'b': '118156.800000000...
2025-07-16 21:28:38,406 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:40,639 - DEBUG - app.firebase_stream - Firebase listener triggered (41). Event Type: patch, Path: /. Timestamp: 1752726520.6396616
2025-07-16 21:28:40,640 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0496000000', 'o': '13.0443000000'}, 'NZDJPY': {'b': '87.9910000000', 'o': '87.9820000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0651000000'}, 'USDJPY': {'b': '148.5960000000',
2025-07-16 21:28:40,640 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 41. Data preview: {'GBPSEK': {'b': '13.0496000000', 'o': '13.0443000000'}, 'NZDJPY': {'b': '87.9910000000', 'o': '87.9820000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0651000000'}, 'USDJPY': {'b': '148.5960000000',...
2025-07-16 21:28:40,640 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:43,011 - DEBUG - app.firebase_stream - Firebase listener triggered (42). Event Type: patch, Path: /. Timestamp: 1752726523.0117435
2025-07-16 21:28:43,012 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9960000000'}, 'NZDJPY': {'b': '87.9860000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0651800000', 'o': '2.0650100000'}, 'BTCUSD': {'b': '118195.100000000
2025-07-16 21:28:43,012 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 41. Data preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9960000000'}, 'NZDJPY': {'b': '87.9860000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0651800000', 'o': '2.0650100000'}, 'BTCUSD': {'b': '118195.100000000...
2025-07-16 21:28:43,013 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:45,254 - DEBUG - app.firebase_stream - Firebase listener triggered (43). Event Type: patch, Path: /. Timestamp: 1752726525.2542877
2025-07-16 21:28:45,254 - DEBUG - app.firebase_stream - Prepared batch update for 35 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0444000000'}, 'XAGUSD': {'b': '38.0050000000', 'o': '37.9980000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0651600000',
2025-07-16 21:28:45,255 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 42. Data preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0444000000'}, 'XAGUSD': {'b': '38.0050000000', 'o': '37.9980000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0651600000',...
2025-07-16 21:28:45,255 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:47,506 - DEBUG - app.firebase_stream - Firebase listener triggered (44). Event Type: patch, Path: /. Timestamp: 1752726527.506319
2025-07-16 21:28:47,506 - DEBUG - app.firebase_stream - Prepared batch update for 19 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9870000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0651800000', 'o': '2.0650100000'}, 'USDJPY': {'b': '148.5900000000', 'o': '148.5860000000'}, 'CADCHF': {'b': '0.5852500000',
2025-07-16 21:28:47,507 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 44. Data preview: {'NZDJPY': {'b': '87.9870000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0651800000', 'o': '2.0650100000'}, 'USDJPY': {'b': '148.5900000000', 'o': '148.5860000000'}, 'CADCHF': {'b': '0.5852500000',...
2025-07-16 21:28:47,507 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:49,846 - DEBUG - app.firebase_stream - Firebase listener triggered (45). Event Type: patch, Path: /. Timestamp: 1752726529.846874
2025-07-16 21:28:49,847 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'USDJPY': {'b': '148.5900000000', 'o': '148.5870000000'}, 'EURNZD': {'b': '1.9622200000', 'o': '1.9620200000'}, 'EURZAR': {'b': '20.7667300000', 'o': '20.7427000000'}, 'EURPLN': {'b': '4.2552100000',
2025-07-16 21:28:49,847 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 45. Data preview: {'USDJPY': {'b': '148.5900000000', 'o': '148.5870000000'}, 'EURNZD': {'b': '1.9622200000', 'o': '1.9620200000'}, 'EURZAR': {'b': '20.7667300000', 'o': '20.7427000000'}, 'EURPLN': {'b': '4.2552100000',...
2025-07-16 21:28:49,848 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:52,105 - DEBUG - app.firebase_stream - Firebase listener triggered (46). Event Type: patch, Path: /. Timestamp: 1752726532.1054802
2025-07-16 21:28:52,105 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9880000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0651600000', 'o': '2.0650100000'}, 'CADCHF': {'b': '0.5852600000', 'o': '0.5852600000'}, 'EURZAR': {'b': '20.7650500000', 'o
2025-07-16 21:28:52,106 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 45. Data preview: {'NZDJPY': {'b': '87.9880000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0651600000', 'o': '2.0650100000'}, 'CADCHF': {'b': '0.5852600000', 'o': '0.5852600000'}, 'EURZAR': {'b': '20.7650500000', 'o...
2025-07-16 21:28:52,106 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:54,473 - DEBUG - app.firebase_stream - Firebase listener triggered (47). Event Type: patch, Path: /. Timestamp: 1752726534.473277
2025-07-16 21:28:54,475 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9870000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0651700000', 'o': '2.0650100000'}, 'USDJPY': {'b': '148.5900000000', 'o': '148.5860000000'}, 'EURNZD': {'b': '1.9622200000',
2025-07-16 21:28:54,475 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 46. Data preview: {'NZDJPY': {'b': '87.9870000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0651700000', 'o': '2.0650100000'}, 'USDJPY': {'b': '148.5900000000', 'o': '148.5860000000'}, 'EURNZD': {'b': '1.9622200000',...
2025-07-16 21:28:54,476 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:56,706 - DEBUG - app.firebase_stream - Firebase listener triggered (48). Event Type: patch, Path: /. Timestamp: 1752726536.706596
2025-07-16 21:28:56,707 - DEBUG - app.firebase_stream - Prepared batch update for 17 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9960000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0651800000', 'o': '2.0650300000'}, 'USDJPY': {'b': '148.5910000000',
2025-07-16 21:28:56,707 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 48. Data preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9960000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0651800000', 'o': '2.0650300000'}, 'USDJPY': {'b': '148.5910000000',...
2025-07-16 21:28:56,707 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:28:59,067 - DEBUG - app.firebase_stream - Firebase listener triggered (49). Event Type: patch, Path: /. Timestamp: 1752726539.06754
2025-07-16 21:28:59,071 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0497000000', 'o': '13.0443000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0651500000', 'o': '2.0650100000'}, 'USDJPY': {'b': '148.5910000000',
2025-07-16 21:28:59,072 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 48. Data preview: {'GBPSEK': {'b': '13.0497000000', 'o': '13.0443000000'}, 'NZDJPY': {'b': '87.9880000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0651500000', 'o': '2.0650100000'}, 'USDJPY': {'b': '148.5910000000',...
2025-07-16 21:28:59,072 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:01,321 - DEBUG - app.firebase_stream - Firebase listener triggered (50). Event Type: patch, Path: /. Timestamp: 1752726541.3211005
2025-07-16 21:29:01,321 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0496000000', 'o': '13.0442000000'}, 'XAGUSD': {'b': '38.0040000000', 'o': '37.9970000000'}, 'GBPAUD': {'b': '2.0651500000', 'o': '2.0649900000'}, 'USDCNH': {'b': '7.1820300000', '
2025-07-16 21:29:01,321 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 49. Data preview: {'GBPSEK': {'b': '13.0496000000', 'o': '13.0442000000'}, 'XAGUSD': {'b': '38.0040000000', 'o': '37.9970000000'}, 'GBPAUD': {'b': '2.0651500000', 'o': '2.0649900000'}, 'USDCNH': {'b': '7.1820300000', '...
2025-07-16 21:29:01,322 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:03,700 - DEBUG - app.firebase_stream - Firebase listener triggered (51). Event Type: patch, Path: /. Timestamp: 1752726543.7006476
2025-07-16 21:29:03,701 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9850000000', 'o': '87.9800000000'}, 'GBPAUD': {'b': '2.0652000000', 'o': '2.0650900000'}, 'USDJPY': {'b': '148.5940000000', 'o': '148.5890000000'}, 'USDCNH': {'b': '7.1821000000',
2025-07-16 21:29:03,701 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 51. Data preview: {'NZDJPY': {'b': '87.9850000000', 'o': '87.9800000000'}, 'GBPAUD': {'b': '2.0652000000', 'o': '2.0650900000'}, 'USDJPY': {'b': '148.5940000000', 'o': '148.5890000000'}, 'USDCNH': {'b': '7.1821000000',...
2025-07-16 21:29:03,701 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:05,926 - DEBUG - app.firebase_stream - Firebase listener triggered (52). Event Type: patch, Path: /. Timestamp: 1752726545.9268506
2025-07-16 21:29:05,927 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9820000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0652400000', 'o': '2.0651000000'}, 'USDJPY': {'b': '148.5930000000', 'o': '148.5880000000'}, 'USDCNH': {'b': '7.1820700000',
2025-07-16 21:29:05,928 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 52. Data preview: {'NZDJPY': {'b': '87.9820000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0652400000', 'o': '2.0651000000'}, 'USDJPY': {'b': '148.5930000000', 'o': '148.5880000000'}, 'USDCNH': {'b': '7.1820700000',...
2025-07-16 21:29:05,928 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:06,161 - INFO - app - [AUTO-CUTOFF] Starting update_all_users_dynamic_portfolio job...
2025-07-16 21:29:06,161 - ERROR - app - [AUTO-CUTOFF] Cannot update dynamic portfolios - Redis client not available
2025-07-16 21:29:08,247 - DEBUG - app.firebase_stream - Firebase listener triggered (53). Event Type: patch, Path: /. Timestamp: 1752726548.2477856
2025-07-16 21:29:08,248 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9820000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0652000000', 'o': '2.0651000000'}, 'USDJPY': {'b': '148.5940000000', 'o': '148.5890000000'}, 'USDCNH': {'b': '7.1821400000',
2025-07-16 21:29:08,249 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 52. Data preview: {'NZDJPY': {'b': '87.9820000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0652000000', 'o': '2.0651000000'}, 'USDJPY': {'b': '148.5940000000', 'o': '148.5890000000'}, 'USDCNH': {'b': '7.1821400000',...
2025-07-16 21:29:08,249 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:10,650 - DEBUG - app.firebase_stream - Firebase listener triggered (54). Event Type: patch, Path: /. Timestamp: 1752726550.6503396
2025-07-16 21:29:10,650 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9960000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0651100000'}, 'USDJPY': {'b': '148.5920000000', 'o': '148.5880000000'}, 'USDCNH': {'b': '7.1820700000',
2025-07-16 21:29:10,651 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 53. Data preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9960000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0651100000'}, 'USDJPY': {'b': '148.5920000000', 'o': '148.5880000000'}, 'USDCNH': {'b': '7.1820700000',...
2025-07-16 21:29:10,651 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:12,909 - DEBUG - app.firebase_stream - Firebase listener triggered (55). Event Type: patch, Path: /. Timestamp: 1752726552.9095864
2025-07-16 21:29:12,910 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0050000000', 'o': '37.9980000000'}, 'NZDJPY': {'b': '87.9820000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0651000000'}, 'USDJPY': {'b': '148.5930000000',
2025-07-16 21:29:12,911 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 55. Data preview: {'XAGUSD': {'b': '38.0050000000', 'o': '37.9980000000'}, 'NZDJPY': {'b': '87.9820000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0651000000'}, 'USDJPY': {'b': '148.5930000000',...
2025-07-16 21:29:12,911 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:15,197 - DEBUG - app.firebase_stream - Firebase listener triggered (56). Event Type: patch, Path: /. Timestamp: 1752726555.1975868
2025-07-16 21:29:15,197 - DEBUG - app.firebase_stream - Prepared batch update for 19 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9960000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9740000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0650700000'}, 'USDJPY': {'b': '148.5920000000',
2025-07-16 21:29:15,198 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 56. Data preview: {'XAGUSD': {'b': '38.0030000000', 'o': '37.9960000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9740000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0650700000'}, 'USDJPY': {'b': '148.5920000000',...
2025-07-16 21:29:15,198 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:17,498 - DEBUG - app.firebase_stream - Firebase listener triggered (57). Event Type: patch, Path: /. Timestamp: 1752726557.4980867
2025-07-16 21:29:17,498 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0050000000', 'o': '37.9980000000'}, 'NZDJPY': {'b': '87.9830000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0652300000', 'o': '2.0651000000'}, 'USDJPY': {'b': '148.5940000000',
2025-07-16 21:29:17,499 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 56. Data preview: {'XAGUSD': {'b': '38.0050000000', 'o': '37.9980000000'}, 'NZDJPY': {'b': '87.9830000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0652300000', 'o': '2.0651000000'}, 'USDJPY': {'b': '148.5940000000',...
2025-07-16 21:29:17,499 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:19,788 - DEBUG - app.firebase_stream - Firebase listener triggered (58). Event Type: patch, Path: /. Timestamp: 1752726559.788919
2025-07-16 21:29:19,789 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPAUD': {'b': '2.0651500000', 'o': '2.0650300000'}, 'USDJPY': {'b': '148.5930000000', 'o': '148.5870000000'}, 'CADCHF': {'b': '0.5852600000', 'o': '0.5852500000'}, 'EURNZD': {'b': '1.9622300000', '
2025-07-16 21:29:19,789 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 57. Data preview: {'GBPAUD': {'b': '2.0651500000', 'o': '2.0650300000'}, 'USDJPY': {'b': '148.5930000000', 'o': '148.5870000000'}, 'CADCHF': {'b': '0.5852600000', 'o': '0.5852500000'}, 'EURNZD': {'b': '1.9622300000', '...
2025-07-16 21:29:19,790 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:22,107 - DEBUG - app.firebase_stream - Firebase listener triggered (59). Event Type: patch, Path: /. Timestamp: 1752726562.1075149
2025-07-16 21:29:22,108 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0444000000'}, 'XAGUSD': {'b': '38.0080000000', 'o': '37.9990000000'}, 'NZDJPY': {'b': '87.9860000000', 'o': '87.9770000000'}, 'GBPAUD': {'b': '2.0651400000',
2025-07-16 21:29:22,108 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 59. Data preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0444000000'}, 'XAGUSD': {'b': '38.0080000000', 'o': '37.9990000000'}, 'NZDJPY': {'b': '87.9860000000', 'o': '87.9770000000'}, 'GBPAUD': {'b': '2.0651400000',...
2025-07-16 21:29:22,108 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:24,369 - DEBUG - app.firebase_stream - Firebase listener triggered (60). Event Type: patch, Path: /. Timestamp: 1752726564.3697047
2025-07-16 21:29:24,370 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0080000000', 'o': '38.0010000000'}, 'NZDJPY': {'b': '87.9860000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0651400000', 'o': '2.0649700000'}, 'USDCNH': {'b': '7.1821100000', '
2025-07-16 21:29:24,371 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 60. Data preview: {'XAGUSD': {'b': '38.0080000000', 'o': '38.0010000000'}, 'NZDJPY': {'b': '87.9860000000', 'o': '87.9780000000'}, 'GBPAUD': {'b': '2.0651400000', 'o': '2.0649700000'}, 'USDCNH': {'b': '7.1821100000', '...
2025-07-16 21:29:24,371 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:26,721 - DEBUG - app.firebase_stream - Firebase listener triggered (61). Event Type: patch, Path: /. Timestamp: 1752726566.721451
2025-07-16 21:29:26,722 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0040000000', 'o': '37.9970000000'}, 'NZDJPY': {'b': '87.9870000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0651200000', 'o': '2.0649700000'}, 'USDCNH': {'b': '7.1821000000', '
2025-07-16 21:29:26,722 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 60. Data preview: {'XAGUSD': {'b': '38.0040000000', 'o': '37.9970000000'}, 'NZDJPY': {'b': '87.9870000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0651200000', 'o': '2.0649700000'}, 'USDCNH': {'b': '7.1821000000', '...
2025-07-16 21:29:26,722 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:29,065 - DEBUG - app.firebase_stream - Firebase listener triggered (62). Event Type: patch, Path: /. Timestamp: 1752726569.0652835
2025-07-16 21:29:29,065 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9850000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0651300000', 'o': '2.0649600000'}, 'USDJPY': {'b': '148.5940000000', 'o': '148.5870000000'}, 'USDCNH': {'b': '7.1820300000',
2025-07-16 21:29:29,065 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 61. Data preview: {'NZDJPY': {'b': '87.9850000000', 'o': '87.9790000000'}, 'GBPAUD': {'b': '2.0651300000', 'o': '2.0649600000'}, 'USDJPY': {'b': '148.5940000000', 'o': '148.5870000000'}, 'USDCNH': {'b': '7.1820300000',...
2025-07-16 21:29:29,065 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:31,420 - DEBUG - app.firebase_stream - Firebase listener triggered (63). Event Type: patch, Path: /. Timestamp: 1752726571.4200227
2025-07-16 21:29:31,420 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0060000000', 'o': '37.9980000000'}, 'NZDJPY': {'b': '87.9830000000', 'o': '87.9760000000'}, 'GBPAUD': {'b': '2.0651300000', 'o': '2.0649700000'}, 'USDJPY': {'b': '148.5900000000',
2025-07-16 21:29:31,420 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 62. Data preview: {'XAGUSD': {'b': '38.0060000000', 'o': '37.9980000000'}, 'NZDJPY': {'b': '87.9830000000', 'o': '87.9760000000'}, 'GBPAUD': {'b': '2.0651300000', 'o': '2.0649700000'}, 'USDJPY': {'b': '148.5900000000',...
2025-07-16 21:29:31,420 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:33,675 - DEBUG - app.firebase_stream - Firebase listener triggered (64). Event Type: patch, Path: /. Timestamp: 1752726573.675649
2025-07-16 21:29:33,675 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0040000000', 'o': '37.9970000000'}, 'NZDJPY': {'b': '87.9830000000', 'o': '87.9740000000'}, 'USDCNH': {'b': '7.1820700000', 'o': '7.1819300000'}, 'CADCHF': {'b': '0.5852800000', '
2025-07-16 21:29:33,676 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 63. Data preview: {'XAGUSD': {'b': '38.0040000000', 'o': '37.9970000000'}, 'NZDJPY': {'b': '87.9830000000', 'o': '87.9740000000'}, 'USDCNH': {'b': '7.1820700000', 'o': '7.1819300000'}, 'CADCHF': {'b': '0.5852800000', '...
2025-07-16 21:29:33,676 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:36,029 - DEBUG - app.firebase_stream - Firebase listener triggered (65). Event Type: patch, Path: /. Timestamp: 1752726576.0290558
2025-07-16 21:29:36,029 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0080000000', 'o': '38.0010000000'}, 'NZDJPY': {'b': '87.9790000000', 'o': '87.9760000000'}, 'GBPAUD': {'b': '2.0651200000', 'o': '2.0649400000'}, 'USDJPY': {'b': '148.5830000000',
2025-07-16 21:29:36,029 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 64. Data preview: {'XAGUSD': {'b': '38.0080000000', 'o': '38.0010000000'}, 'NZDJPY': {'b': '87.9790000000', 'o': '87.9760000000'}, 'GBPAUD': {'b': '2.0651200000', 'o': '2.0649400000'}, 'USDJPY': {'b': '148.5830000000',...
2025-07-16 21:29:36,029 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:38,289 - DEBUG - app.firebase_stream - Firebase listener triggered (66). Event Type: patch, Path: /. Timestamp: 1752726578.2893667
2025-07-16 21:29:38,289 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649400000'}, 'USDJPY': {'b': '148.5900000000', 'o': '148.5850000000'}, 'USDCNH': {'b': '7.1820700000',
2025-07-16 21:29:38,289 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 66. Data preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649400000'}, 'USDJPY': {'b': '148.5900000000', 'o': '148.5850000000'}, 'USDCNH': {'b': '7.1820700000',...
2025-07-16 21:29:38,289 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:40,636 - DEBUG - app.firebase_stream - Firebase listener triggered (67). Event Type: patch, Path: /. Timestamp: 1752726580.6365185
2025-07-16 21:29:40,636 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0060000000', 'o': '37.9980000000'}, 'NZDJPY': {'b': '87.9790000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0651500000', 'o': '2.0649800000'}, 'USDJPY': {'b': '148.5850000000',
2025-07-16 21:29:40,637 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 67. Data preview: {'XAGUSD': {'b': '38.0060000000', 'o': '37.9980000000'}, 'NZDJPY': {'b': '87.9790000000', 'o': '87.9750000000'}, 'GBPAUD': {'b': '2.0651500000', 'o': '2.0649800000'}, 'USDJPY': {'b': '148.5850000000',...
2025-07-16 21:29:40,637 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:42,903 - DEBUG - app.firebase_stream - Firebase listener triggered (68). Event Type: patch, Path: /. Timestamp: 1752726582.9039385
2025-07-16 21:29:42,904 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0070000000', 'o': '37.9990000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649200000'}, 'USDJPY': {'b': '148.5840000000',
2025-07-16 21:29:42,904 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 67. Data preview: {'XAGUSD': {'b': '38.0070000000', 'o': '37.9990000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649200000'}, 'USDJPY': {'b': '148.5840000000',...
2025-07-16 21:29:42,904 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:45,247 - DEBUG - app.firebase_stream - Firebase listener triggered (69). Event Type: patch, Path: /. Timestamp: 1752726585.2471282
2025-07-16 21:29:45,247 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0060000000', 'o': '37.9990000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0651300000', 'o': '2.0649400000'}, 'BTCUSD': {'b': '118206.000000000
2025-07-16 21:29:45,247 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 68. Data preview: {'XAGUSD': {'b': '38.0060000000', 'o': '37.9990000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0651300000', 'o': '2.0649400000'}, 'BTCUSD': {'b': '118206.000000000...
2025-07-16 21:29:45,247 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:47,494 - DEBUG - app.firebase_stream - Firebase listener triggered (70). Event Type: patch, Path: /. Timestamp: 1752726587.494059
2025-07-16 21:29:47,494 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0433000000'}, 'XAGUSD': {'b': '38.0070000000', 'o': '37.9990000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9740000000'}, 'GBPAUD': {'b': '2.0651200000',
2025-07-16 21:29:47,494 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 69. Data preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0433000000'}, 'XAGUSD': {'b': '38.0070000000', 'o': '37.9990000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9740000000'}, 'GBPAUD': {'b': '2.0651200000',...
2025-07-16 21:29:47,494 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:49,814 - DEBUG - app.firebase_stream - Firebase listener triggered (71). Event Type: patch, Path: /. Timestamp: 1752726589.814089
2025-07-16 21:29:49,814 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0495000000', 'o': '13.0440000000'}, 'XAGUSD': {'b': '38.0100000000', 'o': '38.0030000000'}, 'NZDJPY': {'b': '87.9820000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0651300000',
2025-07-16 21:29:49,814 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 70. Data preview: {'GBPSEK': {'b': '13.0495000000', 'o': '13.0440000000'}, 'XAGUSD': {'b': '38.0100000000', 'o': '38.0030000000'}, 'NZDJPY': {'b': '87.9820000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0651300000',...
2025-07-16 21:29:49,814 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:52,101 - DEBUG - app.firebase_stream - Firebase listener triggered (72). Event Type: patch, Path: /. Timestamp: 1752726592.1013093
2025-07-16 21:29:52,101 - DEBUG - app.firebase_stream - Prepared batch update for 13 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0100000000', 'o': '38.0010000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0651200000', 'o': '2.0649400000'}, 'USDJPY': {'b': '148.5850000000',
2025-07-16 21:29:52,101 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 71. Data preview: {'XAGUSD': {'b': '38.0100000000', 'o': '38.0010000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0651200000', 'o': '2.0649400000'}, 'USDJPY': {'b': '148.5850000000',...
2025-07-16 21:29:52,102 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:54,463 - DEBUG - app.firebase_stream - Firebase listener triggered (73). Event Type: patch, Path: /. Timestamp: 1752726594.463909
2025-07-16 21:29:54,464 - DEBUG - app.firebase_stream - Prepared batch update for 19 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0100000000', 'o': '38.0030000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649400000'}, 'BTCUSD': {'b': '118218.200000000
2025-07-16 21:29:54,464 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 72. Data preview: {'XAGUSD': {'b': '38.0100000000', 'o': '38.0030000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649400000'}, 'BTCUSD': {'b': '118218.200000000...
2025-07-16 21:29:54,464 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:57,002 - DEBUG - app.firebase_stream - Firebase listener triggered (74). Event Type: patch, Path: /. Timestamp: 1752726597.0027254
2025-07-16 21:29:57,003 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0130000000', 'o': '38.0060000000'}, 'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0651100000', 'o': '2.0649400000'}, 'BTCUSD': {'b': '118225.000000000
2025-07-16 21:29:57,003 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 73. Data preview: {'XAGUSD': {'b': '38.0130000000', 'o': '38.0060000000'}, 'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0651100000', 'o': '2.0649400000'}, 'BTCUSD': {'b': '118225.000000000...
2025-07-16 21:29:57,003 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:29:59,275 - DEBUG - app.firebase_stream - Firebase listener triggered (75). Event Type: patch, Path: /. Timestamp: 1752726599.2751381
2025-07-16 21:29:59,275 - DEBUG - app.firebase_stream - Prepared batch update for 19 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9810000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0651200000', 'o': '2.0649400000'}, 'USDJPY': {'b': '148.5840000000', 'o': '148.5770000000'}, 'EURNZD': {'b': '1.9622700000',
2025-07-16 21:29:59,275 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 74. Data preview: {'NZDJPY': {'b': '87.9810000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0651200000', 'o': '2.0649400000'}, 'USDJPY': {'b': '148.5840000000', 'o': '148.5770000000'}, 'EURNZD': {'b': '1.9622700000',...
2025-07-16 21:29:59,275 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:01,632 - DEBUG - app.firebase_stream - Firebase listener triggered (76). Event Type: patch, Path: /. Timestamp: 1752726601.632906
2025-07-16 21:30:01,633 - DEBUG - app.firebase_stream - Prepared batch update for 18 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0651300000', 'o': '2.0649400000'}, 'USDJPY': {'b': '148.5830000000', 'o': '148.5780000000'}, 'EURNZD': {'b': '1.9622500000',
2025-07-16 21:30:01,633 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 75. Data preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0651300000', 'o': '2.0649400000'}, 'USDJPY': {'b': '148.5830000000', 'o': '148.5780000000'}, 'EURNZD': {'b': '1.9622500000',...
2025-07-16 21:30:01,633 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:03,885 - DEBUG - app.firebase_stream - Firebase listener triggered (77). Event Type: patch, Path: /. Timestamp: 1752726603.8853683
2025-07-16 21:30:03,885 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0497000000', 'o': '13.0442000000'}, 'GBPAUD': {'b': '2.0652000000', 'o': '2.0651000000'}, 'BTCUSD': {'b': '118232.3400000000', 'o': '118232.3400000000'}, 'USDJPY': {'b': '148.5860
2025-07-16 21:30:03,885 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 76. Data preview: {'GBPSEK': {'b': '13.0497000000', 'o': '13.0442000000'}, 'GBPAUD': {'b': '2.0652000000', 'o': '2.0651000000'}, 'BTCUSD': {'b': '118232.3400000000', 'o': '118232.3400000000'}, 'USDJPY': {'b': '148.5860...
2025-07-16 21:30:03,885 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:06,152 - DEBUG - app.firebase_stream - Firebase listener triggered (78). Event Type: patch, Path: /. Timestamp: 1752726606.1519651
2025-07-16 21:30:06,152 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0652100000', 'o': '2.0650700000'}, 'BTCUSD': {'b': '118247.2000000000', 'o': '118247.1000000000'}, 'USDJPY': {'b': '148.5820
2025-07-16 21:30:06,152 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 77. Data preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0652100000', 'o': '2.0650700000'}, 'BTCUSD': {'b': '118247.2000000000', 'o': '118247.1000000000'}, 'USDJPY': {'b': '148.5820...
2025-07-16 21:30:06,153 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:06,165 - INFO - app - [AUTO-CUTOFF] Starting update_all_users_dynamic_portfolio job...
2025-07-16 21:30:06,165 - ERROR - app - [AUTO-CUTOFF] Cannot update dynamic portfolios - Redis client not available
2025-07-16 21:30:08,495 - DEBUG - app.firebase_stream - Firebase listener triggered (79). Event Type: patch, Path: /. Timestamp: 1752726608.4952018
2025-07-16 21:30:08,498 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0651300000', 'o': '2.0649500000'}, 'USDJPY': {'b': '148.5830000000', 'o': '148.5780000000'}, 'EURNZD': {'b': '1.9622900000',
2025-07-16 21:30:08,498 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 78. Data preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0651300000', 'o': '2.0649500000'}, 'USDJPY': {'b': '148.5830000000', 'o': '148.5780000000'}, 'EURNZD': {'b': '1.9622900000',...
2025-07-16 21:30:08,498 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:10,847 - DEBUG - app.firebase_stream - Firebase listener triggered (80). Event Type: patch, Path: /. Timestamp: 1752726610.8476024
2025-07-16 21:30:10,847 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9790000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0651300000', 'o': '2.0650700000'}, 'BTCUSD': {'b': '118250.0000000000', 'o': '118249.9000000000'}, 'USDJPY': {'b': '148.5860
2025-07-16 21:30:10,848 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 79. Data preview: {'NZDJPY': {'b': '87.9790000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0651300000', 'o': '2.0650700000'}, 'BTCUSD': {'b': '118250.0000000000', 'o': '118249.9000000000'}, 'USDJPY': {'b': '148.5860...
2025-07-16 21:30:10,848 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:13,102 - DEBUG - app.firebase_stream - Firebase listener triggered (81). Event Type: patch, Path: /. Timestamp: 1752726613.1023462
2025-07-16 21:30:13,102 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9690000000'}, 'GBPAUD': {'b': '2.0652400000', 'o': '2.0650700000'}, 'BTCUSD': {'b': '118259.1000000000', 'o': '118259.0000000000'}, 'USDCNH': {'b': '7.182100
2025-07-16 21:30:13,103 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 81. Data preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9690000000'}, 'GBPAUD': {'b': '2.0652400000', 'o': '2.0650700000'}, 'BTCUSD': {'b': '118259.1000000000', 'o': '118259.0000000000'}, 'USDCNH': {'b': '7.182100...
2025-07-16 21:30:13,103 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:15,404 - DEBUG - app.firebase_stream - Firebase listener triggered (82). Event Type: patch, Path: /. Timestamp: 1752726615.4049056
2025-07-16 21:30:15,405 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9790000000', 'o': '87.9690000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0650700000'}, 'BTCUSD': {'b': '118240.6000000000', 'o': '118240.5000000000'}, 'CADCHF': {'b': '0.585250
2025-07-16 21:30:15,405 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 81. Data preview: {'NZDJPY': {'b': '87.9790000000', 'o': '87.9690000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0650700000'}, 'BTCUSD': {'b': '118240.6000000000', 'o': '118240.5000000000'}, 'CADCHF': {'b': '0.585250...
2025-07-16 21:30:15,405 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:17,711 - DEBUG - app.firebase_stream - Firebase listener triggered (83). Event Type: patch, Path: /. Timestamp: 1752726617.7117646
2025-07-16 21:30:17,711 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9770000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0650700000'}, 'BTCUSD': {'b': '118243.1000000000', 'o': '118243.0000000000'}, 'USDJPY': {'b': '148.5830
2025-07-16 21:30:17,712 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 82. Data preview: {'NZDJPY': {'b': '87.9770000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0650700000'}, 'BTCUSD': {'b': '118243.1000000000', 'o': '118243.0000000000'}, 'USDJPY': {'b': '148.5830...
2025-07-16 21:30:17,712 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:20,008 - DEBUG - app.firebase_stream - Firebase listener triggered (84). Event Type: patch, Path: /. Timestamp: 1752726620.0082426
2025-07-16 21:30:20,008 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9770000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0650900000'}, 'CADCHF': {'b': '0.5852700000', 'o': '0.5852500000'}, 'EURNZD': {'b': '1.9623300000', 'o'
2025-07-16 21:30:20,008 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 83. Data preview: {'NZDJPY': {'b': '87.9770000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0650900000'}, 'CADCHF': {'b': '0.5852700000', 'o': '0.5852500000'}, 'EURNZD': {'b': '1.9623300000', 'o'...
2025-07-16 21:30:20,008 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:22,316 - DEBUG - app.firebase_stream - Firebase listener triggered (85). Event Type: patch, Path: /. Timestamp: 1752726622.3162687
2025-07-16 21:30:22,316 - DEBUG - app.firebase_stream - Prepared batch update for 17 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9760000000', 'o': '87.9670000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0651000000'}, 'USDJPY': {'b': '148.5820000000', 'o': '148.5760000000'}, 'CADCHF': {'b': '0.5852600000',
2025-07-16 21:30:22,316 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 84. Data preview: {'NZDJPY': {'b': '87.9760000000', 'o': '87.9670000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0651000000'}, 'USDJPY': {'b': '148.5820000000', 'o': '148.5760000000'}, 'CADCHF': {'b': '0.5852600000',...
2025-07-16 21:30:22,316 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:24,668 - DEBUG - app.firebase_stream - Firebase listener triggered (86). Event Type: patch, Path: /. Timestamp: 1752726624.668858
2025-07-16 21:30:24,669 - DEBUG - app.firebase_stream - Prepared batch update for 17 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9770000000', 'o': '87.9690000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0651000000'}, 'BTCUSD': {'b': '118250.8000000000', 'o': '118250.7000000000'}, 'USDJPY': {'b': '148.5820
2025-07-16 21:30:24,669 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 85. Data preview: {'NZDJPY': {'b': '87.9770000000', 'o': '87.9690000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0651000000'}, 'BTCUSD': {'b': '118250.8000000000', 'o': '118250.7000000000'}, 'USDJPY': {'b': '148.5820...
2025-07-16 21:30:24,669 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:26,916 - DEBUG - app.firebase_stream - Firebase listener triggered (87). Event Type: patch, Path: /. Timestamp: 1752726626.9168537
2025-07-16 21:30:26,917 - DEBUG - app.firebase_stream - Prepared batch update for 16 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9760000000', 'o': '87.9690000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0651100000'}, 'EURNZD': {'b': '1.9623500000', 'o': '1.9621500000'}, 'USDSGD': {'b': '1.2856600000', 'o'
2025-07-16 21:30:26,917 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 86. Data preview: {'NZDJPY': {'b': '87.9760000000', 'o': '87.9690000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0651100000'}, 'EURNZD': {'b': '1.9623500000', 'o': '1.9621500000'}, 'USDSGD': {'b': '1.2856600000', 'o'...
2025-07-16 21:30:26,917 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:29,183 - DEBUG - app.firebase_stream - Firebase listener triggered (88). Event Type: patch, Path: /. Timestamp: 1752726629.18304
2025-07-16 21:30:29,183 - DEBUG - app.firebase_stream - Prepared batch update for 12 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9760000000', 'o': '87.9680000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0650900000'}, 'BTCUSD': {'b': '118239.6000000000', 'o': '118239.5000000000'}, 'SGDJPY': {'b': '115.5790
2025-07-16 21:30:29,183 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 88. Data preview: {'NZDJPY': {'b': '87.9760000000', 'o': '87.9680000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0650900000'}, 'BTCUSD': {'b': '118239.6000000000', 'o': '118239.5000000000'}, 'SGDJPY': {'b': '115.5790...
2025-07-16 21:30:29,184 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:31,530 - DEBUG - app.firebase_stream - Firebase listener triggered (89). Event Type: patch, Path: /. Timestamp: 1752726631.530432
2025-07-16 21:30:31,530 - DEBUG - app.firebase_stream - Prepared batch update for 16 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9760000000', 'o': '87.9670000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0651000000'}, 'USDJPY': {'b': '148.5800000000', 'o': '148.5770000000'}, 'CADCHF': {'b': '0.5852500000',
2025-07-16 21:30:31,531 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 88. Data preview: {'NZDJPY': {'b': '87.9760000000', 'o': '87.9670000000'}, 'GBPAUD': {'b': '2.0652600000', 'o': '2.0651000000'}, 'USDJPY': {'b': '148.5800000000', 'o': '148.5770000000'}, 'CADCHF': {'b': '0.5852500000',...
2025-07-16 21:30:31,531 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:33,781 - DEBUG - app.firebase_stream - Firebase listener triggered (90). Event Type: patch, Path: /. Timestamp: 1752726633.7815068
2025-07-16 21:30:33,781 - DEBUG - app.firebase_stream - Prepared batch update for 17 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0443000000'}, 'XAGUSD': {'b': '38.0140000000', 'o': '38.0070000000'}, 'NZDJPY': {'b': '87.9760000000', 'o': '87.9690000000'}, 'GBPAUD': {'b': '2.0652600000',
2025-07-16 21:30:33,782 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 90. Data preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0443000000'}, 'XAGUSD': {'b': '38.0140000000', 'o': '38.0070000000'}, 'NZDJPY': {'b': '87.9760000000', 'o': '87.9690000000'}, 'GBPAUD': {'b': '2.0652600000',...
2025-07-16 21:30:33,782 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:36,137 - DEBUG - app.firebase_stream - Firebase listener triggered (91). Event Type: patch, Path: /. Timestamp: 1752726636.1371367
2025-07-16 21:30:36,137 - DEBUG - app.firebase_stream - Prepared batch update for 17 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9770000000', 'o': '87.9690000000'}, 'USDJPY': {'b': '148.5820000000', 'o': '148.5770000000'}, 'CADCHF': {'b': '0.5852600000', 'o': '0.5852400000'}, 'SGDJPY': {'b': '115.5820000000
2025-07-16 21:30:36,137 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 91. Data preview: {'NZDJPY': {'b': '87.9770000000', 'o': '87.9690000000'}, 'USDJPY': {'b': '148.5820000000', 'o': '148.5770000000'}, 'CADCHF': {'b': '0.5852600000', 'o': '0.5852400000'}, 'SGDJPY': {'b': '115.5820000000...
2025-07-16 21:30:36,138 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:38,386 - DEBUG - app.firebase_stream - Firebase listener triggered (92). Event Type: patch, Path: /. Timestamp: 1752726638.3867953
2025-07-16 21:30:38,386 - DEBUG - app.firebase_stream - Prepared batch update for 18 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0160000000', 'o': '38.0090000000'}, 'NZDJPY': {'b': '87.9760000000', 'o': '87.9680000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0651200000'}, 'USDJPY': {'b': '148.5800000000',
2025-07-16 21:30:38,387 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 91. Data preview: {'XAGUSD': {'b': '38.0160000000', 'o': '38.0090000000'}, 'NZDJPY': {'b': '87.9760000000', 'o': '87.9680000000'}, 'GBPAUD': {'b': '2.0652500000', 'o': '2.0651200000'}, 'USDJPY': {'b': '148.5800000000',...
2025-07-16 21:30:38,387 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:40,755 - DEBUG - app.firebase_stream - Firebase listener triggered (93). Event Type: patch, Path: /. Timestamp: 1752726640.7553003
2025-07-16 21:30:40,755 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0500000000', 'o': '13.0436000000'}, 'NZDJPY': {'b': '87.9750000000', 'o': '87.9690000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0651200000'}, 'USDJPY': {'b': '148.5750000000',
2025-07-16 21:30:40,755 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 92. Data preview: {'GBPSEK': {'b': '13.0500000000', 'o': '13.0436000000'}, 'NZDJPY': {'b': '87.9750000000', 'o': '87.9690000000'}, 'GBPAUD': {'b': '2.0652700000', 'o': '2.0651200000'}, 'USDJPY': {'b': '148.5750000000',...
2025-07-16 21:30:40,756 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:43,007 - DEBUG - app.firebase_stream - Firebase listener triggered (94). Event Type: patch, Path: /. Timestamp: 1752726643.0073202
2025-07-16 21:30:43,007 - DEBUG - app.firebase_stream - Prepared batch update for 35 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0497000000', 'o': '13.0442000000'}, 'XAGUSD': {'b': '38.0180000000', 'o': '38.0110000000'}, 'NZDJPY': {'b': '87.9790000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0651900000',
2025-07-16 21:30:43,008 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 94. Data preview: {'GBPSEK': {'b': '13.0497000000', 'o': '13.0442000000'}, 'XAGUSD': {'b': '38.0180000000', 'o': '38.0110000000'}, 'NZDJPY': {'b': '87.9790000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0651900000',...
2025-07-16 21:30:43,008 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:45,358 - DEBUG - app.firebase_stream - Firebase listener triggered (95). Event Type: patch, Path: /. Timestamp: 1752726645.3586466
2025-07-16 21:30:45,358 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9780000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0652300000', 'o': '2.0650400000'}, 'CADCHF': {'b': '0.5852500000', 'o': '0.5852500000'}, 'EURZAR': {'b': '20.7670800000', 'o
2025-07-16 21:30:45,359 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 94. Data preview: {'NZDJPY': {'b': '87.9780000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0652300000', 'o': '2.0650400000'}, 'CADCHF': {'b': '0.5852500000', 'o': '0.5852500000'}, 'EURZAR': {'b': '20.7670800000', 'o...
2025-07-16 21:30:45,359 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:47,613 - DEBUG - app.firebase_stream - Firebase listener triggered (96). Event Type: patch, Path: /. Timestamp: 1752726647.6132634
2025-07-16 21:30:47,613 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0444000000'}, 'XAGUSD': {'b': '38.0190000000', 'o': '38.0120000000'}, 'NZDJPY': {'b': '87.9790000000', 'o': '87.9690000000'}, 'GBPAUD': {'b': '2.0652200000',
2025-07-16 21:30:47,614 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 95. Data preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0444000000'}, 'XAGUSD': {'b': '38.0190000000', 'o': '38.0120000000'}, 'NZDJPY': {'b': '87.9790000000', 'o': '87.9690000000'}, 'GBPAUD': {'b': '2.0652200000',...
2025-07-16 21:30:47,614 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:49,967 - DEBUG - app.firebase_stream - Firebase listener triggered (97). Event Type: patch, Path: /. Timestamp: 1752726649.9670072
2025-07-16 21:30:49,967 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9780000000', 'o': '87.9690000000'}, 'GBPAUD': {'b': '2.0652000000', 'o': '2.0650200000'}, 'USDJPY': {'b': '148.5710000000', 'o': '148.5670000000'}, 'USDCNH': {'b': '7.1820400000',
2025-07-16 21:30:49,967 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 97. Data preview: {'NZDJPY': {'b': '87.9780000000', 'o': '87.9690000000'}, 'GBPAUD': {'b': '2.0652000000', 'o': '2.0650200000'}, 'USDJPY': {'b': '148.5710000000', 'o': '148.5670000000'}, 'USDCNH': {'b': '7.1820400000',...
2025-07-16 21:30:49,968 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:52,218 - DEBUG - app.firebase_stream - Firebase listener triggered (98). Event Type: patch, Path: /. Timestamp: 1752726652.2180548
2025-07-16 21:30:52,218 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0500000000', 'o': '13.0446000000'}, 'NZDJPY': {'b': '87.9760000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0651900000', 'o': '2.0650000000'}, 'USDJPY': {'b': '148.5710000000',
2025-07-16 21:30:52,218 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 97. Data preview: {'GBPSEK': {'b': '13.0500000000', 'o': '13.0446000000'}, 'NZDJPY': {'b': '87.9760000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0651900000', 'o': '2.0650000000'}, 'USDJPY': {'b': '148.5710000000',...
2025-07-16 21:30:52,218 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:54,477 - DEBUG - app.firebase_stream - Firebase listener triggered (99). Event Type: patch, Path: /. Timestamp: 1752726654.4779632
2025-07-16 21:30:54,478 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0445000000'}, 'NZDJPY': {'b': '87.9790000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0651600000', 'o': '2.0650200000'}, 'USDJPY': {'b': '148.5700000000',
2025-07-16 21:30:54,478 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 98. Data preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0445000000'}, 'NZDJPY': {'b': '87.9790000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0651600000', 'o': '2.0650200000'}, 'USDJPY': {'b': '148.5700000000',...
2025-07-16 21:30:54,478 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:56,779 - DEBUG - app.firebase_stream - Firebase listener triggered (100). Event Type: patch, Path: /. Timestamp: 1752726656.7795284
2025-07-16 21:30:56,779 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9780000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0651600000', 'o': '2.0650300000'}, 'USDCNH': {'b': '7.1820000000', 'o': '7.1819700000'}, 'CADCHF': {'b': '0.5852400000', 'o'
2025-07-16 21:30:56,780 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 99. Data preview: {'NZDJPY': {'b': '87.9780000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0651600000', 'o': '2.0650300000'}, 'USDCNH': {'b': '7.1820000000', 'o': '7.1819700000'}, 'CADCHF': {'b': '0.5852400000', 'o'...
2025-07-16 21:30:56,780 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:30:57,159 - INFO - app - Application shutdown initiated
2025-07-16 21:30:57,159 - INFO - app - Scheduler shutdown completed
2025-07-16 21:30:57,160 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-07-16 21:30:59,070 - INFO - app.firebase_stream - Firebase listener closed.
2025-07-16 21:30:59,070 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-07-16 21:30:59,070 - INFO - app - Application shutdown completed
2025-07-16 21:31:08,808 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-16 21:31:08,829 - INFO - app.core.config - .env file loaded successfully.
2025-07-16 21:31:08,846 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-16 21:31:08,846 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-16 21:31:09,089 - INFO - app - Application starting up - Trading system initialized
2025-07-16 21:31:09,089 - INFO - app - SL/TP Epsilon accuracy configured: 0.00001
2025-07-16 21:31:09,089 - INFO - app - Environment: DEVELOPMENT
2025-07-16 21:31:09,135 - INFO - app - Application startup initiated
2025-07-16 21:31:09,135 - INFO - app - Initializing core services...
2025-07-16 21:31:09,199 - INFO - app - Firebase initialized
2025-07-16 21:31:09,199 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-07-16 21:31:09,215 - INFO - app - Redis initialized
2025-07-16 21:31:09,218 - INFO - app - [SWAP] daily_swap_charge_job triggered
2025-07-16 21:31:09,218 - INFO - app - [AUTO-CUTOFF] Scheduled update_all_users_dynamic_portfolio job to run every 1 minute.
2025-07-16 21:31:09,219 - INFO - app - Scheduler initialized
2025-07-16 21:31:09,221 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-16 21:31:09,221 - DEBUG - app.firebase_stream - Successfully got running event loop in process_firebase_events task.
2025-07-16 21:31:09,221 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-07-16 21:31:10,340 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-16 21:31:10,351 - DEBUG - app.firebase_stream - Firebase listener triggered (1). Event Type: put, Path: /. Timestamp: 1752726670.3515284
2025-07-16 21:31:10,352 - DEBUG - app.firebase_stream - Prepared batch update for 48 symbols from root path for queue. Preview: {'AUDCAD': {'b': '0.8894900000', 'o': '0.8894900000'}, 'AUDCHF': {'b': '0.5205800000', 'o': '0.5205200000'}, 'AUDJPY': {'b': '96.3350000000', 'o': '96.3300000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'
2025-07-16 21:31:10,353 - INFO - app - Starting stale cache cleanup task
2025-07-16 21:31:10,353 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'AUDCAD': {'b': '0.8894900000', 'o': '0.8894900000'}, 'AUDCHF': {'b': '0.5205800000', 'o': '0.5205200000'}, 'AUDJPY': {'b': '96.3350000000', 'o': '96.3300000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'...
2025-07-16 21:31:10,353 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type put at path /.
2025-07-16 21:31:10,391 - INFO - app - Cleaned up pending order stream for new trigger price format
2025-07-16 21:31:10,391 - INFO - app - Background tasks initialized
2025-07-16 21:31:10,639 - DEBUG - app.firebase_stream - Firebase listener triggered (2). Event Type: patch, Path: /. Timestamp: 1752726670.6398456
2025-07-16 21:31:10,640 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0444000000'}, 'NZDJPY': {'b': '87.9780000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0650800000', 'o': '2.0649100000'}, 'USDCNH': {'b': '7.1818900000', '
2025-07-16 21:31:10,640 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0444000000'}, 'NZDJPY': {'b': '87.9780000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0650800000', 'o': '2.0649100000'}, 'USDCNH': {'b': '7.1818900000', '...
2025-07-16 21:31:10,640 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:10,996 - INFO - app - Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-07-16 21:31:10,996 - INFO - app - Application startup completed successfully
2025-07-16 21:31:10,997 - INFO - app - Starting cache validation task
2025-07-16 21:31:11,001 - INFO - app - Starting Barclays pending order margin checker task.
2025-07-16 21:31:11,001 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:11,004 - INFO - app - Starting auto-cutoff order monitoring task.
2025-07-16 21:31:11,091 - INFO - app - Found 0 static orders cache entries to check
2025-07-16 21:31:11,092 - INFO - app - Completed stale cache cleanup task
2025-07-16 21:31:11,099 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:11,123 - INFO - app - Validating cache for 30 users
2025-07-16 21:31:11,129 - WARNING - app - User 4: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,139 - WARNING - app - User 5: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,141 - WARNING - app - User 8: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,146 - WARNING - app - User 9: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,151 - WARNING - app - User 10: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,156 - WARNING - app - User 11: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,160 - WARNING - app - User 12: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,165 - WARNING - app - User 13: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,169 - WARNING - app - User 14: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,173 - WARNING - app - User 16: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,177 - WARNING - app - User 17: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,182 - WARNING - app - User 18: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,186 - WARNING - app - User 19: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,190 - WARNING - app - User 20: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,194 - WARNING - app - User 21: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,198 - WARNING - app - User 22: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,203 - WARNING - app - User 23: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,207 - WARNING - app - User 25: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,211 - WARNING - app - User 26: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,216 - WARNING - app - User 1: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,223 - WARNING - app - User 2: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,227 - WARNING - app - User 3: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,232 - WARNING - app - User 4: Missing static orders cache, refreshing...
2025-07-16 21:31:11,241 - WARNING - app - User 5: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,245 - WARNING - app - User 6: Missing balance/margin cache, refreshing...
2025-07-16 21:31:11,251 - WARNING - app - User 9: Missing static orders cache, refreshing...
2025-07-16 21:31:11,322 - WARNING - app - User 10: Missing static orders cache, refreshing...
2025-07-16 21:31:11,343 - WARNING - app - User 11: Missing static orders cache, refreshing...
2025-07-16 21:31:11,357 - WARNING - app - User 12: Missing static orders cache, refreshing...
2025-07-16 21:31:11,367 - WARNING - app - User 13: Missing static orders cache, refreshing...
2025-07-16 21:31:11,375 - INFO - app - Cache validation completed
2025-07-16 21:31:12,129 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:12,133 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:13,001 - DEBUG - app.firebase_stream - Firebase listener triggered (3). Event Type: patch, Path: /. Timestamp: 1752726673.0017865
2025-07-16 21:31:13,001 - DEBUG - app.firebase_stream - Prepared batch update for 21 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0445000000'}, 'NZDJPY': {'b': '87.9780000000', 'o': '87.9720000000'}, 'USDCNH': {'b': '7.1819500000', 'o': '7.1818200000'}, 'USDSGD': {'b': '1.2856000000', '
2025-07-16 21:31:13,002 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0445000000'}, 'NZDJPY': {'b': '87.9780000000', 'o': '87.9720000000'}, 'USDCNH': {'b': '7.1819500000', 'o': '7.1818200000'}, 'USDSGD': {'b': '1.2856000000', '...
2025-07-16 21:31:13,002 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:13,136 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:13,140 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:14,156 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:14,160 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:15,174 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:15,177 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:15,251 - DEBUG - app.firebase_stream - Firebase listener triggered (4). Event Type: patch, Path: /. Timestamp: 1752726675.2511113
2025-07-16 21:31:15,251 - DEBUG - app.firebase_stream - Prepared batch update for 21 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9790000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0650300000', 'o': '2.0649200000'}, 'USDCNH': {'b': '7.1819300000', 'o': '7.1817800000'}, 'CADCHF': {'b': '0.5852300000', 'o'
2025-07-16 21:31:15,251 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9790000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0650300000', 'o': '2.0649200000'}, 'USDCNH': {'b': '7.1819300000', 'o': '7.1817800000'}, 'CADCHF': {'b': '0.5852300000', 'o'...
2025-07-16 21:31:15,252 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:16,194 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:16,199 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:17,211 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:17,215 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:17,610 - DEBUG - app.firebase_stream - Firebase listener triggered (5). Event Type: patch, Path: /. Timestamp: 1752726677.610613
2025-07-16 21:31:17,610 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0500000000', 'o': '13.0446000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9740000000'}, 'GBPAUD': {'b': '2.0650600000', 'o': '2.0648700000'}, 'EURNZD': {'b': '1.9620700000', '
2025-07-16 21:31:17,611 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0500000000', 'o': '13.0446000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9740000000'}, 'GBPAUD': {'b': '2.0650600000', 'o': '2.0648700000'}, 'EURNZD': {'b': '1.9620700000', '...
2025-07-16 21:31:17,611 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:18,225 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:18,229 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:19,246 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:19,250 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:19,863 - DEBUG - app.firebase_stream - Firebase listener triggered (6). Event Type: patch, Path: /. Timestamp: 1752726679.8631587
2025-07-16 21:31:19,863 - DEBUG - app.firebase_stream - Prepared batch update for 17 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9790000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0650600000', 'o': '2.0649100000'}, 'USDCNH': {'b': '7.1818900000', 'o': '7.1818100000'}, 'EURNZD': {'b': '1.9620900000', 'o'
2025-07-16 21:31:19,863 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9790000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0650600000', 'o': '2.0649100000'}, 'USDCNH': {'b': '7.1818900000', 'o': '7.1818100000'}, 'EURNZD': {'b': '1.9620900000', 'o'...
2025-07-16 21:31:19,864 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:20,253 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:20,256 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:21,271 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:21,272 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:22,132 - DEBUG - app.firebase_stream - Firebase listener triggered (7). Event Type: patch, Path: /. Timestamp: 1752726682.132354
2025-07-16 21:31:22,132 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9830000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0650700000', 'o': '2.0648900000'}, 'USDJPY': {'b': '148.5600000000', 'o': '148.5550000000'}, 'CADCHF': {'b': '0.5852500000',
2025-07-16 21:31:22,132 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9830000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0650700000', 'o': '2.0648900000'}, 'USDJPY': {'b': '148.5600000000', 'o': '148.5550000000'}, 'CADCHF': {'b': '0.5852500000',...
2025-07-16 21:31:22,133 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:22,278 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:22,280 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:23,284 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:23,287 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:24,292 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:24,296 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:24,470 - DEBUG - app.firebase_stream - Firebase listener triggered (8). Event Type: patch, Path: /. Timestamp: 1752726684.470076
2025-07-16 21:31:24,470 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0509000000', 'o': '13.0441000000'}, 'GBPAUD': {'b': '2.0650800000', 'o': '2.0648900000'}, 'AUDJPY': {'b': '96.3370000000', 'o': '96.3320000000'}, 'EURSEK': {'b': '11.3231100000', 
2025-07-16 21:31:24,471 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0509000000', 'o': '13.0441000000'}, 'GBPAUD': {'b': '2.0650800000', 'o': '2.0648900000'}, 'AUDJPY': {'b': '96.3370000000', 'o': '96.3320000000'}, 'EURSEK': {'b': '11.3231100000', ...
2025-07-16 21:31:24,472 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:25,306 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:25,311 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:25,998 - INFO - app - Starting stale cache cleanup task
2025-07-16 21:31:26,001 - INFO - app - Found 6 static orders cache entries to check
2025-07-16 21:31:26,002 - WARNING - app - Found stale cache entry for user 13, will be refreshed on next access
2025-07-16 21:31:26,003 - WARNING - app - Found stale cache entry for user 4, will be refreshed on next access
2025-07-16 21:31:26,004 - WARNING - app - Found stale cache entry for user 12, will be refreshed on next access
2025-07-16 21:31:26,005 - INFO - app - Completed stale cache cleanup task
2025-07-16 21:31:26,317 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:26,323 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:26,763 - DEBUG - app.firebase_stream - Firebase listener triggered (9). Event Type: patch, Path: /. Timestamp: 1752726686.763361
2025-07-16 21:31:26,763 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPAUD': {'b': '2.0650300000', 'o': '2.0648600000'}, 'CADCHF': {'b': '0.5852500000', 'o': '0.5852200000'}, 'EURNZD': {'b': '1.9620600000', 'o': '1.9618600000'}, 'USDSGD': {'b': '1.2855700000', 'o': 
2025-07-16 21:31:26,763 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPAUD': {'b': '2.0650300000', 'o': '2.0648600000'}, 'CADCHF': {'b': '0.5852500000', 'o': '0.5852200000'}, 'EURNZD': {'b': '1.9620600000', 'o': '1.9618600000'}, 'USDSGD': {'b': '1.2855700000', 'o': ...
2025-07-16 21:31:26,764 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:27,333 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:27,335 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:28,343 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:28,347 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:29,074 - DEBUG - app.firebase_stream - Firebase listener triggered (10). Event Type: patch, Path: /. Timestamp: 1752726689.0745828
2025-07-16 21:31:29,074 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0503000000', 'o': '13.0438000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0651300000', 'o': '2.0649400000'}, 'CADCHF': {'b': '0.5852300000', '
2025-07-16 21:31:29,074 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0503000000', 'o': '13.0438000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0651300000', 'o': '2.0649400000'}, 'CADCHF': {'b': '0.5852300000', '...
2025-07-16 21:31:29,075 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:29,351 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:29,352 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:30,357 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:30,360 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:31,374 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:31,379 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:31,431 - DEBUG - app.firebase_stream - Firebase listener triggered (11). Event Type: patch, Path: /. Timestamp: 1752726691.4317064
2025-07-16 21:31:31,432 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0504000000', 'o': '13.0439000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649400000'}, 'USDJPY': {'b': '148.5580000000', 'o': '148.5560000000'}, 'EURNZD': {'b': '1.9620700000',
2025-07-16 21:31:31,432 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0504000000', 'o': '13.0439000000'}, 'GBPAUD': {'b': '2.0651000000', 'o': '2.0649400000'}, 'USDJPY': {'b': '148.5580000000', 'o': '148.5560000000'}, 'EURNZD': {'b': '1.9620700000',...
2025-07-16 21:31:31,432 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:32,382 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:32,386 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:33,392 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:33,396 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:33,684 - DEBUG - app.firebase_stream - Firebase listener triggered (12). Event Type: patch, Path: /. Timestamp: 1752726693.6847286
2025-07-16 21:31:33,684 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0170000000', 'o': '38.0100000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0650100000', 'o': '2.0649200000'}, 'CADCHF': {'b': '0.5852300000', '
2025-07-16 21:31:33,685 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0170000000', 'o': '38.0100000000'}, 'NZDJPY': {'b': '87.9810000000', 'o': '87.9730000000'}, 'GBPAUD': {'b': '2.0650100000', 'o': '2.0649200000'}, 'CADCHF': {'b': '0.5852300000', '...
2025-07-16 21:31:33,685 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:34,401 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:34,405 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:35,410 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:35,412 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:36,041 - DEBUG - app.firebase_stream - Firebase listener triggered (13). Event Type: patch, Path: /. Timestamp: 1752726696.0415504
2025-07-16 21:31:36,041 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0650000000', 'o': '2.0648600000'}, 'USDJPY': {'b': '148.5570000000', 'o': '148.5540000000'}, 'USDCNH': {'b': '7.1819300000',
2025-07-16 21:31:36,042 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0650000000', 'o': '2.0648600000'}, 'USDJPY': {'b': '148.5570000000', 'o': '148.5540000000'}, 'USDCNH': {'b': '7.1819300000',...
2025-07-16 21:31:36,042 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:36,425 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:36,428 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:37,431 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:37,433 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:38,402 - DEBUG - app.firebase_stream - Firebase listener triggered (14). Event Type: patch, Path: /. Timestamp: 1752726698.4024568
2025-07-16 21:31:38,402 - DEBUG - app.firebase_stream - Prepared batch update for 21 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9810000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0649900000', 'o': '2.0648300000'}, 'USDJPY': {'b': '148.5570000000', 'o': '148.5510000000'}, 'USDSGD': {'b': '1.2855600000',
2025-07-16 21:31:38,403 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9810000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0649900000', 'o': '2.0648300000'}, 'USDJPY': {'b': '148.5570000000', 'o': '148.5510000000'}, 'USDSGD': {'b': '1.2855600000',...
2025-07-16 21:31:38,403 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:38,441 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:38,444 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:39,449 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:39,453 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:40,458 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:40,463 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:40,649 - DEBUG - app.firebase_stream - Firebase listener triggered (15). Event Type: patch, Path: /. Timestamp: 1752726700.6490119
2025-07-16 21:31:40,649 - DEBUG - app.firebase_stream - Prepared batch update for 21 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9790000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0651300000', 'o': '2.0649500000'}, 'BTCUSD': {'b': '118252.2000000000', 'o': '118252.1000000000'}, 'USDJPY': {'b': '148.5560
2025-07-16 21:31:40,649 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9790000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0651300000', 'o': '2.0649500000'}, 'BTCUSD': {'b': '118252.2000000000', 'o': '118252.1000000000'}, 'USDJPY': {'b': '148.5560...
2025-07-16 21:31:40,650 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:41,467 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:41,469 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:42,482 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:42,485 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:43,011 - DEBUG - app.firebase_stream - Firebase listener triggered (16). Event Type: patch, Path: /. Timestamp: 1752726703.0110369
2025-07-16 21:31:43,011 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0650100000', 'o': '2.0649100000'}, 'BTCUSD': {'b': '118239.6000000000', 'o': '118239.5000000000'}, 'USDJPY': {'b': '148.5560
2025-07-16 21:31:43,011 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9800000000', 'o': '87.9710000000'}, 'GBPAUD': {'b': '2.0650100000', 'o': '2.0649100000'}, 'BTCUSD': {'b': '118239.6000000000', 'o': '118239.5000000000'}, 'USDJPY': {'b': '148.5560...
2025-07-16 21:31:43,011 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:43,496 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:43,501 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:44,516 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:44,521 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:45,260 - DEBUG - app.firebase_stream - Firebase listener triggered (17). Event Type: patch, Path: /. Timestamp: 1752726705.260355
2025-07-16 21:31:45,260 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'GBPAUD': {'b': '2.0649900000', 'o': '2.0648400000'}, 'USDCNH': {'b': '7.1818900000', 'o': '7.1817400000'}, 'EURNZD': {'b': '1.9620600000', 'o': '1.9618600000'}, 'USDSGD': {'b': '1.2855800000', 'o': 
2025-07-16 21:31:45,261 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPAUD': {'b': '2.0649900000', 'o': '2.0648400000'}, 'USDCNH': {'b': '7.1818900000', 'o': '7.1817400000'}, 'EURNZD': {'b': '1.9620600000', 'o': '1.9618600000'}, 'USDSGD': {'b': '1.2855800000', 'o': ...
2025-07-16 21:31:45,261 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:45,538 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:45,542 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:46,560 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:46,563 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:47,565 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:47,568 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:47,621 - DEBUG - app.firebase_stream - Firebase listener triggered (18). Event Type: patch, Path: /. Timestamp: 1752726707.621752
2025-07-16 21:31:47,622 - DEBUG - app.firebase_stream - Prepared batch update for 36 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0503000000', 'o': '13.0443000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9650000000'}, 'GBPAUD': {'b': '2.0650200000', 'o': '2.0648700000'}, 'USDJPY': {'b': '148.5410000000',
2025-07-16 21:31:47,622 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0503000000', 'o': '13.0443000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9650000000'}, 'GBPAUD': {'b': '2.0650200000', 'o': '2.0648700000'}, 'USDJPY': {'b': '148.5410000000',...
2025-07-16 21:31:47,623 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:48,579 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:48,582 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:49,588 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:49,592 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:49,867 - DEBUG - app.firebase_stream - Firebase listener triggered (19). Event Type: patch, Path: /. Timestamp: 1752726709.8679516
2025-07-16 21:31:49,868 - DEBUG - app.firebase_stream - Prepared batch update for 36 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0494000000', 'o': '13.0440000000'}, 'XAGUSD': {'b': '38.0180000000', 'o': '38.0110000000'}, 'NZDJPY': {'b': '87.9800000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0649800000',
2025-07-16 21:31:49,868 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0494000000', 'o': '13.0440000000'}, 'XAGUSD': {'b': '38.0180000000', 'o': '38.0110000000'}, 'NZDJPY': {'b': '87.9800000000', 'o': '87.9700000000'}, 'GBPAUD': {'b': '2.0649800000',...
2025-07-16 21:31:49,868 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:50,605 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:50,609 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:51,622 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:51,625 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:52,225 - DEBUG - app.firebase_stream - Firebase listener triggered (20). Event Type: patch, Path: /. Timestamp: 1752726712.2256198
2025-07-16 21:31:52,225 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0170000000', 'o': '38.0100000000'}, 'NZDJPY': {'b': '87.9790000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0649600000', 'o': '2.0648300000'}, 'USDJPY': {'b': '148.5560000000',
2025-07-16 21:31:52,226 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0170000000', 'o': '38.0100000000'}, 'NZDJPY': {'b': '87.9790000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0649600000', 'o': '2.0648300000'}, 'USDJPY': {'b': '148.5560000000',...
2025-07-16 21:31:52,226 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:52,641 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:52,645 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:53,651 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:53,655 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:54,581 - DEBUG - app.firebase_stream - Firebase listener triggered (21). Event Type: patch, Path: /. Timestamp: 1752726714.581899
2025-07-16 21:31:54,582 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0495000000', 'o': '13.0441000000'}, 'NZDJPY': {'b': '87.9710000000', 'o': '87.9650000000'}, 'GBPAUD': {'b': '2.0649800000', 'o': '2.0648300000'}, 'USDJPY': {'b': '148.5430000000',
2025-07-16 21:31:54,582 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0495000000', 'o': '13.0441000000'}, 'NZDJPY': {'b': '87.9710000000', 'o': '87.9650000000'}, 'GBPAUD': {'b': '2.0649800000', 'o': '2.0648300000'}, 'USDJPY': {'b': '148.5430000000',...
2025-07-16 21:31:54,582 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:54,669 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:54,673 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:55,684 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:55,687 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:56,695 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:56,698 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:56,832 - DEBUG - app.firebase_stream - Firebase listener triggered (22). Event Type: patch, Path: /. Timestamp: 1752726716.8327699
2025-07-16 21:31:56,832 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0180000000', 'o': '38.0110000000'}, 'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0649600000', 'o': '2.0648300000'}, 'CADCHF': {'b': '0.5852100000', '
2025-07-16 21:31:56,833 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'XAGUSD': {'b': '38.0180000000', 'o': '38.0110000000'}, 'NZDJPY': {'b': '87.9800000000', 'o': '87.9720000000'}, 'GBPAUD': {'b': '2.0649600000', 'o': '2.0648300000'}, 'CADCHF': {'b': '0.5852100000', '...
2025-07-16 21:31:56,833 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:57,709 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:57,713 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:58,726 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:58,730 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:31:59,191 - DEBUG - app.firebase_stream - Firebase listener triggered (23). Event Type: patch, Path: /. Timestamp: 1752726719.1914577
2025-07-16 21:31:59,191 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0491000000', 'o': '13.0437000000'}, 'NZDJPY': {'b': '87.9710000000', 'o': '87.9640000000'}, 'GBPAUD': {'b': '2.0649700000', 'o': '2.0648400000'}, 'USDJPY': {'b': '148.5560000000',
2025-07-16 21:31:59,191 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0491000000', 'o': '13.0437000000'}, 'NZDJPY': {'b': '87.9710000000', 'o': '87.9640000000'}, 'GBPAUD': {'b': '2.0649700000', 'o': '2.0648400000'}, 'USDJPY': {'b': '148.5560000000',...
2025-07-16 21:31:59,191 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:31:59,745 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:31:59,750 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:00,767 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:00,771 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:01,438 - DEBUG - app.firebase_stream - Firebase listener triggered (24). Event Type: patch, Path: /. Timestamp: 1752726721.4380894
2025-07-16 21:32:01,438 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'GBPAUD': {'b': '2.0650100000', 'o': '2.0648700000'}, 'USDJPY': {'b': '148.5420000000', 'o': '148.5370000000'}, 'USDCNH': {'b': '7.1817400000', 'o': '7.1817400000'}, 'EURNZD': {'b': '1.9621600000', '
2025-07-16 21:32:01,438 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPAUD': {'b': '2.0650100000', 'o': '2.0648700000'}, 'USDJPY': {'b': '148.5420000000', 'o': '148.5370000000'}, 'USDCNH': {'b': '7.1817400000', 'o': '7.1817400000'}, 'EURNZD': {'b': '1.9621600000', '...
2025-07-16 21:32:01,438 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:01,778 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:01,782 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:02,792 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:02,794 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:03,792 - DEBUG - app.firebase_stream - Firebase listener triggered (25). Event Type: patch, Path: /. Timestamp: 1752726723.7922308
2025-07-16 21:32:03,792 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0503000000', 'o': '13.0441000000'}, 'NZDJPY': {'b': '87.9710000000', 'o': '87.9650000000'}, 'GBPAUD': {'b': '2.0649700000', 'o': '2.0648300000'}, 'USDJPY': {'b': '148.5430000000',
2025-07-16 21:32:03,792 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0503000000', 'o': '13.0441000000'}, 'NZDJPY': {'b': '87.9710000000', 'o': '87.9650000000'}, 'GBPAUD': {'b': '2.0649700000', 'o': '2.0648300000'}, 'USDJPY': {'b': '148.5430000000',...
2025-07-16 21:32:03,793 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:03,796 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:03,799 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:04,810 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:04,814 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:05,820 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:05,822 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:06,153 - DEBUG - app.firebase_stream - Firebase listener triggered (26). Event Type: patch, Path: /. Timestamp: 1752726726.1534157
2025-07-16 21:32:06,153 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0502000000', 'o': '13.0436000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9630000000'}, 'GBPAUD': {'b': '2.0650200000', 'o': '2.0648600000'}, 'BTCUSD': {'b': '118257.400000000
2025-07-16 21:32:06,153 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0502000000', 'o': '13.0436000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9630000000'}, 'GBPAUD': {'b': '2.0650200000', 'o': '2.0648600000'}, 'BTCUSD': {'b': '118257.400000000...
2025-07-16 21:32:06,153 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:06,830 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:06,834 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:07,844 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:07,847 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:08,402 - DEBUG - app.firebase_stream - Firebase listener triggered (27). Event Type: patch, Path: /. Timestamp: 1752726728.4024425
2025-07-16 21:32:08,402 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0501000000', 'o': '13.0435000000'}, 'NZDJPY': {'b': '87.9710000000', 'o': '87.9640000000'}, 'GBPAUD': {'b': '2.0650000000', 'o': '2.0648700000'}, 'BTCUSD': {'b': '118274.300000000
2025-07-16 21:32:08,402 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0501000000', 'o': '13.0435000000'}, 'NZDJPY': {'b': '87.9710000000', 'o': '87.9640000000'}, 'GBPAUD': {'b': '2.0650000000', 'o': '2.0648700000'}, 'BTCUSD': {'b': '118274.300000000...
2025-07-16 21:32:08,402 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:08,851 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:08,855 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:09,232 - INFO - app - [AUTO-CUTOFF] Starting update_all_users_dynamic_portfolio job...
2025-07-16 21:32:09,232 - INFO - app - [AUTO-CUTOFF] update_all_users_dynamic_portfolio heartbeat: task is alive and running.
2025-07-16 21:32:09,232 - INFO - app - [AUTO-CUTOFF] Fetching all active users (live and demo)...
2025-07-16 21:32:09,242 - INFO - app - [AUTO-CUTOFF] Found 19 live users and 11 demo users.
2025-07-16 21:32:09,242 - INFO - app - [AUTO-CUTOFF] Processing 30 users for dynamic portfolio update...
2025-07-16 21:32:09,242 - INFO - app - [AUTO-CUTOFF] Processing user 4 (live), group: Group B
2025-07-16 21:32:09,242 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 4 (live) from cache/DB...
2025-07-16 21:32:09,254 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:32:09,255 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:32:09,255 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:32:09,261 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F51FF4F30>, <app.database.models.Group object at 0x0000010F51FF5370>, <app.database.models.Group object at 0x0000010F51FF68B0>, <app.database.models.Group object at 0x0000010F51FF4E20>, <app.database.models.Group object at 0x0000010F51FF5BF0>, <app.database.models.Group object at 0x0000010F51FF6470>, <app.database.models.Group object at 0x0000010F51FF7350>, <app.database.models.Group object at 0x0000010F51FF6CF0>, <app.database.models.Group object at 0x0000010F51FF5150>, <app.database.models.Group object at 0x0000010F51FF7240>, <app.database.models.Group object at 0x0000010F51FF6E00>, <app.database.models.Group object at 0x0000010F51FF5F20>, <app.database.models.Group object at 0x0000010F51FF6580>, <app.database.models.Group object at 0x0000010F51FF6250>, <app.database.models.Group object at 0x0000010F51FF6F10>, <app.database.models.Group object at 0x0000010F51FF7570>, <app.database.models.Group object at 0x0000010F51FF56A0>, <app.database.models.Group object at 0x0000010F51FF7020>, <app.database.models.Group object at 0x0000010F51FF6140>, <app.database.models.Group object at 0x0000010F51FF5040>, <app.database.models.Group object at 0x0000010F51FF5D00>, <app.database.models.Group object at 0x0000010F51FF7460>, <app.database.models.Group object at 0x0000010F51FF6AD0>, <app.database.models.Group object at 0x0000010F51FF6360>, <app.database.models.Group object at 0x0000010F51FF5E10>, <app.database.models.Group object at 0x0000010F51FF69C0>, <app.database.models.Group object at 0x0000010F51FF7790>, <app.database.models.Group object at 0x0000010F51FF78A0>, <app.database.models.Group object at 0x0000010F51FF79B0>, <app.database.models.Group object at 0x0000010F51FF7AC0>, <app.database.models.Group object at 0x0000010F51FF7BD0>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF7DF0>, <app.database.models.Group object at 0x0000010F51FF7F00>, <app.database.models.Group object at 0x0000010F51FF4C00>, <app.database.models.Group object at 0x0000010F51FF4D10>, <app.database.models.Group object at 0x0000010F51FCB8A0>, <app.database.models.Group object at 0x0000010F51FC8C00>, <app.database.models.Group object at 0x0000010F51FC9E10>, <app.database.models.Group object at 0x0000010F51FC8D10>, <app.database.models.Group object at 0x0000010F51FC8AF0>, <app.database.models.Group object at 0x0000010F51FC8050>, <app.database.models.Group object at 0x0000010F51FC8160>, <app.database.models.Group object at 0x0000010F51FC8F30>, <app.database.models.Group object at 0x0000010F51FC8E20>, <app.database.models.Group object at 0x0000010F51FCB570>, <app.database.models.Group object at 0x0000010F51FCB790>, <app.database.models.Group object at 0x0000010F51FCB680>, <app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FCBBD0>, <app.database.models.Group object at 0x0000010F51FCBAC0>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FC86B0>, <app.database.models.Group object at 0x0000010F51FC85A0>, <app.database.models.Group object at 0x0000010F51FC9480>, <app.database.models.Group object at 0x0000010F51FC8490>, <app.database.models.Group object at 0x0000010F51FC8380>, <app.database.models.Group object at 0x0000010F51FC8270>, <app.database.models.Group object at 0x0000010F51FCBF00>, <app.database.models.Group object at 0x0000010F51FCA9C0>, <app.database.models.Group object at 0x0000010F51FCABE0>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F524B8380>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524B9150>, <app.database.models.Group object at 0x0000010F524B9260>]
2025-07-16 21:32:09,263 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:32:09,263 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 4...
2025-07-16 21:32:09,264 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 open orders.
2025-07-16 21:32:09,264 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 4...
2025-07-16 21:32:09,266 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 pending orders.
2025-07-16 21:32:09,266 - WARNING - app - [AUTO-CUTOFF] User 4 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:32:09,266 - INFO - app - [AUTO-CUTOFF] Processing user 5 (live), group: Admin
2025-07-16 21:32:09,266 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 5 (live) from cache/DB...
2025-07-16 21:32:09,269 - WARNING - app - [AUTO-CUTOFF] No user data found for user 5 (live). Skipping portfolio update.
2025-07-16 21:32:09,269 - INFO - app - [AUTO-CUTOFF] Processing user 8 (live), group: string
2025-07-16 21:32:09,269 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 8 (live) from cache/DB...
2025-07-16 21:32:09,272 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group string...
2025-07-16 21:32:09,273 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'string' from cache: None
2025-07-16 21:32:09,273 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'string', fetching from DB.
2025-07-16 21:32:09,274 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'string': []
2025-07-16 21:32:09,274 - ERROR - app - [AUTO-CUTOFF] Group symbol settings not found in DB for group 'string'. Skipping portfolio update for user 8.
2025-07-16 21:32:09,274 - INFO - app - [AUTO-CUTOFF] Processing user 9 (live), group: Standard
2025-07-16 21:32:09,274 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 9 (live) from cache/DB...
2025-07-16 21:32:09,276 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:32:09,276 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:32:09,277 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:32:09,279 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x0000010F51FC8AF0>, <app.database.models.Group object at 0x0000010F51FC8C00>, <app.database.models.Group object at 0x0000010F51FC8160>, <app.database.models.Group object at 0x0000010F51FC8F30>, <app.database.models.Group object at 0x0000010F51FC8E20>, <app.database.models.Group object at 0x0000010F51FCB570>, <app.database.models.Group object at 0x0000010F51FCB790>, <app.database.models.Group object at 0x0000010F51FCB680>, <app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FCBBD0>, <app.database.models.Group object at 0x0000010F51FCBAC0>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FC86B0>, <app.database.models.Group object at 0x0000010F51FC85A0>, <app.database.models.Group object at 0x0000010F51FC9480>, <app.database.models.Group object at 0x0000010F51FC8490>, <app.database.models.Group object at 0x0000010F51FC8380>, <app.database.models.Group object at 0x0000010F51FC8270>, <app.database.models.Group object at 0x0000010F51FCBF00>, <app.database.models.Group object at 0x0000010F51FCA9C0>, <app.database.models.Group object at 0x0000010F51FCABE0>, <app.database.models.Group object at 0x0000010F51FF4F30>, <app.database.models.Group object at 0x0000010F51FF5370>, <app.database.models.Group object at 0x0000010F51FF68B0>, <app.database.models.Group object at 0x0000010F51FF4E20>, <app.database.models.Group object at 0x0000010F51FF5BF0>, <app.database.models.Group object at 0x0000010F51FF6470>, <app.database.models.Group object at 0x0000010F51FF7350>, <app.database.models.Group object at 0x0000010F51FF6CF0>, <app.database.models.Group object at 0x0000010F51FF5150>, <app.database.models.Group object at 0x0000010F51FF7240>, <app.database.models.Group object at 0x0000010F51FF6E00>, <app.database.models.Group object at 0x0000010F51FF5F20>, <app.database.models.Group object at 0x0000010F51FF6580>, <app.database.models.Group object at 0x0000010F51FF6250>, <app.database.models.Group object at 0x0000010F51FF6F10>, <app.database.models.Group object at 0x0000010F51FF7570>, <app.database.models.Group object at 0x0000010F51FF56A0>, <app.database.models.Group object at 0x0000010F51FF7020>, <app.database.models.Group object at 0x0000010F51FF6140>, <app.database.models.Group object at 0x0000010F51FF5040>, <app.database.models.Group object at 0x0000010F51FF5D00>, <app.database.models.Group object at 0x0000010F51FF7460>, <app.database.models.Group object at 0x0000010F51FF6AD0>, <app.database.models.Group object at 0x0000010F51FF6360>, <app.database.models.Group object at 0x0000010F51FF5E10>, <app.database.models.Group object at 0x0000010F51FF69C0>, <app.database.models.Group object at 0x0000010F51FF7790>, <app.database.models.Group object at 0x0000010F51FF78A0>, <app.database.models.Group object at 0x0000010F51FF79B0>, <app.database.models.Group object at 0x0000010F51FF7AC0>, <app.database.models.Group object at 0x0000010F51FF7BD0>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF7DF0>, <app.database.models.Group object at 0x0000010F51FF7F00>, <app.database.models.Group object at 0x0000010F51FF4C00>, <app.database.models.Group object at 0x0000010F51FF4D10>, <app.database.models.Group object at 0x0000010F51FF59D0>, <app.database.models.Group object at 0x0000010F51FF5480>, <app.database.models.Group object at 0x0000010F51FF6030>, <app.database.models.Group object at 0x0000010F51FF67A0>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F524B8380>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>]
2025-07-16 21:32:09,280 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:32:09,280 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 9...
2025-07-16 21:32:09,281 - DEBUG - app - [AUTO-CUTOFF] User 9 has 1 open orders.
2025-07-16 21:32:09,281 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 9...
2025-07-16 21:32:09,282 - DEBUG - app - [AUTO-CUTOFF] User 9 has 0 pending orders.
2025-07-16 21:32:09,282 - DEBUG - app - [AUTO-CUTOFF] User 9 total positions for portfolio calculation: 1
2025-07-16 21:32:09,283 - DEBUG - app - [AUTO-CUTOFF] User 9 adjusted market prices: {}
2025-07-16 21:32:09,283 - DEBUG - app - [AUTO-CUTOFF] User 9 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:32:09,283 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 9...
2025-07-16 21:32:09,582 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol BTCUSD
2025-07-16 21:32:09,582 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 99.90738313495848051220798402% which is below threshold 100.0%
2025-07-16 21:32:09,582 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 9: {'balance': '9794.75000000', 'equity': '9794.75000000', 'margin': '9803.83000000', 'free_margin': '-9.08000000', 'profit_loss': '0.0', 'margin_level': '99.90738313495848051220798402', 'positions': [{'order_id': '1000341-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.41000000'), 'order_price': Decimal('141921.60000000'), 'margin': Decimal('9773.83000000'), 'contract_value': Decimal('0.41000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('244.35000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': True}
2025-07-16 21:32:09,582 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 9: {'balance': '9794.75000000', 'equity': '9794.75000000', 'margin': '9803.83000000', 'free_margin': '-9.08000000', 'profit_loss': '0.0', 'margin_level': '99.90738313495848051220798402', 'positions_with_pnl': [{'order_id': '1000341-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.41000000'), 'order_price': Decimal('141921.60000000'), 'margin': Decimal('9773.83000000'), 'contract_value': Decimal('0.41000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('244.35000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': True}
2025-07-16 21:32:09,585 - INFO - app - [AUTO-CUTOFF] User 9 margin_level: 99.90738313495848051220798402
2025-07-16 21:32:10,691 - DEBUG - app.firebase_stream - Firebase listener triggered (28). Event Type: patch, Path: /. Timestamp: 1752726730.6910913
2025-07-16 21:32:10,691 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9720000000', 'o': '87.9640000000'}, 'GBPAUD': {'b': '2.0649800000', 'o': '2.0648300000'}, 'USDJPY': {'b': '148.5420000000', 'o': '148.5390000000'}, 'USDCNH': {'b': '7.1817800000',
2025-07-16 21:32:10,691 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9720000000', 'o': '87.9640000000'}, 'GBPAUD': {'b': '2.0649800000', 'o': '2.0648300000'}, 'USDJPY': {'b': '148.5420000000', 'o': '148.5390000000'}, 'USDCNH': {'b': '7.1817800000',...
2025-07-16 21:32:10,691 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:12,977 - DEBUG - app.firebase_stream - Firebase listener triggered (29). Event Type: patch, Path: /. Timestamp: 1752726732.9776077
2025-07-16 21:32:12,978 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0190000000', 'o': '38.0120000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9650000000'}, 'GBPAUD': {'b': '2.0649800000', 'o': '2.0648600000'}, 'BTCUSD': {'b': '118284.000000000
2025-07-16 21:32:12,978 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0190000000', 'o': '38.0120000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9650000000'}, 'GBPAUD': {'b': '2.0649800000', 'o': '2.0648600000'}, 'BTCUSD': {'b': '118284.000000000...
2025-07-16 21:32:12,978 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:13,141 - INFO - app - [AUTO-CUTOFF] Sent margin call warning email (HTML) to user 9 at kodideladinesh123@gmail.com
2025-07-16 21:32:13,143 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:13,146 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 9
2025-07-16 21:32:13,146 - INFO - app - [AUTO-CUTOFF] Processing user 10 (live), group: Group B
2025-07-16 21:32:13,146 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 10 (live) from cache/DB...
2025-07-16 21:32:13,152 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:13,177 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:32:13,183 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:32:13,183 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:32:13,194 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F51FF7130>, <app.database.models.Group object at 0x0000010F51FF6BE0>, <app.database.models.Group object at 0x0000010F51FC8050>, <app.database.models.Group object at 0x0000010F51EF9E10>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BBBD0>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F52568050>, <app.database.models.Group object at 0x0000010F52568160>, <app.database.models.Group object at 0x0000010F52568270>, <app.database.models.Group object at 0x0000010F52568380>, <app.database.models.Group object at 0x0000010F52568490>, <app.database.models.Group object at 0x0000010F525685A0>, <app.database.models.Group object at 0x0000010F525686B0>, <app.database.models.Group object at 0x0000010F525687C0>, <app.database.models.Group object at 0x0000010F525688D0>, <app.database.models.Group object at 0x0000010F525689E0>, <app.database.models.Group object at 0x0000010F52568AF0>, <app.database.models.Group object at 0x0000010F52568C00>, <app.database.models.Group object at 0x0000010F52568D10>, <app.database.models.Group object at 0x0000010F52568E20>, <app.database.models.Group object at 0x0000010F52568F30>, <app.database.models.Group object at 0x0000010F52569040>, <app.database.models.Group object at 0x0000010F52569150>, <app.database.models.Group object at 0x0000010F52569260>, <app.database.models.Group object at 0x0000010F52569370>, <app.database.models.Group object at 0x0000010F52569480>, <app.database.models.Group object at 0x0000010F52569590>, <app.database.models.Group object at 0x0000010F525696A0>, <app.database.models.Group object at 0x0000010F525697B0>, <app.database.models.Group object at 0x0000010F525698C0>, <app.database.models.Group object at 0x0000010F525699D0>, <app.database.models.Group object at 0x0000010F52569AE0>, <app.database.models.Group object at 0x0000010F52569BF0>, <app.database.models.Group object at 0x0000010F52569D00>, <app.database.models.Group object at 0x0000010F52569E10>, <app.database.models.Group object at 0x0000010F52569F20>, <app.database.models.Group object at 0x0000010F5256A030>, <app.database.models.Group object at 0x0000010F5256A140>, <app.database.models.Group object at 0x0000010F5256A250>, <app.database.models.Group object at 0x0000010F5256A360>, <app.database.models.Group object at 0x0000010F5256A470>, <app.database.models.Group object at 0x0000010F5256A580>, <app.database.models.Group object at 0x0000010F5256A690>, <app.database.models.Group object at 0x0000010F5256A7A0>, <app.database.models.Group object at 0x0000010F5256A8B0>, <app.database.models.Group object at 0x0000010F5256A9C0>, <app.database.models.Group object at 0x0000010F5256AAD0>, <app.database.models.Group object at 0x0000010F5256ABE0>, <app.database.models.Group object at 0x0000010F5256ACF0>, <app.database.models.Group object at 0x0000010F5256AE00>, <app.database.models.Group object at 0x0000010F5256AF10>, <app.database.models.Group object at 0x0000010F5256B020>, <app.database.models.Group object at 0x0000010F5256B130>, <app.database.models.Group object at 0x0000010F5256B240>, <app.database.models.Group object at 0x0000010F5256B350>, <app.database.models.Group object at 0x0000010F5256B460>, <app.database.models.Group object at 0x0000010F5256B570>, <app.database.models.Group object at 0x0000010F5256B680>, <app.database.models.Group object at 0x0000010F5256B790>, <app.database.models.Group object at 0x0000010F5256B8A0>, <app.database.models.Group object at 0x0000010F5256B9B0>, <app.database.models.Group object at 0x0000010F5256BAC0>]
2025-07-16 21:32:13,198 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:32:13,198 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 10...
2025-07-16 21:32:13,209 - DEBUG - app - [AUTO-CUTOFF] User 10 has 0 open orders.
2025-07-16 21:32:13,209 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 10...
2025-07-16 21:32:13,213 - DEBUG - app - [AUTO-CUTOFF] User 10 has 0 pending orders.
2025-07-16 21:32:13,213 - WARNING - app - [AUTO-CUTOFF] User 10 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:32:13,213 - INFO - app - [AUTO-CUTOFF] Processing user 11 (live), group: Group B
2025-07-16 21:32:13,213 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 11 (live) from cache/DB...
2025-07-16 21:32:13,231 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:32:13,234 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:32:13,234 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:32:13,243 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F51FF58C0>, <app.database.models.Group object at 0x0000010F51FF5150>, <app.database.models.Group object at 0x0000010F51FF6360>, <app.database.models.Group object at 0x0000010F51FF6AD0>, <app.database.models.Group object at 0x0000010F51FF7350>, <app.database.models.Group object at 0x0000010F51FF5BF0>, <app.database.models.Group object at 0x0000010F51FF4E20>, <app.database.models.Group object at 0x0000010F51FF6470>, <app.database.models.Group object at 0x0000010F51FF6580>, <app.database.models.Group object at 0x0000010F51FF6140>, <app.database.models.Group object at 0x0000010F51FF6CF0>, <app.database.models.Group object at 0x0000010F51FF7240>, <app.database.models.Group object at 0x0000010F51FF69C0>, <app.database.models.Group object at 0x0000010F51FF7790>, <app.database.models.Group object at 0x0000010F51FF78A0>, <app.database.models.Group object at 0x0000010F51FF79B0>, <app.database.models.Group object at 0x0000010F51FF7AC0>, <app.database.models.Group object at 0x0000010F51FF7BD0>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF7DF0>, <app.database.models.Group object at 0x0000010F51FF7F00>, <app.database.models.Group object at 0x0000010F51FF4C00>, <app.database.models.Group object at 0x0000010F51FF4D10>, <app.database.models.Group object at 0x0000010F51FF59D0>, <app.database.models.Group object at 0x0000010F51FF5480>, <app.database.models.Group object at 0x0000010F51FF6030>, <app.database.models.Group object at 0x0000010F51FF67A0>, <app.database.models.Group object at 0x0000010F51EFA7A0>, <app.database.models.Group object at 0x0000010F524B9150>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524B9370>, <app.database.models.Group object at 0x0000010F524B9F20>, <app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524B9480>, <app.database.models.Group object at 0x0000010F524B9AE0>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524B9E10>, <app.database.models.Group object at 0x0000010F524BA030>, <app.database.models.Group object at 0x0000010F524BA8B0>, <app.database.models.Group object at 0x0000010F524BA9C0>, <app.database.models.Group object at 0x0000010F524B9D00>, <app.database.models.Group object at 0x0000010F524B99D0>, <app.database.models.Group object at 0x0000010F524BA250>, <app.database.models.Group object at 0x0000010F524BA140>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F524B8380>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F51FC8D10>, <app.database.models.Group object at 0x0000010F51FC8AF0>, <app.database.models.Group object at 0x0000010F51FC8C00>, <app.database.models.Group object at 0x0000010F51FC8160>, <app.database.models.Group object at 0x0000010F51FC8F30>, <app.database.models.Group object at 0x0000010F51FC8E20>, <app.database.models.Group object at 0x0000010F51FCB570>, <app.database.models.Group object at 0x0000010F51FCB790>, <app.database.models.Group object at 0x0000010F51FCB680>, <app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FCBBD0>, <app.database.models.Group object at 0x0000010F51FCBAC0>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FC86B0>, <app.database.models.Group object at 0x0000010F51FC85A0>]
2025-07-16 21:32:13,248 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:32:13,248 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 11...
2025-07-16 21:32:13,250 - DEBUG - app - [AUTO-CUTOFF] User 11 has 0 open orders.
2025-07-16 21:32:13,251 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 11...
2025-07-16 21:32:13,255 - DEBUG - app - [AUTO-CUTOFF] User 11 has 0 pending orders.
2025-07-16 21:32:13,255 - WARNING - app - [AUTO-CUTOFF] User 11 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:32:13,255 - INFO - app - [AUTO-CUTOFF] Processing user 12 (live), group: Standard
2025-07-16 21:32:13,255 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 12 (live) from cache/DB...
2025-07-16 21:32:13,273 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:32:13,276 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:32:13,276 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:32:13,285 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F524BBBD0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F51FF6F10>, <app.database.models.Group object at 0x0000010F51FF56A0>, <app.database.models.Group object at 0x0000010F51FF5E10>, <app.database.models.Group object at 0x0000010F51FF7130>, <app.database.models.Group object at 0x0000010F51FF6BE0>, <app.database.models.Group object at 0x0000010F51FF68B0>, <app.database.models.Group object at 0x0000010F51FF7570>, <app.database.models.Group object at 0x0000010F51FF4F30>, <app.database.models.Group object at 0x0000010F51FF5D00>, <app.database.models.Group object at 0x0000010F51FF5F20>, <app.database.models.Group object at 0x0000010F51FF5040>, <app.database.models.Group object at 0x0000010F51FF7020>, <app.database.models.Group object at 0x0000010F51FF7460>, <app.database.models.Group object at 0x0000010F51FF6250>, <app.database.models.Group object at 0x0000010F51FC8050>, <app.database.models.Group object at 0x0000010F51FC9480>, <app.database.models.Group object at 0x0000010F51FC8490>, <app.database.models.Group object at 0x0000010F51FC8380>, <app.database.models.Group object at 0x0000010F51FC8270>, <app.database.models.Group object at 0x0000010F51FCBF00>, <app.database.models.Group object at 0x0000010F51FCA9C0>, <app.database.models.Group object at 0x0000010F51FCABE0>, <app.database.models.Group object at 0x0000010F51FCB8A0>, <app.database.models.Group object at 0x0000010F52554050>, <app.database.models.Group object at 0x0000010F52554160>, <app.database.models.Group object at 0x0000010F52554270>, <app.database.models.Group object at 0x0000010F52554380>, <app.database.models.Group object at 0x0000010F52554490>, <app.database.models.Group object at 0x0000010F525545A0>, <app.database.models.Group object at 0x0000010F525546B0>, <app.database.models.Group object at 0x0000010F525547C0>, <app.database.models.Group object at 0x0000010F525548D0>, <app.database.models.Group object at 0x0000010F525549E0>, <app.database.models.Group object at 0x0000010F52554AF0>, <app.database.models.Group object at 0x0000010F52554C00>, <app.database.models.Group object at 0x0000010F52554D10>, <app.database.models.Group object at 0x0000010F52554E20>, <app.database.models.Group object at 0x0000010F52554F30>, <app.database.models.Group object at 0x0000010F52555040>, <app.database.models.Group object at 0x0000010F52555150>, <app.database.models.Group object at 0x0000010F52555260>, <app.database.models.Group object at 0x0000010F52555370>, <app.database.models.Group object at 0x0000010F52555480>, <app.database.models.Group object at 0x0000010F52555590>, <app.database.models.Group object at 0x0000010F525556A0>, <app.database.models.Group object at 0x0000010F525557B0>, <app.database.models.Group object at 0x0000010F525558C0>, <app.database.models.Group object at 0x0000010F525559D0>, <app.database.models.Group object at 0x0000010F52555AE0>, <app.database.models.Group object at 0x0000010F52555BF0>, <app.database.models.Group object at 0x0000010F52555D00>, <app.database.models.Group object at 0x0000010F52555E10>, <app.database.models.Group object at 0x0000010F52555F20>, <app.database.models.Group object at 0x0000010F52556030>, <app.database.models.Group object at 0x0000010F52556140>, <app.database.models.Group object at 0x0000010F52556250>, <app.database.models.Group object at 0x0000010F52556360>, <app.database.models.Group object at 0x0000010F52556470>, <app.database.models.Group object at 0x0000010F52556580>, <app.database.models.Group object at 0x0000010F52556690>, <app.database.models.Group object at 0x0000010F525567A0>, <app.database.models.Group object at 0x0000010F525568B0>, <app.database.models.Group object at 0x0000010F525569C0>, <app.database.models.Group object at 0x0000010F52556AD0>, <app.database.models.Group object at 0x0000010F52556BE0>, <app.database.models.Group object at 0x0000010F52556CF0>, <app.database.models.Group object at 0x0000010F52556E00>, <app.database.models.Group object at 0x0000010F52556F10>, <app.database.models.Group object at 0x0000010F52557020>, <app.database.models.Group object at 0x0000010F52557130>, <app.database.models.Group object at 0x0000010F52557240>]
2025-07-16 21:32:13,290 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:32:13,290 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 12...
2025-07-16 21:32:13,295 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 open orders.
2025-07-16 21:32:13,295 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 12...
2025-07-16 21:32:13,300 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 pending orders.
2025-07-16 21:32:13,301 - WARNING - app - [AUTO-CUTOFF] User 12 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:32:13,301 - INFO - app - [AUTO-CUTOFF] Processing user 13 (live), group: Group B
2025-07-16 21:32:13,301 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 13 (live) from cache/DB...
2025-07-16 21:32:13,318 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:32:13,320 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:32:13,320 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:32:13,332 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F51FF7240>, <app.database.models.Group object at 0x0000010F51FF4C00>, <app.database.models.Group object at 0x0000010F51FF4D10>, <app.database.models.Group object at 0x0000010F51FF5370>, <app.database.models.Group object at 0x0000010F51FF7790>, <app.database.models.Group object at 0x0000010F51FF7F00>, <app.database.models.Group object at 0x0000010F51FC8C00>, <app.database.models.Group object at 0x0000010F51FC8AF0>, <app.database.models.Group object at 0x0000010F51FC8D10>, <app.database.models.Group object at 0x0000010F51FC8160>, <app.database.models.Group object at 0x0000010F51FC8F30>, <app.database.models.Group object at 0x0000010F51FC8E20>, <app.database.models.Group object at 0x0000010F51FCB570>, <app.database.models.Group object at 0x0000010F51FCB790>, <app.database.models.Group object at 0x0000010F51FCB680>, <app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FCBBD0>, <app.database.models.Group object at 0x0000010F51FCBAC0>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FC86B0>, <app.database.models.Group object at 0x0000010F51FC85A0>, <app.database.models.Group object at 0x0000010F51EFA7A0>, <app.database.models.Group object at 0x0000010F51EF9E10>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524B9150>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524B9370>, <app.database.models.Group object at 0x0000010F524B9F20>, <app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524B9480>, <app.database.models.Group object at 0x0000010F524B9AE0>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524B9E10>, <app.database.models.Group object at 0x0000010F524BA030>, <app.database.models.Group object at 0x0000010F524BA8B0>, <app.database.models.Group object at 0x0000010F524BA9C0>, <app.database.models.Group object at 0x0000010F524B9D00>, <app.database.models.Group object at 0x0000010F524B99D0>, <app.database.models.Group object at 0x0000010F524BA250>, <app.database.models.Group object at 0x0000010F524BA140>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F524B8380>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F52557350>, <app.database.models.Group object at 0x0000010F52557460>, <app.database.models.Group object at 0x0000010F52557570>, <app.database.models.Group object at 0x0000010F52557680>, <app.database.models.Group object at 0x0000010F52557790>, <app.database.models.Group object at 0x0000010F525578A0>, <app.database.models.Group object at 0x0000010F525579B0>]
2025-07-16 21:32:13,337 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:32:13,337 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 13...
2025-07-16 21:32:13,341 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 open orders.
2025-07-16 21:32:13,341 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 13...
2025-07-16 21:32:13,346 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 pending orders.
2025-07-16 21:32:13,346 - WARNING - app - [AUTO-CUTOFF] User 13 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:32:13,346 - INFO - app - [AUTO-CUTOFF] Processing user 14 (live), group: Standard
2025-07-16 21:32:13,346 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 14 (live) from cache/DB...
2025-07-16 21:32:13,359 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:32:13,361 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:32:13,361 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:32:13,368 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F51FCB8A0>, <app.database.models.Group object at 0x0000010F51FC8490>, <app.database.models.Group object at 0x0000010F51FC8050>, <app.database.models.Group object at 0x0000010F51FC8270>, <app.database.models.Group object at 0x0000010F51FCBF00>, <app.database.models.Group object at 0x0000010F51FCABE0>, <app.database.models.Group object at 0x0000010F51FC8380>, <app.database.models.Group object at 0x0000010F51FC9480>, <app.database.models.Group object at 0x0000010F51FCA9C0>, <app.database.models.Group object at 0x0000010F51FF7350>, <app.database.models.Group object at 0x0000010F51FF4E20>, <app.database.models.Group object at 0x0000010F51FF6470>, <app.database.models.Group object at 0x0000010F51FF78A0>, <app.database.models.Group object at 0x0000010F51FF79B0>, <app.database.models.Group object at 0x0000010F51FF7DF0>, <app.database.models.Group object at 0x0000010F51FF6580>, <app.database.models.Group object at 0x0000010F51FF6CF0>, <app.database.models.Group object at 0x0000010F51FF7BD0>, <app.database.models.Group object at 0x0000010F51FF69C0>, <app.database.models.Group object at 0x0000010F51FF6360>, <app.database.models.Group object at 0x0000010F51FF6E00>, <app.database.models.Group object at 0x0000010F51FF6140>, <app.database.models.Group object at 0x0000010F51FF6AD0>, <app.database.models.Group object at 0x0000010F51FF5BF0>, <app.database.models.Group object at 0x0000010F51FF6030>, <app.database.models.Group object at 0x0000010F51FF58C0>, <app.database.models.Group object at 0x0000010F51FF5480>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF6F10>, <app.database.models.Group object at 0x0000010F51FF56A0>, <app.database.models.Group object at 0x0000010F51FF5E10>, <app.database.models.Group object at 0x0000010F51FF7130>, <app.database.models.Group object at 0x0000010F51FF6BE0>, <app.database.models.Group object at 0x0000010F51FF68B0>, <app.database.models.Group object at 0x0000010F51FF7570>, <app.database.models.Group object at 0x0000010F51FF4F30>, <app.database.models.Group object at 0x0000010F51FF5D00>, <app.database.models.Group object at 0x0000010F51FF5F20>, <app.database.models.Group object at 0x0000010F51FF5040>, <app.database.models.Group object at 0x0000010F51FF7020>, <app.database.models.Group object at 0x0000010F51FF7460>, <app.database.models.Group object at 0x0000010F51FF6250>, <app.database.models.Group object at 0x0000010F51FF5150>, <app.database.models.Group object at 0x0000010F51FF59D0>, <app.database.models.Group object at 0x0000010F51FF67A0>, <app.database.models.Group object at 0x0000010F51FF7AC0>, <app.database.models.Group object at 0x0000010F52554050>, <app.database.models.Group object at 0x0000010F52554160>, <app.database.models.Group object at 0x0000010F52554270>, <app.database.models.Group object at 0x0000010F52554380>, <app.database.models.Group object at 0x0000010F52554490>, <app.database.models.Group object at 0x0000010F525545A0>, <app.database.models.Group object at 0x0000010F525546B0>, <app.database.models.Group object at 0x0000010F525547C0>, <app.database.models.Group object at 0x0000010F525548D0>, <app.database.models.Group object at 0x0000010F525549E0>, <app.database.models.Group object at 0x0000010F52554AF0>, <app.database.models.Group object at 0x0000010F52554C00>, <app.database.models.Group object at 0x0000010F52554D10>, <app.database.models.Group object at 0x0000010F52554E20>, <app.database.models.Group object at 0x0000010F52554F30>, <app.database.models.Group object at 0x0000010F52555040>, <app.database.models.Group object at 0x0000010F52555150>, <app.database.models.Group object at 0x0000010F52555260>, <app.database.models.Group object at 0x0000010F52555370>, <app.database.models.Group object at 0x0000010F52555480>, <app.database.models.Group object at 0x0000010F52555590>, <app.database.models.Group object at 0x0000010F525556A0>, <app.database.models.Group object at 0x0000010F525557B0>, <app.database.models.Group object at 0x0000010F525558C0>, <app.database.models.Group object at 0x0000010F525559D0>, <app.database.models.Group object at 0x0000010F52555AE0>, <app.database.models.Group object at 0x0000010F52555BF0>, <app.database.models.Group object at 0x0000010F52555D00>, <app.database.models.Group object at 0x0000010F52555E10>, <app.database.models.Group object at 0x0000010F52555F20>]
2025-07-16 21:32:13,370 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:32:13,371 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 14...
2025-07-16 21:32:13,374 - DEBUG - app - [AUTO-CUTOFF] User 14 has 3 open orders.
2025-07-16 21:32:13,374 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 14...
2025-07-16 21:32:13,378 - DEBUG - app - [AUTO-CUTOFF] User 14 has 0 pending orders.
2025-07-16 21:32:13,378 - DEBUG - app - [AUTO-CUTOFF] User 14 total positions for portfolio calculation: 3
2025-07-16 21:32:13,381 - DEBUG - app - [AUTO-CUTOFF] User 14 adjusted market prices: {}
2025-07-16 21:32:13,381 - DEBUG - app - [AUTO-CUTOFF] User 14 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:32:13,382 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 14...
2025-07-16 21:32:13,681 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol BTCUSD
2025-07-16 21:32:13,681 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:32:13,681 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:32:13,681 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 14: {'balance': '9902.02000000', 'equity': '9902.02000000', 'margin': '9494.47000000', 'free_margin': '407.55000000', 'profit_loss': '0.0', 'margin_level': '104.2924986860772639231047125', 'positions': [{'order_id': '1000330-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.40000000'), 'order_price': Decimal('141908.50000000'), 'margin': Decimal('9422.73000000'), 'contract_value': Decimal('0.40000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('235.57000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000332-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('65.21517371'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000333-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('6.52134765'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:32:13,681 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 14: {'balance': '9902.02000000', 'equity': '9902.02000000', 'margin': '9494.47000000', 'free_margin': '407.55000000', 'profit_loss': '0.0', 'margin_level': '104.2924986860772639231047125', 'positions_with_pnl': [{'order_id': '1000330-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.40000000'), 'order_price': Decimal('141908.50000000'), 'margin': Decimal('9422.73000000'), 'contract_value': Decimal('0.40000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('235.57000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000332-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('65.21517371'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000333-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('6.52134765'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:32:13,682 - INFO - app - [AUTO-CUTOFF] User 14 margin_level: 104.2924986860772639231047125
2025-07-16 21:32:13,683 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 14
2025-07-16 21:32:13,683 - INFO - app - [AUTO-CUTOFF] Processing user 16 (live), group: Standard
2025-07-16 21:32:13,683 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 16 (live) from cache/DB...
2025-07-16 21:32:13,687 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:32:13,688 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:32:13,688 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:32:13,690 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x0000010F51FF7F00>, <app.database.models.Group object at 0x0000010F51FF5370>, <app.database.models.Group object at 0x0000010F51FC9E10>, <app.database.models.Group object at 0x0000010F51FC8C00>, <app.database.models.Group object at 0x0000010F51FC8AF0>, <app.database.models.Group object at 0x0000010F51FC8D10>, <app.database.models.Group object at 0x0000010F51FC8160>, <app.database.models.Group object at 0x0000010F51FC8F30>, <app.database.models.Group object at 0x0000010F51FC8E20>, <app.database.models.Group object at 0x0000010F51FCB570>, <app.database.models.Group object at 0x0000010F51FCB790>, <app.database.models.Group object at 0x0000010F51FCB680>, <app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FCBBD0>, <app.database.models.Group object at 0x0000010F51FCBAC0>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FC86B0>, <app.database.models.Group object at 0x0000010F51FC85A0>, <app.database.models.Group object at 0x0000010F51EFA7A0>, <app.database.models.Group object at 0x0000010F51EF9E10>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524B9150>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524B9370>, <app.database.models.Group object at 0x0000010F524B9F20>, <app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524B9480>, <app.database.models.Group object at 0x0000010F524B9AE0>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524B9E10>, <app.database.models.Group object at 0x0000010F524BA030>, <app.database.models.Group object at 0x0000010F524BA8B0>, <app.database.models.Group object at 0x0000010F524BA9C0>, <app.database.models.Group object at 0x0000010F524B9D00>, <app.database.models.Group object at 0x0000010F524B99D0>, <app.database.models.Group object at 0x0000010F524BA250>, <app.database.models.Group object at 0x0000010F524BA140>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F524B8380>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F52557350>, <app.database.models.Group object at 0x0000010F52557460>, <app.database.models.Group object at 0x0000010F52557570>, <app.database.models.Group object at 0x0000010F52557680>]
2025-07-16 21:32:13,691 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:32:13,692 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 16...
2025-07-16 21:32:13,693 - DEBUG - app - [AUTO-CUTOFF] User 16 has 0 open orders.
2025-07-16 21:32:13,693 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 16...
2025-07-16 21:32:13,695 - DEBUG - app - [AUTO-CUTOFF] User 16 has 0 pending orders.
2025-07-16 21:32:13,695 - WARNING - app - [AUTO-CUTOFF] User 16 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:32:13,695 - INFO - app - [AUTO-CUTOFF] Processing user 17 (live), group: Group B
2025-07-16 21:32:13,695 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 17 (live) from cache/DB...
2025-07-16 21:32:13,698 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:32:13,699 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:32:13,699 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:32:13,702 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F51FCBF00>, <app.database.models.Group object at 0x0000010F51FC8050>, <app.database.models.Group object at 0x0000010F51FCABE0>, <app.database.models.Group object at 0x0000010F51FC8380>, <app.database.models.Group object at 0x0000010F51FC9480>, <app.database.models.Group object at 0x0000010F51FCA9C0>, <app.database.models.Group object at 0x0000010F51FF7350>, <app.database.models.Group object at 0x0000010F51FF4E20>, <app.database.models.Group object at 0x0000010F51FF6470>, <app.database.models.Group object at 0x0000010F51FF78A0>, <app.database.models.Group object at 0x0000010F51FF79B0>, <app.database.models.Group object at 0x0000010F51FF7DF0>, <app.database.models.Group object at 0x0000010F51FF6580>, <app.database.models.Group object at 0x0000010F51FF6CF0>, <app.database.models.Group object at 0x0000010F51FF7BD0>, <app.database.models.Group object at 0x0000010F51FF69C0>, <app.database.models.Group object at 0x0000010F51FF6360>, <app.database.models.Group object at 0x0000010F51FF6E00>, <app.database.models.Group object at 0x0000010F51FF6140>, <app.database.models.Group object at 0x0000010F51FF6AD0>, <app.database.models.Group object at 0x0000010F51FF5BF0>, <app.database.models.Group object at 0x0000010F51FF6030>, <app.database.models.Group object at 0x0000010F51FF58C0>, <app.database.models.Group object at 0x0000010F51FF5480>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF6F10>, <app.database.models.Group object at 0x0000010F51FF56A0>, <app.database.models.Group object at 0x0000010F51FF5E10>, <app.database.models.Group object at 0x0000010F51FF7130>, <app.database.models.Group object at 0x0000010F51FF6BE0>, <app.database.models.Group object at 0x0000010F51FF68B0>, <app.database.models.Group object at 0x0000010F51FF7570>, <app.database.models.Group object at 0x0000010F51FF4F30>, <app.database.models.Group object at 0x0000010F51FF5D00>, <app.database.models.Group object at 0x0000010F51FF5F20>, <app.database.models.Group object at 0x0000010F51FF5040>, <app.database.models.Group object at 0x0000010F51FF7020>, <app.database.models.Group object at 0x0000010F51FF7460>, <app.database.models.Group object at 0x0000010F51FF6250>, <app.database.models.Group object at 0x0000010F51FF5150>, <app.database.models.Group object at 0x0000010F51FF59D0>, <app.database.models.Group object at 0x0000010F51FF67A0>, <app.database.models.Group object at 0x0000010F51FF7AC0>, <app.database.models.Group object at 0x0000010F51FF4D10>, <app.database.models.Group object at 0x0000010F51FF7790>, <app.database.models.Group object at 0x0000010F51FF4C00>, <app.database.models.Group object at 0x0000010F51FF7240>, <app.database.models.Group object at 0x0000010F52554050>, <app.database.models.Group object at 0x0000010F52554160>, <app.database.models.Group object at 0x0000010F52554270>, <app.database.models.Group object at 0x0000010F52554380>, <app.database.models.Group object at 0x0000010F52554490>, <app.database.models.Group object at 0x0000010F525545A0>, <app.database.models.Group object at 0x0000010F525546B0>, <app.database.models.Group object at 0x0000010F525547C0>, <app.database.models.Group object at 0x0000010F525548D0>, <app.database.models.Group object at 0x0000010F525549E0>, <app.database.models.Group object at 0x0000010F52554AF0>, <app.database.models.Group object at 0x0000010F52554C00>, <app.database.models.Group object at 0x0000010F52554D10>, <app.database.models.Group object at 0x0000010F52554E20>, <app.database.models.Group object at 0x0000010F52554F30>, <app.database.models.Group object at 0x0000010F52555040>, <app.database.models.Group object at 0x0000010F52555150>, <app.database.models.Group object at 0x0000010F52555260>, <app.database.models.Group object at 0x0000010F52555370>, <app.database.models.Group object at 0x0000010F52555480>, <app.database.models.Group object at 0x0000010F52555590>, <app.database.models.Group object at 0x0000010F525556A0>, <app.database.models.Group object at 0x0000010F525557B0>, <app.database.models.Group object at 0x0000010F525558C0>, <app.database.models.Group object at 0x0000010F525559D0>, <app.database.models.Group object at 0x0000010F52555AE0>, <app.database.models.Group object at 0x0000010F52555BF0>, <app.database.models.Group object at 0x0000010F52555D00>, <app.database.models.Group object at 0x0000010F52555E10>, <app.database.models.Group object at 0x0000010F52555F20>, <app.database.models.Group object at 0x0000010F52557790>, <app.database.models.Group object at 0x0000010F525578A0>]
2025-07-16 21:32:13,703 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:32:13,703 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 17...
2025-07-16 21:32:13,704 - DEBUG - app - [AUTO-CUTOFF] User 17 has 0 open orders.
2025-07-16 21:32:13,704 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 17...
2025-07-16 21:32:13,705 - DEBUG - app - [AUTO-CUTOFF] User 17 has 0 pending orders.
2025-07-16 21:32:13,705 - WARNING - app - [AUTO-CUTOFF] User 17 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:32:13,705 - INFO - app - [AUTO-CUTOFF] Processing user 18 (live), group: Group B
2025-07-16 21:32:13,705 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 18 (live) from cache/DB...
2025-07-16 21:32:13,708 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:32:13,709 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:32:13,709 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:32:13,712 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524B9150>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524B9370>, <app.database.models.Group object at 0x0000010F524B9F20>, <app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524B9480>, <app.database.models.Group object at 0x0000010F524B9AE0>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524B9E10>, <app.database.models.Group object at 0x0000010F524BA030>, <app.database.models.Group object at 0x0000010F524BA8B0>, <app.database.models.Group object at 0x0000010F524BA9C0>, <app.database.models.Group object at 0x0000010F524B9D00>, <app.database.models.Group object at 0x0000010F524B99D0>, <app.database.models.Group object at 0x0000010F524BA250>, <app.database.models.Group object at 0x0000010F524BA140>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F524B8380>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F51FC9E10>, <app.database.models.Group object at 0x0000010F51FC8C00>, <app.database.models.Group object at 0x0000010F51FC8AF0>, <app.database.models.Group object at 0x0000010F51FC8D10>, <app.database.models.Group object at 0x0000010F51FC8160>, <app.database.models.Group object at 0x0000010F51FC8F30>, <app.database.models.Group object at 0x0000010F51FC8E20>, <app.database.models.Group object at 0x0000010F51FCB570>, <app.database.models.Group object at 0x0000010F51FCB790>, <app.database.models.Group object at 0x0000010F51FCB680>, <app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FCBBD0>, <app.database.models.Group object at 0x0000010F51FCBAC0>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FC86B0>, <app.database.models.Group object at 0x0000010F51FC85A0>, <app.database.models.Group object at 0x0000010F51FC8490>, <app.database.models.Group object at 0x0000010F51FCB8A0>, <app.database.models.Group object at 0x0000010F51FC8270>, <app.database.models.Group object at 0x0000010F52557350>, <app.database.models.Group object at 0x0000010F52557460>, <app.database.models.Group object at 0x0000010F52557570>, <app.database.models.Group object at 0x0000010F52557680>, <app.database.models.Group object at 0x0000010F525579B0>, <app.database.models.Group object at 0x0000010F52556030>]
2025-07-16 21:32:13,713 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:32:13,713 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 18...
2025-07-16 21:32:13,714 - DEBUG - app - [AUTO-CUTOFF] User 18 has 0 open orders.
2025-07-16 21:32:13,714 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 18...
2025-07-16 21:32:13,715 - DEBUG - app - [AUTO-CUTOFF] User 18 has 0 pending orders.
2025-07-16 21:32:13,715 - WARNING - app - [AUTO-CUTOFF] User 18 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:32:13,715 - INFO - app - [AUTO-CUTOFF] Processing user 19 (live), group: Elite
2025-07-16 21:32:13,715 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 19 (live) from cache/DB...
2025-07-16 21:32:13,719 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Elite...
2025-07-16 21:32:13,719 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Elite' from cache: None
2025-07-16 21:32:13,719 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Elite', fetching from DB.
2025-07-16 21:32:13,722 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Elite': [<app.database.models.Group object at 0x0000010F51FCA9C0>, <app.database.models.Group object at 0x0000010F51FCBF00>, <app.database.models.Group object at 0x0000010F51EF9E10>, <app.database.models.Group object at 0x0000010F51EFA7A0>, <app.database.models.Group object at 0x0000010F51FF7350>, <app.database.models.Group object at 0x0000010F51FF4E20>, <app.database.models.Group object at 0x0000010F51FF6470>, <app.database.models.Group object at 0x0000010F51FF78A0>, <app.database.models.Group object at 0x0000010F51FF79B0>, <app.database.models.Group object at 0x0000010F51FF7DF0>, <app.database.models.Group object at 0x0000010F51FF6580>, <app.database.models.Group object at 0x0000010F51FF6CF0>, <app.database.models.Group object at 0x0000010F51FF7BD0>, <app.database.models.Group object at 0x0000010F51FF69C0>, <app.database.models.Group object at 0x0000010F51FF6360>, <app.database.models.Group object at 0x0000010F51FF6E00>, <app.database.models.Group object at 0x0000010F51FF6140>, <app.database.models.Group object at 0x0000010F51FF6AD0>, <app.database.models.Group object at 0x0000010F51FF5BF0>, <app.database.models.Group object at 0x0000010F51FF6030>, <app.database.models.Group object at 0x0000010F51FF58C0>, <app.database.models.Group object at 0x0000010F51FF5480>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF6F10>, <app.database.models.Group object at 0x0000010F51FF56A0>, <app.database.models.Group object at 0x0000010F51FF5E10>, <app.database.models.Group object at 0x0000010F51FF7130>, <app.database.models.Group object at 0x0000010F51FF6BE0>, <app.database.models.Group object at 0x0000010F51FF68B0>, <app.database.models.Group object at 0x0000010F51FF7570>, <app.database.models.Group object at 0x0000010F51FF4F30>, <app.database.models.Group object at 0x0000010F51FF5D00>, <app.database.models.Group object at 0x0000010F51FF5F20>, <app.database.models.Group object at 0x0000010F51FF5040>, <app.database.models.Group object at 0x0000010F51FF7020>, <app.database.models.Group object at 0x0000010F51FF7460>, <app.database.models.Group object at 0x0000010F51FF6250>, <app.database.models.Group object at 0x0000010F51FF5150>, <app.database.models.Group object at 0x0000010F51FF59D0>, <app.database.models.Group object at 0x0000010F51FF67A0>, <app.database.models.Group object at 0x0000010F51FF7AC0>, <app.database.models.Group object at 0x0000010F51FF4D10>, <app.database.models.Group object at 0x0000010F51FF7790>, <app.database.models.Group object at 0x0000010F51FF4C00>, <app.database.models.Group object at 0x0000010F51FF7240>, <app.database.models.Group object at 0x0000010F51FF5370>, <app.database.models.Group object at 0x0000010F51FF7F00>, <app.database.models.Group object at 0x0000010F52554050>, <app.database.models.Group object at 0x0000010F52554160>, <app.database.models.Group object at 0x0000010F52554270>, <app.database.models.Group object at 0x0000010F52554380>, <app.database.models.Group object at 0x0000010F52554490>, <app.database.models.Group object at 0x0000010F525545A0>, <app.database.models.Group object at 0x0000010F525546B0>, <app.database.models.Group object at 0x0000010F525547C0>, <app.database.models.Group object at 0x0000010F525548D0>, <app.database.models.Group object at 0x0000010F525549E0>, <app.database.models.Group object at 0x0000010F52554AF0>, <app.database.models.Group object at 0x0000010F52554C00>, <app.database.models.Group object at 0x0000010F52554D10>, <app.database.models.Group object at 0x0000010F52554E20>, <app.database.models.Group object at 0x0000010F52554F30>, <app.database.models.Group object at 0x0000010F52555040>, <app.database.models.Group object at 0x0000010F52555150>, <app.database.models.Group object at 0x0000010F52555260>, <app.database.models.Group object at 0x0000010F52555370>, <app.database.models.Group object at 0x0000010F52555480>, <app.database.models.Group object at 0x0000010F52555590>, <app.database.models.Group object at 0x0000010F525556A0>, <app.database.models.Group object at 0x0000010F525557B0>, <app.database.models.Group object at 0x0000010F525558C0>, <app.database.models.Group object at 0x0000010F525559D0>, <app.database.models.Group object at 0x0000010F52555AE0>, <app.database.models.Group object at 0x0000010F52555BF0>, <app.database.models.Group object at 0x0000010F52555D00>, <app.database.models.Group object at 0x0000010F52555E10>, <app.database.models.Group object at 0x0000010F52555F20>]
2025-07-16 21:32:13,723 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Elite': {'sending_orders': 'barclays'}
2025-07-16 21:32:13,723 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 19...
2025-07-16 21:32:13,724 - DEBUG - app - [AUTO-CUTOFF] User 19 has 0 open orders.
2025-07-16 21:32:13,724 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 19...
2025-07-16 21:32:13,725 - DEBUG - app - [AUTO-CUTOFF] User 19 has 0 pending orders.
2025-07-16 21:32:13,725 - WARNING - app - [AUTO-CUTOFF] User 19 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:32:13,725 - INFO - app - [AUTO-CUTOFF] Processing user 20 (live), group: Standard
2025-07-16 21:32:13,725 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 20 (live) from cache/DB...
2025-07-16 21:32:13,728 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:32:13,729 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:32:13,729 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:32:13,732 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524B9150>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524B9370>, <app.database.models.Group object at 0x0000010F524B9F20>, <app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524B9480>, <app.database.models.Group object at 0x0000010F524B9AE0>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524B9E10>, <app.database.models.Group object at 0x0000010F524BA030>, <app.database.models.Group object at 0x0000010F524BA8B0>, <app.database.models.Group object at 0x0000010F524BA9C0>, <app.database.models.Group object at 0x0000010F524B9D00>, <app.database.models.Group object at 0x0000010F524B99D0>, <app.database.models.Group object at 0x0000010F524BA250>, <app.database.models.Group object at 0x0000010F524BA140>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F524B8380>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F51FC9E10>, <app.database.models.Group object at 0x0000010F51FC8C00>, <app.database.models.Group object at 0x0000010F51FC8AF0>, <app.database.models.Group object at 0x0000010F51FC8D10>, <app.database.models.Group object at 0x0000010F51FC8160>, <app.database.models.Group object at 0x0000010F51FC8F30>, <app.database.models.Group object at 0x0000010F51FC8E20>, <app.database.models.Group object at 0x0000010F51FCB570>, <app.database.models.Group object at 0x0000010F51FCB790>, <app.database.models.Group object at 0x0000010F51FCB680>, <app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FCBBD0>, <app.database.models.Group object at 0x0000010F51FCBAC0>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FC86B0>, <app.database.models.Group object at 0x0000010F51FC85A0>, <app.database.models.Group object at 0x0000010F51FC8490>, <app.database.models.Group object at 0x0000010F51FCB8A0>, <app.database.models.Group object at 0x0000010F51FC8270>, <app.database.models.Group object at 0x0000010F51FCABE0>, <app.database.models.Group object at 0x0000010F51FC9480>, <app.database.models.Group object at 0x0000010F51FC8050>, <app.database.models.Group object at 0x0000010F51FC8380>, <app.database.models.Group object at 0x0000010F52557350>, <app.database.models.Group object at 0x0000010F52557460>, <app.database.models.Group object at 0x0000010F52557570>, <app.database.models.Group object at 0x0000010F52557680>]
2025-07-16 21:32:13,733 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:32:13,733 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 20...
2025-07-16 21:32:13,734 - DEBUG - app - [AUTO-CUTOFF] User 20 has 0 open orders.
2025-07-16 21:32:13,734 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 20...
2025-07-16 21:32:13,736 - DEBUG - app - [AUTO-CUTOFF] User 20 has 0 pending orders.
2025-07-16 21:32:13,736 - WARNING - app - [AUTO-CUTOFF] User 20 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:32:13,736 - INFO - app - [AUTO-CUTOFF] Processing user 21 (live), group: Group B
2025-07-16 21:32:13,736 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 21 (live) from cache/DB...
2025-07-16 21:32:13,739 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:32:13,740 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:32:13,740 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:32:13,743 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F51FF7350>, <app.database.models.Group object at 0x0000010F51FF4E20>, <app.database.models.Group object at 0x0000010F51FF6470>, <app.database.models.Group object at 0x0000010F51FF78A0>, <app.database.models.Group object at 0x0000010F51FF79B0>, <app.database.models.Group object at 0x0000010F51FF7DF0>, <app.database.models.Group object at 0x0000010F51FF6580>, <app.database.models.Group object at 0x0000010F51FF6CF0>, <app.database.models.Group object at 0x0000010F51FF7BD0>, <app.database.models.Group object at 0x0000010F51FF69C0>, <app.database.models.Group object at 0x0000010F51FF6360>, <app.database.models.Group object at 0x0000010F51FF6E00>, <app.database.models.Group object at 0x0000010F51FF6140>, <app.database.models.Group object at 0x0000010F51FF6AD0>, <app.database.models.Group object at 0x0000010F51FF5BF0>, <app.database.models.Group object at 0x0000010F51FF6030>, <app.database.models.Group object at 0x0000010F51FF58C0>, <app.database.models.Group object at 0x0000010F51FF5480>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF6F10>, <app.database.models.Group object at 0x0000010F51FF56A0>, <app.database.models.Group object at 0x0000010F51FF5E10>, <app.database.models.Group object at 0x0000010F51FF7130>, <app.database.models.Group object at 0x0000010F51FF6BE0>, <app.database.models.Group object at 0x0000010F51FF68B0>, <app.database.models.Group object at 0x0000010F51FF7570>, <app.database.models.Group object at 0x0000010F51FF4F30>, <app.database.models.Group object at 0x0000010F51FF5D00>, <app.database.models.Group object at 0x0000010F51FF5F20>, <app.database.models.Group object at 0x0000010F51FF5040>, <app.database.models.Group object at 0x0000010F51FF7020>, <app.database.models.Group object at 0x0000010F51FF7460>, <app.database.models.Group object at 0x0000010F51FF6250>, <app.database.models.Group object at 0x0000010F51FF5150>, <app.database.models.Group object at 0x0000010F51FF59D0>, <app.database.models.Group object at 0x0000010F51FF67A0>, <app.database.models.Group object at 0x0000010F51FF7AC0>, <app.database.models.Group object at 0x0000010F51FF4D10>, <app.database.models.Group object at 0x0000010F51FF7790>, <app.database.models.Group object at 0x0000010F51FF4C00>, <app.database.models.Group object at 0x0000010F51FF7240>, <app.database.models.Group object at 0x0000010F51FF5370>, <app.database.models.Group object at 0x0000010F51FF7F00>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F52554050>, <app.database.models.Group object at 0x0000010F52554160>, <app.database.models.Group object at 0x0000010F52554270>, <app.database.models.Group object at 0x0000010F52554380>, <app.database.models.Group object at 0x0000010F52554490>, <app.database.models.Group object at 0x0000010F525545A0>, <app.database.models.Group object at 0x0000010F525546B0>, <app.database.models.Group object at 0x0000010F525547C0>, <app.database.models.Group object at 0x0000010F525548D0>, <app.database.models.Group object at 0x0000010F525549E0>, <app.database.models.Group object at 0x0000010F52554AF0>, <app.database.models.Group object at 0x0000010F52554C00>, <app.database.models.Group object at 0x0000010F52554D10>, <app.database.models.Group object at 0x0000010F52554E20>, <app.database.models.Group object at 0x0000010F52554F30>, <app.database.models.Group object at 0x0000010F52555040>, <app.database.models.Group object at 0x0000010F52555150>, <app.database.models.Group object at 0x0000010F52555260>, <app.database.models.Group object at 0x0000010F52555370>, <app.database.models.Group object at 0x0000010F52555480>, <app.database.models.Group object at 0x0000010F52555590>, <app.database.models.Group object at 0x0000010F525556A0>, <app.database.models.Group object at 0x0000010F525557B0>, <app.database.models.Group object at 0x0000010F525558C0>, <app.database.models.Group object at 0x0000010F525559D0>, <app.database.models.Group object at 0x0000010F52555AE0>, <app.database.models.Group object at 0x0000010F52555BF0>, <app.database.models.Group object at 0x0000010F52555D00>, <app.database.models.Group object at 0x0000010F52555E10>, <app.database.models.Group object at 0x0000010F52555F20>, <app.database.models.Group object at 0x0000010F525579B0>, <app.database.models.Group object at 0x0000010F52556030>]
2025-07-16 21:32:13,744 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:32:13,744 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 21...
2025-07-16 21:32:13,745 - DEBUG - app - [AUTO-CUTOFF] User 21 has 0 open orders.
2025-07-16 21:32:13,745 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 21...
2025-07-16 21:32:13,746 - DEBUG - app - [AUTO-CUTOFF] User 21 has 0 pending orders.
2025-07-16 21:32:13,746 - WARNING - app - [AUTO-CUTOFF] User 21 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:32:13,746 - INFO - app - [AUTO-CUTOFF] Processing user 22 (live), group: VIP
2025-07-16 21:32:13,746 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 22 (live) from cache/DB...
2025-07-16 21:32:13,749 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group VIP...
2025-07-16 21:32:13,750 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'VIP' from cache: None
2025-07-16 21:32:13,750 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'VIP', fetching from DB.
2025-07-16 21:32:13,753 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'VIP': [<app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F524B9150>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524B9370>, <app.database.models.Group object at 0x0000010F524B9F20>, <app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524B9480>, <app.database.models.Group object at 0x0000010F524B9AE0>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524B9E10>, <app.database.models.Group object at 0x0000010F524BA030>, <app.database.models.Group object at 0x0000010F524BA8B0>, <app.database.models.Group object at 0x0000010F524BA9C0>, <app.database.models.Group object at 0x0000010F524B9D00>, <app.database.models.Group object at 0x0000010F524B99D0>, <app.database.models.Group object at 0x0000010F524BA250>, <app.database.models.Group object at 0x0000010F524BA140>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F524B8380>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F51EFA7A0>, <app.database.models.Group object at 0x0000010F51EF9E10>, <app.database.models.Group object at 0x0000010F51FC9E10>, <app.database.models.Group object at 0x0000010F51FC8C00>, <app.database.models.Group object at 0x0000010F51FC8AF0>, <app.database.models.Group object at 0x0000010F51FC8D10>, <app.database.models.Group object at 0x0000010F51FC8160>, <app.database.models.Group object at 0x0000010F51FC8F30>, <app.database.models.Group object at 0x0000010F51FC8E20>, <app.database.models.Group object at 0x0000010F51FCB570>, <app.database.models.Group object at 0x0000010F51FCB790>, <app.database.models.Group object at 0x0000010F51FCB680>, <app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FCBBD0>, <app.database.models.Group object at 0x0000010F51FCBAC0>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FC86B0>, <app.database.models.Group object at 0x0000010F51FC85A0>, <app.database.models.Group object at 0x0000010F51FC8490>, <app.database.models.Group object at 0x0000010F51FCB8A0>, <app.database.models.Group object at 0x0000010F51FC8270>, <app.database.models.Group object at 0x0000010F51FCABE0>, <app.database.models.Group object at 0x0000010F51FC9480>, <app.database.models.Group object at 0x0000010F51FC8050>, <app.database.models.Group object at 0x0000010F51FC8380>, <app.database.models.Group object at 0x0000010F51FCBF00>, <app.database.models.Group object at 0x0000010F51FCA9C0>, <app.database.models.Group object at 0x0000010F52557350>, <app.database.models.Group object at 0x0000010F52557460>, <app.database.models.Group object at 0x0000010F52557570>, <app.database.models.Group object at 0x0000010F52557680>]
2025-07-16 21:32:13,754 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'VIP': {'sending_orders': 'barclays'}
2025-07-16 21:32:13,754 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 22...
2025-07-16 21:32:13,756 - DEBUG - app - [AUTO-CUTOFF] User 22 has 0 open orders.
2025-07-16 21:32:13,756 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 22...
2025-07-16 21:32:13,757 - DEBUG - app - [AUTO-CUTOFF] User 22 has 0 pending orders.
2025-07-16 21:32:13,757 - WARNING - app - [AUTO-CUTOFF] User 22 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:32:13,757 - INFO - app - [AUTO-CUTOFF] Processing user 23 (live), group: Group B
2025-07-16 21:32:13,757 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 23 (live) from cache/DB...
2025-07-16 21:32:13,760 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:32:13,761 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:32:13,762 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:32:13,765 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F51FF7DF0>, <app.database.models.Group object at 0x0000010F51FF7350>, <app.database.models.Group object at 0x0000010F51FF6580>, <app.database.models.Group object at 0x0000010F51FF6CF0>, <app.database.models.Group object at 0x0000010F51FF7BD0>, <app.database.models.Group object at 0x0000010F51FF69C0>, <app.database.models.Group object at 0x0000010F51FF6360>, <app.database.models.Group object at 0x0000010F51FF6E00>, <app.database.models.Group object at 0x0000010F51FF6140>, <app.database.models.Group object at 0x0000010F51FF6AD0>, <app.database.models.Group object at 0x0000010F51FF5BF0>, <app.database.models.Group object at 0x0000010F51FF6030>, <app.database.models.Group object at 0x0000010F51FF58C0>, <app.database.models.Group object at 0x0000010F51FF5480>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF6F10>, <app.database.models.Group object at 0x0000010F51FF56A0>, <app.database.models.Group object at 0x0000010F51FF5E10>, <app.database.models.Group object at 0x0000010F51FF7130>, <app.database.models.Group object at 0x0000010F51FF6BE0>, <app.database.models.Group object at 0x0000010F51FF68B0>, <app.database.models.Group object at 0x0000010F51FF7570>, <app.database.models.Group object at 0x0000010F51FF4F30>, <app.database.models.Group object at 0x0000010F51FF5D00>, <app.database.models.Group object at 0x0000010F51FF5F20>, <app.database.models.Group object at 0x0000010F51FF5040>, <app.database.models.Group object at 0x0000010F51FF7020>, <app.database.models.Group object at 0x0000010F51FF7460>, <app.database.models.Group object at 0x0000010F51FF6250>, <app.database.models.Group object at 0x0000010F51FF5150>, <app.database.models.Group object at 0x0000010F51FF59D0>, <app.database.models.Group object at 0x0000010F51FF67A0>, <app.database.models.Group object at 0x0000010F51FF7AC0>, <app.database.models.Group object at 0x0000010F51FF4D10>, <app.database.models.Group object at 0x0000010F51FF7790>, <app.database.models.Group object at 0x0000010F51FF4C00>, <app.database.models.Group object at 0x0000010F51FF7240>, <app.database.models.Group object at 0x0000010F51FF5370>, <app.database.models.Group object at 0x0000010F51FF7F00>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F52554050>, <app.database.models.Group object at 0x0000010F52554160>, <app.database.models.Group object at 0x0000010F52554270>, <app.database.models.Group object at 0x0000010F52554380>, <app.database.models.Group object at 0x0000010F52554490>, <app.database.models.Group object at 0x0000010F525545A0>, <app.database.models.Group object at 0x0000010F525546B0>, <app.database.models.Group object at 0x0000010F525547C0>, <app.database.models.Group object at 0x0000010F525548D0>, <app.database.models.Group object at 0x0000010F525549E0>, <app.database.models.Group object at 0x0000010F52554AF0>, <app.database.models.Group object at 0x0000010F52554C00>, <app.database.models.Group object at 0x0000010F52554D10>, <app.database.models.Group object at 0x0000010F52554E20>, <app.database.models.Group object at 0x0000010F52554F30>, <app.database.models.Group object at 0x0000010F52555040>, <app.database.models.Group object at 0x0000010F52555150>, <app.database.models.Group object at 0x0000010F52555260>, <app.database.models.Group object at 0x0000010F52555370>, <app.database.models.Group object at 0x0000010F52555480>, <app.database.models.Group object at 0x0000010F52555590>, <app.database.models.Group object at 0x0000010F525556A0>, <app.database.models.Group object at 0x0000010F525557B0>, <app.database.models.Group object at 0x0000010F525558C0>, <app.database.models.Group object at 0x0000010F525559D0>, <app.database.models.Group object at 0x0000010F52555AE0>, <app.database.models.Group object at 0x0000010F52555BF0>, <app.database.models.Group object at 0x0000010F52555D00>, <app.database.models.Group object at 0x0000010F52555E10>, <app.database.models.Group object at 0x0000010F52555F20>, <app.database.models.Group object at 0x0000010F525579B0>, <app.database.models.Group object at 0x0000010F52556030>]
2025-07-16 21:32:13,766 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:32:13,766 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 23...
2025-07-16 21:32:13,767 - DEBUG - app - [AUTO-CUTOFF] User 23 has 0 open orders.
2025-07-16 21:32:13,767 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 23...
2025-07-16 21:32:13,769 - DEBUG - app - [AUTO-CUTOFF] User 23 has 0 pending orders.
2025-07-16 21:32:13,769 - WARNING - app - [AUTO-CUTOFF] User 23 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:32:13,769 - INFO - app - [AUTO-CUTOFF] Processing user 25 (live), group: Group B
2025-07-16 21:32:13,769 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 25 (live) from cache/DB...
2025-07-16 21:32:13,774 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:32:13,775 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:32:13,775 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:32:13,778 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F524B9370>, <app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524B9F20>, <app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524B9480>, <app.database.models.Group object at 0x0000010F524B9AE0>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524B9E10>, <app.database.models.Group object at 0x0000010F524BA030>, <app.database.models.Group object at 0x0000010F524BA8B0>, <app.database.models.Group object at 0x0000010F524BA9C0>, <app.database.models.Group object at 0x0000010F524B9D00>, <app.database.models.Group object at 0x0000010F524B99D0>, <app.database.models.Group object at 0x0000010F524BA250>, <app.database.models.Group object at 0x0000010F524BA140>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F524B8380>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F51EFA7A0>, <app.database.models.Group object at 0x0000010F51EF9E10>, <app.database.models.Group object at 0x0000010F51FC9E10>, <app.database.models.Group object at 0x0000010F51FC8C00>, <app.database.models.Group object at 0x0000010F51FC8AF0>, <app.database.models.Group object at 0x0000010F51FC8D10>, <app.database.models.Group object at 0x0000010F51FC8160>, <app.database.models.Group object at 0x0000010F51FC8F30>, <app.database.models.Group object at 0x0000010F51FC8E20>, <app.database.models.Group object at 0x0000010F51FCB570>, <app.database.models.Group object at 0x0000010F51FCB790>, <app.database.models.Group object at 0x0000010F51FCB680>, <app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FCBBD0>, <app.database.models.Group object at 0x0000010F51FCBAC0>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FC86B0>, <app.database.models.Group object at 0x0000010F51FC85A0>, <app.database.models.Group object at 0x0000010F51FC8490>, <app.database.models.Group object at 0x0000010F51FCB8A0>, <app.database.models.Group object at 0x0000010F51FC8270>, <app.database.models.Group object at 0x0000010F51FCABE0>, <app.database.models.Group object at 0x0000010F51FC9480>, <app.database.models.Group object at 0x0000010F51FC8050>, <app.database.models.Group object at 0x0000010F51FC8380>, <app.database.models.Group object at 0x0000010F51FCBF00>, <app.database.models.Group object at 0x0000010F51FCA9C0>, <app.database.models.Group object at 0x0000010F51FF6470>, <app.database.models.Group object at 0x0000010F51FF79B0>, <app.database.models.Group object at 0x0000010F51FF4E20>, <app.database.models.Group object at 0x0000010F51FF78A0>, <app.database.models.Group object at 0x0000010F52557350>, <app.database.models.Group object at 0x0000010F52557460>, <app.database.models.Group object at 0x0000010F52557570>, <app.database.models.Group object at 0x0000010F52557680>, <app.database.models.Group object at 0x0000010F52557790>, <app.database.models.Group object at 0x0000010F525578A0>]
2025-07-16 21:32:13,779 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:32:13,779 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 25...
2025-07-16 21:32:13,780 - DEBUG - app - [AUTO-CUTOFF] User 25 has 0 open orders.
2025-07-16 21:32:13,780 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 25...
2025-07-16 21:32:13,782 - DEBUG - app - [AUTO-CUTOFF] User 25 has 0 pending orders.
2025-07-16 21:32:13,782 - WARNING - app - [AUTO-CUTOFF] User 25 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:32:13,782 - INFO - app - [AUTO-CUTOFF] Processing user 26 (live), group: Royal+
2025-07-16 21:32:13,782 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 26 (live) from cache/DB...
2025-07-16 21:32:13,785 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Royal+...
2025-07-16 21:32:13,786 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Royal+' from cache: None
2025-07-16 21:32:13,786 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Royal+', fetching from DB.
2025-07-16 21:32:13,789 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Royal+': [<app.database.models.Group object at 0x0000010F51FF69C0>, <app.database.models.Group object at 0x0000010F51FF7DF0>, <app.database.models.Group object at 0x0000010F51FF6360>, <app.database.models.Group object at 0x0000010F51FF6E00>, <app.database.models.Group object at 0x0000010F51FF6140>, <app.database.models.Group object at 0x0000010F51FF6AD0>, <app.database.models.Group object at 0x0000010F51FF5BF0>, <app.database.models.Group object at 0x0000010F51FF6030>, <app.database.models.Group object at 0x0000010F51FF58C0>, <app.database.models.Group object at 0x0000010F51FF5480>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF6F10>, <app.database.models.Group object at 0x0000010F51FF56A0>, <app.database.models.Group object at 0x0000010F51FF5E10>, <app.database.models.Group object at 0x0000010F51FF7130>, <app.database.models.Group object at 0x0000010F51FF6BE0>, <app.database.models.Group object at 0x0000010F51FF68B0>, <app.database.models.Group object at 0x0000010F51FF7570>, <app.database.models.Group object at 0x0000010F51FF4F30>, <app.database.models.Group object at 0x0000010F51FF5D00>, <app.database.models.Group object at 0x0000010F51FF5F20>, <app.database.models.Group object at 0x0000010F51FF5040>, <app.database.models.Group object at 0x0000010F51FF7020>, <app.database.models.Group object at 0x0000010F51FF7460>, <app.database.models.Group object at 0x0000010F51FF6250>, <app.database.models.Group object at 0x0000010F51FF5150>, <app.database.models.Group object at 0x0000010F51FF59D0>, <app.database.models.Group object at 0x0000010F51FF67A0>, <app.database.models.Group object at 0x0000010F51FF7AC0>, <app.database.models.Group object at 0x0000010F51FF4D10>, <app.database.models.Group object at 0x0000010F51FF7790>, <app.database.models.Group object at 0x0000010F51FF4C00>, <app.database.models.Group object at 0x0000010F51FF7240>, <app.database.models.Group object at 0x0000010F51FF5370>, <app.database.models.Group object at 0x0000010F51FF7F00>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524B9150>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F52554050>, <app.database.models.Group object at 0x0000010F52554160>, <app.database.models.Group object at 0x0000010F52554270>, <app.database.models.Group object at 0x0000010F52554380>, <app.database.models.Group object at 0x0000010F52554490>, <app.database.models.Group object at 0x0000010F525545A0>, <app.database.models.Group object at 0x0000010F525546B0>, <app.database.models.Group object at 0x0000010F525547C0>, <app.database.models.Group object at 0x0000010F525548D0>, <app.database.models.Group object at 0x0000010F525549E0>, <app.database.models.Group object at 0x0000010F52554AF0>, <app.database.models.Group object at 0x0000010F52554C00>, <app.database.models.Group object at 0x0000010F52554D10>, <app.database.models.Group object at 0x0000010F52554E20>, <app.database.models.Group object at 0x0000010F52554F30>, <app.database.models.Group object at 0x0000010F52555040>, <app.database.models.Group object at 0x0000010F52555150>, <app.database.models.Group object at 0x0000010F52555260>, <app.database.models.Group object at 0x0000010F52555370>, <app.database.models.Group object at 0x0000010F52555480>, <app.database.models.Group object at 0x0000010F52555590>, <app.database.models.Group object at 0x0000010F525556A0>, <app.database.models.Group object at 0x0000010F525557B0>, <app.database.models.Group object at 0x0000010F525558C0>, <app.database.models.Group object at 0x0000010F525559D0>, <app.database.models.Group object at 0x0000010F52555AE0>, <app.database.models.Group object at 0x0000010F52555BF0>, <app.database.models.Group object at 0x0000010F52555D00>, <app.database.models.Group object at 0x0000010F52555E10>, <app.database.models.Group object at 0x0000010F52555F20>]
2025-07-16 21:32:13,791 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Royal+': {'sending_orders': 'barclays'}
2025-07-16 21:32:13,791 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 26...
2025-07-16 21:32:13,792 - DEBUG - app - [AUTO-CUTOFF] User 26 has 2 open orders.
2025-07-16 21:32:13,792 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 26...
2025-07-16 21:32:13,793 - DEBUG - app - [AUTO-CUTOFF] User 26 has 0 pending orders.
2025-07-16 21:32:13,793 - DEBUG - app - [AUTO-CUTOFF] User 26 total positions for portfolio calculation: 2
2025-07-16 21:32:13,795 - DEBUG - app - [AUTO-CUTOFF] User 26 adjusted market prices: {}
2025-07-16 21:32:13,795 - DEBUG - app - [AUTO-CUTOFF] User 26 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:32:13,795 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 26...
2025-07-16 21:32:14,088 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol XAGUSD
2025-07-16 21:32:14,089 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol BTCUSD
2025-07-16 21:32:14,089 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 26: {'balance': '184345.81000000', 'equity': '184345.81000000', 'margin': '146484.47000000', 'free_margin': '37861.34000000', 'profit_loss': '0.0', 'margin_level': '125.8466580109140579885362592', 'positions': [{'order_id': '7987141755', 'order_company_name': 'XAGUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('41.09800000'), 'margin': Decimal('19.54000000'), 'contract_value': Decimal('50.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1116628265', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('6.00000000'), 'order_price': Decimal('132091.90000000'), 'margin': Decimal('146464.93000000'), 'contract_value': Decimal('6.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3661.62000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:32:14,089 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 26: {'balance': '184345.81000000', 'equity': '184345.81000000', 'margin': '146484.47000000', 'free_margin': '37861.34000000', 'profit_loss': '0.0', 'margin_level': '125.8466580109140579885362592', 'positions_with_pnl': [{'order_id': '7987141755', 'order_company_name': 'XAGUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('41.09800000'), 'margin': Decimal('19.54000000'), 'contract_value': Decimal('50.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1116628265', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('6.00000000'), 'order_price': Decimal('132091.90000000'), 'margin': Decimal('146464.93000000'), 'contract_value': Decimal('6.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3661.62000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:32:14,090 - INFO - app - [AUTO-CUTOFF] User 26 margin_level: 125.8466580109140579885362592
2025-07-16 21:32:14,091 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 26
2025-07-16 21:32:14,091 - INFO - app - [AUTO-CUTOFF] Processing user 1 (demo), group: Group B
2025-07-16 21:32:14,091 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 1 (demo) from cache/DB...
2025-07-16 21:32:14,096 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:32:14,097 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:32:14,097 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:32:14,101 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F524B9AE0>, <app.database.models.Group object at 0x0000010F524B9370>, <app.database.models.Group object at 0x0000010F524B9480>, <app.database.models.Group object at 0x0000010F524B9F20>, <app.database.models.Group object at 0x0000010F524B9E10>, <app.database.models.Group object at 0x0000010F524BA030>, <app.database.models.Group object at 0x0000010F524BA8B0>, <app.database.models.Group object at 0x0000010F524BA9C0>, <app.database.models.Group object at 0x0000010F524B9D00>, <app.database.models.Group object at 0x0000010F524B99D0>, <app.database.models.Group object at 0x0000010F524BA250>, <app.database.models.Group object at 0x0000010F524BA140>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F524B8380>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F51EFA7A0>, <app.database.models.Group object at 0x0000010F51EF9E10>, <app.database.models.Group object at 0x0000010F51FC9E10>, <app.database.models.Group object at 0x0000010F51FC8C00>, <app.database.models.Group object at 0x0000010F51FC8AF0>, <app.database.models.Group object at 0x0000010F51FC8D10>, <app.database.models.Group object at 0x0000010F51FC8160>, <app.database.models.Group object at 0x0000010F51FC8F30>, <app.database.models.Group object at 0x0000010F51FC8E20>, <app.database.models.Group object at 0x0000010F51FCB570>, <app.database.models.Group object at 0x0000010F51FCB790>, <app.database.models.Group object at 0x0000010F51FCB680>, <app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FCBBD0>, <app.database.models.Group object at 0x0000010F51FCBAC0>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FC86B0>, <app.database.models.Group object at 0x0000010F51FC85A0>, <app.database.models.Group object at 0x0000010F51FC8490>, <app.database.models.Group object at 0x0000010F51FCB8A0>, <app.database.models.Group object at 0x0000010F51FC8270>, <app.database.models.Group object at 0x0000010F51FCABE0>, <app.database.models.Group object at 0x0000010F51FC9480>, <app.database.models.Group object at 0x0000010F51FC8050>, <app.database.models.Group object at 0x0000010F51FC8380>, <app.database.models.Group object at 0x0000010F51FCBF00>, <app.database.models.Group object at 0x0000010F51FCA9C0>, <app.database.models.Group object at 0x0000010F51FF6470>, <app.database.models.Group object at 0x0000010F51FF79B0>, <app.database.models.Group object at 0x0000010F51FF4E20>, <app.database.models.Group object at 0x0000010F51FF78A0>, <app.database.models.Group object at 0x0000010F51FF6580>, <app.database.models.Group object at 0x0000010F51FF7BD0>, <app.database.models.Group object at 0x0000010F51FF7350>, <app.database.models.Group object at 0x0000010F51FF6CF0>, <app.database.models.Group object at 0x0000010F52557350>, <app.database.models.Group object at 0x0000010F52557460>, <app.database.models.Group object at 0x0000010F52557570>, <app.database.models.Group object at 0x0000010F52557680>, <app.database.models.Group object at 0x0000010F52557790>, <app.database.models.Group object at 0x0000010F525578A0>]
2025-07-16 21:32:14,102 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:32:14,103 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 1...
2025-07-16 21:32:14,106 - DEBUG - app - [AUTO-CUTOFF] User 1 has 2 open orders.
2025-07-16 21:32:14,106 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 1...
2025-07-16 21:32:14,109 - DEBUG - app - [AUTO-CUTOFF] User 1 has 1 pending orders.
2025-07-16 21:32:14,109 - DEBUG - app - [AUTO-CUTOFF] User 1 total positions for portfolio calculation: 3
2025-07-16 21:32:14,111 - DEBUG - app - [AUTO-CUTOFF] User 1 adjusted market prices: {}
2025-07-16 21:32:14,111 - DEBUG - app - [AUTO-CUTOFF] User 1 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:32:14,111 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 1...
2025-07-16 21:32:14,406 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:32:14,406 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:32:14,406 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 1: {'balance': '17011.54000000', 'equity': '17011.54000000', 'margin': '6.54000000', 'free_margin': '17005.00000000', 'profit_loss': '0.0', 'margin_level': '260115.2905198776758409785933', 'positions': [{'order_id': '1000052-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.66800000'), 'margin': Decimal('6.54341805'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000053-001', 'order_company_name': 'AUDJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.56000000'), 'margin': Decimal('6.54258453'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:32:14,406 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 1: {'balance': '17011.54000000', 'equity': '17011.54000000', 'margin': '6.54000000', 'free_margin': '17005.00000000', 'profit_loss': '0.0', 'margin_level': '260115.2905198776758409785933', 'positions_with_pnl': [{'order_id': '1000052-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.66800000'), 'margin': Decimal('6.54341805'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000053-001', 'order_company_name': 'AUDJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.56000000'), 'margin': Decimal('6.54258453'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:32:14,406 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:14,408 - INFO - app - [AUTO-CUTOFF] User 1 margin_level: 260115.2905198776758409785933
2025-07-16 21:32:14,408 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:14,408 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 1
2025-07-16 21:32:14,408 - INFO - app - [AUTO-CUTOFF] Processing user 2 (demo), group: 
2025-07-16 21:32:14,408 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 2 (demo) from cache/DB...
2025-07-16 21:32:14,411 - WARNING - app - [AUTO-CUTOFF] User 2 has no group_name set. Skipping portfolio update.
2025-07-16 21:32:14,411 - INFO - app - [AUTO-CUTOFF] Processing user 3 (demo), group: string
2025-07-16 21:32:14,411 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 3 (demo) from cache/DB...
2025-07-16 21:32:14,415 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group string...
2025-07-16 21:32:14,415 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'string' from cache: None
2025-07-16 21:32:14,416 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'string', fetching from DB.
2025-07-16 21:32:14,417 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'string': []
2025-07-16 21:32:14,417 - ERROR - app - [AUTO-CUTOFF] Group symbol settings not found in DB for group 'string'. Skipping portfolio update for user 3.
2025-07-16 21:32:14,417 - INFO - app - [AUTO-CUTOFF] Processing user 4 (demo), group: Group B
2025-07-16 21:32:14,417 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 4 (demo) from cache/DB...
2025-07-16 21:32:14,418 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:32:14,419 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:32:14,419 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:32:14,422 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F51FC8160>, <app.database.models.Group object at 0x0000010F51FC8F30>, <app.database.models.Group object at 0x0000010F51FC8E20>, <app.database.models.Group object at 0x0000010F51FCB570>, <app.database.models.Group object at 0x0000010F51FCB790>, <app.database.models.Group object at 0x0000010F51FCB680>, <app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FCBBD0>, <app.database.models.Group object at 0x0000010F51FCBAC0>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FC86B0>, <app.database.models.Group object at 0x0000010F51FC85A0>, <app.database.models.Group object at 0x0000010F51FC8490>, <app.database.models.Group object at 0x0000010F51FCB8A0>, <app.database.models.Group object at 0x0000010F51FC8270>, <app.database.models.Group object at 0x0000010F51FCABE0>, <app.database.models.Group object at 0x0000010F51FC9480>, <app.database.models.Group object at 0x0000010F51FC8050>, <app.database.models.Group object at 0x0000010F51FC8380>, <app.database.models.Group object at 0x0000010F51FCBF00>, <app.database.models.Group object at 0x0000010F51FCA9C0>, <app.database.models.Group object at 0x0000010F51FF6470>, <app.database.models.Group object at 0x0000010F51FF79B0>, <app.database.models.Group object at 0x0000010F51FF4E20>, <app.database.models.Group object at 0x0000010F51FF78A0>, <app.database.models.Group object at 0x0000010F51FF6580>, <app.database.models.Group object at 0x0000010F51FF7BD0>, <app.database.models.Group object at 0x0000010F51FF7350>, <app.database.models.Group object at 0x0000010F51FF6CF0>, <app.database.models.Group object at 0x0000010F51FF69C0>, <app.database.models.Group object at 0x0000010F51FF6030>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF7680>, <app.database.models.Group object at 0x0000010F51FF5BF0>, <app.database.models.Group object at 0x0000010F51FF6AD0>, <app.database.models.Group object at 0x0000010F51FF6E00>, <app.database.models.Group object at 0x0000010F51FF6140>, <app.database.models.Group object at 0x0000010F51FF7DF0>, <app.database.models.Group object at 0x0000010F51FF5480>, <app.database.models.Group object at 0x0000010F51FF58C0>, <app.database.models.Group object at 0x0000010F51FF6F10>, <app.database.models.Group object at 0x0000010F51FF5E10>, <app.database.models.Group object at 0x0000010F51FF7130>, <app.database.models.Group object at 0x0000010F51FF6BE0>, <app.database.models.Group object at 0x0000010F51FF68B0>, <app.database.models.Group object at 0x0000010F51FF7570>, <app.database.models.Group object at 0x0000010F51FF4F30>, <app.database.models.Group object at 0x0000010F51FF5D00>, <app.database.models.Group object at 0x0000010F51FF5F20>, <app.database.models.Group object at 0x0000010F51FF5040>, <app.database.models.Group object at 0x0000010F51FF7020>, <app.database.models.Group object at 0x0000010F51FF7460>, <app.database.models.Group object at 0x0000010F51FF6250>, <app.database.models.Group object at 0x0000010F51FF5150>, <app.database.models.Group object at 0x0000010F51FF59D0>, <app.database.models.Group object at 0x0000010F51FF67A0>, <app.database.models.Group object at 0x0000010F51FF7AC0>, <app.database.models.Group object at 0x0000010F51FF4D10>, <app.database.models.Group object at 0x0000010F51FF7790>, <app.database.models.Group object at 0x0000010F51FF4C00>, <app.database.models.Group object at 0x0000010F51FF7240>, <app.database.models.Group object at 0x0000010F51FF5370>, <app.database.models.Group object at 0x0000010F51FF7F00>, <app.database.models.Group object at 0x0000010F524B9AE0>, <app.database.models.Group object at 0x0000010F524B9370>, <app.database.models.Group object at 0x0000010F524B9480>, <app.database.models.Group object at 0x0000010F524B9F20>, <app.database.models.Group object at 0x0000010F524B9E10>, <app.database.models.Group object at 0x0000010F524BA030>, <app.database.models.Group object at 0x0000010F524BA8B0>, <app.database.models.Group object at 0x0000010F524BA9C0>, <app.database.models.Group object at 0x0000010F524B9D00>, <app.database.models.Group object at 0x0000010F524B99D0>, <app.database.models.Group object at 0x0000010F524BA250>, <app.database.models.Group object at 0x0000010F524BA140>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F524B8380>]
2025-07-16 21:32:14,423 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:32:14,423 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 4...
2025-07-16 21:32:14,424 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 open orders.
2025-07-16 21:32:14,425 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 4...
2025-07-16 21:32:14,426 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 pending orders.
2025-07-16 21:32:14,426 - WARNING - app - [AUTO-CUTOFF] User 4 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:32:14,426 - INFO - app - [AUTO-CUTOFF] Processing user 5 (demo), group: None
2025-07-16 21:32:14,426 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 5 (demo) from cache/DB...
2025-07-16 21:32:14,429 - WARNING - app - [AUTO-CUTOFF] User 5 has no group_name set. Skipping portfolio update.
2025-07-16 21:32:14,429 - INFO - app - [AUTO-CUTOFF] Processing user 6 (demo), group: None
2025-07-16 21:32:14,429 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 6 (demo) from cache/DB...
2025-07-16 21:32:14,434 - WARNING - app - [AUTO-CUTOFF] User 6 has no group_name set. Skipping portfolio update.
2025-07-16 21:32:14,434 - INFO - app - [AUTO-CUTOFF] Processing user 9 (demo), group: Group B
2025-07-16 21:32:14,434 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 9 (demo) from cache/DB...
2025-07-16 21:32:14,435 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:32:14,436 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:32:14,436 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:32:14,441 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F524BBBD0>, <app.database.models.Group object at 0x0000010F524B96A0>, <app.database.models.Group object at 0x0000010F524B98C0>, <app.database.models.Group object at 0x0000010F524B9590>, <app.database.models.Group object at 0x0000010F524B9260>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524B9150>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524A8050>, <app.database.models.Group object at 0x0000010F524A8160>, <app.database.models.Group object at 0x0000010F524A8270>, <app.database.models.Group object at 0x0000010F524A8380>, <app.database.models.Group object at 0x0000010F524A8490>, <app.database.models.Group object at 0x0000010F524A85A0>, <app.database.models.Group object at 0x0000010F524A86B0>, <app.database.models.Group object at 0x0000010F524A87C0>, <app.database.models.Group object at 0x0000010F524A88D0>, <app.database.models.Group object at 0x0000010F524A89E0>, <app.database.models.Group object at 0x0000010F524A8AF0>, <app.database.models.Group object at 0x0000010F524A8C00>, <app.database.models.Group object at 0x0000010F524A8D10>, <app.database.models.Group object at 0x0000010F524A8E20>, <app.database.models.Group object at 0x0000010F524A8F30>, <app.database.models.Group object at 0x0000010F524A9040>, <app.database.models.Group object at 0x0000010F524A9150>, <app.database.models.Group object at 0x0000010F524A9260>, <app.database.models.Group object at 0x0000010F524A9370>, <app.database.models.Group object at 0x0000010F524A9480>, <app.database.models.Group object at 0x0000010F524A9590>, <app.database.models.Group object at 0x0000010F524A96A0>, <app.database.models.Group object at 0x0000010F524A97B0>, <app.database.models.Group object at 0x0000010F524A98C0>, <app.database.models.Group object at 0x0000010F524A99D0>, <app.database.models.Group object at 0x0000010F524A9AE0>, <app.database.models.Group object at 0x0000010F524A9BF0>, <app.database.models.Group object at 0x0000010F524A9D00>, <app.database.models.Group object at 0x0000010F524A9E10>, <app.database.models.Group object at 0x0000010F524A9F20>, <app.database.models.Group object at 0x0000010F524AA030>, <app.database.models.Group object at 0x0000010F524AA140>, <app.database.models.Group object at 0x0000010F524AA250>, <app.database.models.Group object at 0x0000010F524AA360>, <app.database.models.Group object at 0x0000010F524AA470>, <app.database.models.Group object at 0x0000010F524AA580>]
2025-07-16 21:32:14,442 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:32:14,442 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 9...
2025-07-16 21:32:14,445 - DEBUG - app - [AUTO-CUTOFF] User 9 has 28 open orders.
2025-07-16 21:32:14,445 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 9...
2025-07-16 21:32:14,448 - DEBUG - app - [AUTO-CUTOFF] User 9 has 6 pending orders.
2025-07-16 21:32:14,448 - DEBUG - app - [AUTO-CUTOFF] User 9 total positions for portfolio calculation: 34
2025-07-16 21:32:14,450 - DEBUG - app - [AUTO-CUTOFF] User 9 adjusted market prices: {}
2025-07-16 21:32:14,450 - DEBUG - app - [AUTO-CUTOFF] User 9 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:32:14,450 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 9...
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDUSD
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDUSD
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFSGD
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFSGD
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CADJPY
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CADJPY
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFJPY
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFJPY
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURGBP
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURJPY
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURJPY
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURNZD
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURNZD
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol NZDJPY
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDCHF
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDCHF
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDNOK
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDNOK
2025-07-16 21:32:14,740 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDSGD
2025-07-16 21:32:14,741 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDTRY
2025-07-16 21:32:14,741 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 9: {'balance': '98181.73000000', 'equity': '98181.73000000', 'margin': '1917.31000000', 'free_margin': '96264.42000000', 'profit_loss': '0.0', 'margin_level': '5120.806233733720681579921870', 'positions': [{'order_id': '2504219016', 'order_company_name': 'AUDUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.64743000'), 'margin': Decimal('64.74000000'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4208488950', 'order_company_name': 'AUDUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('0.64707000'), 'margin': Decimal('142.36000000'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1409905880', 'order_company_name': 'CHFSGD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57561500'), 'margin': Decimal('122.35389131'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7183762766', 'order_company_name': 'CHFSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57505500'), 'margin': Decimal('122.31506360'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9716387266', 'order_company_name': 'CADJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.24150000'), 'margin': Decimal('109.44987397'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9899743248', 'order_company_name': 'CADJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.27050000'), 'margin': Decimal('109.47824594'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2965066905', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('1.77481000'), 'margin': Decimal('252.73304420'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6518780780', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.21000000'), 'order_price': Decimal('1.77439000'), 'margin': Decimal('241.18574740'), 'contract_value': Decimal('21000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7509572762', 'order_company_name': 'CHFJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.15500000'), 'margin': Decimal('122.35584187'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7522048723', 'order_company_name': 'CHFJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.09500000'), 'margin': Decimal('122.31379417'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6209391896', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77480000'), 'margin': Decimal('57.44317680'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8581607125', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77442000'), 'margin': Decimal('57.43111760'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8951109289', 'order_company_name': 'EURGBP', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.85403000'), 'margin': Decimal('114.85104400'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7115525171', 'order_company_name': 'EURJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.26050000'), 'margin': Decimal('114.87277223'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2099467271', 'order_company_name': 'EURJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.23150000'), 'margin': Decimal('114.85285533'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4283527369', 'order_company_name': 'EURNZD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.91952500'), 'margin': Decimal('114.85328250'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6611902574', 'order_company_name': 'EURNZD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.92063500'), 'margin': Decimal('114.81922980'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4731664142', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34376000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8676137902', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34361000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3301052276', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34379000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2972795665', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34378000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1117118581', 'order_company_name': 'NZDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('87.10150000'), 'margin': Decimal('5.97837949'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3385451189', 'order_company_name': 'USDCHF', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81771000'), 'margin': Decimal('149.97126753'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6134727989', 'order_company_name': 'USDCHF', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81805000'), 'margin': Decimal('150.03056608'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9211531174', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.04973000'), 'margin': Decimal('100.00169162'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5200391957', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.05023000'), 'margin': Decimal('100.00169154'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5654381883', 'order_company_name': 'USDSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.31000000'), 'order_price': Decimal('1.28795000'), 'margin': Decimal('309.93393934'), 'contract_value': Decimal('31000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6985407710', 'order_company_name': 'USDTRY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('39.56087000'), 'margin': Decimal('99.98738813'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:32:14,741 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 9: {'balance': '98181.73000000', 'equity': '98181.73000000', 'margin': '1917.31000000', 'free_margin': '96264.42000000', 'profit_loss': '0.0', 'margin_level': '5120.806233733720681579921870', 'positions_with_pnl': [{'order_id': '2504219016', 'order_company_name': 'AUDUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.64743000'), 'margin': Decimal('64.74000000'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4208488950', 'order_company_name': 'AUDUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('0.64707000'), 'margin': Decimal('142.36000000'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1409905880', 'order_company_name': 'CHFSGD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57561500'), 'margin': Decimal('122.35389131'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7183762766', 'order_company_name': 'CHFSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57505500'), 'margin': Decimal('122.31506360'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9716387266', 'order_company_name': 'CADJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.24150000'), 'margin': Decimal('109.44987397'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9899743248', 'order_company_name': 'CADJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.27050000'), 'margin': Decimal('109.47824594'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2965066905', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('1.77481000'), 'margin': Decimal('252.73304420'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6518780780', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.21000000'), 'order_price': Decimal('1.77439000'), 'margin': Decimal('241.18574740'), 'contract_value': Decimal('21000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7509572762', 'order_company_name': 'CHFJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.15500000'), 'margin': Decimal('122.35584187'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7522048723', 'order_company_name': 'CHFJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.09500000'), 'margin': Decimal('122.31379417'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6209391896', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77480000'), 'margin': Decimal('57.44317680'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8581607125', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77442000'), 'margin': Decimal('57.43111760'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8951109289', 'order_company_name': 'EURGBP', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.85403000'), 'margin': Decimal('114.85104400'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7115525171', 'order_company_name': 'EURJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.26050000'), 'margin': Decimal('114.87277223'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2099467271', 'order_company_name': 'EURJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.23150000'), 'margin': Decimal('114.85285533'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4283527369', 'order_company_name': 'EURNZD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.91952500'), 'margin': Decimal('114.85328250'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6611902574', 'order_company_name': 'EURNZD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.92063500'), 'margin': Decimal('114.81922980'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4731664142', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34376000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8676137902', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34361000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3301052276', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34379000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2972795665', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34378000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1117118581', 'order_company_name': 'NZDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('87.10150000'), 'margin': Decimal('5.97837949'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3385451189', 'order_company_name': 'USDCHF', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81771000'), 'margin': Decimal('149.97126753'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6134727989', 'order_company_name': 'USDCHF', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81805000'), 'margin': Decimal('150.03056608'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9211531174', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.04973000'), 'margin': Decimal('100.00169162'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5200391957', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.05023000'), 'margin': Decimal('100.00169154'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5654381883', 'order_company_name': 'USDSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.31000000'), 'order_price': Decimal('1.28795000'), 'margin': Decimal('309.93393934'), 'contract_value': Decimal('31000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6985407710', 'order_company_name': 'USDTRY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('39.56087000'), 'margin': Decimal('99.98738813'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:32:14,786 - INFO - app - [AUTO-CUTOFF] User 9 margin_level: 5120.806233733720681579921870
2025-07-16 21:32:14,787 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 9
2025-07-16 21:32:14,787 - INFO - app - [AUTO-CUTOFF] Processing user 10 (demo), group: Group B
2025-07-16 21:32:14,787 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 10 (demo) from cache/DB...
2025-07-16 21:32:14,789 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:32:14,789 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:32:14,789 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:32:14,792 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F524BBBD0>, <app.database.models.Group object at 0x0000010F524B96A0>, <app.database.models.Group object at 0x0000010F524B98C0>, <app.database.models.Group object at 0x0000010F524B9590>, <app.database.models.Group object at 0x0000010F524B9260>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524B9150>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524A8050>, <app.database.models.Group object at 0x0000010F524A8160>, <app.database.models.Group object at 0x0000010F524A8270>, <app.database.models.Group object at 0x0000010F524A8380>, <app.database.models.Group object at 0x0000010F524A8490>, <app.database.models.Group object at 0x0000010F524A85A0>, <app.database.models.Group object at 0x0000010F524A86B0>, <app.database.models.Group object at 0x0000010F524A87C0>, <app.database.models.Group object at 0x0000010F524A88D0>, <app.database.models.Group object at 0x0000010F524A89E0>, <app.database.models.Group object at 0x0000010F524A8AF0>, <app.database.models.Group object at 0x0000010F524A8C00>, <app.database.models.Group object at 0x0000010F524A8D10>, <app.database.models.Group object at 0x0000010F524A8E20>, <app.database.models.Group object at 0x0000010F524A8F30>, <app.database.models.Group object at 0x0000010F524A9040>, <app.database.models.Group object at 0x0000010F524A9150>, <app.database.models.Group object at 0x0000010F524A9260>, <app.database.models.Group object at 0x0000010F524A9370>, <app.database.models.Group object at 0x0000010F524A9480>, <app.database.models.Group object at 0x0000010F524A9590>, <app.database.models.Group object at 0x0000010F524A96A0>, <app.database.models.Group object at 0x0000010F524A97B0>, <app.database.models.Group object at 0x0000010F524A98C0>, <app.database.models.Group object at 0x0000010F524A99D0>, <app.database.models.Group object at 0x0000010F524A9AE0>, <app.database.models.Group object at 0x0000010F524A9BF0>, <app.database.models.Group object at 0x0000010F524A9D00>, <app.database.models.Group object at 0x0000010F524A9E10>, <app.database.models.Group object at 0x0000010F524A9F20>, <app.database.models.Group object at 0x0000010F524AA030>, <app.database.models.Group object at 0x0000010F524AA140>, <app.database.models.Group object at 0x0000010F524AA250>, <app.database.models.Group object at 0x0000010F524AA360>, <app.database.models.Group object at 0x0000010F524AA470>, <app.database.models.Group object at 0x0000010F524AA580>]
2025-07-16 21:32:14,793 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:32:14,793 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 10...
2025-07-16 21:32:14,794 - DEBUG - app - [AUTO-CUTOFF] User 10 has 0 open orders.
2025-07-16 21:32:14,794 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 10...
2025-07-16 21:32:14,796 - DEBUG - app - [AUTO-CUTOFF] User 10 has 1 pending orders.
2025-07-16 21:32:14,796 - DEBUG - app - [AUTO-CUTOFF] User 10 total positions for portfolio calculation: 1
2025-07-16 21:32:14,797 - DEBUG - app - [AUTO-CUTOFF] User 10 adjusted market prices: {}
2025-07-16 21:32:14,797 - DEBUG - app - [AUTO-CUTOFF] User 10 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:32:14,797 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 10...
2025-07-16 21:32:15,149 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 10: {'balance': '9958.40000000', 'equity': '9958.40000000', 'margin': '39.25000000', 'free_margin': '9919.15000000', 'profit_loss': '0.0', 'margin_level': '25371.71974522292993630573248', 'positions': [], 'margin_call': False}
2025-07-16 21:32:15,149 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 10: {'balance': '9958.40000000', 'equity': '9958.40000000', 'margin': '39.25000000', 'free_margin': '9919.15000000', 'profit_loss': '0.0', 'margin_level': '25371.71974522292993630573248', 'positions_with_pnl': [], 'margin_call': False}
2025-07-16 21:32:15,152 - INFO - app - [AUTO-CUTOFF] User 10 margin_level: 25371.71974522292993630573248
2025-07-16 21:32:15,153 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 10
2025-07-16 21:32:15,153 - INFO - app - [AUTO-CUTOFF] Processing user 11 (demo), group: Group B
2025-07-16 21:32:15,153 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 11 (demo) from cache/DB...
2025-07-16 21:32:15,155 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:32:15,156 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:32:15,156 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:32:15,161 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F524BBBD0>, <app.database.models.Group object at 0x0000010F524B96A0>, <app.database.models.Group object at 0x0000010F524B98C0>, <app.database.models.Group object at 0x0000010F524B9590>, <app.database.models.Group object at 0x0000010F524B9260>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524B9150>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524A8050>, <app.database.models.Group object at 0x0000010F524A8160>, <app.database.models.Group object at 0x0000010F524A8270>, <app.database.models.Group object at 0x0000010F524A8380>, <app.database.models.Group object at 0x0000010F524A8490>, <app.database.models.Group object at 0x0000010F524A85A0>, <app.database.models.Group object at 0x0000010F524A86B0>, <app.database.models.Group object at 0x0000010F524A87C0>, <app.database.models.Group object at 0x0000010F524A88D0>, <app.database.models.Group object at 0x0000010F524A89E0>, <app.database.models.Group object at 0x0000010F524A8AF0>, <app.database.models.Group object at 0x0000010F524A8C00>, <app.database.models.Group object at 0x0000010F524A8D10>, <app.database.models.Group object at 0x0000010F524A8E20>, <app.database.models.Group object at 0x0000010F524A8F30>, <app.database.models.Group object at 0x0000010F524A9040>, <app.database.models.Group object at 0x0000010F524A9150>, <app.database.models.Group object at 0x0000010F524A9260>, <app.database.models.Group object at 0x0000010F524A9370>, <app.database.models.Group object at 0x0000010F524A9480>, <app.database.models.Group object at 0x0000010F524A9590>, <app.database.models.Group object at 0x0000010F524A96A0>, <app.database.models.Group object at 0x0000010F524A97B0>, <app.database.models.Group object at 0x0000010F524A98C0>, <app.database.models.Group object at 0x0000010F524A99D0>, <app.database.models.Group object at 0x0000010F524A9AE0>, <app.database.models.Group object at 0x0000010F524A9BF0>, <app.database.models.Group object at 0x0000010F524A9D00>, <app.database.models.Group object at 0x0000010F524A9E10>, <app.database.models.Group object at 0x0000010F524A9F20>, <app.database.models.Group object at 0x0000010F524AA030>, <app.database.models.Group object at 0x0000010F524AA140>, <app.database.models.Group object at 0x0000010F524AA250>, <app.database.models.Group object at 0x0000010F524AA360>, <app.database.models.Group object at 0x0000010F524AA470>, <app.database.models.Group object at 0x0000010F524AA580>]
2025-07-16 21:32:15,162 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:32:15,162 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 11...
2025-07-16 21:32:15,165 - DEBUG - app - [AUTO-CUTOFF] User 11 has 1 open orders.
2025-07-16 21:32:15,165 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 11...
2025-07-16 21:32:15,166 - DEBUG - app - [AUTO-CUTOFF] User 11 has 0 pending orders.
2025-07-16 21:32:15,167 - DEBUG - app - [AUTO-CUTOFF] User 11 total positions for portfolio calculation: 1
2025-07-16 21:32:15,168 - DEBUG - app - [AUTO-CUTOFF] User 11 adjusted market prices: {}
2025-07-16 21:32:15,169 - DEBUG - app - [AUTO-CUTOFF] User 11 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:32:15,169 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 11...
2025-07-16 21:32:15,360 - DEBUG - app.firebase_stream - Firebase listener triggered (30). Event Type: patch, Path: /. Timestamp: 1752726735.3601186
2025-07-16 21:32:15,360 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9720000000', 'o': '87.9630000000'}, 'GBPAUD': {'b': '2.0649700000', 'o': '2.0648100000'}, 'BTCUSD': {'b': '118291.0000000000', 'o': '118290.9000000000'}, 'USDJPY': {'b': '148.5440
2025-07-16 21:32:15,360 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9720000000', 'o': '87.9630000000'}, 'GBPAUD': {'b': '2.0649700000', 'o': '2.0648100000'}, 'BTCUSD': {'b': '118291.0000000000', 'o': '118290.9000000000'}, 'USDJPY': {'b': '148.5440...
2025-07-16 21:32:15,360 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:15,558 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-07-16 21:32:15,558 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 11: {'balance': '99998.61000000', 'equity': '99998.61000000', 'margin': '6.55000000', 'free_margin': '99992.06000000', 'profit_loss': '0.0', 'margin_level': '1526696.335877862595419847328', 'positions': [{'order_id': '1000099-001', 'order_company_name': 'AUDCAD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('0.89752000'), 'margin': Decimal('6.55364428'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 11, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:32:15,558 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 11: {'balance': '99998.61000000', 'equity': '99998.61000000', 'margin': '6.55000000', 'free_margin': '99992.06000000', 'profit_loss': '0.0', 'margin_level': '1526696.335877862595419847328', 'positions_with_pnl': [{'order_id': '1000099-001', 'order_company_name': 'AUDCAD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('0.89752000'), 'margin': Decimal('6.55364428'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 11, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:32:15,559 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:15,560 - INFO - app - [AUTO-CUTOFF] User 11 margin_level: 1526696.335877862595419847328
2025-07-16 21:32:15,563 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 11
2025-07-16 21:32:15,563 - INFO - app - [AUTO-CUTOFF] Processing user 12 (demo), group: Group B
2025-07-16 21:32:15,563 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 12 (demo) from cache/DB...
2025-07-16 21:32:15,563 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:15,564 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:32:15,566 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:32:15,567 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:32:15,570 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F524BBBD0>, <app.database.models.Group object at 0x0000010F524B96A0>, <app.database.models.Group object at 0x0000010F524B98C0>, <app.database.models.Group object at 0x0000010F524B9590>, <app.database.models.Group object at 0x0000010F524B9260>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524B9150>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524A8050>, <app.database.models.Group object at 0x0000010F524A8160>, <app.database.models.Group object at 0x0000010F524A8270>, <app.database.models.Group object at 0x0000010F524A8380>, <app.database.models.Group object at 0x0000010F524A8490>, <app.database.models.Group object at 0x0000010F524A85A0>, <app.database.models.Group object at 0x0000010F524A86B0>, <app.database.models.Group object at 0x0000010F524A87C0>, <app.database.models.Group object at 0x0000010F524A88D0>, <app.database.models.Group object at 0x0000010F524A89E0>, <app.database.models.Group object at 0x0000010F524A8AF0>, <app.database.models.Group object at 0x0000010F524A8C00>, <app.database.models.Group object at 0x0000010F524A8D10>, <app.database.models.Group object at 0x0000010F524A8E20>, <app.database.models.Group object at 0x0000010F524A8F30>, <app.database.models.Group object at 0x0000010F524A9040>, <app.database.models.Group object at 0x0000010F524A9150>, <app.database.models.Group object at 0x0000010F524A9260>, <app.database.models.Group object at 0x0000010F524A9370>, <app.database.models.Group object at 0x0000010F524A9480>, <app.database.models.Group object at 0x0000010F524A9590>, <app.database.models.Group object at 0x0000010F524A96A0>, <app.database.models.Group object at 0x0000010F524A97B0>, <app.database.models.Group object at 0x0000010F524A98C0>, <app.database.models.Group object at 0x0000010F524A99D0>, <app.database.models.Group object at 0x0000010F524A9AE0>, <app.database.models.Group object at 0x0000010F524A9BF0>, <app.database.models.Group object at 0x0000010F524A9D00>, <app.database.models.Group object at 0x0000010F524A9E10>, <app.database.models.Group object at 0x0000010F524A9F20>, <app.database.models.Group object at 0x0000010F524AA030>, <app.database.models.Group object at 0x0000010F524AA140>, <app.database.models.Group object at 0x0000010F524AA250>, <app.database.models.Group object at 0x0000010F524AA360>, <app.database.models.Group object at 0x0000010F524AA470>, <app.database.models.Group object at 0x0000010F524AA580>]
2025-07-16 21:32:15,573 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:32:15,573 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 12...
2025-07-16 21:32:15,574 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 open orders.
2025-07-16 21:32:15,575 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 12...
2025-07-16 21:32:15,577 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 pending orders.
2025-07-16 21:32:15,577 - WARNING - app - [AUTO-CUTOFF] User 12 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:32:15,577 - INFO - app - [AUTO-CUTOFF] Processing user 13 (demo), group: Group B
2025-07-16 21:32:15,577 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 13 (demo) from cache/DB...
2025-07-16 21:32:15,579 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:32:15,580 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:32:15,580 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:32:15,584 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F524BBBD0>, <app.database.models.Group object at 0x0000010F524B96A0>, <app.database.models.Group object at 0x0000010F524B98C0>, <app.database.models.Group object at 0x0000010F524B9590>, <app.database.models.Group object at 0x0000010F524B9260>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524B9150>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524A8050>, <app.database.models.Group object at 0x0000010F524A8160>, <app.database.models.Group object at 0x0000010F524A8270>, <app.database.models.Group object at 0x0000010F524A8380>, <app.database.models.Group object at 0x0000010F524A8490>, <app.database.models.Group object at 0x0000010F524A85A0>, <app.database.models.Group object at 0x0000010F524A86B0>, <app.database.models.Group object at 0x0000010F524A87C0>, <app.database.models.Group object at 0x0000010F524A88D0>, <app.database.models.Group object at 0x0000010F524A89E0>, <app.database.models.Group object at 0x0000010F524A8AF0>, <app.database.models.Group object at 0x0000010F524A8C00>, <app.database.models.Group object at 0x0000010F524A8D10>, <app.database.models.Group object at 0x0000010F524A8E20>, <app.database.models.Group object at 0x0000010F524A8F30>, <app.database.models.Group object at 0x0000010F524A9040>, <app.database.models.Group object at 0x0000010F524A9150>, <app.database.models.Group object at 0x0000010F524A9260>, <app.database.models.Group object at 0x0000010F524A9370>, <app.database.models.Group object at 0x0000010F524A9480>, <app.database.models.Group object at 0x0000010F524A9590>, <app.database.models.Group object at 0x0000010F524A96A0>, <app.database.models.Group object at 0x0000010F524A97B0>, <app.database.models.Group object at 0x0000010F524A98C0>, <app.database.models.Group object at 0x0000010F524A99D0>, <app.database.models.Group object at 0x0000010F524A9AE0>, <app.database.models.Group object at 0x0000010F524A9BF0>, <app.database.models.Group object at 0x0000010F524A9D00>, <app.database.models.Group object at 0x0000010F524A9E10>, <app.database.models.Group object at 0x0000010F524A9F20>, <app.database.models.Group object at 0x0000010F524AA030>, <app.database.models.Group object at 0x0000010F524AA140>, <app.database.models.Group object at 0x0000010F524AA250>, <app.database.models.Group object at 0x0000010F524AA360>, <app.database.models.Group object at 0x0000010F524AA470>, <app.database.models.Group object at 0x0000010F524AA580>]
2025-07-16 21:32:15,587 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:32:15,587 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 13...
2025-07-16 21:32:15,590 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 open orders.
2025-07-16 21:32:15,590 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 13...
2025-07-16 21:32:15,592 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 pending orders.
2025-07-16 21:32:15,592 - WARNING - app - [AUTO-CUTOFF] User 13 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:32:16,570 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:16,572 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:17,581 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:17,596 - DEBUG - app.firebase_stream - Firebase listener triggered (31). Event Type: patch, Path: /. Timestamp: 1752726737.5968566
2025-07-16 21:32:17,597 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0433000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9650000000'}, 'GBPAUD': {'b': '2.0649700000', 'o': '2.0648000000'}, 'BTCUSD': {'b': '118285.900000000
2025-07-16 21:32:17,597 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:17,597 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0433000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9650000000'}, 'GBPAUD': {'b': '2.0649700000', 'o': '2.0648000000'}, 'BTCUSD': {'b': '118285.900000000...
2025-07-16 21:32:17,598 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:18,605 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:18,607 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:19,611 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:19,615 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:19,966 - DEBUG - app.firebase_stream - Firebase listener triggered (32). Event Type: patch, Path: /. Timestamp: 1752726739.966144
2025-07-16 21:32:19,966 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0500000000', 'o': '13.0433000000'}, 'XAGUSD': {'b': '38.0230000000', 'o': '38.0130000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9640000000'}, 'GBPAUD': {'b': '2.0650000000',
2025-07-16 21:32:19,966 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0500000000', 'o': '13.0433000000'}, 'XAGUSD': {'b': '38.0230000000', 'o': '38.0130000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9640000000'}, 'GBPAUD': {'b': '2.0650000000',...
2025-07-16 21:32:19,966 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:20,632 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:20,635 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:21,639 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:21,643 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:22,324 - DEBUG - app.firebase_stream - Firebase listener triggered (33). Event Type: patch, Path: /. Timestamp: 1752726742.3246276
2025-07-16 21:32:22,324 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0433000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9650000000'}, 'GBPAUD': {'b': '2.0649700000', 'o': '2.0647900000'}, 'BTCUSD': {'b': '118290.000000000
2025-07-16 21:32:22,325 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0433000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9650000000'}, 'GBPAUD': {'b': '2.0649700000', 'o': '2.0647900000'}, 'BTCUSD': {'b': '118290.000000000...
2025-07-16 21:32:22,325 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:22,644 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:22,646 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:23,653 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:23,656 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:24,579 - DEBUG - app.firebase_stream - Firebase listener triggered (34). Event Type: patch, Path: /. Timestamp: 1752726744.579917
2025-07-16 21:32:24,580 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0437000000'}, 'XAGUSD': {'b': '38.0230000000', 'o': '38.0140000000'}, 'NZDJPY': {'b': '87.9730000000', 'o': '87.9630000000'}, 'GBPAUD': {'b': '2.0649700000',
2025-07-16 21:32:24,580 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0437000000'}, 'XAGUSD': {'b': '38.0230000000', 'o': '38.0140000000'}, 'NZDJPY': {'b': '87.9730000000', 'o': '87.9630000000'}, 'GBPAUD': {'b': '2.0649700000',...
2025-07-16 21:32:24,580 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:24,669 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:24,671 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:25,673 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:25,676 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:26,680 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:26,685 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:26,825 - DEBUG - app.firebase_stream - Firebase listener triggered (35). Event Type: patch, Path: /. Timestamp: 1752726746.8255913
2025-07-16 21:32:26,825 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0500000000', 'o': '13.0434000000'}, 'XAGUSD': {'b': '38.0240000000', 'o': '38.0140000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9640000000'}, 'GBPAUD': {'b': '2.0649700000',
2025-07-16 21:32:26,826 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0500000000', 'o': '13.0434000000'}, 'XAGUSD': {'b': '38.0240000000', 'o': '38.0140000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9640000000'}, 'GBPAUD': {'b': '2.0649700000',...
2025-07-16 21:32:26,827 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:27,687 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:27,692 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:28,695 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:28,697 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:29,189 - DEBUG - app.firebase_stream - Firebase listener triggered (36). Event Type: patch, Path: /. Timestamp: 1752726749.189202
2025-07-16 21:32:29,189 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0495000000', 'o': '13.0438000000'}, 'XAGUSD': {'b': '38.0220000000', 'o': '38.0130000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9630000000'}, 'GBPAUD': {'b': '2.0649700000',
2025-07-16 21:32:29,189 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0495000000', 'o': '13.0438000000'}, 'XAGUSD': {'b': '38.0220000000', 'o': '38.0130000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9630000000'}, 'GBPAUD': {'b': '2.0649700000',...
2025-07-16 21:32:29,189 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:29,701 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:29,704 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:30,711 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:30,714 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:31,444 - DEBUG - app.firebase_stream - Firebase listener triggered (37). Event Type: patch, Path: /. Timestamp: 1752726751.4442377
2025-07-16 21:32:31,444 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0494000000', 'o': '13.0436000000'}, 'XAGUSD': {'b': '38.0240000000', 'o': '38.0140000000'}, 'NZDJPY': {'b': '87.9730000000', 'o': '87.9630000000'}, 'GBPAUD': {'b': '2.0649700000',
2025-07-16 21:32:31,444 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0494000000', 'o': '13.0436000000'}, 'XAGUSD': {'b': '38.0240000000', 'o': '38.0140000000'}, 'NZDJPY': {'b': '87.9730000000', 'o': '87.9630000000'}, 'GBPAUD': {'b': '2.0649700000',...
2025-07-16 21:32:31,444 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:31,719 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:31,721 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:32,724 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:32,727 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:33,735 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:33,739 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:33,791 - DEBUG - app.firebase_stream - Firebase listener triggered (38). Event Type: patch, Path: /. Timestamp: 1752726753.7919035
2025-07-16 21:32:33,792 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0230000000', 'o': '38.0140000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9650000000'}, 'GBPAUD': {'b': '2.0649500000', 'o': '2.0648000000'}, 'BTCUSD': {'b': '118300.000000000
2025-07-16 21:32:33,792 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0230000000', 'o': '38.0140000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9650000000'}, 'GBPAUD': {'b': '2.0649500000', 'o': '2.0648000000'}, 'BTCUSD': {'b': '118300.000000000...
2025-07-16 21:32:33,792 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:34,749 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:34,752 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:35,766 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:35,770 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:36,151 - DEBUG - app.firebase_stream - Firebase listener triggered (39). Event Type: patch, Path: /. Timestamp: 1752726756.151125
2025-07-16 21:32:36,151 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0493000000', 'o': '13.0436000000'}, 'XAGUSD': {'b': '38.0220000000', 'o': '38.0130000000'}, 'NZDJPY': {'b': '87.9730000000', 'o': '87.9640000000'}, 'BTCUSD': {'b': '118299.0000000
2025-07-16 21:32:36,151 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0493000000', 'o': '13.0436000000'}, 'XAGUSD': {'b': '38.0220000000', 'o': '38.0130000000'}, 'NZDJPY': {'b': '87.9730000000', 'o': '87.9640000000'}, 'BTCUSD': {'b': '118299.0000000...
2025-07-16 21:32:36,151 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:36,773 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:36,777 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:37,785 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:37,788 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:38,406 - DEBUG - app.firebase_stream - Firebase listener triggered (40). Event Type: patch, Path: /. Timestamp: 1752726758.4059768
2025-07-16 21:32:38,406 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'GBPAUD': {'b': '2.0649200000', 'o': '2.0647900000'}, 'USDJPY': {'b': '148.5450000000', 'o': '148.5400000000'}, 'USDCNH': {'b': '7.1818400000', 'o': '7.1817000000'}, 'CADCHF': {'b': '0.5852400000', '
2025-07-16 21:32:38,406 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPAUD': {'b': '2.0649200000', 'o': '2.0647900000'}, 'USDJPY': {'b': '148.5450000000', 'o': '148.5400000000'}, 'USDCNH': {'b': '7.1818400000', 'o': '7.1817000000'}, 'CADCHF': {'b': '0.5852400000', '...
2025-07-16 21:32:38,406 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:38,799 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:38,802 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:39,811 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:39,813 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:40,761 - DEBUG - app.firebase_stream - Firebase listener triggered (41). Event Type: patch, Path: /. Timestamp: 1752726760.7615762
2025-07-16 21:32:40,761 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0503000000', 'o': '13.0438000000'}, 'XAGUSD': {'b': '38.0220000000', 'o': '38.0140000000'}, 'NZDJPY': {'b': '87.9730000000', 'o': '87.9660000000'}, 'GBPAUD': {'b': '2.0649400000',
2025-07-16 21:32:40,762 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0503000000', 'o': '13.0438000000'}, 'XAGUSD': {'b': '38.0220000000', 'o': '38.0140000000'}, 'NZDJPY': {'b': '87.9730000000', 'o': '87.9660000000'}, 'GBPAUD': {'b': '2.0649400000',...
2025-07-16 21:32:40,762 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:40,820 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:40,825 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:41,830 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:41,835 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:42,846 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:42,850 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:43,116 - DEBUG - app.firebase_stream - Firebase listener triggered (42). Event Type: patch, Path: /. Timestamp: 1752726763.1165519
2025-07-16 21:32:43,116 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0230000000', 'o': '38.0140000000'}, 'GBPAUD': {'b': '2.0649100000', 'o': '2.0648000000'}, 'USDCNH': {'b': '7.1817800000', 'o': '7.1817800000'}, 'CADCHF': {'b': '0.5852200000', 'o'
2025-07-16 21:32:43,116 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0230000000', 'o': '38.0140000000'}, 'GBPAUD': {'b': '2.0649100000', 'o': '2.0648000000'}, 'USDCNH': {'b': '7.1817800000', 'o': '7.1817800000'}, 'CADCHF': {'b': '0.5852200000', 'o'...
2025-07-16 21:32:43,117 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:43,862 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:43,863 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:44,864 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:44,866 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:45,673 - DEBUG - app.firebase_stream - Firebase listener triggered (43). Event Type: patch, Path: /. Timestamp: 1752726765.673607
2025-07-16 21:32:45,673 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0220000000', 'o': '38.0140000000'}, 'NZDJPY': {'b': '87.9730000000', 'o': '87.9650000000'}, 'GBPAUD': {'b': '2.0649100000', 'o': '2.0647900000'}, 'BTCUSD': {'b': '118300.000000000
2025-07-16 21:32:45,674 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0220000000', 'o': '38.0140000000'}, 'NZDJPY': {'b': '87.9730000000', 'o': '87.9650000000'}, 'GBPAUD': {'b': '2.0649100000', 'o': '2.0647900000'}, 'BTCUSD': {'b': '118300.000000000...
2025-07-16 21:32:45,674 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:45,869 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:45,871 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:46,881 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:46,884 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:47,893 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:47,896 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:48,028 - DEBUG - app.firebase_stream - Firebase listener triggered (44). Event Type: patch, Path: /. Timestamp: 1752726768.0281363
2025-07-16 21:32:48,028 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0441000000'}, 'NZDJPY': {'b': '87.9730000000', 'o': '87.9660000000'}, 'GBPAUD': {'b': '2.0649600000', 'o': '2.0648300000'}, 'BTCUSD': {'b': '118322.100000000
2025-07-16 21:32:48,028 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0441000000'}, 'NZDJPY': {'b': '87.9730000000', 'o': '87.9660000000'}, 'GBPAUD': {'b': '2.0649600000', 'o': '2.0648300000'}, 'BTCUSD': {'b': '118322.100000000...
2025-07-16 21:32:48,028 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:48,906 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:48,908 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:49,913 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:49,916 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:50,278 - DEBUG - app.firebase_stream - Firebase listener triggered (45). Event Type: patch, Path: /. Timestamp: 1752726770.277982
2025-07-16 21:32:50,278 - DEBUG - app.firebase_stream - Prepared batch update for 19 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0230000000', 'o': '38.0140000000'}, 'NZDJPY': {'b': '87.9730000000', 'o': '87.9670000000'}, 'GBPAUD': {'b': '2.0649500000', 'o': '2.0648200000'}, 'BTCUSD': {'b': '118351.000000000
2025-07-16 21:32:50,278 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0230000000', 'o': '38.0140000000'}, 'NZDJPY': {'b': '87.9730000000', 'o': '87.9670000000'}, 'GBPAUD': {'b': '2.0649500000', 'o': '2.0648200000'}, 'BTCUSD': {'b': '118351.000000000...
2025-07-16 21:32:50,278 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:50,928 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:50,931 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:51,943 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:51,946 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:52,634 - DEBUG - app.firebase_stream - Firebase listener triggered (46). Event Type: patch, Path: /. Timestamp: 1752726772.6342874
2025-07-16 21:32:52,634 - DEBUG - app.firebase_stream - Prepared batch update for 15 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9720000000', 'o': '87.9670000000'}, 'GBPAUD': {'b': '2.0649600000', 'o': '2.0648300000'}, 'BTCUSD': {'b': '118361.4000000000', 'o': '118361.3000000000'}, 'USDJPY': {'b': '148.5460
2025-07-16 21:32:52,634 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9720000000', 'o': '87.9670000000'}, 'GBPAUD': {'b': '2.0649600000', 'o': '2.0648300000'}, 'BTCUSD': {'b': '118361.4000000000', 'o': '118361.3000000000'}, 'USDJPY': {'b': '148.5460...
2025-07-16 21:32:52,635 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:52,952 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:52,955 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:53,966 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:53,971 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:54,888 - DEBUG - app.firebase_stream - Firebase listener triggered (47). Event Type: patch, Path: /. Timestamp: 1752726774.8883169
2025-07-16 21:32:54,888 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0494000000', 'o': '13.0437000000'}, 'XAGUSD': {'b': '38.0150000000', 'o': '38.0020000000'}, 'GBPAUD': {'b': '2.0648800000', 'o': '2.0647800000'}, 'USDCNH': {'b': '7.1818100000', '
2025-07-16 21:32:54,888 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0494000000', 'o': '13.0437000000'}, 'XAGUSD': {'b': '38.0150000000', 'o': '38.0020000000'}, 'GBPAUD': {'b': '2.0648800000', 'o': '2.0647800000'}, 'USDCNH': {'b': '7.1818100000', '...
2025-07-16 21:32:54,888 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:54,977 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:54,982 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:55,999 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:56,007 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:57,025 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:57,030 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:57,140 - DEBUG - app.firebase_stream - Firebase listener triggered (48). Event Type: patch, Path: /. Timestamp: 1752726777.1407135
2025-07-16 21:32:57,140 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'USDCNH': {'b': '7.1818400000', 'o': '7.1817000000'}, 'CADCHF': {'b': '0.5852100000', 'o': '0.5852000000'}, 'USDSGD': {'b': '1.2855600000', 'o': '1.2855300000'}, 'EURZAR': {'b': '20.7650700000', 'o':
2025-07-16 21:32:57,141 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'USDCNH': {'b': '7.1818400000', 'o': '7.1817000000'}, 'CADCHF': {'b': '0.5852100000', 'o': '0.5852000000'}, 'USDSGD': {'b': '1.2855600000', 'o': '1.2855300000'}, 'EURZAR': {'b': '20.7650700000', 'o':...
2025-07-16 21:32:57,141 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:32:58,037 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:58,040 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:59,046 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:32:59,049 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:32:59,501 - DEBUG - app.firebase_stream - Firebase listener triggered (49). Event Type: patch, Path: /. Timestamp: 1752726779.5012796
2025-07-16 21:32:59,501 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0503000000', 'o': '13.0435000000'}, 'XAGUSD': {'b': '38.0160000000', 'o': '38.0040000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9650000000'}, 'GBPAUD': {'b': '2.0648700000',
2025-07-16 21:32:59,501 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0503000000', 'o': '13.0435000000'}, 'XAGUSD': {'b': '38.0160000000', 'o': '38.0040000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9650000000'}, 'GBPAUD': {'b': '2.0648700000',...
2025-07-16 21:32:59,501 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:33:00,056 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:33:00,059 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:33:01,064 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:33:01,066 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:33:01,751 - DEBUG - app.firebase_stream - Firebase listener triggered (50). Event Type: patch, Path: /. Timestamp: 1752726781.7518163
2025-07-16 21:33:01,752 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0494000000', 'o': '13.0437000000'}, 'XAGUSD': {'b': '38.0170000000', 'o': '38.0050000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9670000000'}, 'GBPAUD': {'b': '2.0648600000',
2025-07-16 21:33:01,752 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0494000000', 'o': '13.0437000000'}, 'XAGUSD': {'b': '38.0170000000', 'o': '38.0050000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9670000000'}, 'GBPAUD': {'b': '2.0648600000',...
2025-07-16 21:33:01,752 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:33:02,071 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:33:02,073 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:33:03,084 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:33:03,086 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:33:04,038 - DEBUG - app.firebase_stream - Firebase listener triggered (51). Event Type: patch, Path: /. Timestamp: 1752726784.0389166
2025-07-16 21:33:04,039 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0502000000', 'o': '13.0434000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9650000000'}, 'GBPAUD': {'b': '2.0648700000', 'o': '2.0647600000'}, 'BTCUSD': {'b': '118351.100000000
2025-07-16 21:33:04,039 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0502000000', 'o': '13.0434000000'}, 'NZDJPY': {'b': '87.9720000000', 'o': '87.9650000000'}, 'GBPAUD': {'b': '2.0648700000', 'o': '2.0647600000'}, 'BTCUSD': {'b': '118351.100000000...
2025-07-16 21:33:04,039 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:33:04,098 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:33:04,101 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:33:05,107 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:33:05,110 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:33:06,112 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:33:06,114 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:33:06,355 - DEBUG - app.firebase_stream - Firebase listener triggered (52). Event Type: patch, Path: /. Timestamp: 1752726786.3554876
2025-07-16 21:33:06,356 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPAUD': {'b': '2.0649000000', 'o': '2.0648000000'}, 'BTCUSD': {'b': '118335.2000000000', 'o': '118335.1000000000'}, 'USDJPY': {'b': '148.5460000000', 'o': '148.5420000000'}, 'CADCHF': {'b': '0.5852
2025-07-16 21:33:06,356 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPAUD': {'b': '2.0649000000', 'o': '2.0648000000'}, 'BTCUSD': {'b': '118335.2000000000', 'o': '118335.1000000000'}, 'USDJPY': {'b': '148.5460000000', 'o': '148.5420000000'}, 'CADCHF': {'b': '0.5852...
2025-07-16 21:33:06,357 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:33:07,121 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:33:07,123 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:33:08,133 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:33:08,135 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:33:08,675 - DEBUG - app.firebase_stream - Firebase listener triggered (53). Event Type: patch, Path: /. Timestamp: 1752726788.6756117
2025-07-16 21:33:08,675 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9690000000', 'o': '87.9640000000'}, 'GBPAUD': {'b': '2.0648900000', 'o': '2.0647800000'}, 'CADCHF': {'b': '0.5852100000', 'o': '0.5851900000'}, 'EURNZD': {'b': '1.9621600000', 'o'
2025-07-16 21:33:08,676 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9690000000', 'o': '87.9640000000'}, 'GBPAUD': {'b': '2.0648900000', 'o': '2.0647800000'}, 'CADCHF': {'b': '0.5852100000', 'o': '0.5851900000'}, 'EURNZD': {'b': '1.9621600000', 'o'...
2025-07-16 21:33:08,676 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:33:09,152 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:33:09,154 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:33:09,232 - INFO - app - [AUTO-CUTOFF] Starting update_all_users_dynamic_portfolio job...
2025-07-16 21:33:09,232 - INFO - app - [AUTO-CUTOFF] update_all_users_dynamic_portfolio heartbeat: task is alive and running.
2025-07-16 21:33:09,232 - INFO - app - [AUTO-CUTOFF] Fetching all active users (live and demo)...
2025-07-16 21:33:09,236 - INFO - app - [AUTO-CUTOFF] Found 19 live users and 11 demo users.
2025-07-16 21:33:09,236 - INFO - app - [AUTO-CUTOFF] Processing 30 users for dynamic portfolio update...
2025-07-16 21:33:09,236 - INFO - app - [AUTO-CUTOFF] Processing user 4 (live), group: Group B
2025-07-16 21:33:09,236 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 4 (live) from cache/DB...
2025-07-16 21:33:09,237 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:33:09,238 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:33:09,238 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:33:09,241 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F51FF7130>, <app.database.models.Group object at 0x0000010F51FF5480>, <app.database.models.Group object at 0x0000010F51FF6030>, <app.database.models.Group object at 0x0000010F51FF6F10>, <app.database.models.Group object at 0x0000010F51FF6360>, <app.database.models.Group object at 0x0000010F51FF4E20>, <app.database.models.Group object at 0x0000010F51FF5F20>, <app.database.models.Group object at 0x0000010F51FF4F30>, <app.database.models.Group object at 0x0000010F51FF7790>, <app.database.models.Group object at 0x0000010F51FF5150>, <app.database.models.Group object at 0x0000010F51FF7680>, <app.database.models.Group object at 0x0000010F51FF7460>, <app.database.models.Group object at 0x0000010F51FF78A0>, <app.database.models.Group object at 0x0000010F51FF7350>, <app.database.models.Group object at 0x0000010F51FF6470>, <app.database.models.Group object at 0x0000010F51FF5040>, <app.database.models.Group object at 0x0000010F51FF56A0>, <app.database.models.Group object at 0x0000010F51FF5BF0>, <app.database.models.Group object at 0x0000010F51FF7DF0>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF68B0>, <app.database.models.Group object at 0x0000010F51FF6E00>, <app.database.models.Group object at 0x0000010F51FF7AC0>, <app.database.models.Group object at 0x0000010F51FF79B0>, <app.database.models.Group object at 0x0000010F51FF7BD0>, <app.database.models.Group object at 0x0000010F51FF4C00>, <app.database.models.Group object at 0x0000010F51FF67A0>, <app.database.models.Group object at 0x0000010F51FF6CF0>, <app.database.models.Group object at 0x0000010F51FF7570>, <app.database.models.Group object at 0x0000010F51FF69C0>, <app.database.models.Group object at 0x0000010F51FF5E10>, <app.database.models.Group object at 0x0000010F51FF5D00>, <app.database.models.Group object at 0x0000010F51FF7240>, <app.database.models.Group object at 0x0000010F51FF5370>, <app.database.models.Group object at 0x0000010F51FF7F00>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F524BBBD0>, <app.database.models.Group object at 0x0000010F524B96A0>, <app.database.models.Group object at 0x0000010F524B98C0>, <app.database.models.Group object at 0x0000010F524B9590>, <app.database.models.Group object at 0x0000010F524B9260>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524B9150>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524B9AE0>]
2025-07-16 21:33:09,245 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:33:09,246 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 4...
2025-07-16 21:33:09,247 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 open orders.
2025-07-16 21:33:09,247 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 4...
2025-07-16 21:33:09,248 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 pending orders.
2025-07-16 21:33:09,248 - WARNING - app - [AUTO-CUTOFF] User 4 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:33:09,248 - INFO - app - [AUTO-CUTOFF] Processing user 5 (live), group: Admin
2025-07-16 21:33:09,249 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 5 (live) from cache/DB...
2025-07-16 21:33:09,252 - WARNING - app - [AUTO-CUTOFF] No user data found for user 5 (live). Skipping portfolio update.
2025-07-16 21:33:09,252 - INFO - app - [AUTO-CUTOFF] Processing user 8 (live), group: string
2025-07-16 21:33:09,252 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 8 (live) from cache/DB...
2025-07-16 21:33:09,253 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group string...
2025-07-16 21:33:09,253 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'string' from cache: None
2025-07-16 21:33:09,253 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'string', fetching from DB.
2025-07-16 21:33:09,255 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'string': []
2025-07-16 21:33:09,255 - ERROR - app - [AUTO-CUTOFF] Group symbol settings not found in DB for group 'string'. Skipping portfolio update for user 8.
2025-07-16 21:33:09,255 - INFO - app - [AUTO-CUTOFF] Processing user 9 (live), group: Standard
2025-07-16 21:33:09,255 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 9 (live) from cache/DB...
2025-07-16 21:33:09,256 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:33:09,257 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:33:09,257 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:33:09,260 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x0000010F51FF6360>, <app.database.models.Group object at 0x0000010F51FF4E20>, <app.database.models.Group object at 0x0000010F51FF5F20>, <app.database.models.Group object at 0x0000010F51FF4F30>, <app.database.models.Group object at 0x0000010F51FF7790>, <app.database.models.Group object at 0x0000010F51FF5150>, <app.database.models.Group object at 0x0000010F51FF7680>, <app.database.models.Group object at 0x0000010F51FF7460>, <app.database.models.Group object at 0x0000010F51FF78A0>, <app.database.models.Group object at 0x0000010F51FF7350>, <app.database.models.Group object at 0x0000010F51FF6470>, <app.database.models.Group object at 0x0000010F51FF5040>, <app.database.models.Group object at 0x0000010F51FF56A0>, <app.database.models.Group object at 0x0000010F51FF5BF0>, <app.database.models.Group object at 0x0000010F51FF7DF0>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF68B0>, <app.database.models.Group object at 0x0000010F51FF6E00>, <app.database.models.Group object at 0x0000010F51FF7AC0>, <app.database.models.Group object at 0x0000010F51FF79B0>, <app.database.models.Group object at 0x0000010F51FF7BD0>, <app.database.models.Group object at 0x0000010F51FF4C00>, <app.database.models.Group object at 0x0000010F51FF67A0>, <app.database.models.Group object at 0x0000010F51FF6CF0>, <app.database.models.Group object at 0x0000010F51FF7570>, <app.database.models.Group object at 0x0000010F51FF69C0>, <app.database.models.Group object at 0x0000010F51FF5E10>, <app.database.models.Group object at 0x0000010F51FF5D00>, <app.database.models.Group object at 0x0000010F51FF7240>, <app.database.models.Group object at 0x0000010F51FF5370>, <app.database.models.Group object at 0x0000010F51FF7F00>, <app.database.models.Group object at 0x0000010F51FF4490>, <app.database.models.Group object at 0x0000010F51FF4D10>, <app.database.models.Group object at 0x0000010F51FF59D0>, <app.database.models.Group object at 0x0000010F51FF58C0>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F524BBBD0>, <app.database.models.Group object at 0x0000010F524B96A0>, <app.database.models.Group object at 0x0000010F524B98C0>, <app.database.models.Group object at 0x0000010F524B9590>, <app.database.models.Group object at 0x0000010F524B9260>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524B9150>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524BB240>]
2025-07-16 21:33:09,262 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:33:09,262 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 9...
2025-07-16 21:33:09,263 - DEBUG - app - [AUTO-CUTOFF] User 9 has 1 open orders.
2025-07-16 21:33:09,263 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 9...
2025-07-16 21:33:09,264 - DEBUG - app - [AUTO-CUTOFF] User 9 has 0 pending orders.
2025-07-16 21:33:09,264 - DEBUG - app - [AUTO-CUTOFF] User 9 total positions for portfolio calculation: 1
2025-07-16 21:33:09,267 - DEBUG - app - [AUTO-CUTOFF] User 9 adjusted market prices: {}
2025-07-16 21:33:09,267 - DEBUG - app - [AUTO-CUTOFF] User 9 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:33:09,267 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 9...
2025-07-16 21:33:09,624 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol BTCUSD
2025-07-16 21:33:09,624 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 99.90738313495848051220798402% which is below threshold 100.0%
2025-07-16 21:33:09,624 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 9: {'balance': '9794.75000000', 'equity': '9794.75000000', 'margin': '9803.83000000', 'free_margin': '-9.08000000', 'profit_loss': '0.0', 'margin_level': '99.90738313495848051220798402', 'positions': [{'order_id': '1000341-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.41000000'), 'order_price': Decimal('141921.60000000'), 'margin': Decimal('9773.83000000'), 'contract_value': Decimal('0.41000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('244.35000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': True}
2025-07-16 21:33:09,624 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 9: {'balance': '9794.75000000', 'equity': '9794.75000000', 'margin': '9803.83000000', 'free_margin': '-9.08000000', 'profit_loss': '0.0', 'margin_level': '99.90738313495848051220798402', 'positions_with_pnl': [{'order_id': '1000341-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.41000000'), 'order_price': Decimal('141921.60000000'), 'margin': Decimal('9773.83000000'), 'contract_value': Decimal('0.41000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('244.35000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': True}
2025-07-16 21:33:09,626 - INFO - app - [AUTO-CUTOFF] User 9 margin_level: 99.90738313495848051220798402
2025-07-16 21:33:11,063 - DEBUG - app.firebase_stream - Firebase listener triggered (54). Event Type: patch, Path: /. Timestamp: 1752726791.0635445
2025-07-16 21:33:11,063 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0120000000', 'o': '38.0020000000'}, 'GBPAUD': {'b': '2.0649700000', 'o': '2.0648300000'}, 'USDCNH': {'b': '7.1818000000', 'o': '7.1817600000'}, 'CADCHF': {'b': '0.5852100000', 'o'
2025-07-16 21:33:11,064 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0120000000', 'o': '38.0020000000'}, 'GBPAUD': {'b': '2.0649700000', 'o': '2.0648300000'}, 'USDCNH': {'b': '7.1818000000', 'o': '7.1817600000'}, 'CADCHF': {'b': '0.5852100000', 'o'...
2025-07-16 21:33:11,064 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:33:13,134 - INFO - app - [AUTO-CUTOFF] Sent margin call warning email (HTML) to user 9 at kodideladinesh123@gmail.com
2025-07-16 21:33:13,135 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:33:13,137 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 9
2025-07-16 21:33:13,137 - INFO - app - [AUTO-CUTOFF] Processing user 10 (live), group: Group B
2025-07-16 21:33:13,137 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 10 (live) from cache/DB...
2025-07-16 21:33:13,139 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:33:13,139 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:33:13,143 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:33:13,143 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:33:13,148 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F51FF46B0>, <app.database.models.Group object at 0x0000010F51FF6AD0>, <app.database.models.Group object at 0x0000010F524BA9C0>, <app.database.models.Group object at 0x0000010F524BA8B0>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F51FC8160>, <app.database.models.Group object at 0x0000010F51FC8C00>, <app.database.models.Group object at 0x0000010F51FC9E10>, <app.database.models.Group object at 0x0000010F51FC8E20>, <app.database.models.Group object at 0x0000010F51FCB570>, <app.database.models.Group object at 0x0000010F51FCB790>, <app.database.models.Group object at 0x0000010F51FCB680>, <app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FCBBD0>, <app.database.models.Group object at 0x0000010F51FCBAC0>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FC86B0>, <app.database.models.Group object at 0x0000010F51FC85A0>, <app.database.models.Group object at 0x0000010F51FC8490>, <app.database.models.Group object at 0x0000010F51FCB8A0>, <app.database.models.Group object at 0x0000010F51FC8270>, <app.database.models.Group object at 0x0000010F51FCABE0>, <app.database.models.Group object at 0x0000010F51FC9480>, <app.database.models.Group object at 0x0000010F51FC8050>, <app.database.models.Group object at 0x0000010F51FC8380>, <app.database.models.Group object at 0x0000010F51FCBF00>, <app.database.models.Group object at 0x0000010F51FCA9C0>, <app.database.models.Group object at 0x0000010F51FC8AF0>, <app.database.models.Group object at 0x0000010F51FC8D10>, <app.database.models.Group object at 0x0000010F51EFBBD0>, <app.database.models.Group object at 0x0000010F51EFB790>, <app.database.models.Group object at 0x0000010F51EF9E10>, <app.database.models.Group object at 0x0000010F51EFA7A0>, <app.database.models.Group object at 0x0000010F522BC050>, <app.database.models.Group object at 0x0000010F522BC160>, <app.database.models.Group object at 0x0000010F522BC270>, <app.database.models.Group object at 0x0000010F522BC380>, <app.database.models.Group object at 0x0000010F522BC490>, <app.database.models.Group object at 0x0000010F522BC5A0>, <app.database.models.Group object at 0x0000010F522BC6B0>, <app.database.models.Group object at 0x0000010F522BC7C0>, <app.database.models.Group object at 0x0000010F522BC8D0>, <app.database.models.Group object at 0x0000010F522BC9E0>, <app.database.models.Group object at 0x0000010F522BCAF0>, <app.database.models.Group object at 0x0000010F522BCC00>, <app.database.models.Group object at 0x0000010F522BCD10>, <app.database.models.Group object at 0x0000010F522BCE20>, <app.database.models.Group object at 0x0000010F522BCF30>, <app.database.models.Group object at 0x0000010F522BD040>, <app.database.models.Group object at 0x0000010F522BD150>, <app.database.models.Group object at 0x0000010F522BD260>, <app.database.models.Group object at 0x0000010F522BD370>, <app.database.models.Group object at 0x0000010F522BD480>, <app.database.models.Group object at 0x0000010F522BD590>, <app.database.models.Group object at 0x0000010F522BD6A0>, <app.database.models.Group object at 0x0000010F522BD7B0>, <app.database.models.Group object at 0x0000010F522BD8C0>, <app.database.models.Group object at 0x0000010F522BD9D0>, <app.database.models.Group object at 0x0000010F522BDAE0>, <app.database.models.Group object at 0x0000010F522BDBF0>, <app.database.models.Group object at 0x0000010F522BDD00>, <app.database.models.Group object at 0x0000010F522BDE10>, <app.database.models.Group object at 0x0000010F522BDF20>, <app.database.models.Group object at 0x0000010F522BE030>, <app.database.models.Group object at 0x0000010F522BE140>, <app.database.models.Group object at 0x0000010F522BE250>, <app.database.models.Group object at 0x0000010F522BE360>, <app.database.models.Group object at 0x0000010F522BE470>, <app.database.models.Group object at 0x0000010F522BE580>, <app.database.models.Group object at 0x0000010F522BE690>, <app.database.models.Group object at 0x0000010F522BE7A0>, <app.database.models.Group object at 0x0000010F522BE8B0>, <app.database.models.Group object at 0x0000010F522BE9C0>, <app.database.models.Group object at 0x0000010F522BEAD0>, <app.database.models.Group object at 0x0000010F522BEBE0>, <app.database.models.Group object at 0x0000010F522BECF0>, <app.database.models.Group object at 0x0000010F522BEE00>, <app.database.models.Group object at 0x0000010F522BEF10>]
2025-07-16 21:33:13,150 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:33:13,150 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 10...
2025-07-16 21:33:13,152 - DEBUG - app - [AUTO-CUTOFF] User 10 has 0 open orders.
2025-07-16 21:33:13,152 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 10...
2025-07-16 21:33:13,156 - DEBUG - app - [AUTO-CUTOFF] User 10 has 0 pending orders.
2025-07-16 21:33:13,156 - WARNING - app - [AUTO-CUTOFF] User 10 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:33:13,156 - INFO - app - [AUTO-CUTOFF] Processing user 11 (live), group: Group B
2025-07-16 21:33:13,156 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 11 (live) from cache/DB...
2025-07-16 21:33:13,161 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:33:13,165 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:33:13,165 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:33:13,170 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F51FF46B0>, <app.database.models.Group object at 0x0000010F51FF6AD0>, <app.database.models.Group object at 0x0000010F524BA9C0>, <app.database.models.Group object at 0x0000010F524BA8B0>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F51FC8160>, <app.database.models.Group object at 0x0000010F51FC8C00>, <app.database.models.Group object at 0x0000010F51FC9E10>, <app.database.models.Group object at 0x0000010F51FC8E20>, <app.database.models.Group object at 0x0000010F51FCB570>, <app.database.models.Group object at 0x0000010F51FCB790>, <app.database.models.Group object at 0x0000010F51FCB680>, <app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FCBBD0>, <app.database.models.Group object at 0x0000010F51FCBAC0>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FC86B0>, <app.database.models.Group object at 0x0000010F51FC85A0>, <app.database.models.Group object at 0x0000010F51FC8490>, <app.database.models.Group object at 0x0000010F51FCB8A0>, <app.database.models.Group object at 0x0000010F51FC8270>, <app.database.models.Group object at 0x0000010F51FCABE0>, <app.database.models.Group object at 0x0000010F51FC9480>, <app.database.models.Group object at 0x0000010F51FC8050>, <app.database.models.Group object at 0x0000010F51FC8380>, <app.database.models.Group object at 0x0000010F51FCBF00>, <app.database.models.Group object at 0x0000010F51FCA9C0>, <app.database.models.Group object at 0x0000010F51FC8AF0>, <app.database.models.Group object at 0x0000010F51FC8D10>, <app.database.models.Group object at 0x0000010F51EFBBD0>, <app.database.models.Group object at 0x0000010F51EFB790>, <app.database.models.Group object at 0x0000010F51EF9E10>, <app.database.models.Group object at 0x0000010F51EFA7A0>, <app.database.models.Group object at 0x0000010F522BC050>, <app.database.models.Group object at 0x0000010F522BC160>, <app.database.models.Group object at 0x0000010F522BC270>, <app.database.models.Group object at 0x0000010F522BC380>, <app.database.models.Group object at 0x0000010F522BC490>, <app.database.models.Group object at 0x0000010F522BC5A0>, <app.database.models.Group object at 0x0000010F522BC6B0>, <app.database.models.Group object at 0x0000010F522BC7C0>, <app.database.models.Group object at 0x0000010F522BC8D0>, <app.database.models.Group object at 0x0000010F522BC9E0>, <app.database.models.Group object at 0x0000010F522BCAF0>, <app.database.models.Group object at 0x0000010F522BCC00>, <app.database.models.Group object at 0x0000010F522BCD10>, <app.database.models.Group object at 0x0000010F522BCE20>, <app.database.models.Group object at 0x0000010F522BCF30>, <app.database.models.Group object at 0x0000010F522BD040>, <app.database.models.Group object at 0x0000010F522BD150>, <app.database.models.Group object at 0x0000010F522BD260>, <app.database.models.Group object at 0x0000010F522BD370>, <app.database.models.Group object at 0x0000010F522BD480>, <app.database.models.Group object at 0x0000010F522BD590>, <app.database.models.Group object at 0x0000010F522BD6A0>, <app.database.models.Group object at 0x0000010F522BD7B0>, <app.database.models.Group object at 0x0000010F522BD8C0>, <app.database.models.Group object at 0x0000010F522BD9D0>, <app.database.models.Group object at 0x0000010F522BDAE0>, <app.database.models.Group object at 0x0000010F522BDBF0>, <app.database.models.Group object at 0x0000010F522BDD00>, <app.database.models.Group object at 0x0000010F522BDE10>, <app.database.models.Group object at 0x0000010F522BDF20>, <app.database.models.Group object at 0x0000010F522BE030>, <app.database.models.Group object at 0x0000010F522BE140>, <app.database.models.Group object at 0x0000010F522BE250>, <app.database.models.Group object at 0x0000010F522BE360>, <app.database.models.Group object at 0x0000010F522BE470>, <app.database.models.Group object at 0x0000010F522BE580>, <app.database.models.Group object at 0x0000010F522BE690>, <app.database.models.Group object at 0x0000010F522BE7A0>, <app.database.models.Group object at 0x0000010F522BE8B0>, <app.database.models.Group object at 0x0000010F522BE9C0>, <app.database.models.Group object at 0x0000010F522BEAD0>, <app.database.models.Group object at 0x0000010F522BEBE0>, <app.database.models.Group object at 0x0000010F522BECF0>, <app.database.models.Group object at 0x0000010F522BEE00>, <app.database.models.Group object at 0x0000010F522BEF10>]
2025-07-16 21:33:13,171 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:33:13,171 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 11...
2025-07-16 21:33:13,174 - DEBUG - app - [AUTO-CUTOFF] User 11 has 0 open orders.
2025-07-16 21:33:13,174 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 11...
2025-07-16 21:33:13,176 - DEBUG - app - [AUTO-CUTOFF] User 11 has 0 pending orders.
2025-07-16 21:33:13,176 - WARNING - app - [AUTO-CUTOFF] User 11 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:33:13,176 - INFO - app - [AUTO-CUTOFF] Processing user 12 (live), group: Standard
2025-07-16 21:33:13,176 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 12 (live) from cache/DB...
2025-07-16 21:33:13,177 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:33:13,178 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:33:13,178 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:33:13,181 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x0000010F51FF7350>, <app.database.models.Group object at 0x0000010F51FF7BD0>, <app.database.models.Group object at 0x0000010F51FF5040>, <app.database.models.Group object at 0x0000010F51FF78A0>, <app.database.models.Group object at 0x0000010F51FF79B0>, <app.database.models.Group object at 0x0000010F51FF6BE0>, <app.database.models.Group object at 0x0000010F51FF4F30>, <app.database.models.Group object at 0x0000010F51FF69C0>, <app.database.models.Group object at 0x0000010F51FF5150>, <app.database.models.Group object at 0x0000010F51FF5E10>, <app.database.models.Group object at 0x0000010F51FF4E20>, <app.database.models.Group object at 0x0000010F51FF6250>, <app.database.models.Group object at 0x0000010F51FF6E00>, <app.database.models.Group object at 0x0000010F51FF7680>, <app.database.models.Group object at 0x0000010F51FF6F10>, <app.database.models.Group object at 0x0000010F51FF4C00>, <app.database.models.Group object at 0x0000010F51FF6CF0>, <app.database.models.Group object at 0x0000010F51FF6140>, <app.database.models.Group object at 0x0000010F51FF68B0>, <app.database.models.Group object at 0x0000010F51FF6360>, <app.database.models.Group object at 0x0000010F51FF4160>, <app.database.models.Group object at 0x0000010F51FF56A0>, <app.database.models.Group object at 0x0000010F51FF5480>, <app.database.models.Group object at 0x0000010F51FF5BF0>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF4270>, <app.database.models.Group object at 0x0000010F51FF5D00>, <app.database.models.Group object at 0x0000010F51FF7240>, <app.database.models.Group object at 0x0000010F51FF5370>, <app.database.models.Group object at 0x0000010F51FF7F00>, <app.database.models.Group object at 0x0000010F51FF4490>, <app.database.models.Group object at 0x0000010F51FF4D10>, <app.database.models.Group object at 0x0000010F51FF59D0>, <app.database.models.Group object at 0x0000010F51FF58C0>, <app.database.models.Group object at 0x0000010F51FF6030>, <app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524B8380>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B99D0>, <app.database.models.Group object at 0x0000010F524BA250>, <app.database.models.Group object at 0x0000010F524B9480>, <app.database.models.Group object at 0x0000010F524B9370>, <app.database.models.Group object at 0x0000010F524B9E10>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F524BBBD0>, <app.database.models.Group object at 0x0000010F524B96A0>, <app.database.models.Group object at 0x0000010F524B98C0>, <app.database.models.Group object at 0x0000010F524B9590>, <app.database.models.Group object at 0x0000010F524B9260>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB130>]
2025-07-16 21:33:13,182 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:33:13,182 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 12...
2025-07-16 21:33:13,184 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 open orders.
2025-07-16 21:33:13,184 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 12...
2025-07-16 21:33:13,185 - DEBUG - app - [AUTO-CUTOFF] User 12 has 0 pending orders.
2025-07-16 21:33:13,185 - WARNING - app - [AUTO-CUTOFF] User 12 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:33:13,185 - INFO - app - [AUTO-CUTOFF] Processing user 13 (live), group: Group B
2025-07-16 21:33:13,185 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 13 (live) from cache/DB...
2025-07-16 21:33:13,186 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:33:13,186 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:33:13,186 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:33:13,189 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FC9E10>, <app.database.models.Group object at 0x0000010F51FCBBD0>, <app.database.models.Group object at 0x0000010F51FCBAC0>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FC86B0>, <app.database.models.Group object at 0x0000010F51FC85A0>, <app.database.models.Group object at 0x0000010F51FC8490>, <app.database.models.Group object at 0x0000010F51FCB8A0>, <app.database.models.Group object at 0x0000010F51FC8270>, <app.database.models.Group object at 0x0000010F51FCABE0>, <app.database.models.Group object at 0x0000010F51FC9480>, <app.database.models.Group object at 0x0000010F51FC8050>, <app.database.models.Group object at 0x0000010F51FC8380>, <app.database.models.Group object at 0x0000010F51FCBF00>, <app.database.models.Group object at 0x0000010F51FCA9C0>, <app.database.models.Group object at 0x0000010F51FC8AF0>, <app.database.models.Group object at 0x0000010F51FC8D10>, <app.database.models.Group object at 0x0000010F51EFBBD0>, <app.database.models.Group object at 0x0000010F51EFB790>, <app.database.models.Group object at 0x0000010F51EF9E10>, <app.database.models.Group object at 0x0000010F51EFA7A0>, <app.database.models.Group object at 0x0000010F51FF6580>, <app.database.models.Group object at 0x0000010F51FF7460>, <app.database.models.Group object at 0x0000010F51FF7570>, <app.database.models.Group object at 0x0000010F51FF46B0>, <app.database.models.Group object at 0x0000010F51FF6AD0>, <app.database.models.Group object at 0x0000010F51FF67A0>, <app.database.models.Group object at 0x0000010F51FF7AC0>, <app.database.models.Group object at 0x0000010F51FF7790>, <app.database.models.Group object at 0x0000010F51FF6470>, <app.database.models.Group object at 0x0000010F524BA9C0>, <app.database.models.Group object at 0x0000010F524BA8B0>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524B9150>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524BA140>, <app.database.models.Group object at 0x0000010F524B9AE0>, <app.database.models.Group object at 0x0000010F524B9F20>, <app.database.models.Group object at 0x0000010F52558050>, <app.database.models.Group object at 0x0000010F52558160>, <app.database.models.Group object at 0x0000010F52558270>, <app.database.models.Group object at 0x0000010F52558380>, <app.database.models.Group object at 0x0000010F52558490>, <app.database.models.Group object at 0x0000010F525585A0>, <app.database.models.Group object at 0x0000010F525586B0>, <app.database.models.Group object at 0x0000010F525587C0>, <app.database.models.Group object at 0x0000010F525588D0>, <app.database.models.Group object at 0x0000010F525589E0>, <app.database.models.Group object at 0x0000010F52558AF0>, <app.database.models.Group object at 0x0000010F52558C00>, <app.database.models.Group object at 0x0000010F52558D10>, <app.database.models.Group object at 0x0000010F52558E20>, <app.database.models.Group object at 0x0000010F52558F30>, <app.database.models.Group object at 0x0000010F52559040>, <app.database.models.Group object at 0x0000010F52559150>, <app.database.models.Group object at 0x0000010F52559260>, <app.database.models.Group object at 0x0000010F52559370>, <app.database.models.Group object at 0x0000010F52559480>, <app.database.models.Group object at 0x0000010F52559590>, <app.database.models.Group object at 0x0000010F525596A0>, <app.database.models.Group object at 0x0000010F525597B0>, <app.database.models.Group object at 0x0000010F525598C0>, <app.database.models.Group object at 0x0000010F525599D0>, <app.database.models.Group object at 0x0000010F52559AE0>, <app.database.models.Group object at 0x0000010F52559BF0>, <app.database.models.Group object at 0x0000010F52559D00>, <app.database.models.Group object at 0x0000010F52559E10>, <app.database.models.Group object at 0x0000010F52559F20>, <app.database.models.Group object at 0x0000010F5255A030>, <app.database.models.Group object at 0x0000010F5255A140>, <app.database.models.Group object at 0x0000010F5255A250>]
2025-07-16 21:33:13,190 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:33:13,190 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 13...
2025-07-16 21:33:13,192 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 open orders.
2025-07-16 21:33:13,192 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 13...
2025-07-16 21:33:13,193 - DEBUG - app - [AUTO-CUTOFF] User 13 has 0 pending orders.
2025-07-16 21:33:13,193 - WARNING - app - [AUTO-CUTOFF] User 13 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:33:13,193 - INFO - app - [AUTO-CUTOFF] Processing user 14 (live), group: Standard
2025-07-16 21:33:13,193 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 14 (live) from cache/DB...
2025-07-16 21:33:13,194 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:33:13,195 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:33:13,196 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:33:13,199 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x0000010F51FF6BE0>, <app.database.models.Group object at 0x0000010F51FF5040>, <app.database.models.Group object at 0x0000010F51FF4F30>, <app.database.models.Group object at 0x0000010F51FF69C0>, <app.database.models.Group object at 0x0000010F51FF5150>, <app.database.models.Group object at 0x0000010F51FF5E10>, <app.database.models.Group object at 0x0000010F51FF4E20>, <app.database.models.Group object at 0x0000010F51FF6250>, <app.database.models.Group object at 0x0000010F51FF6E00>, <app.database.models.Group object at 0x0000010F51FF7680>, <app.database.models.Group object at 0x0000010F51FF6F10>, <app.database.models.Group object at 0x0000010F51FF4C00>, <app.database.models.Group object at 0x0000010F51FF6CF0>, <app.database.models.Group object at 0x0000010F51FF6140>, <app.database.models.Group object at 0x0000010F51FF68B0>, <app.database.models.Group object at 0x0000010F51FF6360>, <app.database.models.Group object at 0x0000010F51FF4160>, <app.database.models.Group object at 0x0000010F51FF56A0>, <app.database.models.Group object at 0x0000010F51FF5480>, <app.database.models.Group object at 0x0000010F51FF5BF0>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF4270>, <app.database.models.Group object at 0x0000010F51FF5D00>, <app.database.models.Group object at 0x0000010F51FF7240>, <app.database.models.Group object at 0x0000010F51FF5370>, <app.database.models.Group object at 0x0000010F51FF7F00>, <app.database.models.Group object at 0x0000010F51FF4490>, <app.database.models.Group object at 0x0000010F51FF4D10>, <app.database.models.Group object at 0x0000010F51FF59D0>, <app.database.models.Group object at 0x0000010F51FF58C0>, <app.database.models.Group object at 0x0000010F51FF6030>, <app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524B8380>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B99D0>, <app.database.models.Group object at 0x0000010F524BA250>, <app.database.models.Group object at 0x0000010F524B9480>, <app.database.models.Group object at 0x0000010F524B9370>, <app.database.models.Group object at 0x0000010F524B9E10>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F524BBBD0>, <app.database.models.Group object at 0x0000010F524B96A0>, <app.database.models.Group object at 0x0000010F524B98C0>, <app.database.models.Group object at 0x0000010F524B9590>, <app.database.models.Group object at 0x0000010F524B9260>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F51FCB570>, <app.database.models.Group object at 0x0000010F51FC8E20>, <app.database.models.Group object at 0x0000010F51FC8C00>, <app.database.models.Group object at 0x0000010F51FC8160>]
2025-07-16 21:33:13,200 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:33:13,200 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 14...
2025-07-16 21:33:13,202 - DEBUG - app - [AUTO-CUTOFF] User 14 has 3 open orders.
2025-07-16 21:33:13,203 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 14...
2025-07-16 21:33:13,204 - DEBUG - app - [AUTO-CUTOFF] User 14 has 0 pending orders.
2025-07-16 21:33:13,204 - DEBUG - app - [AUTO-CUTOFF] User 14 total positions for portfolio calculation: 3
2025-07-16 21:33:13,205 - DEBUG - app - [AUTO-CUTOFF] User 14 adjusted market prices: {}
2025-07-16 21:33:13,205 - DEBUG - app - [AUTO-CUTOFF] User 14 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:33:13,205 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 14...
2025-07-16 21:33:13,272 - DEBUG - app.firebase_stream - Firebase listener triggered (55). Event Type: patch, Path: /. Timestamp: 1752726793.272129
2025-07-16 21:33:13,272 - DEBUG - app.firebase_stream - Prepared batch update for 21 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9700000000', 'o': '87.9670000000'}, 'GBPAUD': {'b': '2.0649800000', 'o': '2.0648300000'}, 'USDCNH': {'b': '7.1819100000', 'o': '7.1817700000'}, 'CADCHF': {'b': '0.5852100000', 'o'
2025-07-16 21:33:13,272 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9700000000', 'o': '87.9670000000'}, 'GBPAUD': {'b': '2.0649800000', 'o': '2.0648300000'}, 'USDCNH': {'b': '7.1819100000', 'o': '7.1817700000'}, 'CADCHF': {'b': '0.5852100000', 'o'...
2025-07-16 21:33:13,272 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:33:13,529 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol BTCUSD
2025-07-16 21:33:13,529 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:33:13,530 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:33:13,530 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 14: {'balance': '9902.02000000', 'equity': '9902.02000000', 'margin': '9494.47000000', 'free_margin': '407.55000000', 'profit_loss': '0.0', 'margin_level': '104.2924986860772639231047125', 'positions': [{'order_id': '1000330-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.40000000'), 'order_price': Decimal('141908.50000000'), 'margin': Decimal('9422.73000000'), 'contract_value': Decimal('0.40000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('235.57000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000332-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('65.21517371'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000333-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('6.52134765'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:33:13,530 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 14: {'balance': '9902.02000000', 'equity': '9902.02000000', 'margin': '9494.47000000', 'free_margin': '407.55000000', 'profit_loss': '0.0', 'margin_level': '104.2924986860772639231047125', 'positions_with_pnl': [{'order_id': '1000330-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.40000000'), 'order_price': Decimal('141908.50000000'), 'margin': Decimal('9422.73000000'), 'contract_value': Decimal('0.40000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('235.57000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000332-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('65.21517371'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000333-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('97.09700000'), 'margin': Decimal('6.52134765'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 14, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:33:13,531 - INFO - app - [AUTO-CUTOFF] User 14 margin_level: 104.2924986860772639231047125
2025-07-16 21:33:13,534 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 14
2025-07-16 21:33:13,534 - INFO - app - [AUTO-CUTOFF] Processing user 16 (live), group: Standard
2025-07-16 21:33:13,534 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 16 (live) from cache/DB...
2025-07-16 21:33:13,537 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:33:13,540 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:33:13,540 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:33:13,545 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x0000010F51FF6BE0>, <app.database.models.Group object at 0x0000010F51FF5040>, <app.database.models.Group object at 0x0000010F51FF4F30>, <app.database.models.Group object at 0x0000010F51FF69C0>, <app.database.models.Group object at 0x0000010F51FF5150>, <app.database.models.Group object at 0x0000010F51FF5E10>, <app.database.models.Group object at 0x0000010F51FF4E20>, <app.database.models.Group object at 0x0000010F51FF6250>, <app.database.models.Group object at 0x0000010F51FF6E00>, <app.database.models.Group object at 0x0000010F51FF7680>, <app.database.models.Group object at 0x0000010F51FF6F10>, <app.database.models.Group object at 0x0000010F51FF4C00>, <app.database.models.Group object at 0x0000010F51FF6CF0>, <app.database.models.Group object at 0x0000010F51FF6140>, <app.database.models.Group object at 0x0000010F51FF68B0>, <app.database.models.Group object at 0x0000010F51FF6360>, <app.database.models.Group object at 0x0000010F51FF4160>, <app.database.models.Group object at 0x0000010F51FF56A0>, <app.database.models.Group object at 0x0000010F51FF5480>, <app.database.models.Group object at 0x0000010F51FF5BF0>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF4270>, <app.database.models.Group object at 0x0000010F51FF5D00>, <app.database.models.Group object at 0x0000010F51FF7240>, <app.database.models.Group object at 0x0000010F51FF5370>, <app.database.models.Group object at 0x0000010F51FF7F00>, <app.database.models.Group object at 0x0000010F51FF4490>, <app.database.models.Group object at 0x0000010F51FF4D10>, <app.database.models.Group object at 0x0000010F51FF59D0>, <app.database.models.Group object at 0x0000010F51FF58C0>, <app.database.models.Group object at 0x0000010F51FF6030>, <app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524B8380>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B99D0>, <app.database.models.Group object at 0x0000010F524BA250>, <app.database.models.Group object at 0x0000010F524B9480>, <app.database.models.Group object at 0x0000010F524B9370>, <app.database.models.Group object at 0x0000010F524B9E10>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F524BBBD0>, <app.database.models.Group object at 0x0000010F524B96A0>, <app.database.models.Group object at 0x0000010F524B98C0>, <app.database.models.Group object at 0x0000010F524B9590>, <app.database.models.Group object at 0x0000010F524B9260>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F51FCB570>, <app.database.models.Group object at 0x0000010F51FC8E20>, <app.database.models.Group object at 0x0000010F51FC8C00>, <app.database.models.Group object at 0x0000010F51FC8160>]
2025-07-16 21:33:13,546 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:33:13,546 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 16...
2025-07-16 21:33:13,548 - DEBUG - app - [AUTO-CUTOFF] User 16 has 0 open orders.
2025-07-16 21:33:13,548 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 16...
2025-07-16 21:33:13,551 - DEBUG - app - [AUTO-CUTOFF] User 16 has 0 pending orders.
2025-07-16 21:33:13,551 - WARNING - app - [AUTO-CUTOFF] User 16 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:33:13,551 - INFO - app - [AUTO-CUTOFF] Processing user 17 (live), group: Group B
2025-07-16 21:33:13,551 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 17 (live) from cache/DB...
2025-07-16 21:33:13,553 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:33:13,555 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:33:13,555 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:33:13,559 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F51EF9E10>, <app.database.models.Group object at 0x0000010F51FCB680>, <app.database.models.Group object at 0x0000010F51FC8050>, <app.database.models.Group object at 0x0000010F51FCA9C0>, <app.database.models.Group object at 0x0000010F51FC8380>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FC8D10>, <app.database.models.Group object at 0x0000010F51FCBBD0>, <app.database.models.Group object at 0x0000010F524BA8B0>, <app.database.models.Group object at 0x0000010F524BA9C0>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524BA140>, <app.database.models.Group object at 0x0000010F524B9AE0>, <app.database.models.Group object at 0x0000010F524B9F20>, <app.database.models.Group object at 0x0000010F51FF5F20>, <app.database.models.Group object at 0x0000010F51FF7DF0>, <app.database.models.Group object at 0x0000010F51FF6580>, <app.database.models.Group object at 0x0000010F51FF7460>, <app.database.models.Group object at 0x0000010F51FF7570>, <app.database.models.Group object at 0x0000010F51FF46B0>, <app.database.models.Group object at 0x0000010F51FF6AD0>, <app.database.models.Group object at 0x0000010F51FF67A0>, <app.database.models.Group object at 0x0000010F51FF7AC0>, <app.database.models.Group object at 0x0000010F51FF7790>, <app.database.models.Group object at 0x0000010F51FF6470>, <app.database.models.Group object at 0x0000010F51FF79B0>, <app.database.models.Group object at 0x0000010F51FF78A0>, <app.database.models.Group object at 0x0000010F51FF7BD0>, <app.database.models.Group object at 0x0000010F51FF7350>, <app.database.models.Group object at 0x0000010F52554050>, <app.database.models.Group object at 0x0000010F52554160>, <app.database.models.Group object at 0x0000010F52554270>, <app.database.models.Group object at 0x0000010F52554380>, <app.database.models.Group object at 0x0000010F52554490>, <app.database.models.Group object at 0x0000010F525545A0>, <app.database.models.Group object at 0x0000010F525546B0>, <app.database.models.Group object at 0x0000010F525547C0>, <app.database.models.Group object at 0x0000010F525548D0>, <app.database.models.Group object at 0x0000010F525549E0>, <app.database.models.Group object at 0x0000010F52554AF0>, <app.database.models.Group object at 0x0000010F52554C00>, <app.database.models.Group object at 0x0000010F52554D10>, <app.database.models.Group object at 0x0000010F52554E20>, <app.database.models.Group object at 0x0000010F52554F30>, <app.database.models.Group object at 0x0000010F52555040>, <app.database.models.Group object at 0x0000010F52555150>, <app.database.models.Group object at 0x0000010F52555260>, <app.database.models.Group object at 0x0000010F52555370>, <app.database.models.Group object at 0x0000010F52555480>, <app.database.models.Group object at 0x0000010F52555590>, <app.database.models.Group object at 0x0000010F525556A0>, <app.database.models.Group object at 0x0000010F525557B0>, <app.database.models.Group object at 0x0000010F525558C0>, <app.database.models.Group object at 0x0000010F525559D0>, <app.database.models.Group object at 0x0000010F52555AE0>, <app.database.models.Group object at 0x0000010F52555BF0>, <app.database.models.Group object at 0x0000010F52555D00>, <app.database.models.Group object at 0x0000010F52555E10>, <app.database.models.Group object at 0x0000010F52555F20>, <app.database.models.Group object at 0x0000010F52556030>, <app.database.models.Group object at 0x0000010F52556140>, <app.database.models.Group object at 0x0000010F52556250>, <app.database.models.Group object at 0x0000010F52556360>, <app.database.models.Group object at 0x0000010F52556470>, <app.database.models.Group object at 0x0000010F52556580>, <app.database.models.Group object at 0x0000010F52556690>, <app.database.models.Group object at 0x0000010F525567A0>, <app.database.models.Group object at 0x0000010F525568B0>, <app.database.models.Group object at 0x0000010F525569C0>, <app.database.models.Group object at 0x0000010F52556AD0>, <app.database.models.Group object at 0x0000010F52556BE0>, <app.database.models.Group object at 0x0000010F52556CF0>]
2025-07-16 21:33:13,560 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:33:13,560 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 17...
2025-07-16 21:33:13,562 - DEBUG - app - [AUTO-CUTOFF] User 17 has 0 open orders.
2025-07-16 21:33:13,562 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 17...
2025-07-16 21:33:13,564 - DEBUG - app - [AUTO-CUTOFF] User 17 has 0 pending orders.
2025-07-16 21:33:13,564 - WARNING - app - [AUTO-CUTOFF] User 17 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:33:13,564 - INFO - app - [AUTO-CUTOFF] Processing user 18 (live), group: Group B
2025-07-16 21:33:13,564 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 18 (live) from cache/DB...
2025-07-16 21:33:13,565 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:33:13,566 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:33:13,566 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:33:13,568 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F51EF9E10>, <app.database.models.Group object at 0x0000010F51FCB680>, <app.database.models.Group object at 0x0000010F51FC8050>, <app.database.models.Group object at 0x0000010F51FCA9C0>, <app.database.models.Group object at 0x0000010F51FC8380>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FC8D10>, <app.database.models.Group object at 0x0000010F51FCBBD0>, <app.database.models.Group object at 0x0000010F524BA8B0>, <app.database.models.Group object at 0x0000010F524BA9C0>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524BA140>, <app.database.models.Group object at 0x0000010F524B9AE0>, <app.database.models.Group object at 0x0000010F524B9F20>, <app.database.models.Group object at 0x0000010F51FF5F20>, <app.database.models.Group object at 0x0000010F51FF7DF0>, <app.database.models.Group object at 0x0000010F51FF6580>, <app.database.models.Group object at 0x0000010F51FF7460>, <app.database.models.Group object at 0x0000010F51FF7570>, <app.database.models.Group object at 0x0000010F51FF46B0>, <app.database.models.Group object at 0x0000010F51FF6AD0>, <app.database.models.Group object at 0x0000010F51FF67A0>, <app.database.models.Group object at 0x0000010F51FF7AC0>, <app.database.models.Group object at 0x0000010F51FF7790>, <app.database.models.Group object at 0x0000010F51FF6470>, <app.database.models.Group object at 0x0000010F51FF79B0>, <app.database.models.Group object at 0x0000010F51FF78A0>, <app.database.models.Group object at 0x0000010F51FF7BD0>, <app.database.models.Group object at 0x0000010F51FF7350>, <app.database.models.Group object at 0x0000010F52554050>, <app.database.models.Group object at 0x0000010F52554160>, <app.database.models.Group object at 0x0000010F52554270>, <app.database.models.Group object at 0x0000010F52554380>, <app.database.models.Group object at 0x0000010F52554490>, <app.database.models.Group object at 0x0000010F525545A0>, <app.database.models.Group object at 0x0000010F525546B0>, <app.database.models.Group object at 0x0000010F525547C0>, <app.database.models.Group object at 0x0000010F525548D0>, <app.database.models.Group object at 0x0000010F525549E0>, <app.database.models.Group object at 0x0000010F52554AF0>, <app.database.models.Group object at 0x0000010F52554C00>, <app.database.models.Group object at 0x0000010F52554D10>, <app.database.models.Group object at 0x0000010F52554E20>, <app.database.models.Group object at 0x0000010F52554F30>, <app.database.models.Group object at 0x0000010F52555040>, <app.database.models.Group object at 0x0000010F52555150>, <app.database.models.Group object at 0x0000010F52555260>, <app.database.models.Group object at 0x0000010F52555370>, <app.database.models.Group object at 0x0000010F52555480>, <app.database.models.Group object at 0x0000010F52555590>, <app.database.models.Group object at 0x0000010F525556A0>, <app.database.models.Group object at 0x0000010F525557B0>, <app.database.models.Group object at 0x0000010F525558C0>, <app.database.models.Group object at 0x0000010F525559D0>, <app.database.models.Group object at 0x0000010F52555AE0>, <app.database.models.Group object at 0x0000010F52555BF0>, <app.database.models.Group object at 0x0000010F52555D00>, <app.database.models.Group object at 0x0000010F52555E10>, <app.database.models.Group object at 0x0000010F52555F20>, <app.database.models.Group object at 0x0000010F52556030>, <app.database.models.Group object at 0x0000010F52556140>, <app.database.models.Group object at 0x0000010F52556250>, <app.database.models.Group object at 0x0000010F52556360>, <app.database.models.Group object at 0x0000010F52556470>, <app.database.models.Group object at 0x0000010F52556580>, <app.database.models.Group object at 0x0000010F52556690>, <app.database.models.Group object at 0x0000010F525567A0>, <app.database.models.Group object at 0x0000010F525568B0>, <app.database.models.Group object at 0x0000010F525569C0>, <app.database.models.Group object at 0x0000010F52556AD0>, <app.database.models.Group object at 0x0000010F52556BE0>, <app.database.models.Group object at 0x0000010F52556CF0>]
2025-07-16 21:33:13,569 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:33:13,569 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 18...
2025-07-16 21:33:13,571 - DEBUG - app - [AUTO-CUTOFF] User 18 has 0 open orders.
2025-07-16 21:33:13,571 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 18...
2025-07-16 21:33:13,572 - DEBUG - app - [AUTO-CUTOFF] User 18 has 0 pending orders.
2025-07-16 21:33:13,572 - WARNING - app - [AUTO-CUTOFF] User 18 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:33:13,572 - INFO - app - [AUTO-CUTOFF] Processing user 19 (live), group: Elite
2025-07-16 21:33:13,572 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 19 (live) from cache/DB...
2025-07-16 21:33:13,573 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Elite...
2025-07-16 21:33:13,573 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Elite' from cache: None
2025-07-16 21:33:13,573 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Elite', fetching from DB.
2025-07-16 21:33:13,576 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Elite': [<app.database.models.Group object at 0x0000010F51FF4F30>, <app.database.models.Group object at 0x0000010F51FF6F10>, <app.database.models.Group object at 0x0000010F51FF4E20>, <app.database.models.Group object at 0x0000010F51FF7680>, <app.database.models.Group object at 0x0000010F51FF5E10>, <app.database.models.Group object at 0x0000010F51FF6CF0>, <app.database.models.Group object at 0x0000010F51FF5150>, <app.database.models.Group object at 0x0000010F51FF6250>, <app.database.models.Group object at 0x0000010F51FF6E00>, <app.database.models.Group object at 0x0000010F51FF6360>, <app.database.models.Group object at 0x0000010F51FF4160>, <app.database.models.Group object at 0x0000010F51FF56A0>, <app.database.models.Group object at 0x0000010F51FF5480>, <app.database.models.Group object at 0x0000010F51FF5BF0>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF4270>, <app.database.models.Group object at 0x0000010F51FF5D00>, <app.database.models.Group object at 0x0000010F51FF7240>, <app.database.models.Group object at 0x0000010F51FF5370>, <app.database.models.Group object at 0x0000010F51FF7F00>, <app.database.models.Group object at 0x0000010F51FF4490>, <app.database.models.Group object at 0x0000010F51FF4D10>, <app.database.models.Group object at 0x0000010F51FF59D0>, <app.database.models.Group object at 0x0000010F51FF58C0>, <app.database.models.Group object at 0x0000010F51FF6030>, <app.database.models.Group object at 0x0000010F524B9150>, <app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524B8380>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B99D0>, <app.database.models.Group object at 0x0000010F524BA250>, <app.database.models.Group object at 0x0000010F524B9480>, <app.database.models.Group object at 0x0000010F524B9370>, <app.database.models.Group object at 0x0000010F524B9E10>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F524BBBD0>, <app.database.models.Group object at 0x0000010F524B96A0>, <app.database.models.Group object at 0x0000010F524B98C0>, <app.database.models.Group object at 0x0000010F524B9590>, <app.database.models.Group object at 0x0000010F524B9260>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F51EFBBD0>, <app.database.models.Group object at 0x0000010F51EFB790>, <app.database.models.Group object at 0x0000010F51FCB790>, <app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FC8270>, <app.database.models.Group object at 0x0000010F51FC8AF0>, <app.database.models.Group object at 0x0000010F51FC9480>, <app.database.models.Group object at 0x0000010F51FCBAC0>]
2025-07-16 21:33:13,577 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Elite': {'sending_orders': 'barclays'}
2025-07-16 21:33:13,577 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 19...
2025-07-16 21:33:13,578 - DEBUG - app - [AUTO-CUTOFF] User 19 has 0 open orders.
2025-07-16 21:33:13,578 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 19...
2025-07-16 21:33:13,579 - DEBUG - app - [AUTO-CUTOFF] User 19 has 0 pending orders.
2025-07-16 21:33:13,580 - WARNING - app - [AUTO-CUTOFF] User 19 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:33:13,580 - INFO - app - [AUTO-CUTOFF] Processing user 20 (live), group: Standard
2025-07-16 21:33:13,580 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 20 (live) from cache/DB...
2025-07-16 21:33:13,580 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Standard...
2025-07-16 21:33:13,581 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Standard' from cache: None
2025-07-16 21:33:13,581 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Standard', fetching from DB.
2025-07-16 21:33:13,584 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Standard': [<app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F524BA9C0>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524BA140>, <app.database.models.Group object at 0x0000010F524B9AE0>, <app.database.models.Group object at 0x0000010F524B9F20>, <app.database.models.Group object at 0x0000010F51FF5F20>, <app.database.models.Group object at 0x0000010F51FF7DF0>, <app.database.models.Group object at 0x0000010F51FF6580>, <app.database.models.Group object at 0x0000010F51FF7460>, <app.database.models.Group object at 0x0000010F51FF7570>, <app.database.models.Group object at 0x0000010F51FF46B0>, <app.database.models.Group object at 0x0000010F51FF6AD0>, <app.database.models.Group object at 0x0000010F51FF67A0>, <app.database.models.Group object at 0x0000010F51FF7AC0>, <app.database.models.Group object at 0x0000010F51FF7790>, <app.database.models.Group object at 0x0000010F51FF6470>, <app.database.models.Group object at 0x0000010F51FF79B0>, <app.database.models.Group object at 0x0000010F51FF78A0>, <app.database.models.Group object at 0x0000010F51FF7BD0>, <app.database.models.Group object at 0x0000010F51FF7350>, <app.database.models.Group object at 0x0000010F51FF69C0>, <app.database.models.Group object at 0x0000010F51FF6BE0>, <app.database.models.Group object at 0x0000010F51FF4C00>, <app.database.models.Group object at 0x0000010F51FF5040>, <app.database.models.Group object at 0x0000010F51FCB680>, <app.database.models.Group object at 0x0000010F51FC8050>, <app.database.models.Group object at 0x0000010F51FCA9C0>, <app.database.models.Group object at 0x0000010F51FC8380>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FC8D10>, <app.database.models.Group object at 0x0000010F51FCBBD0>, <app.database.models.Group object at 0x0000010F51FC8490>, <app.database.models.Group object at 0x0000010F51FCBF00>, <app.database.models.Group object at 0x0000010F51FCB570>, <app.database.models.Group object at 0x0000010F51FC8E20>, <app.database.models.Group object at 0x0000010F51FC8C00>, <app.database.models.Group object at 0x0000010F51FC8160>, <app.database.models.Group object at 0x0000010F51FCABE0>, <app.database.models.Group object at 0x0000010F51FC85A0>, <app.database.models.Group object at 0x0000010F52550050>, <app.database.models.Group object at 0x0000010F52550160>, <app.database.models.Group object at 0x0000010F52550270>, <app.database.models.Group object at 0x0000010F52550380>, <app.database.models.Group object at 0x0000010F52550490>, <app.database.models.Group object at 0x0000010F525505A0>, <app.database.models.Group object at 0x0000010F525506B0>, <app.database.models.Group object at 0x0000010F525507C0>, <app.database.models.Group object at 0x0000010F525508D0>, <app.database.models.Group object at 0x0000010F525509E0>, <app.database.models.Group object at 0x0000010F52550AF0>, <app.database.models.Group object at 0x0000010F52550C00>, <app.database.models.Group object at 0x0000010F52550D10>, <app.database.models.Group object at 0x0000010F52550E20>, <app.database.models.Group object at 0x0000010F52550F30>, <app.database.models.Group object at 0x0000010F52551040>, <app.database.models.Group object at 0x0000010F52551150>, <app.database.models.Group object at 0x0000010F52551260>, <app.database.models.Group object at 0x0000010F52551370>, <app.database.models.Group object at 0x0000010F52551480>, <app.database.models.Group object at 0x0000010F52551590>, <app.database.models.Group object at 0x0000010F525516A0>, <app.database.models.Group object at 0x0000010F525517B0>, <app.database.models.Group object at 0x0000010F525518C0>, <app.database.models.Group object at 0x0000010F525519D0>, <app.database.models.Group object at 0x0000010F52551AE0>, <app.database.models.Group object at 0x0000010F52551BF0>, <app.database.models.Group object at 0x0000010F52551D00>, <app.database.models.Group object at 0x0000010F52551E10>, <app.database.models.Group object at 0x0000010F52551F20>, <app.database.models.Group object at 0x0000010F52552030>, <app.database.models.Group object at 0x0000010F52552140>, <app.database.models.Group object at 0x0000010F52552250>]
2025-07-16 21:33:13,585 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Standard': {'sending_orders': 'barclays'}
2025-07-16 21:33:13,585 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 20...
2025-07-16 21:33:13,586 - DEBUG - app - [AUTO-CUTOFF] User 20 has 0 open orders.
2025-07-16 21:33:13,586 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 20...
2025-07-16 21:33:13,587 - DEBUG - app - [AUTO-CUTOFF] User 20 has 0 pending orders.
2025-07-16 21:33:13,587 - WARNING - app - [AUTO-CUTOFF] User 20 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:33:13,587 - INFO - app - [AUTO-CUTOFF] Processing user 21 (live), group: Group B
2025-07-16 21:33:13,587 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 21 (live) from cache/DB...
2025-07-16 21:33:13,588 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:33:13,588 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:33:13,589 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:33:13,591 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F51FF6CF0>, <app.database.models.Group object at 0x0000010F51FF4E20>, <app.database.models.Group object at 0x0000010F51FF5150>, <app.database.models.Group object at 0x0000010F51FF6250>, <app.database.models.Group object at 0x0000010F51FF6E00>, <app.database.models.Group object at 0x0000010F51FF6360>, <app.database.models.Group object at 0x0000010F51FF4160>, <app.database.models.Group object at 0x0000010F51FF56A0>, <app.database.models.Group object at 0x0000010F51FF5480>, <app.database.models.Group object at 0x0000010F51FF5BF0>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF4270>, <app.database.models.Group object at 0x0000010F51FF5D00>, <app.database.models.Group object at 0x0000010F51FF7240>, <app.database.models.Group object at 0x0000010F51FF5370>, <app.database.models.Group object at 0x0000010F51FF7F00>, <app.database.models.Group object at 0x0000010F51FF4490>, <app.database.models.Group object at 0x0000010F51FF4D10>, <app.database.models.Group object at 0x0000010F51FF59D0>, <app.database.models.Group object at 0x0000010F51FF58C0>, <app.database.models.Group object at 0x0000010F51FF6030>, <app.database.models.Group object at 0x0000010F51FCB790>, <app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FC8270>, <app.database.models.Group object at 0x0000010F51FC8AF0>, <app.database.models.Group object at 0x0000010F51FC9480>, <app.database.models.Group object at 0x0000010F51FCBAC0>, <app.database.models.Group object at 0x0000010F51EFBBD0>, <app.database.models.Group object at 0x0000010F51EFB790>, <app.database.models.Group object at 0x0000010F51EF9E10>, <app.database.models.Group object at 0x0000010F524B9150>, <app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524B8380>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B99D0>, <app.database.models.Group object at 0x0000010F524BA250>, <app.database.models.Group object at 0x0000010F524B9480>, <app.database.models.Group object at 0x0000010F524B9370>, <app.database.models.Group object at 0x0000010F524B9E10>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F524BBBD0>, <app.database.models.Group object at 0x0000010F524B96A0>, <app.database.models.Group object at 0x0000010F524B98C0>, <app.database.models.Group object at 0x0000010F524B9590>, <app.database.models.Group object at 0x0000010F524B9260>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524BA8B0>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F52552360>, <app.database.models.Group object at 0x0000010F52552470>]
2025-07-16 21:33:13,592 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:33:13,592 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 21...
2025-07-16 21:33:13,594 - DEBUG - app - [AUTO-CUTOFF] User 21 has 0 open orders.
2025-07-16 21:33:13,594 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 21...
2025-07-16 21:33:13,595 - DEBUG - app - [AUTO-CUTOFF] User 21 has 0 pending orders.
2025-07-16 21:33:13,595 - WARNING - app - [AUTO-CUTOFF] User 21 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:33:13,595 - INFO - app - [AUTO-CUTOFF] Processing user 22 (live), group: VIP
2025-07-16 21:33:13,595 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 22 (live) from cache/DB...
2025-07-16 21:33:13,596 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group VIP...
2025-07-16 21:33:13,596 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'VIP' from cache: None
2025-07-16 21:33:13,597 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'VIP', fetching from DB.
2025-07-16 21:33:13,600 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'VIP': [<app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524BA140>, <app.database.models.Group object at 0x0000010F524B9AE0>, <app.database.models.Group object at 0x0000010F524B9F20>, <app.database.models.Group object at 0x0000010F51FCB680>, <app.database.models.Group object at 0x0000010F51FC8050>, <app.database.models.Group object at 0x0000010F51FCA9C0>, <app.database.models.Group object at 0x0000010F51FC8380>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FC8D10>, <app.database.models.Group object at 0x0000010F51FCBBD0>, <app.database.models.Group object at 0x0000010F51FC8490>, <app.database.models.Group object at 0x0000010F51FCBF00>, <app.database.models.Group object at 0x0000010F51FCB570>, <app.database.models.Group object at 0x0000010F51FC8E20>, <app.database.models.Group object at 0x0000010F51FC8C00>, <app.database.models.Group object at 0x0000010F51FC8160>, <app.database.models.Group object at 0x0000010F51FCABE0>, <app.database.models.Group object at 0x0000010F51FC85A0>, <app.database.models.Group object at 0x0000010F51FF5F20>, <app.database.models.Group object at 0x0000010F51FF7DF0>, <app.database.models.Group object at 0x0000010F51FF6580>, <app.database.models.Group object at 0x0000010F51FF7460>, <app.database.models.Group object at 0x0000010F51FF7570>, <app.database.models.Group object at 0x0000010F51FF46B0>, <app.database.models.Group object at 0x0000010F51FF6AD0>, <app.database.models.Group object at 0x0000010F51FF67A0>, <app.database.models.Group object at 0x0000010F51FF7AC0>, <app.database.models.Group object at 0x0000010F51FF7790>, <app.database.models.Group object at 0x0000010F51FF6470>, <app.database.models.Group object at 0x0000010F51FF79B0>, <app.database.models.Group object at 0x0000010F51FF78A0>, <app.database.models.Group object at 0x0000010F51FF7BD0>, <app.database.models.Group object at 0x0000010F51FF7350>, <app.database.models.Group object at 0x0000010F51FF69C0>, <app.database.models.Group object at 0x0000010F51FF6BE0>, <app.database.models.Group object at 0x0000010F51FF4C00>, <app.database.models.Group object at 0x0000010F51FF5040>, <app.database.models.Group object at 0x0000010F51FF5E10>, <app.database.models.Group object at 0x0000010F51FF7680>, <app.database.models.Group object at 0x0000010F51FF6F10>, <app.database.models.Group object at 0x0000010F51FF4F30>, <app.database.models.Group object at 0x0000010F52550050>, <app.database.models.Group object at 0x0000010F52550160>, <app.database.models.Group object at 0x0000010F52550270>, <app.database.models.Group object at 0x0000010F52550380>, <app.database.models.Group object at 0x0000010F52550490>, <app.database.models.Group object at 0x0000010F525505A0>, <app.database.models.Group object at 0x0000010F525506B0>, <app.database.models.Group object at 0x0000010F525507C0>, <app.database.models.Group object at 0x0000010F525508D0>, <app.database.models.Group object at 0x0000010F525509E0>, <app.database.models.Group object at 0x0000010F52550AF0>, <app.database.models.Group object at 0x0000010F52550C00>, <app.database.models.Group object at 0x0000010F52550D10>, <app.database.models.Group object at 0x0000010F52550E20>, <app.database.models.Group object at 0x0000010F52550F30>, <app.database.models.Group object at 0x0000010F52551040>, <app.database.models.Group object at 0x0000010F52551150>, <app.database.models.Group object at 0x0000010F52551260>, <app.database.models.Group object at 0x0000010F52551370>, <app.database.models.Group object at 0x0000010F52551480>, <app.database.models.Group object at 0x0000010F52551590>, <app.database.models.Group object at 0x0000010F525516A0>, <app.database.models.Group object at 0x0000010F525517B0>, <app.database.models.Group object at 0x0000010F525518C0>, <app.database.models.Group object at 0x0000010F525519D0>, <app.database.models.Group object at 0x0000010F52551AE0>, <app.database.models.Group object at 0x0000010F52551BF0>, <app.database.models.Group object at 0x0000010F52551D00>, <app.database.models.Group object at 0x0000010F52551E10>, <app.database.models.Group object at 0x0000010F52551F20>, <app.database.models.Group object at 0x0000010F52552030>, <app.database.models.Group object at 0x0000010F52552140>, <app.database.models.Group object at 0x0000010F52552250>]
2025-07-16 21:33:13,602 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'VIP': {'sending_orders': 'barclays'}
2025-07-16 21:33:13,602 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 22...
2025-07-16 21:33:13,604 - DEBUG - app - [AUTO-CUTOFF] User 22 has 0 open orders.
2025-07-16 21:33:13,604 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 22...
2025-07-16 21:33:13,605 - DEBUG - app - [AUTO-CUTOFF] User 22 has 0 pending orders.
2025-07-16 21:33:13,605 - WARNING - app - [AUTO-CUTOFF] User 22 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:33:13,605 - INFO - app - [AUTO-CUTOFF] Processing user 23 (live), group: Group B
2025-07-16 21:33:13,605 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 23 (live) from cache/DB...
2025-07-16 21:33:13,606 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:33:13,606 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:33:13,606 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:33:13,609 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F51FF6360>, <app.database.models.Group object at 0x0000010F51FF5150>, <app.database.models.Group object at 0x0000010F51FF4160>, <app.database.models.Group object at 0x0000010F51FF56A0>, <app.database.models.Group object at 0x0000010F51FF5480>, <app.database.models.Group object at 0x0000010F51FF5BF0>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF4270>, <app.database.models.Group object at 0x0000010F51FF5D00>, <app.database.models.Group object at 0x0000010F51FF7240>, <app.database.models.Group object at 0x0000010F51FF5370>, <app.database.models.Group object at 0x0000010F51FF7F00>, <app.database.models.Group object at 0x0000010F51FF4490>, <app.database.models.Group object at 0x0000010F51FF4D10>, <app.database.models.Group object at 0x0000010F51FF59D0>, <app.database.models.Group object at 0x0000010F51FF58C0>, <app.database.models.Group object at 0x0000010F51FF6030>, <app.database.models.Group object at 0x0000010F51FCB790>, <app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FC8270>, <app.database.models.Group object at 0x0000010F51FC8AF0>, <app.database.models.Group object at 0x0000010F51FC9480>, <app.database.models.Group object at 0x0000010F51FCBAC0>, <app.database.models.Group object at 0x0000010F51EFBBD0>, <app.database.models.Group object at 0x0000010F51EFB790>, <app.database.models.Group object at 0x0000010F51EF9E10>, <app.database.models.Group object at 0x0000010F524B9150>, <app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524B8380>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B99D0>, <app.database.models.Group object at 0x0000010F524BA250>, <app.database.models.Group object at 0x0000010F524B9480>, <app.database.models.Group object at 0x0000010F524B9370>, <app.database.models.Group object at 0x0000010F524B9E10>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F524BBBD0>, <app.database.models.Group object at 0x0000010F524B96A0>, <app.database.models.Group object at 0x0000010F524B98C0>, <app.database.models.Group object at 0x0000010F524B9590>, <app.database.models.Group object at 0x0000010F524B9260>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524BA8B0>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524BA9C0>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F52552360>, <app.database.models.Group object at 0x0000010F52552470>]
2025-07-16 21:33:13,610 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:33:13,610 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 23...
2025-07-16 21:33:13,611 - DEBUG - app - [AUTO-CUTOFF] User 23 has 0 open orders.
2025-07-16 21:33:13,611 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 23...
2025-07-16 21:33:13,612 - DEBUG - app - [AUTO-CUTOFF] User 23 has 0 pending orders.
2025-07-16 21:33:13,612 - WARNING - app - [AUTO-CUTOFF] User 23 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:33:13,612 - INFO - app - [AUTO-CUTOFF] Processing user 25 (live), group: Group B
2025-07-16 21:33:13,612 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 25 (live) from cache/DB...
2025-07-16 21:33:13,613 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:33:13,614 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:33:13,614 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:33:13,616 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F51FF6360>, <app.database.models.Group object at 0x0000010F51FF5150>, <app.database.models.Group object at 0x0000010F51FF4160>, <app.database.models.Group object at 0x0000010F51FF56A0>, <app.database.models.Group object at 0x0000010F51FF5480>, <app.database.models.Group object at 0x0000010F51FF5BF0>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF4270>, <app.database.models.Group object at 0x0000010F51FF5D00>, <app.database.models.Group object at 0x0000010F51FF7240>, <app.database.models.Group object at 0x0000010F51FF5370>, <app.database.models.Group object at 0x0000010F51FF7F00>, <app.database.models.Group object at 0x0000010F51FF4490>, <app.database.models.Group object at 0x0000010F51FF4D10>, <app.database.models.Group object at 0x0000010F51FF59D0>, <app.database.models.Group object at 0x0000010F51FF58C0>, <app.database.models.Group object at 0x0000010F51FF6030>, <app.database.models.Group object at 0x0000010F51FCB790>, <app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FC8270>, <app.database.models.Group object at 0x0000010F51FC8AF0>, <app.database.models.Group object at 0x0000010F51FC9480>, <app.database.models.Group object at 0x0000010F51FCBAC0>, <app.database.models.Group object at 0x0000010F51EFBBD0>, <app.database.models.Group object at 0x0000010F51EFB790>, <app.database.models.Group object at 0x0000010F51EF9E10>, <app.database.models.Group object at 0x0000010F524B9150>, <app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524B8380>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B99D0>, <app.database.models.Group object at 0x0000010F524BA250>, <app.database.models.Group object at 0x0000010F524B9480>, <app.database.models.Group object at 0x0000010F524B9370>, <app.database.models.Group object at 0x0000010F524B9E10>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F524BBBD0>, <app.database.models.Group object at 0x0000010F524B96A0>, <app.database.models.Group object at 0x0000010F524B98C0>, <app.database.models.Group object at 0x0000010F524B9590>, <app.database.models.Group object at 0x0000010F524B9260>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524BA8B0>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524BA9C0>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F52552360>, <app.database.models.Group object at 0x0000010F52552470>]
2025-07-16 21:33:13,617 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:33:13,617 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 25...
2025-07-16 21:33:13,619 - DEBUG - app - [AUTO-CUTOFF] User 25 has 0 open orders.
2025-07-16 21:33:13,619 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 25...
2025-07-16 21:33:13,620 - DEBUG - app - [AUTO-CUTOFF] User 25 has 0 pending orders.
2025-07-16 21:33:13,620 - WARNING - app - [AUTO-CUTOFF] User 25 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:33:13,620 - INFO - app - [AUTO-CUTOFF] Processing user 26 (live), group: Royal+
2025-07-16 21:33:13,620 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 26 (live) from cache/DB...
2025-07-16 21:33:13,621 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Royal+...
2025-07-16 21:33:13,621 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Royal+' from cache: None
2025-07-16 21:33:13,621 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Royal+', fetching from DB.
2025-07-16 21:33:13,624 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Royal+': [<app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F51FCB680>, <app.database.models.Group object at 0x0000010F51FC8050>, <app.database.models.Group object at 0x0000010F51FCA9C0>, <app.database.models.Group object at 0x0000010F51FC8380>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FC8D10>, <app.database.models.Group object at 0x0000010F51FCBBD0>, <app.database.models.Group object at 0x0000010F51FC8490>, <app.database.models.Group object at 0x0000010F51FCBF00>, <app.database.models.Group object at 0x0000010F51FCB570>, <app.database.models.Group object at 0x0000010F51FC8E20>, <app.database.models.Group object at 0x0000010F51FC8C00>, <app.database.models.Group object at 0x0000010F51FC8160>, <app.database.models.Group object at 0x0000010F51FCABE0>, <app.database.models.Group object at 0x0000010F51FC85A0>, <app.database.models.Group object at 0x0000010F51FF5F20>, <app.database.models.Group object at 0x0000010F51FF7DF0>, <app.database.models.Group object at 0x0000010F51FF6580>, <app.database.models.Group object at 0x0000010F51FF7460>, <app.database.models.Group object at 0x0000010F51FF7570>, <app.database.models.Group object at 0x0000010F51FF46B0>, <app.database.models.Group object at 0x0000010F51FF6AD0>, <app.database.models.Group object at 0x0000010F51FF67A0>, <app.database.models.Group object at 0x0000010F51FF7AC0>, <app.database.models.Group object at 0x0000010F51FF7790>, <app.database.models.Group object at 0x0000010F51FF6470>, <app.database.models.Group object at 0x0000010F51FF79B0>, <app.database.models.Group object at 0x0000010F51FF78A0>, <app.database.models.Group object at 0x0000010F51FF7BD0>, <app.database.models.Group object at 0x0000010F51FF7350>, <app.database.models.Group object at 0x0000010F51FF69C0>, <app.database.models.Group object at 0x0000010F51FF6BE0>, <app.database.models.Group object at 0x0000010F51FF4C00>, <app.database.models.Group object at 0x0000010F51FF5040>, <app.database.models.Group object at 0x0000010F51FF5E10>, <app.database.models.Group object at 0x0000010F51FF7680>, <app.database.models.Group object at 0x0000010F51FF6F10>, <app.database.models.Group object at 0x0000010F51FF4F30>, <app.database.models.Group object at 0x0000010F51FF6E00>, <app.database.models.Group object at 0x0000010F51FF6250>, <app.database.models.Group object at 0x0000010F51FF4E20>, <app.database.models.Group object at 0x0000010F51FF6CF0>, <app.database.models.Group object at 0x0000010F52550050>, <app.database.models.Group object at 0x0000010F52550160>, <app.database.models.Group object at 0x0000010F52550270>, <app.database.models.Group object at 0x0000010F52550380>, <app.database.models.Group object at 0x0000010F52550490>, <app.database.models.Group object at 0x0000010F525505A0>, <app.database.models.Group object at 0x0000010F525506B0>, <app.database.models.Group object at 0x0000010F525507C0>, <app.database.models.Group object at 0x0000010F525508D0>, <app.database.models.Group object at 0x0000010F525509E0>, <app.database.models.Group object at 0x0000010F52550AF0>, <app.database.models.Group object at 0x0000010F52550C00>, <app.database.models.Group object at 0x0000010F52550D10>, <app.database.models.Group object at 0x0000010F52550E20>, <app.database.models.Group object at 0x0000010F52550F30>, <app.database.models.Group object at 0x0000010F52551040>, <app.database.models.Group object at 0x0000010F52551150>, <app.database.models.Group object at 0x0000010F52551260>, <app.database.models.Group object at 0x0000010F52551370>, <app.database.models.Group object at 0x0000010F52551480>, <app.database.models.Group object at 0x0000010F52551590>, <app.database.models.Group object at 0x0000010F525516A0>, <app.database.models.Group object at 0x0000010F525517B0>, <app.database.models.Group object at 0x0000010F525518C0>, <app.database.models.Group object at 0x0000010F525519D0>, <app.database.models.Group object at 0x0000010F52551AE0>, <app.database.models.Group object at 0x0000010F52551BF0>, <app.database.models.Group object at 0x0000010F52551D00>, <app.database.models.Group object at 0x0000010F52551E10>, <app.database.models.Group object at 0x0000010F52551F20>, <app.database.models.Group object at 0x0000010F52552030>, <app.database.models.Group object at 0x0000010F52552140>, <app.database.models.Group object at 0x0000010F52552250>]
2025-07-16 21:33:13,626 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Royal+': {'sending_orders': 'barclays'}
2025-07-16 21:33:13,626 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 26...
2025-07-16 21:33:13,627 - DEBUG - app - [AUTO-CUTOFF] User 26 has 2 open orders.
2025-07-16 21:33:13,627 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 26...
2025-07-16 21:33:13,629 - DEBUG - app - [AUTO-CUTOFF] User 26 has 0 pending orders.
2025-07-16 21:33:13,629 - DEBUG - app - [AUTO-CUTOFF] User 26 total positions for portfolio calculation: 2
2025-07-16 21:33:13,630 - DEBUG - app - [AUTO-CUTOFF] User 26 adjusted market prices: {}
2025-07-16 21:33:13,630 - DEBUG - app - [AUTO-CUTOFF] User 26 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:33:13,630 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 26...
2025-07-16 21:33:13,937 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol XAGUSD
2025-07-16 21:33:13,937 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol BTCUSD
2025-07-16 21:33:13,937 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 26: {'balance': '184345.81000000', 'equity': '184345.81000000', 'margin': '146484.47000000', 'free_margin': '37861.34000000', 'profit_loss': '0.0', 'margin_level': '125.8466580109140579885362592', 'positions': [{'order_id': '7987141755', 'order_company_name': 'XAGUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('41.09800000'), 'margin': Decimal('19.54000000'), 'contract_value': Decimal('50.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1116628265', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('6.00000000'), 'order_price': Decimal('132091.90000000'), 'margin': Decimal('146464.93000000'), 'contract_value': Decimal('6.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3661.62000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:33:13,937 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 26: {'balance': '184345.81000000', 'equity': '184345.81000000', 'margin': '146484.47000000', 'free_margin': '37861.34000000', 'profit_loss': '0.0', 'margin_level': '125.8466580109140579885362592', 'positions_with_pnl': [{'order_id': '7987141755', 'order_company_name': 'XAGUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('41.09800000'), 'margin': Decimal('19.54000000'), 'contract_value': Decimal('50.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1116628265', 'order_company_name': 'BTCUSD', 'order_type': 'BUY', 'order_quantity': Decimal('6.00000000'), 'order_price': Decimal('132091.90000000'), 'margin': Decimal('146464.93000000'), 'contract_value': Decimal('6.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3661.62000000'), 'order_status': 'OPEN', 'order_user_id': 26, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:33:13,940 - INFO - app - [AUTO-CUTOFF] User 26 margin_level: 125.8466580109140579885362592
2025-07-16 21:33:13,942 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 26
2025-07-16 21:33:13,942 - INFO - app - [AUTO-CUTOFF] Processing user 1 (demo), group: Group B
2025-07-16 21:33:13,942 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 1 (demo) from cache/DB...
2025-07-16 21:33:13,944 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:33:13,945 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:33:13,945 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:33:13,949 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF4270>, <app.database.models.Group object at 0x0000010F51FF5BF0>, <app.database.models.Group object at 0x0000010F51FF4160>, <app.database.models.Group object at 0x0000010F51FF5D00>, <app.database.models.Group object at 0x0000010F51FF7240>, <app.database.models.Group object at 0x0000010F51FF5370>, <app.database.models.Group object at 0x0000010F51FF7F00>, <app.database.models.Group object at 0x0000010F51FF4490>, <app.database.models.Group object at 0x0000010F51FF4D10>, <app.database.models.Group object at 0x0000010F51FF59D0>, <app.database.models.Group object at 0x0000010F51FF58C0>, <app.database.models.Group object at 0x0000010F51FF6030>, <app.database.models.Group object at 0x0000010F51FCB790>, <app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FC8270>, <app.database.models.Group object at 0x0000010F51FC8AF0>, <app.database.models.Group object at 0x0000010F51FC9480>, <app.database.models.Group object at 0x0000010F51FCBAC0>, <app.database.models.Group object at 0x0000010F51EFBBD0>, <app.database.models.Group object at 0x0000010F51EFB790>, <app.database.models.Group object at 0x0000010F51EF9E10>, <app.database.models.Group object at 0x0000010F524B9150>, <app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524B8380>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B99D0>, <app.database.models.Group object at 0x0000010F524BA250>, <app.database.models.Group object at 0x0000010F524B9480>, <app.database.models.Group object at 0x0000010F524B9370>, <app.database.models.Group object at 0x0000010F524B9E10>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F524BBBD0>, <app.database.models.Group object at 0x0000010F524B96A0>, <app.database.models.Group object at 0x0000010F524B98C0>, <app.database.models.Group object at 0x0000010F524B9590>, <app.database.models.Group object at 0x0000010F524B9260>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524BA8B0>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524BA9C0>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F524B9F20>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BA140>, <app.database.models.Group object at 0x0000010F524B9AE0>, <app.database.models.Group object at 0x0000010F52552360>, <app.database.models.Group object at 0x0000010F52552470>]
2025-07-16 21:33:13,950 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:33:13,950 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 1...
2025-07-16 21:33:13,953 - DEBUG - app - [AUTO-CUTOFF] User 1 has 2 open orders.
2025-07-16 21:33:13,953 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 1...
2025-07-16 21:33:13,954 - DEBUG - app - [AUTO-CUTOFF] User 1 has 1 pending orders.
2025-07-16 21:33:13,954 - DEBUG - app - [AUTO-CUTOFF] User 1 total positions for portfolio calculation: 3
2025-07-16 21:33:13,957 - DEBUG - app - [AUTO-CUTOFF] User 1 adjusted market prices: {}
2025-07-16 21:33:13,957 - DEBUG - app - [AUTO-CUTOFF] User 1 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:33:13,957 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 1...
2025-07-16 21:33:14,247 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:33:14,247 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-07-16 21:33:14,247 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 1: {'balance': '17011.54000000', 'equity': '17011.54000000', 'margin': '6.54000000', 'free_margin': '17005.00000000', 'profit_loss': '0.0', 'margin_level': '260115.2905198776758409785933', 'positions': [{'order_id': '1000052-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.66800000'), 'margin': Decimal('6.54341805'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000053-001', 'order_company_name': 'AUDJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.56000000'), 'margin': Decimal('6.54258453'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:33:14,247 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 1: {'balance': '17011.54000000', 'equity': '17011.54000000', 'margin': '6.54000000', 'free_margin': '17005.00000000', 'profit_loss': '0.0', 'margin_level': '260115.2905198776758409785933', 'positions_with_pnl': [{'order_id': '1000052-001', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.66800000'), 'margin': Decimal('6.54341805'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1000053-001', 'order_company_name': 'AUDJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('96.56000000'), 'margin': Decimal('6.54258453'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 1, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:33:14,248 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:33:14,249 - INFO - app - [AUTO-CUTOFF] User 1 margin_level: 260115.2905198776758409785933
2025-07-16 21:33:14,249 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:33:14,250 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 1
2025-07-16 21:33:14,250 - INFO - app - [AUTO-CUTOFF] Processing user 2 (demo), group: 
2025-07-16 21:33:14,250 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 2 (demo) from cache/DB...
2025-07-16 21:33:14,251 - WARNING - app - [AUTO-CUTOFF] User 2 has no group_name set. Skipping portfolio update.
2025-07-16 21:33:14,251 - INFO - app - [AUTO-CUTOFF] Processing user 3 (demo), group: string
2025-07-16 21:33:14,251 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 3 (demo) from cache/DB...
2025-07-16 21:33:14,251 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group string...
2025-07-16 21:33:14,252 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'string' from cache: None
2025-07-16 21:33:14,252 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'string', fetching from DB.
2025-07-16 21:33:14,253 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'string': []
2025-07-16 21:33:14,254 - ERROR - app - [AUTO-CUTOFF] Group symbol settings not found in DB for group 'string'. Skipping portfolio update for user 3.
2025-07-16 21:33:14,254 - INFO - app - [AUTO-CUTOFF] Processing user 4 (demo), group: Group B
2025-07-16 21:33:14,254 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 4 (demo) from cache/DB...
2025-07-16 21:33:14,254 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:33:14,255 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:33:14,255 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:33:14,258 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524B8380>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B99D0>, <app.database.models.Group object at 0x0000010F524BA250>, <app.database.models.Group object at 0x0000010F524B9480>, <app.database.models.Group object at 0x0000010F524B9370>, <app.database.models.Group object at 0x0000010F524B9E10>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F524BBBD0>, <app.database.models.Group object at 0x0000010F524B96A0>, <app.database.models.Group object at 0x0000010F524B98C0>, <app.database.models.Group object at 0x0000010F524B9590>, <app.database.models.Group object at 0x0000010F524B9260>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524BA8B0>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524BA9C0>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F524B9F20>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BA140>, <app.database.models.Group object at 0x0000010F524B9AE0>, <app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F51FCB790>, <app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FC8270>, <app.database.models.Group object at 0x0000010F51FC8AF0>, <app.database.models.Group object at 0x0000010F51FC9480>, <app.database.models.Group object at 0x0000010F51FCBAC0>, <app.database.models.Group object at 0x0000010F51FCA9C0>, <app.database.models.Group object at 0x0000010F51FCB570>, <app.database.models.Group object at 0x0000010F51FC8D10>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FCB680>, <app.database.models.Group object at 0x0000010F51FC8380>, <app.database.models.Group object at 0x0000010F51FC8050>, <app.database.models.Group object at 0x0000010F51FCBF00>, <app.database.models.Group object at 0x0000010F51FC8490>, <app.database.models.Group object at 0x0000010F51FC8E20>, <app.database.models.Group object at 0x0000010F51FC8C00>, <app.database.models.Group object at 0x0000010F51FC8160>, <app.database.models.Group object at 0x0000010F51FCABE0>, <app.database.models.Group object at 0x0000010F51FC85A0>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF4270>, <app.database.models.Group object at 0x0000010F51FF5BF0>]
2025-07-16 21:33:14,259 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:33:14,259 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 4...
2025-07-16 21:33:14,260 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 open orders.
2025-07-16 21:33:14,260 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 4...
2025-07-16 21:33:14,261 - DEBUG - app - [AUTO-CUTOFF] User 4 has 0 pending orders.
2025-07-16 21:33:14,261 - WARNING - app - [AUTO-CUTOFF] User 4 has no open or pending orders. Skipping portfolio update.
2025-07-16 21:33:14,261 - INFO - app - [AUTO-CUTOFF] Processing user 5 (demo), group: None
2025-07-16 21:33:14,261 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 5 (demo) from cache/DB...
2025-07-16 21:33:14,262 - WARNING - app - [AUTO-CUTOFF] User 5 has no group_name set. Skipping portfolio update.
2025-07-16 21:33:14,262 - INFO - app - [AUTO-CUTOFF] Processing user 6 (demo), group: None
2025-07-16 21:33:14,262 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 6 (demo) from cache/DB...
2025-07-16 21:33:14,263 - WARNING - app - [AUTO-CUTOFF] User 6 has no group_name set. Skipping portfolio update.
2025-07-16 21:33:14,263 - INFO - app - [AUTO-CUTOFF] Processing user 9 (demo), group: Group B
2025-07-16 21:33:14,263 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 9 (demo) from cache/DB...
2025-07-16 21:33:14,263 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:33:14,264 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:33:14,264 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:33:14,267 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524B8380>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B99D0>, <app.database.models.Group object at 0x0000010F524BA250>, <app.database.models.Group object at 0x0000010F524B9480>, <app.database.models.Group object at 0x0000010F524B9370>, <app.database.models.Group object at 0x0000010F524B9E10>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F524BBBD0>, <app.database.models.Group object at 0x0000010F524B96A0>, <app.database.models.Group object at 0x0000010F524B98C0>, <app.database.models.Group object at 0x0000010F524B9590>, <app.database.models.Group object at 0x0000010F524B9260>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524BA8B0>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524BA9C0>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F524B9F20>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BA140>, <app.database.models.Group object at 0x0000010F524B9AE0>, <app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F51FCB790>, <app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FC8270>, <app.database.models.Group object at 0x0000010F51FC8AF0>, <app.database.models.Group object at 0x0000010F51FC9480>, <app.database.models.Group object at 0x0000010F51FCBAC0>, <app.database.models.Group object at 0x0000010F51FCA9C0>, <app.database.models.Group object at 0x0000010F51FCB570>, <app.database.models.Group object at 0x0000010F51FC8D10>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FCB680>, <app.database.models.Group object at 0x0000010F51FC8380>, <app.database.models.Group object at 0x0000010F51FC8050>, <app.database.models.Group object at 0x0000010F51FCBF00>, <app.database.models.Group object at 0x0000010F51FC8490>, <app.database.models.Group object at 0x0000010F51FC8E20>, <app.database.models.Group object at 0x0000010F51FC8C00>, <app.database.models.Group object at 0x0000010F51FC8160>, <app.database.models.Group object at 0x0000010F51FCABE0>, <app.database.models.Group object at 0x0000010F51FC85A0>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF4270>, <app.database.models.Group object at 0x0000010F51FF5BF0>]
2025-07-16 21:33:14,268 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:33:14,268 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 9...
2025-07-16 21:33:14,270 - DEBUG - app - [AUTO-CUTOFF] User 9 has 28 open orders.
2025-07-16 21:33:14,270 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 9...
2025-07-16 21:33:14,271 - DEBUG - app - [AUTO-CUTOFF] User 9 has 6 pending orders.
2025-07-16 21:33:14,271 - DEBUG - app - [AUTO-CUTOFF] User 9 total positions for portfolio calculation: 34
2025-07-16 21:33:14,272 - DEBUG - app - [AUTO-CUTOFF] User 9 adjusted market prices: {}
2025-07-16 21:33:14,273 - DEBUG - app - [AUTO-CUTOFF] User 9 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:33:14,273 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 9...
2025-07-16 21:33:14,547 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDUSD
2025-07-16 21:33:14,547 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDUSD
2025-07-16 21:33:14,547 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFSGD
2025-07-16 21:33:14,547 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFSGD
2025-07-16 21:33:14,547 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CADJPY
2025-07-16 21:33:14,547 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CADJPY
2025-07-16 21:33:14,548 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:33:14,548 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:33:14,548 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFJPY
2025-07-16 21:33:14,548 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol CHFJPY
2025-07-16 21:33:14,548 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:33:14,548 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURAUD
2025-07-16 21:33:14,548 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURGBP
2025-07-16 21:33:14,548 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURJPY
2025-07-16 21:33:14,548 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURJPY
2025-07-16 21:33:14,548 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURNZD
2025-07-16 21:33:14,548 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol EURNZD
2025-07-16 21:33:14,548 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:33:14,548 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:33:14,548 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:33:14,548 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol GBPUSD
2025-07-16 21:33:14,549 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol NZDJPY
2025-07-16 21:33:14,549 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDCHF
2025-07-16 21:33:14,549 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDCHF
2025-07-16 21:33:14,549 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDNOK
2025-07-16 21:33:14,549 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDNOK
2025-07-16 21:33:14,549 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDSGD
2025-07-16 21:33:14,549 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol USDTRY
2025-07-16 21:33:14,549 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 9: {'balance': '98181.73000000', 'equity': '98181.73000000', 'margin': '1917.31000000', 'free_margin': '96264.42000000', 'profit_loss': '0.0', 'margin_level': '5120.806233733720681579921870', 'positions': [{'order_id': '2504219016', 'order_company_name': 'AUDUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.64743000'), 'margin': Decimal('64.74000000'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4208488950', 'order_company_name': 'AUDUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('0.64707000'), 'margin': Decimal('142.36000000'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1409905880', 'order_company_name': 'CHFSGD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57561500'), 'margin': Decimal('122.35389131'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7183762766', 'order_company_name': 'CHFSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57505500'), 'margin': Decimal('122.31506360'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9716387266', 'order_company_name': 'CADJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.24150000'), 'margin': Decimal('109.44987397'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9899743248', 'order_company_name': 'CADJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.27050000'), 'margin': Decimal('109.47824594'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2965066905', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('1.77481000'), 'margin': Decimal('252.73304420'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6518780780', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.21000000'), 'order_price': Decimal('1.77439000'), 'margin': Decimal('241.18574740'), 'contract_value': Decimal('21000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7509572762', 'order_company_name': 'CHFJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.15500000'), 'margin': Decimal('122.35584187'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7522048723', 'order_company_name': 'CHFJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.09500000'), 'margin': Decimal('122.31379417'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6209391896', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77480000'), 'margin': Decimal('57.44317680'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8581607125', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77442000'), 'margin': Decimal('57.43111760'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8951109289', 'order_company_name': 'EURGBP', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.85403000'), 'margin': Decimal('114.85104400'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7115525171', 'order_company_name': 'EURJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.26050000'), 'margin': Decimal('114.87277223'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2099467271', 'order_company_name': 'EURJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.23150000'), 'margin': Decimal('114.85285533'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4283527369', 'order_company_name': 'EURNZD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.91952500'), 'margin': Decimal('114.85328250'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6611902574', 'order_company_name': 'EURNZD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.92063500'), 'margin': Decimal('114.81922980'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4731664142', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34376000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8676137902', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34361000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3301052276', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34379000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2972795665', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34378000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1117118581', 'order_company_name': 'NZDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('87.10150000'), 'margin': Decimal('5.97837949'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3385451189', 'order_company_name': 'USDCHF', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81771000'), 'margin': Decimal('149.97126753'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6134727989', 'order_company_name': 'USDCHF', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81805000'), 'margin': Decimal('150.03056608'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9211531174', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.04973000'), 'margin': Decimal('100.00169162'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5200391957', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.05023000'), 'margin': Decimal('100.00169154'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5654381883', 'order_company_name': 'USDSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.31000000'), 'order_price': Decimal('1.28795000'), 'margin': Decimal('309.93393934'), 'contract_value': Decimal('31000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6985407710', 'order_company_name': 'USDTRY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('39.56087000'), 'margin': Decimal('99.98738813'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:33:14,550 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 9: {'balance': '98181.73000000', 'equity': '98181.73000000', 'margin': '1917.31000000', 'free_margin': '96264.42000000', 'profit_loss': '0.0', 'margin_level': '5120.806233733720681579921870', 'positions_with_pnl': [{'order_id': '2504219016', 'order_company_name': 'AUDUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.64743000'), 'margin': Decimal('64.74000000'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4208488950', 'order_company_name': 'AUDUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('0.64707000'), 'margin': Decimal('142.36000000'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1409905880', 'order_company_name': 'CHFSGD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57561500'), 'margin': Decimal('122.35389131'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7183762766', 'order_company_name': 'CHFSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.57505500'), 'margin': Decimal('122.31506360'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9716387266', 'order_company_name': 'CADJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.24150000'), 'margin': Decimal('109.44987397'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9899743248', 'order_company_name': 'CADJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('106.27050000'), 'margin': Decimal('109.47824594'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0E-8'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2965066905', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.22000000'), 'order_price': Decimal('1.77481000'), 'margin': Decimal('252.73304420'), 'contract_value': Decimal('22000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.20000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6518780780', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.21000000'), 'order_price': Decimal('1.77439000'), 'margin': Decimal('241.18574740'), 'contract_value': Decimal('21000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7509572762', 'order_company_name': 'CHFJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.15500000'), 'margin': Decimal('122.35584187'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7522048723', 'order_company_name': 'CHFJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('178.09500000'), 'margin': Decimal('122.31379417'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6209391896', 'order_company_name': 'EURAUD', 'order_type': 'BUY', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77480000'), 'margin': Decimal('57.44317680'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8581607125', 'order_company_name': 'EURAUD', 'order_type': 'SELL', 'order_quantity': Decimal('0.05000000'), 'order_price': Decimal('1.77442000'), 'margin': Decimal('57.43111760'), 'contract_value': Decimal('5000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8951109289', 'order_company_name': 'EURGBP', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('0.85403000'), 'margin': Decimal('114.85104400'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '7115525171', 'order_company_name': 'EURJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.26050000'), 'margin': Decimal('114.87277223'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2099467271', 'order_company_name': 'EURJPY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('167.23150000'), 'margin': Decimal('114.85285533'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4283527369', 'order_company_name': 'EURNZD', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.91952500'), 'margin': Decimal('114.85328250'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6611902574', 'order_company_name': 'EURNZD', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('1.92063500'), 'margin': Decimal('114.81922980'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '4731664142', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34376000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '8676137902', 'order_company_name': 'GBPUSD', 'order_type': 'SELL', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34361000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3301052276', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34379000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '2972795665', 'order_company_name': 'GBPUSD', 'order_type': 'BUY', 'order_quantity': Decimal('0.25000000'), 'order_price': Decimal('1.34378000'), 'margin': Decimal('0E-8'), 'contract_value': Decimal('0E-8'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('2.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '1117118581', 'order_company_name': 'NZDJPY', 'order_type': 'BUY', 'order_quantity': Decimal('0.01000000'), 'order_price': Decimal('87.10150000'), 'margin': Decimal('5.97837949'), 'contract_value': Decimal('1000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('0.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '3385451189', 'order_company_name': 'USDCHF', 'order_type': 'SELL', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81771000'), 'margin': Decimal('149.97126753'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6134727989', 'order_company_name': 'USDCHF', 'order_type': 'BUY', 'order_quantity': Decimal('0.15000000'), 'order_price': Decimal('0.81805000'), 'margin': Decimal('150.03056608'), 'contract_value': Decimal('15000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.50000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '9211531174', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.04973000'), 'margin': Decimal('100.00169162'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5200391957', 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('10.05023000'), 'margin': Decimal('100.00169154'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '5654381883', 'order_company_name': 'USDSGD', 'order_type': 'SELL', 'order_quantity': Decimal('0.31000000'), 'order_price': Decimal('1.28795000'), 'margin': Decimal('309.93393934'), 'contract_value': Decimal('31000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('3.10000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}, {'order_id': '6985407710', 'order_company_name': 'USDTRY', 'order_type': 'SELL', 'order_quantity': Decimal('0.10000000'), 'order_price': Decimal('39.56087000'), 'margin': Decimal('99.98738813'), 'contract_value': Decimal('10000.00000000'), 'stop_loss': None, 'take_profit': None, 'commission': Decimal('1.00000000'), 'order_status': 'OPEN', 'order_user_id': 9, 'profit_loss': '0.0', 'current_price': '0.0'}], 'margin_call': False}
2025-07-16 21:33:14,594 - INFO - app - [AUTO-CUTOFF] User 9 margin_level: 5120.806233733720681579921870
2025-07-16 21:33:14,595 - INFO - app - [AUTO-CUTOFF] Portfolio update completed for user 9
2025-07-16 21:33:14,595 - INFO - app - [AUTO-CUTOFF] Processing user 10 (demo), group: Group B
2025-07-16 21:33:14,595 - DEBUG - app - [AUTO-CUTOFF] Getting user data for user 10 (demo) from cache/DB...
2025-07-16 21:33:14,595 - DEBUG - app - [AUTO-CUTOFF] Getting group symbol settings for group Group B...
2025-07-16 21:33:14,596 - DEBUG - app - [AUTO-CUTOFF] Group symbol settings for group 'Group B' from cache: None
2025-07-16 21:33:14,596 - WARNING - app - [AUTO-CUTOFF] Group symbol settings missing or incomplete in cache for 'Group B', fetching from DB.
2025-07-16 21:33:14,599 - DEBUG - app - [AUTO-CUTOFF] DB group fetch result for 'Group B': [<app.database.models.Group object at 0x0000010F524B97B0>, <app.database.models.Group object at 0x0000010F524B8380>, <app.database.models.Group object at 0x0000010F524B8050>, <app.database.models.Group object at 0x0000010F524B99D0>, <app.database.models.Group object at 0x0000010F524BA250>, <app.database.models.Group object at 0x0000010F524B9480>, <app.database.models.Group object at 0x0000010F524B9370>, <app.database.models.Group object at 0x0000010F524B9E10>, <app.database.models.Group object at 0x0000010F524B85A0>, <app.database.models.Group object at 0x0000010F524B8490>, <app.database.models.Group object at 0x0000010F524B86B0>, <app.database.models.Group object at 0x0000010F524B87C0>, <app.database.models.Group object at 0x0000010F524B88D0>, <app.database.models.Group object at 0x0000010F524B89E0>, <app.database.models.Group object at 0x0000010F524B8AF0>, <app.database.models.Group object at 0x0000010F524B8C00>, <app.database.models.Group object at 0x0000010F524B8D10>, <app.database.models.Group object at 0x0000010F524B8E20>, <app.database.models.Group object at 0x0000010F524B8F30>, <app.database.models.Group object at 0x0000010F524B9040>, <app.database.models.Group object at 0x0000010F524BA360>, <app.database.models.Group object at 0x0000010F524B9BF0>, <app.database.models.Group object at 0x0000010F524BBF00>, <app.database.models.Group object at 0x0000010F524BACF0>, <app.database.models.Group object at 0x0000010F524BABE0>, <app.database.models.Group object at 0x0000010F524BB020>, <app.database.models.Group object at 0x0000010F524BBDF0>, <app.database.models.Group object at 0x0000010F524BB790>, <app.database.models.Group object at 0x0000010F524BB680>, <app.database.models.Group object at 0x0000010F524BB570>, <app.database.models.Group object at 0x0000010F524BBBD0>, <app.database.models.Group object at 0x0000010F524B96A0>, <app.database.models.Group object at 0x0000010F524B98C0>, <app.database.models.Group object at 0x0000010F524B9590>, <app.database.models.Group object at 0x0000010F524B9260>, <app.database.models.Group object at 0x0000010F524BB9B0>, <app.database.models.Group object at 0x0000010F524BB460>, <app.database.models.Group object at 0x0000010F524BBCE0>, <app.database.models.Group object at 0x0000010F524BAE00>, <app.database.models.Group object at 0x0000010F524BB8A0>, <app.database.models.Group object at 0x0000010F524BAAD0>, <app.database.models.Group object at 0x0000010F524BB130>, <app.database.models.Group object at 0x0000010F524B8160>, <app.database.models.Group object at 0x0000010F524BAF10>, <app.database.models.Group object at 0x0000010F524BA8B0>, <app.database.models.Group object at 0x0000010F524BA7A0>, <app.database.models.Group object at 0x0000010F524BA580>, <app.database.models.Group object at 0x0000010F524BA470>, <app.database.models.Group object at 0x0000010F524BA9C0>, <app.database.models.Group object at 0x0000010F524B8270>, <app.database.models.Group object at 0x0000010F524B9F20>, <app.database.models.Group object at 0x0000010F524BA690>, <app.database.models.Group object at 0x0000010F524BA140>, <app.database.models.Group object at 0x0000010F524B9AE0>, <app.database.models.Group object at 0x0000010F524BB240>, <app.database.models.Group object at 0x0000010F524BB350>, <app.database.models.Group object at 0x0000010F51FCB790>, <app.database.models.Group object at 0x0000010F51FCBCE0>, <app.database.models.Group object at 0x0000010F51FC8270>, <app.database.models.Group object at 0x0000010F51FC8AF0>, <app.database.models.Group object at 0x0000010F51FC9480>, <app.database.models.Group object at 0x0000010F51FCBAC0>, <app.database.models.Group object at 0x0000010F51FCA9C0>, <app.database.models.Group object at 0x0000010F51FCB570>, <app.database.models.Group object at 0x0000010F51FC8D10>, <app.database.models.Group object at 0x0000010F51FC87C0>, <app.database.models.Group object at 0x0000010F51FCB680>, <app.database.models.Group object at 0x0000010F51FC8380>, <app.database.models.Group object at 0x0000010F51FC8050>, <app.database.models.Group object at 0x0000010F51FCBF00>, <app.database.models.Group object at 0x0000010F51FC8490>, <app.database.models.Group object at 0x0000010F51FC8E20>, <app.database.models.Group object at 0x0000010F51FC8C00>, <app.database.models.Group object at 0x0000010F51FC8160>, <app.database.models.Group object at 0x0000010F51FCABE0>, <app.database.models.Group object at 0x0000010F51FC85A0>, <app.database.models.Group object at 0x0000010F51FF7CE0>, <app.database.models.Group object at 0x0000010F51FF4270>, <app.database.models.Group object at 0x0000010F51FF5BF0>]
2025-07-16 21:33:14,600 - INFO - app - [AUTO-CUTOFF] Group symbol settings fetched from DB and cached for group 'Group B': {'sending_orders': 'barclays'}
2025-07-16 21:33:14,600 - DEBUG - app - [AUTO-CUTOFF] Getting open orders for user 10...
2025-07-16 21:33:14,601 - DEBUG - app - [AUTO-CUTOFF] User 10 has 0 open orders.
2025-07-16 21:33:14,601 - DEBUG - app - [AUTO-CUTOFF] Getting pending orders for user 10...
2025-07-16 21:33:14,603 - DEBUG - app - [AUTO-CUTOFF] User 10 has 1 pending orders.
2025-07-16 21:33:14,603 - DEBUG - app - [AUTO-CUTOFF] User 10 total positions for portfolio calculation: 1
2025-07-16 21:33:14,604 - DEBUG - app - [AUTO-CUTOFF] User 10 adjusted market prices: {}
2025-07-16 21:33:14,604 - DEBUG - app - [AUTO-CUTOFF] User 10 margin thresholds: call=100.0, cutoff=10.0
2025-07-16 21:33:14,604 - INFO - app - [AUTO-CUTOFF] Calculating portfolio metrics for user 10...
2025-07-16 21:33:14,890 - INFO - app - [AUTO-CUTOFF] Portfolio metrics for user 10: {'balance': '9958.40000000', 'equity': '9958.40000000', 'margin': '39.25000000', 'free_margin': '9919.15000000', 'profit_loss': '0.0', 'margin_level': '25371.71974522292993630573248', 'positions': [], 'margin_call': False}
2025-07-16 21:33:14,890 - DEBUG - app - [AUTO-CUTOFF] Caching dynamic portfolio data for user 10: {'balance': '9958.40000000', 'equity': '9958.40000000', 'margin': '39.25000000', 'free_margin': '9919.15000000', 'profit_loss': '0.0', 'margin_level': '25371.71974522292993630573248', 'positions_with_pnl': [], 'margin_call': False}
2025-07-16 21:33:14,891 - INFO - app - Application shutdown initiated
2025-07-16 21:33:14,891 - INFO - app - Scheduler shutdown completed
2025-07-16 21:33:14,893 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-07-16 21:33:15,589 - INFO - app.firebase_stream - Firebase listener closed.
2025-07-16 21:33:15,589 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-07-16 21:33:15,604 - INFO - app - Redis connection closed
2025-07-16 21:33:15,604 - INFO - app - Application shutdown completed
2025-07-16 21:35:19,389 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-16 21:35:19,415 - INFO - app.core.config - .env file loaded successfully.
2025-07-16 21:35:19,431 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-16 21:35:19,431 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-16 21:35:19,685 - INFO - app - Application starting up - Trading system initialized
2025-07-16 21:35:19,685 - INFO - app - SL/TP Epsilon accuracy configured: 0.00001
2025-07-16 21:35:19,685 - INFO - app - Environment: DEVELOPMENT
2025-07-16 21:35:19,744 - INFO - app - Application startup initiated
2025-07-16 21:35:19,744 - INFO - app - Initializing core services...
2025-07-16 21:35:19,782 - INFO - app - Firebase initialized
2025-07-16 21:35:19,782 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-07-16 21:35:19,792 - INFO - app - Redis initialized
2025-07-16 21:35:20,482 - INFO - app - All group settings and group-symbol settings cached in Redis at startup.
2025-07-16 21:35:20,487 - INFO - app - [SWAP] daily_swap_charge_job triggered
2025-07-16 21:35:20,488 - INFO - app - [AUTO-CUTOFF] Scheduled update_all_users_dynamic_portfolio job to run every 1 minute.
2025-07-16 21:35:20,488 - INFO - app - Scheduler initialized
2025-07-16 21:35:20,490 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-16 21:35:20,490 - DEBUG - app.firebase_stream - Successfully got running event loop in process_firebase_events task.
2025-07-16 21:35:20,491 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-07-16 21:35:21,523 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-16 21:35:21,533 - DEBUG - app.firebase_stream - Firebase listener triggered (1). Event Type: put, Path: /. Timestamp: 1752726921.533631
2025-07-16 21:35:21,533 - DEBUG - app.firebase_stream - Prepared batch update for 48 symbols from root path for queue. Preview: {'AUDCAD': {'b': '0.8895700000', 'o': '0.8895700000'}, 'AUDCHF': {'b': '0.5206300000', 'o': '0.5205800000'}, 'AUDJPY': {'b': '96.3230000000', 'o': '96.3160000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'
2025-07-16 21:35:21,534 - INFO - app - Starting stale cache cleanup task
2025-07-16 21:35:21,534 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'AUDCAD': {'b': '0.8895700000', 'o': '0.8895700000'}, 'AUDCHF': {'b': '0.5206300000', 'o': '0.5205800000'}, 'AUDJPY': {'b': '96.3230000000', 'o': '96.3160000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'...
2025-07-16 21:35:21,534 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type put at path /.
2025-07-16 21:35:21,561 - INFO - app - Cleaned up pending order stream for new trigger price format
2025-07-16 21:35:21,561 - INFO - app - Background tasks initialized
2025-07-16 21:35:22,145 - INFO - app - Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-07-16 21:35:22,145 - INFO - app - Application startup completed successfully
2025-07-16 21:35:22,146 - INFO - app - Starting cache validation task
2025-07-16 21:35:22,149 - INFO - app - Starting Barclays pending order margin checker task.
2025-07-16 21:35:22,149 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:35:22,151 - INFO - app - Starting auto-cutoff order monitoring task.
2025-07-16 21:35:22,169 - INFO - app - Found 6 static orders cache entries to check
2025-07-16 21:35:22,175 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:35:22,183 - WARNING - app - Found stale cache entry for user 13, will be refreshed on next access
2025-07-16 21:35:22,185 - INFO - app - Validating cache for 30 users
2025-07-16 21:35:22,213 - WARNING - app - Found stale cache entry for user 4, will be refreshed on next access
2025-07-16 21:35:22,216 - WARNING - app - Found stale cache entry for user 12, will be refreshed on next access
2025-07-16 21:35:22,217 - INFO - app - Completed stale cache cleanup task
2025-07-16 21:35:22,217 - WARNING - app - User 5: Missing static orders cache, refreshing...
2025-07-16 21:35:22,228 - WARNING - app - User 8: Missing static orders cache, refreshing...
2025-07-16 21:35:22,239 - WARNING - app - User 14: Missing static orders cache, refreshing...
2025-07-16 21:35:22,247 - WARNING - app - User 16: Missing static orders cache, refreshing...
2025-07-16 21:35:22,253 - WARNING - app - User 17: Missing static orders cache, refreshing...
2025-07-16 21:35:22,260 - WARNING - app - User 18: Missing static orders cache, refreshing...
2025-07-16 21:35:22,265 - WARNING - app - User 19: Missing static orders cache, refreshing...
2025-07-16 21:35:22,271 - WARNING - app - User 20: Missing static orders cache, refreshing...
2025-07-16 21:35:22,277 - WARNING - app - User 21: Missing static orders cache, refreshing...
2025-07-16 21:35:22,284 - WARNING - app - User 22: Missing static orders cache, refreshing...
2025-07-16 21:35:22,292 - WARNING - app - User 23: Missing static orders cache, refreshing...
2025-07-16 21:35:22,300 - WARNING - app - User 25: Missing static orders cache, refreshing...
2025-07-16 21:35:22,309 - WARNING - app - User 26: Missing static orders cache, refreshing...
2025-07-16 21:35:22,318 - WARNING - app - User 1: Missing static orders cache, refreshing...
2025-07-16 21:35:22,329 - WARNING - app - User 2: Missing static orders cache, refreshing...
2025-07-16 21:35:22,335 - WARNING - app - User 3: Missing static orders cache, refreshing...
2025-07-16 21:35:22,343 - WARNING - app - User 6: Missing static orders cache, refreshing...
2025-07-16 21:35:22,351 - INFO - app - Cache validation completed
2025-07-16 21:35:22,769 - DEBUG - app.firebase_stream - Firebase listener triggered (2). Event Type: patch, Path: /. Timestamp: 1752726922.7697268
2025-07-16 21:35:22,769 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0431000000'}, 'XAGUSD': {'b': '38.0070000000', 'o': '38.0000000000'}, 'NZDJPY': {'b': '87.9660000000', 'o': '87.9590000000'}, 'GBPAUD': {'b': '2.0648300000',
2025-07-16 21:35:22,770 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0431000000'}, 'XAGUSD': {'b': '38.0070000000', 'o': '38.0000000000'}, 'NZDJPY': {'b': '87.9660000000', 'o': '87.9590000000'}, 'GBPAUD': {'b': '2.0648300000',...
2025-07-16 21:35:22,770 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:35:23,194 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:35:23,198 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:35:24,207 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:35:24,212 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:35:25,109 - DEBUG - app.firebase_stream - Firebase listener triggered (3). Event Type: patch, Path: /. Timestamp: 1752726925.109453
2025-07-16 21:35:25,109 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'NZDJPY': {'b': '87.9660000000', 'o': '87.9560000000'}, 'GBPAUD': {'b': '2.0648300000', 'o': '2.0646600000'}, 'USDJPY': {'b': '148.5150000000', 'o': '148.5090000000'}, 'CADCHF': {'b': '0.5852300000',
2025-07-16 21:35:25,109 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '87.9660000000', 'o': '87.9560000000'}, 'GBPAUD': {'b': '2.0648300000', 'o': '2.0646600000'}, 'USDJPY': {'b': '148.5150000000', 'o': '148.5090000000'}, 'CADCHF': {'b': '0.5852300000',...
2025-07-16 21:35:25,109 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:35:25,226 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:35:25,230 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:35:26,240 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:35:26,245 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:35:27,261 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:35:27,265 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:35:27,360 - DEBUG - app.firebase_stream - Firebase listener triggered (4). Event Type: patch, Path: /. Timestamp: 1752726927.3606756
2025-07-16 21:35:27,360 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0110000000', 'o': '38.0010000000'}, 'NZDJPY': {'b': '87.9670000000', 'o': '87.9570000000'}, 'GBPAUD': {'b': '2.0648300000', 'o': '2.0646700000'}, 'CADCHF': {'b': '0.5852400000', '
2025-07-16 21:35:27,361 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0110000000', 'o': '38.0010000000'}, 'NZDJPY': {'b': '87.9670000000', 'o': '87.9570000000'}, 'GBPAUD': {'b': '2.0648300000', 'o': '2.0646700000'}, 'CADCHF': {'b': '0.5852400000', '...
2025-07-16 21:35:27,361 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:35:28,277 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:35:28,283 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:35:29,297 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:35:29,302 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:35:29,713 - DEBUG - app.firebase_stream - Firebase listener triggered (5). Event Type: patch, Path: /. Timestamp: 1752726929.7131212
2025-07-16 21:35:29,713 - DEBUG - app.firebase_stream - Prepared batch update for 16 symbols from root path for queue. Preview: {'XAGUSD': {'b': '38.0070000000', 'o': '37.9980000000'}, 'NZDJPY': {'b': '87.9650000000', 'o': '87.9550000000'}, 'USDJPY': {'b': '148.5150000000', 'o': '148.5080000000'}, 'CADCHF': {'b': '0.5852300000
2025-07-16 21:35:29,713 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '38.0070000000', 'o': '37.9980000000'}, 'NZDJPY': {'b': '87.9650000000', 'o': '87.9550000000'}, 'USDJPY': {'b': '148.5150000000', 'o': '148.5080000000'}, 'CADCHF': {'b': '0.5852300000...
2025-07-16 21:35:29,713 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:35:30,319 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:35:30,323 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:35:31,337 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:35:31,342 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:35:32,070 - DEBUG - app.firebase_stream - Firebase listener triggered (6). Event Type: patch, Path: /. Timestamp: 1752726932.0703802
2025-07-16 21:35:32,070 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0433000000'}, 'XAGUSD': {'b': '38.0080000000', 'o': '37.9980000000'}, 'GBPAUD': {'b': '2.0648300000', 'o': '2.0646600000'}, 'CADCHF': {'b': '0.5852400000', '
2025-07-16 21:35:32,070 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0499000000', 'o': '13.0433000000'}, 'XAGUSD': {'b': '38.0080000000', 'o': '37.9980000000'}, 'GBPAUD': {'b': '2.0648300000', 'o': '2.0646600000'}, 'CADCHF': {'b': '0.5852400000', '...
2025-07-16 21:35:32,071 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:35:32,344 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:35:32,348 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:35:33,355 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:35:33,357 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:35:34,318 - DEBUG - app.firebase_stream - Firebase listener triggered (7). Event Type: patch, Path: /. Timestamp: 1752726934.3183665
2025-07-16 21:35:34,318 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0431000000'}, 'XAGUSD': {'b': '38.0060000000', 'o': '37.9980000000'}, 'NZDJPY': {'b': '87.9650000000', 'o': '87.9560000000'}, 'USDJPY': {'b': '148.5160000000
2025-07-16 21:35:34,318 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0498000000', 'o': '13.0431000000'}, 'XAGUSD': {'b': '38.0060000000', 'o': '37.9980000000'}, 'NZDJPY': {'b': '87.9650000000', 'o': '87.9560000000'}, 'USDJPY': {'b': '148.5160000000...
2025-07-16 21:35:34,319 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-16 21:35:34,362 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:35:34,364 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:35:35,244 - INFO - app - Application shutdown initiated
2025-07-16 21:35:35,245 - INFO - app - Scheduler shutdown completed
2025-07-16 21:35:35,245 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-07-16 21:35:36,673 - INFO - app.firebase_stream - Firebase listener closed.
2025-07-16 21:35:36,673 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-07-16 21:35:36,674 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-16 21:35:36,678 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-16 21:35:36,684 - INFO - app - Redis connection closed
2025-07-16 21:35:36,685 - INFO - app - Application shutdown completed
