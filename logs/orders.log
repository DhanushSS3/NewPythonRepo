2025-07-15 21:33:34,756 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-15 21:33:35,956 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-15 21:33:35,957 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-15 21:33:35,957 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-15 21:33:35,957 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-15 21:33:40,021 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-15 21:33:40,021 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-15 21:33:40,968 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-15 21:33:45,961 - INFO - orders - Starting the users with orders cache updater task.
2025-07-15 21:33:56,936 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-15 21:33:56,936 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-15 21:33:56,936 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-15 21:33:56,936 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-15 21:33:56,936 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-15 21:33:56,936 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-15 21:33:56,936 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-15 21:33:56,936 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-15 21:33:56,936 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-15 21:33:56,964 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-15 21:33:56,964 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-15 21:33:56,964 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-15 21:33:56,964 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-15 21:33:56,964 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-15 21:35:19,420 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-15 21:35:20,481 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-15 21:35:20,482 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-15 21:35:20,491 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-15 21:35:20,491 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-15 21:35:24,595 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-15 21:35:24,595 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-15 21:35:25,496 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-15 21:35:30,485 - INFO - orders - Starting the users with orders cache updater task.
2025-07-15 21:35:43,382 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-15 21:35:43,382 - INFO - orders - Using order model: UserOrder
2025-07-15 21:35:43,385 - INFO - orders - Fetched 0 open orders for user 14
2025-07-15 21:35:43,387 - INFO - orders - Fetched 1 pending orders for user 14
2025-07-15 21:35:43,388 - INFO - orders - Updated static orders cache for user 14 with 0 open orders and 1 pending orders
2025-07-15 21:35:43,391 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=0.0
2025-07-15 21:35:43,741 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-15 21:35:43,741 - INFO - orders - Using order model: UserOrder
2025-07-15 21:35:43,746 - INFO - orders - Fetched 0 open orders for user 14
2025-07-15 21:35:43,753 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-15 21:35:43,754 - INFO - orders - Updated static orders cache for user 14 with 0 open orders and 0 pending orders
2025-07-15 21:35:43,764 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=0.0
2025-07-15 21:36:20,199 - INFO - orders - Pending order placement request received - User ID: 14, Symbol: BTCUSD, Type: BUY_LIMIT, Quantity: 1
2025-07-15 21:36:20,224 - INFO - orders - Calculated contract_value for pending order: 1.00000000 (contract_size: 1.00000000 * quantity: 1)
2025-07-15 21:36:20,227 - INFO - orders - [DEBUG] User data from cache: {'id': 14, 'email': 'cursordemo3@gmail.com', 'account_number': 'DB7JG', 'group_name': 'Standard', 'leverage': Decimal('100.00'), 'wallet_balance': Decimal('9902.02000000'), 'margin': Decimal('0E-8'), 'user_type': 'live', 'first_name': None, 'last_name': None, 'country': 'India', 'phone_number': Decimal('918618025298')}
2025-07-15 21:36:20,227 - INFO - orders - [DEBUG] Group name: Standard
2025-07-15 21:36:20,229 - INFO - orders - User 14 is_barclays_live_user: True (user_type: live, sending_orders_normalized: barclays)
2025-07-15 21:36:20,232 - INFO - orders - [SYMBOL_INFO] Retrieved external symbol info for BTCUSD: contract_size=1.00000000, profit_currency=USD, digit=2.00000
2025-07-15 21:36:20,563 - INFO - orders - [MARGIN_CALC] Market data for BTCUSD: {'b': '117589.8000000000', 'o': '117589.7000000000'}
2025-07-15 21:36:20,564 - WARNING - orders - [MARGIN_CALC] Missing ask price for BTCUSD, using bid price with spread: bid=117589.8000000000, ask=117601.55898000000000
2025-07-15 21:36:20,564 - INFO - orders - [MARGIN_CALC] Using prices for BTCUSD: bid=117589.8000000000, ask=117601.55898000000000
2025-07-15 21:36:20,564 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: BTCUSD, Type: BUY_LIMIT, Qty: 1, Price: 117601.55898000000000, Margin: 23520.31, Commission: 588.01
2025-07-15 21:36:20,565 - INFO - orders - Calculated initial margin: 23520.31, commission: 588.01 for pending order 1000293-001
2025-07-15 21:36:20,593 - INFO - orders - [DEBUG][pending_order] Prepared order_data_for_internal_processing: {'order_id': '1000293-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY_LIMIT', 'order_quantity': Decimal('1'), 'order_price': Decimal('103'), 'user_type': 'live', 'status': 'PENDING', 'stop_loss': Decimal('0'), 'take_profit': Decimal('0'), 'stoploss_id': '1000294-005', 'takeprofit_id': '1000295-006', 'order_user_id': 14, 'order_status': 'PENDING_PROCESSING', 'contract_value': Decimal('1.00000000'), 'margin': Decimal('23520.31'), 'commission': Decimal('588.01'), 'open_time': None}
2025-07-15 21:36:20,593 - INFO - orders - [BARCLAYS] Setting initial order_status to PENDING_PROCESSING for Barclays user. Will be updated to PENDING after service provider confirmation.
2025-07-15 21:36:20,593 - INFO - orders - Placing PENDING order: BUY_LIMIT for user 14 at price 103
2025-07-15 21:36:20,593 - INFO - orders - [ENTER-CRUD] create_order called with: {'order_id': '1000293-001', 'order_status': 'PENDING_PROCESSING', 'order_user_id': 14, 'order_company_name': 'BTCUSD', 'order_type': 'BUY_LIMIT', 'order_price': Decimal('103'), 'order_quantity': Decimal('1'), 'contract_value': Decimal('1.00000000'), 'margin': Decimal('23520.31'), 'commission': Decimal('588.01'), 'status': 'PENDING', 'stop_loss': Decimal('0'), 'take_profit': Decimal('0'), 'stoploss_id': '1000294-005', 'takeprofit_id': '1000295-006', 'close_id': None}
2025-07-15 21:36:20,613 - INFO - orders - Order 1000293-001 verified in database on attempt 1 before adding to Redis.
2025-07-15 21:36:20,614 - INFO - orders - Skipping Redis storage for Barclays user pending order 1000293-001
2025-07-15 21:36:20,633 - INFO - orders - [PERF] TOTAL place_order: 0.4356s
2025-07-15 21:36:20,671 - INFO - orders - Background balance/margin cache updated for user 14: balance=9902.02000000, margin=0.0
2025-07-15 21:36:20,678 - INFO - orders - [BARCLAYS] barclays_push called for user 14, is_barclays_live_user=True
2025-07-15 21:36:42,916 - INFO - orders - Service provider update request received: {"order_id":"1000293-001","order_status":"PENDING","status":"PENDING"}
2025-07-15 21:36:42,930 - INFO - orders - Original order status: PENDING_PROCESSING
2025-07-15 21:36:42,930 - INFO - orders - Update fields: {'order_id': '1000293-001', 'order_status': 'PENDING', 'status': 'PENDING'}
2025-07-15 21:36:42,931 - INFO - orders - Processing regular update for order 1000293-001
2025-07-15 21:36:42,960 - INFO - orders - Balance/margin cache updated for user 14: balance=9902.02000000, margin=0.0
2025-07-15 21:36:42,960 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-15 21:36:42,960 - INFO - orders - Using order model: UserOrder
2025-07-15 21:36:42,963 - INFO - orders - Fetched 0 open orders for user 14
2025-07-15 21:36:42,965 - INFO - orders - Fetched 1 pending orders for user 14
2025-07-15 21:36:42,966 - INFO - orders - Updated static orders cache for user 14 with 0 open orders and 1 pending orders
2025-07-15 21:36:42,972 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=0.0
2025-07-15 21:36:44,248 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-15 21:36:44,248 - INFO - orders - Using order model: UserOrder
2025-07-15 21:36:44,254 - INFO - orders - Fetched 0 open orders for user 14
2025-07-15 21:36:44,256 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-15 21:36:44,258 - INFO - orders - Updated static orders cache for user 14 with 0 open orders and 0 pending orders
2025-07-15 21:36:44,278 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=0.0
2025-07-15 21:37:17,186 - INFO - orders - Pending order placement request received - User ID: 14, Symbol: BTCUSD, Type: BUY_LIMIT, Quantity: 1
2025-07-15 21:37:17,233 - INFO - orders - Calculated contract_value for pending order: 1.00000000 (contract_size: 1.00000000 * quantity: 1)
2025-07-15 21:37:17,234 - INFO - orders - [DEBUG] User data from cache: {'id': 14, 'email': 'cursordemo3@gmail.com', 'group_name': 'Standard', 'leverage': Decimal('100.00'), 'user_type': 'live', 'account_number': 'DB7JG', 'wallet_balance': Decimal('9902.02000000'), 'margin': Decimal('0.0'), 'first_name': None, 'last_name': None, 'country': 'India', 'phone_number': Decimal('918618025298')}
2025-07-15 21:37:17,235 - INFO - orders - [DEBUG] Group name: Standard
2025-07-15 21:37:17,236 - INFO - orders - User 14 is_barclays_live_user: True (user_type: live, sending_orders_normalized: barclays)
2025-07-15 21:37:17,239 - INFO - orders - [SYMBOL_INFO] Retrieved external symbol info for BTCUSD: contract_size=1.00000000, profit_currency=USD, digit=2.00000
2025-07-15 21:37:17,601 - INFO - orders - [MARGIN_CALC] Market data for BTCUSD: {'b': '117609.7000000000', 'o': '117609.6000000000'}
2025-07-15 21:37:17,602 - WARNING - orders - [MARGIN_CALC] Missing ask price for BTCUSD, using bid price with spread: bid=117609.7000000000, ask=117621.46097000000000
2025-07-15 21:37:17,602 - INFO - orders - [MARGIN_CALC] Using prices for BTCUSD: bid=117609.7000000000, ask=117621.46097000000000
2025-07-15 21:37:17,602 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: BTCUSD, Type: BUY_LIMIT, Qty: 1, Price: 117621.46097000000000, Margin: 23524.29, Commission: 588.11
2025-07-15 21:37:17,602 - INFO - orders - Calculated initial margin: 23524.29, commission: 588.11 for pending order 1000297-001
2025-07-15 21:37:17,625 - INFO - orders - [DEBUG][pending_order] Prepared order_data_for_internal_processing: {'order_id': '1000297-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY_LIMIT', 'order_quantity': Decimal('1'), 'order_price': Decimal('105'), 'user_type': 'live', 'status': 'PENDING', 'stop_loss': Decimal('0'), 'take_profit': Decimal('0'), 'stoploss_id': '1000298-005', 'takeprofit_id': '1000299-006', 'order_user_id': 14, 'order_status': 'PENDING_PROCESSING', 'contract_value': Decimal('1.00000000'), 'margin': Decimal('23524.29'), 'commission': Decimal('588.11'), 'open_time': None}
2025-07-15 21:37:17,625 - INFO - orders - [BARCLAYS] Setting initial order_status to PENDING_PROCESSING for Barclays user. Will be updated to PENDING after service provider confirmation.
2025-07-15 21:37:17,625 - INFO - orders - Placing PENDING order: BUY_LIMIT for user 14 at price 105
2025-07-15 21:37:17,625 - INFO - orders - [ENTER-CRUD] create_order called with: {'order_id': '1000297-001', 'order_status': 'PENDING_PROCESSING', 'order_user_id': 14, 'order_company_name': 'BTCUSD', 'order_type': 'BUY_LIMIT', 'order_price': Decimal('105'), 'order_quantity': Decimal('1'), 'contract_value': Decimal('1.00000000'), 'margin': Decimal('23524.29'), 'commission': Decimal('588.11'), 'status': 'PENDING', 'stop_loss': Decimal('0'), 'take_profit': Decimal('0'), 'stoploss_id': '1000298-005', 'takeprofit_id': '1000299-006', 'close_id': None}
2025-07-15 21:37:17,651 - INFO - orders - Order 1000297-001 verified in database on attempt 1 before adding to Redis.
2025-07-15 21:37:17,653 - INFO - orders - Skipping Redis storage for Barclays user pending order 1000297-001
2025-07-15 21:37:17,673 - INFO - orders - [PERF] TOTAL place_order: 0.4876s
2025-07-15 21:37:17,745 - INFO - orders - Background balance/margin cache updated for user 14: balance=9902.02000000, margin=0.0
2025-07-15 21:37:17,760 - INFO - orders - [BARCLAYS] barclays_push called for user 14, is_barclays_live_user=True
2025-07-15 21:37:29,553 - INFO - orders - Service provider update request received: {"order_id":"1000297-001","order_status":"PENDING","status":"PENDING"}
2025-07-15 21:37:29,563 - INFO - orders - Original order status: PENDING_PROCESSING
2025-07-15 21:37:29,563 - INFO - orders - Update fields: {'order_id': '1000297-001', 'order_status': 'PENDING', 'status': 'PENDING'}
2025-07-15 21:37:29,563 - INFO - orders - Processing regular update for order 1000297-001
2025-07-15 21:37:29,590 - INFO - orders - Balance/margin cache updated for user 14: balance=9902.02000000, margin=0.0
2025-07-15 21:37:29,591 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-15 21:37:29,591 - INFO - orders - Using order model: UserOrder
2025-07-15 21:37:29,594 - INFO - orders - Fetched 0 open orders for user 14
2025-07-15 21:37:29,597 - INFO - orders - Fetched 1 pending orders for user 14
2025-07-15 21:37:29,598 - INFO - orders - Updated static orders cache for user 14 with 0 open orders and 1 pending orders
2025-07-15 21:37:29,604 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=0.0
2025-07-15 21:40:42,194 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-15 21:40:42,194 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-15 21:40:42,194 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-15 21:40:42,195 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-15 21:40:42,195 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-15 21:40:42,195 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-15 21:40:42,195 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-15 21:40:42,195 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-15 21:40:42,195 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-15 21:40:42,201 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-15 21:40:42,201 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-15 21:40:42,201 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-15 21:40:42,201 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-15 21:40:42,201 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-15 21:46:10,624 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-15 21:46:11,857 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-15 21:46:11,857 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-15 21:46:11,858 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-15 21:46:11,858 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-15 21:46:15,935 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-15 21:46:15,935 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-15 21:46:17,028 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-15 21:46:21,862 - INFO - orders - Starting the users with orders cache updater task.
2025-07-15 21:46:36,132 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-15 21:46:36,132 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-15 21:46:36,132 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-15 21:46:36,132 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-15 21:46:36,132 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-15 21:46:36,132 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-15 21:46:36,132 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-15 21:46:36,132 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-15 21:46:36,132 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-15 21:46:36,219 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-15 21:46:36,219 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-15 21:46:36,219 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-15 21:46:36,219 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-15 21:46:36,220 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-15 21:46:37,178 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-15 21:46:37,178 - INFO - orders - Using order model: UserOrder
2025-07-15 21:46:37,180 - INFO - orders - Fetched 0 open orders for user 14
2025-07-15 21:46:37,182 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-15 21:46:37,183 - INFO - orders - Updated static orders cache for user 14 with 0 open orders and 0 pending orders
2025-07-15 21:46:37,188 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=0.0
2025-07-15 21:47:13,303 - INFO - orders - Pending order placement request received - User ID: 14, Symbol: BTCUSD, Type: BUY_LIMIT, Quantity: 1
2025-07-15 21:47:13,358 - INFO - orders - Calculated contract_value for pending order: 1.00000000 (contract_size: 1.00000000 * quantity: 1)
2025-07-15 21:47:13,360 - INFO - orders - [DEBUG] User data from cache: {'id': 14, 'email': 'cursordemo3@gmail.com', 'group_name': 'Standard', 'leverage': Decimal('100.00'), 'user_type': 'live', 'account_number': 'DB7JG', 'wallet_balance': Decimal('9902.02000000'), 'margin': Decimal('0.0'), 'first_name': None, 'last_name': None, 'country': 'India', 'phone_number': Decimal('918618025298')}
2025-07-15 21:47:13,360 - INFO - orders - [DEBUG] Group name: Standard
2025-07-15 21:47:13,362 - INFO - orders - User 14 is_barclays_live_user: True (user_type: live, sending_orders_normalized: barclays)
2025-07-15 21:47:13,367 - INFO - orders - [SYMBOL_INFO] Retrieved external symbol info for BTCUSD: contract_size=1.00000000, profit_currency=USD, digit=2.00000
2025-07-15 21:47:13,786 - INFO - orders - [MARGIN_CALC] Market data for BTCUSD: {'b': '117637.3000000000', 'o': '117637.2000000000'}
2025-07-15 21:47:13,786 - WARNING - orders - [MARGIN_CALC] Missing ask price for BTCUSD, using bid price with spread: bid=117637.3000000000, ask=117649.06373000000000
2025-07-15 21:47:13,786 - INFO - orders - [MARGIN_CALC] Using prices for BTCUSD: bid=117637.3000000000, ask=117649.06373000000000
2025-07-15 21:47:13,786 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: BTCUSD, Type: BUY_LIMIT, Qty: 1, Price: 117649.06373000000000, Margin: 23529.81, Commission: 588.25
2025-07-15 21:47:13,786 - INFO - orders - Calculated initial margin: 23529.81, commission: 588.25 for pending order 1000301-001
2025-07-15 21:47:13,841 - INFO - orders - [DEBUG][pending_order] Prepared order_data_for_internal_processing: {'order_id': '1000301-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY_LIMIT', 'order_quantity': Decimal('1'), 'order_price': Decimal('109'), 'user_type': 'live', 'status': 'PENDING', 'stop_loss': Decimal('0'), 'take_profit': Decimal('0'), 'stoploss_id': '1000302-005', 'takeprofit_id': '1000303-006', 'order_user_id': 14, 'order_status': 'PENDING_PROCESSING', 'contract_value': Decimal('1.00000000'), 'margin': Decimal('23529.81'), 'commission': Decimal('588.25'), 'open_time': None}
2025-07-15 21:47:13,841 - INFO - orders - [BARCLAYS] Setting initial order_status to PENDING_PROCESSING for Barclays user. Will be updated to PENDING after service provider confirmation.
2025-07-15 21:47:13,841 - INFO - orders - Placing PENDING order: BUY_LIMIT for user 14 at price 109
2025-07-15 21:47:13,841 - INFO - orders - [ENTER-CRUD] create_order called with: {'order_id': '1000301-001', 'order_status': 'PENDING_PROCESSING', 'order_user_id': 14, 'order_company_name': 'BTCUSD', 'order_type': 'BUY_LIMIT', 'order_price': Decimal('109'), 'order_quantity': Decimal('1'), 'contract_value': Decimal('1.00000000'), 'margin': Decimal('23529.81'), 'commission': Decimal('588.25'), 'status': 'PENDING', 'stop_loss': Decimal('0'), 'take_profit': Decimal('0'), 'stoploss_id': '1000302-005', 'takeprofit_id': '1000303-006', 'close_id': None}
2025-07-15 21:47:13,862 - INFO - orders - Order 1000301-001 verified in database on attempt 1 before adding to Redis.
2025-07-15 21:47:13,863 - INFO - orders - Skipping Redis storage for Barclays user pending order 1000301-001
2025-07-15 21:47:13,877 - INFO - orders - [PERF] TOTAL place_order: 0.5743s
2025-07-15 21:47:13,907 - INFO - orders - Background balance/margin cache updated for user 14: balance=9902.02000000, margin=0.0
2025-07-15 21:47:13,921 - INFO - orders - [BARCLAYS] barclays_push called for user 14, is_barclays_live_user=True
2025-07-15 21:47:53,114 - INFO - orders - Service provider update request received: {"order_id":"1000301-001","order_status":"PENDING","status":"PENDING"}
2025-07-15 21:47:53,130 - INFO - orders - Original order status: PENDING_PROCESSING
2025-07-15 21:47:53,130 - INFO - orders - Update fields: {'order_id': '1000301-001', 'order_status': 'PENDING', 'status': 'PENDING'}
2025-07-15 21:47:53,130 - INFO - orders - Processing regular update for order 1000301-001
2025-07-15 21:47:53,168 - INFO - orders - Balance/margin cache updated for user 14: balance=9902.02000000, margin=0.0
2025-07-15 21:47:53,168 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-15 21:47:53,168 - INFO - orders - Using order model: UserOrder
2025-07-15 21:47:53,171 - INFO - orders - Fetched 0 open orders for user 14
2025-07-15 21:47:53,174 - INFO - orders - Fetched 1 pending orders for user 14
2025-07-15 21:47:53,176 - INFO - orders - Updated static orders cache for user 14 with 0 open orders and 1 pending orders
2025-07-15 21:47:53,183 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=0.0
2025-07-15 21:51:36,603 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-15 21:51:36,603 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-15 21:51:36,603 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-15 21:51:36,603 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-15 21:51:36,603 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-15 21:51:36,603 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-15 21:51:36,603 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-15 21:51:36,603 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-15 21:51:36,603 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-15 21:51:36,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-15 21:51:36,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-15 21:51:36,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-15 21:51:36,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-15 21:51:36,608 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-15 21:55:51,321 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-15 21:55:52,513 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-15 21:55:52,514 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-15 21:55:52,514 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-15 21:55:52,515 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-15 21:55:56,577 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-15 21:55:56,577 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-15 21:55:57,503 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-15 21:56:02,505 - INFO - orders - Starting the users with orders cache updater task.
2025-07-15 21:56:05,543 - INFO - orders - Starting update_user_static_orders for user 5, user_type live
2025-07-15 21:56:05,543 - INFO - orders - Using order model: UserOrder
2025-07-15 21:56:05,545 - INFO - orders - Fetched 0 open orders for user 5
2025-07-15 21:56:05,549 - INFO - orders - Fetched 0 pending orders for user 5
2025-07-15 21:56:05,568 - INFO - orders - Updated static orders cache for user 5 with 0 open orders and 0 pending orders
2025-07-15 21:56:05,586 - WARNING - orders - User 5: Could not get user data for balance/margin cache update
2025-07-15 21:56:05,598 - INFO - orders - Starting update_user_static_orders for user 8, user_type live
2025-07-15 21:56:05,598 - INFO - orders - Using order model: UserOrder
2025-07-15 21:56:05,604 - INFO - orders - Fetched 0 open orders for user 8
2025-07-15 21:56:05,607 - INFO - orders - Fetched 0 pending orders for user 8
2025-07-15 21:56:07,646 - INFO - orders - Updated static orders cache for user 8 with 0 open orders and 0 pending orders
2025-07-15 21:56:07,703 - INFO - orders - User 8: Updated balance/margin cache after static orders update - balance=0E-8, margin=0.0
2025-07-15 21:56:09,820 - INFO - orders - Starting update_user_static_orders for user 16, user_type live
2025-07-15 21:56:09,820 - INFO - orders - Using order model: UserOrder
2025-07-15 21:56:09,825 - INFO - orders - Fetched 0 open orders for user 16
2025-07-15 21:56:09,827 - INFO - orders - Fetched 0 pending orders for user 16
2025-07-15 21:56:09,829 - INFO - orders - Updated static orders cache for user 16 with 0 open orders and 0 pending orders
2025-07-15 21:56:11,888 - INFO - orders - User 16: Updated balance/margin cache after static orders update - balance=0E-8, margin=0.0
2025-07-15 21:56:11,896 - INFO - orders - Starting update_user_static_orders for user 17, user_type live
2025-07-15 21:56:11,896 - INFO - orders - Using order model: UserOrder
2025-07-15 21:56:11,898 - INFO - orders - Fetched 0 open orders for user 17
2025-07-15 21:56:11,901 - INFO - orders - Fetched 0 pending orders for user 17
2025-07-15 21:56:11,903 - INFO - orders - Updated static orders cache for user 17 with 0 open orders and 0 pending orders
2025-07-15 21:56:11,913 - INFO - orders - User 17: Updated balance/margin cache after static orders update - balance=26302.98000000, margin=0.0
2025-07-15 21:56:11,916 - INFO - orders - Starting update_user_static_orders for user 18, user_type live
2025-07-15 21:56:11,916 - INFO - orders - Using order model: UserOrder
2025-07-15 21:56:11,918 - INFO - orders - Fetched 0 open orders for user 18
2025-07-15 21:56:11,921 - INFO - orders - Fetched 0 pending orders for user 18
2025-07-15 21:56:13,952 - INFO - orders - Updated static orders cache for user 18 with 0 open orders and 0 pending orders
2025-07-15 21:56:13,981 - INFO - orders - User 18: Updated balance/margin cache after static orders update - balance=15000.00000000, margin=0.0
2025-07-15 21:56:13,992 - INFO - orders - Starting update_user_static_orders for user 19, user_type live
2025-07-15 21:56:13,993 - INFO - orders - Using order model: UserOrder
2025-07-15 21:56:13,996 - INFO - orders - Fetched 0 open orders for user 19
2025-07-15 21:56:14,000 - INFO - orders - Fetched 0 pending orders for user 19
2025-07-15 21:56:14,003 - INFO - orders - Updated static orders cache for user 19 with 0 open orders and 0 pending orders
2025-07-15 21:56:16,054 - INFO - orders - User 19: Updated balance/margin cache after static orders update - balance=9616.06000000, margin=0.0
2025-07-15 21:56:16,064 - INFO - orders - Starting update_user_static_orders for user 20, user_type live
2025-07-15 21:56:16,064 - INFO - orders - Using order model: UserOrder
2025-07-15 21:56:16,066 - INFO - orders - Fetched 0 open orders for user 20
2025-07-15 21:56:16,068 - INFO - orders - Fetched 0 pending orders for user 20
2025-07-15 21:56:16,070 - INFO - orders - Updated static orders cache for user 20 with 0 open orders and 0 pending orders
2025-07-15 21:56:16,080 - INFO - orders - User 20: Updated balance/margin cache after static orders update - balance=10000.00000000, margin=0.0
2025-07-15 21:56:16,092 - INFO - orders - Starting update_user_static_orders for user 21, user_type live
2025-07-15 21:56:16,092 - INFO - orders - Using order model: UserOrder
2025-07-15 21:56:16,097 - INFO - orders - Fetched 0 open orders for user 21
2025-07-15 21:56:16,100 - INFO - orders - Fetched 0 pending orders for user 21
2025-07-15 21:56:16,102 - INFO - orders - Updated static orders cache for user 21 with 0 open orders and 0 pending orders
2025-07-15 21:56:16,118 - INFO - orders - User 21: Updated balance/margin cache after static orders update - balance=0E-8, margin=0.0
2025-07-15 21:56:16,122 - INFO - orders - Starting update_user_static_orders for user 22, user_type live
2025-07-15 21:56:16,122 - INFO - orders - Using order model: UserOrder
2025-07-15 21:56:16,125 - INFO - orders - Fetched 0 open orders for user 22
2025-07-15 21:56:16,129 - INFO - orders - Fetched 0 pending orders for user 22
2025-07-15 21:56:16,131 - INFO - orders - Updated static orders cache for user 22 with 0 open orders and 0 pending orders
2025-07-15 21:56:16,146 - INFO - orders - User 22: Updated balance/margin cache after static orders update - balance=2000.00000000, margin=0.0
2025-07-15 21:56:16,148 - INFO - orders - Starting update_user_static_orders for user 23, user_type live
2025-07-15 21:56:16,148 - INFO - orders - Using order model: UserOrder
2025-07-15 21:56:16,152 - INFO - orders - Fetched 0 open orders for user 23
2025-07-15 21:56:16,156 - INFO - orders - Fetched 0 pending orders for user 23
2025-07-15 21:56:16,158 - INFO - orders - Updated static orders cache for user 23 with 0 open orders and 0 pending orders
2025-07-15 21:56:16,167 - INFO - orders - User 23: Updated balance/margin cache after static orders update - balance=1000000.00000000, margin=0.0
2025-07-15 21:56:16,170 - INFO - orders - Starting update_user_static_orders for user 24, user_type live
2025-07-15 21:56:16,170 - INFO - orders - Using order model: UserOrder
2025-07-15 21:56:16,172 - INFO - orders - Fetched 0 open orders for user 24
2025-07-15 21:56:16,175 - INFO - orders - Fetched 0 pending orders for user 24
2025-07-15 21:56:16,178 - INFO - orders - Updated static orders cache for user 24 with 0 open orders and 0 pending orders
2025-07-15 21:56:16,191 - INFO - orders - User 24: Updated balance/margin cache after static orders update - balance=500000.00000000, margin=0.0
2025-07-15 21:56:16,195 - INFO - orders - Starting update_user_static_orders for user 25, user_type live
2025-07-15 21:56:16,195 - INFO - orders - Using order model: UserOrder
2025-07-15 21:56:16,198 - INFO - orders - Fetched 0 open orders for user 25
2025-07-15 21:56:16,202 - INFO - orders - Fetched 0 pending orders for user 25
2025-07-15 21:56:16,205 - INFO - orders - Updated static orders cache for user 25 with 0 open orders and 0 pending orders
2025-07-15 21:56:16,215 - INFO - orders - User 25: Updated balance/margin cache after static orders update - balance=250000.00000000, margin=0.0
2025-07-15 21:56:16,261 - INFO - orders - Starting update_user_static_orders for user 2, user_type demo
2025-07-15 21:56:16,262 - INFO - orders - Using order model: DemoUserOrder
2025-07-15 21:56:16,267 - INFO - orders - Fetched 0 open orders for user 2
2025-07-15 21:56:16,272 - INFO - orders - Fetched 0 pending orders for user 2
2025-07-15 21:56:16,277 - INFO - orders - Updated static orders cache for user 2 with 0 open orders and 0 pending orders
2025-07-15 21:56:16,294 - INFO - orders - User 2: Updated balance/margin cache after static orders update - balance=100000.00000000, margin=0.0
2025-07-15 21:56:16,297 - INFO - orders - Starting update_user_static_orders for user 3, user_type demo
2025-07-15 21:56:16,297 - INFO - orders - Using order model: DemoUserOrder
2025-07-15 21:56:16,300 - INFO - orders - Fetched 0 open orders for user 3
2025-07-15 21:56:16,304 - INFO - orders - Fetched 0 pending orders for user 3
2025-07-15 21:56:16,308 - INFO - orders - Updated static orders cache for user 3 with 0 open orders and 0 pending orders
2025-07-15 21:56:16,326 - INFO - orders - User 3: Updated balance/margin cache after static orders update - balance=100000.00000000, margin=0.0
2025-07-15 21:56:16,355 - INFO - orders - Starting update_user_static_orders for user 6, user_type demo
2025-07-15 21:56:16,355 - INFO - orders - Using order model: DemoUserOrder
2025-07-15 21:56:16,360 - INFO - orders - Fetched 0 open orders for user 6
2025-07-15 21:56:16,365 - INFO - orders - Fetched 0 pending orders for user 6
2025-07-15 21:56:16,369 - INFO - orders - Updated static orders cache for user 6 with 0 open orders and 0 pending orders
2025-07-15 21:56:16,387 - INFO - orders - User 6: Updated balance/margin cache after static orders update - balance=100000.00000000, margin=0.0
2025-07-15 21:56:17,415 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-15 21:56:17,415 - INFO - orders - Using order model: UserOrder
2025-07-15 21:56:17,417 - INFO - orders - Fetched 0 open orders for user 14
2025-07-15 21:56:17,419 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-15 21:56:17,420 - INFO - orders - Updated static orders cache for user 14 with 0 open orders and 0 pending orders
2025-07-15 21:56:17,424 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=0.0
2025-07-15 21:56:28,642 - INFO - orders - Pending order placement request received - User ID: 14, Symbol: BTCUSD, Type: BUY_LIMIT, Quantity: 1
2025-07-15 21:56:28,670 - INFO - orders - Calculated contract_value for pending order: 1.00000000 (contract_size: 1.00000000 * quantity: 1)
2025-07-15 21:56:28,671 - INFO - orders - [DEBUG] User data from cache: {'id': 14, 'email': 'cursordemo3@gmail.com', 'group_name': 'Standard', 'leverage': Decimal('100.00'), 'user_type': 'live', 'account_number': 'DB7JG', 'wallet_balance': Decimal('9902.02000000'), 'margin': Decimal('0.0'), 'first_name': None, 'last_name': None, 'country': 'India', 'phone_number': Decimal('918618025298')}
2025-07-15 21:56:28,672 - INFO - orders - [DEBUG] Group name: Standard
2025-07-15 21:56:28,672 - INFO - orders - User 14 is_barclays_live_user: True (user_type: live, sending_orders_normalized: barclays)
2025-07-15 21:56:28,675 - INFO - orders - [SYMBOL_INFO] Retrieved external symbol info for BTCUSD: contract_size=1.00000000, profit_currency=USD, digit=2.00000
2025-07-15 21:56:28,989 - INFO - orders - [MARGIN_CALC] Market data for BTCUSD: {'b': '117586.9000000000', 'o': '117586.8000000000'}
2025-07-15 21:56:28,989 - WARNING - orders - [MARGIN_CALC] Missing ask price for BTCUSD, using bid price with spread: bid=117586.9000000000, ask=117598.65869000000000
2025-07-15 21:56:28,989 - INFO - orders - [MARGIN_CALC] Using prices for BTCUSD: bid=117586.9000000000, ask=117598.65869000000000
2025-07-15 21:56:28,989 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: BTCUSD, Type: BUY_LIMIT, Qty: 1, Price: 117598.65869000000000, Margin: 23519.73, Commission: 587.99
2025-07-15 21:56:28,989 - INFO - orders - Calculated initial margin: 23519.73, commission: 587.99 for pending order 1000305-001
2025-07-15 21:56:29,009 - INFO - orders - [DEBUG][pending_order] Prepared order_data_for_internal_processing: {'order_id': '1000305-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY_LIMIT', 'order_quantity': Decimal('1'), 'order_price': Decimal('111'), 'user_type': 'live', 'status': 'PENDING', 'stop_loss': Decimal('0'), 'take_profit': Decimal('0'), 'stoploss_id': '1000306-005', 'takeprofit_id': '1000307-006', 'order_user_id': 14, 'order_status': 'PENDING_PROCESSING', 'contract_value': Decimal('1.00000000'), 'margin': Decimal('23519.73'), 'commission': Decimal('587.99'), 'open_time': None}
2025-07-15 21:56:29,010 - INFO - orders - [BARCLAYS] Setting initial order_status to PENDING_PROCESSING for Barclays user. Will be updated to PENDING after service provider confirmation.
2025-07-15 21:56:29,010 - INFO - orders - Placing PENDING order: BUY_LIMIT for user 14 at price 111
2025-07-15 21:56:29,010 - INFO - orders - [ENTER-CRUD] create_order called with: {'order_id': '1000305-001', 'order_status': 'PENDING_PROCESSING', 'order_user_id': 14, 'order_company_name': 'BTCUSD', 'order_type': 'BUY_LIMIT', 'order_price': Decimal('111'), 'order_quantity': Decimal('1'), 'contract_value': Decimal('1.00000000'), 'margin': Decimal('23519.73'), 'commission': Decimal('587.99'), 'status': 'PENDING', 'stop_loss': Decimal('0'), 'take_profit': Decimal('0'), 'stoploss_id': '1000306-005', 'takeprofit_id': '1000307-006', 'close_id': None}
2025-07-15 21:56:29,034 - INFO - orders - Order 1000305-001 verified in database on attempt 1 before adding to Redis.
2025-07-15 21:56:29,035 - INFO - orders - Skipping Redis storage for Barclays user pending order 1000305-001
2025-07-15 21:56:29,051 - INFO - orders - [PERF] TOTAL place_order: 0.4106s
2025-07-15 21:56:29,088 - INFO - orders - Background balance/margin cache updated for user 14: balance=9902.02000000, margin=0.0
2025-07-15 21:56:29,101 - INFO - orders - [BARCLAYS] barclays_push called for user 14, is_barclays_live_user=True
2025-07-15 21:56:43,870 - INFO - orders - Service provider update request received: {"order_id":"1000305-001","order_status":"PENDING","status":"PENDING"}
2025-07-15 21:56:43,912 - INFO - orders - Original order status: PENDING_PROCESSING
2025-07-15 21:56:43,912 - INFO - orders - Update fields: {'order_id': '1000305-001', 'order_status': 'PENDING', 'status': 'PENDING'}
2025-07-15 21:56:43,912 - INFO - orders - Processing regular update for order 1000305-001
2025-07-15 21:56:43,974 - INFO - orders - Balance/margin cache updated for user 14: balance=9902.02000000, margin=0.0
2025-07-15 21:56:43,974 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-15 21:56:43,974 - INFO - orders - Using order model: UserOrder
2025-07-15 21:56:43,977 - INFO - orders - Fetched 0 open orders for user 14
2025-07-15 21:56:43,980 - INFO - orders - Fetched 1 pending orders for user 14
2025-07-15 21:56:43,982 - INFO - orders - Updated static orders cache for user 14 with 0 open orders and 1 pending orders
2025-07-15 21:56:43,988 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=0.0
2025-07-15 21:56:45,166 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-15 21:56:45,166 - INFO - orders - Using order model: UserOrder
2025-07-15 21:56:45,170 - INFO - orders - Fetched 0 open orders for user 14
2025-07-15 21:56:45,174 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-15 21:56:45,177 - INFO - orders - Updated static orders cache for user 14 with 0 open orders and 0 pending orders
2025-07-15 21:56:45,183 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=0.0
2025-07-15 21:56:52,239 - INFO - orders - Pending order placement request received - User ID: 14, Symbol: BTCUSD, Type: BUY_LIMIT, Quantity: 1
2025-07-15 21:56:52,259 - INFO - orders - Calculated contract_value for pending order: 1.00000000 (contract_size: 1.00000000 * quantity: 1)
2025-07-15 21:56:52,260 - INFO - orders - [DEBUG] User data from cache: {'id': 14, 'email': 'cursordemo3@gmail.com', 'group_name': 'Standard', 'leverage': Decimal('100.00'), 'user_type': 'live', 'account_number': 'DB7JG', 'wallet_balance': Decimal('9902.02000000'), 'margin': Decimal('0.0'), 'first_name': None, 'last_name': None, 'country': 'India', 'phone_number': Decimal('918618025298')}
2025-07-15 21:56:52,260 - INFO - orders - [DEBUG] Group name: Standard
2025-07-15 21:56:52,262 - INFO - orders - User 14 is_barclays_live_user: True (user_type: live, sending_orders_normalized: barclays)
2025-07-15 21:56:52,265 - INFO - orders - [SYMBOL_INFO] Retrieved external symbol info for BTCUSD: contract_size=1.00000000, profit_currency=USD, digit=2.00000
2025-07-15 21:56:52,640 - INFO - orders - [MARGIN_CALC] Market data for BTCUSD: {'b': '117556.8000000000', 'o': '117556.7000000000'}
2025-07-15 21:56:52,640 - WARNING - orders - [MARGIN_CALC] Missing ask price for BTCUSD, using bid price with spread: bid=117556.8000000000, ask=117568.55568000000000
2025-07-15 21:56:52,640 - INFO - orders - [MARGIN_CALC] Using prices for BTCUSD: bid=117556.8000000000, ask=117568.55568000000000
2025-07-15 21:56:52,641 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: BTCUSD, Type: BUY_LIMIT, Qty: 1, Price: 117568.55568000000000, Margin: 23513.71, Commission: 587.84
2025-07-15 21:56:52,641 - INFO - orders - Calculated initial margin: 23513.71, commission: 587.84 for pending order 1000309-001
2025-07-15 21:56:52,690 - INFO - orders - [DEBUG][pending_order] Prepared order_data_for_internal_processing: {'order_id': '1000309-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY_LIMIT', 'order_quantity': Decimal('1'), 'order_price': Decimal('133'), 'user_type': 'live', 'status': 'PENDING', 'stop_loss': Decimal('0'), 'take_profit': Decimal('0'), 'stoploss_id': '1000310-005', 'takeprofit_id': '1000311-006', 'order_user_id': 14, 'order_status': 'PENDING_PROCESSING', 'contract_value': Decimal('1.00000000'), 'margin': Decimal('23513.71'), 'commission': Decimal('587.84'), 'open_time': None}
2025-07-15 21:56:52,690 - INFO - orders - [BARCLAYS] Setting initial order_status to PENDING_PROCESSING for Barclays user. Will be updated to PENDING after service provider confirmation.
2025-07-15 21:56:52,690 - INFO - orders - Placing PENDING order: BUY_LIMIT for user 14 at price 133
2025-07-15 21:56:52,690 - INFO - orders - [ENTER-CRUD] create_order called with: {'order_id': '1000309-001', 'order_status': 'PENDING_PROCESSING', 'order_user_id': 14, 'order_company_name': 'BTCUSD', 'order_type': 'BUY_LIMIT', 'order_price': Decimal('133'), 'order_quantity': Decimal('1'), 'contract_value': Decimal('1.00000000'), 'margin': Decimal('23513.71'), 'commission': Decimal('587.84'), 'status': 'PENDING', 'stop_loss': Decimal('0'), 'take_profit': Decimal('0'), 'stoploss_id': '1000310-005', 'takeprofit_id': '1000311-006', 'close_id': None}
2025-07-15 21:56:53,084 - INFO - orders - Order 1000309-001 verified in database on attempt 1 before adding to Redis.
2025-07-15 21:56:53,112 - INFO - orders - Skipping Redis storage for Barclays user pending order 1000309-001
2025-07-15 21:56:53,168 - INFO - orders - [PERF] TOTAL place_order: 0.9294s
2025-07-15 21:56:53,244 - INFO - orders - Background balance/margin cache updated for user 14: balance=9902.02000000, margin=0.0
2025-07-15 21:56:53,268 - INFO - orders - [BARCLAYS] barclays_push called for user 14, is_barclays_live_user=True
2025-07-15 21:57:07,933 - INFO - orders - Service provider update request received: {"order_id":"1000309-0011","order_status":"PENDING","status":"PENDING"}
2025-07-15 21:57:07,933 - ERROR - orders - Order not found with provided identifier '1000309-0011' in request: {"order_id":"1000309-0011","order_status":"PENDING","status":"PENDING"}
2025-07-15 21:57:07,933 - ERROR - orders - Error in service provider update endpoint: 404: Order not found with provided ID
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\orders.py", line 2901, in update_order_by_service_provider
    raise HTTPException(status_code=404, detail="Order not found with provided ID")
fastapi.exceptions.HTTPException: 404: Order not found with provided ID
2025-07-15 21:57:23,743 - INFO - orders - Service provider update request received: {"order_id":"1000309-001","order_status":"PENDING","status":"PENDING"}
2025-07-15 21:57:23,750 - INFO - orders - Original order status: PENDING_PROCESSING
2025-07-15 21:57:23,750 - INFO - orders - Update fields: {'order_id': '1000309-001', 'order_status': 'PENDING', 'status': 'PENDING'}
2025-07-15 21:57:23,750 - INFO - orders - Processing regular update for order 1000309-001
2025-07-15 21:57:23,812 - INFO - orders - Balance/margin cache updated for user 14: balance=9902.02000000, margin=0.0
2025-07-15 21:57:23,812 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-15 21:57:23,813 - INFO - orders - Using order model: UserOrder
2025-07-15 21:57:23,817 - INFO - orders - Fetched 0 open orders for user 14
2025-07-15 21:57:23,820 - INFO - orders - Fetched 1 pending orders for user 14
2025-07-15 21:57:23,821 - INFO - orders - Updated static orders cache for user 14 with 0 open orders and 1 pending orders
2025-07-15 21:57:23,828 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=0.0
2025-07-15 21:57:24,487 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-15 21:57:24,487 - INFO - orders - Using order model: UserOrder
2025-07-15 21:57:24,491 - INFO - orders - Fetched 0 open orders for user 14
2025-07-15 21:57:24,494 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-15 21:57:24,495 - INFO - orders - Updated static orders cache for user 14 with 0 open orders and 0 pending orders
2025-07-15 21:57:24,501 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=0.0
2025-07-15 21:57:31,754 - INFO - orders - Pending order placement request received - User ID: 14, Symbol: BTCUSD, Type: BUY_LIMIT, Quantity: 1
2025-07-15 21:57:31,817 - INFO - orders - Calculated contract_value for pending order: 1.00000000 (contract_size: 1.00000000 * quantity: 1)
2025-07-15 21:57:31,818 - INFO - orders - [DEBUG] User data from cache: {'id': 14, 'email': 'cursordemo3@gmail.com', 'group_name': 'Standard', 'leverage': Decimal('100.00'), 'user_type': 'live', 'account_number': 'DB7JG', 'wallet_balance': Decimal('9902.02000000'), 'margin': Decimal('0.0'), 'first_name': None, 'last_name': None, 'country': 'India', 'phone_number': Decimal('918618025298')}
2025-07-15 21:57:31,819 - INFO - orders - [DEBUG] Group name: Standard
2025-07-15 21:57:31,820 - INFO - orders - User 14 is_barclays_live_user: True (user_type: live, sending_orders_normalized: barclays)
2025-07-15 21:57:31,826 - INFO - orders - [SYMBOL_INFO] Retrieved external symbol info for BTCUSD: contract_size=1.00000000, profit_currency=USD, digit=2.00000
2025-07-15 21:57:32,166 - INFO - orders - [MARGIN_CALC] Market data for BTCUSD: {'b': '117586.9000000000', 'o': '117586.8000000000'}
2025-07-15 21:57:32,166 - WARNING - orders - [MARGIN_CALC] Missing ask price for BTCUSD, using bid price with spread: bid=117586.9000000000, ask=117598.65869000000000
2025-07-15 21:57:32,166 - INFO - orders - [MARGIN_CALC] Using prices for BTCUSD: bid=117586.9000000000, ask=117598.65869000000000
2025-07-15 21:57:32,166 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: BTCUSD, Type: BUY_LIMIT, Qty: 1, Price: 117598.65869000000000, Margin: 23519.73, Commission: 587.99
2025-07-15 21:57:32,166 - INFO - orders - Calculated initial margin: 23519.73, commission: 587.99 for pending order 1000313-001
2025-07-15 21:57:32,184 - INFO - orders - [DEBUG][pending_order] Prepared order_data_for_internal_processing: {'order_id': '1000313-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY_LIMIT', 'order_quantity': Decimal('1'), 'order_price': Decimal('125'), 'user_type': 'live', 'status': 'PENDING', 'stop_loss': Decimal('0'), 'take_profit': Decimal('0'), 'stoploss_id': '1000314-005', 'takeprofit_id': '1000315-006', 'order_user_id': 14, 'order_status': 'PENDING_PROCESSING', 'contract_value': Decimal('1.00000000'), 'margin': Decimal('23519.73'), 'commission': Decimal('587.99'), 'open_time': None}
2025-07-15 21:57:32,184 - INFO - orders - [BARCLAYS] Setting initial order_status to PENDING_PROCESSING for Barclays user. Will be updated to PENDING after service provider confirmation.
2025-07-15 21:57:32,184 - INFO - orders - Placing PENDING order: BUY_LIMIT for user 14 at price 125
2025-07-15 21:57:32,184 - INFO - orders - [ENTER-CRUD] create_order called with: {'order_id': '1000313-001', 'order_status': 'PENDING_PROCESSING', 'order_user_id': 14, 'order_company_name': 'BTCUSD', 'order_type': 'BUY_LIMIT', 'order_price': Decimal('125'), 'order_quantity': Decimal('1'), 'contract_value': Decimal('1.00000000'), 'margin': Decimal('23519.73'), 'commission': Decimal('587.99'), 'status': 'PENDING', 'stop_loss': Decimal('0'), 'take_profit': Decimal('0'), 'stoploss_id': '1000314-005', 'takeprofit_id': '1000315-006', 'close_id': None}
2025-07-15 21:57:32,203 - INFO - orders - Order 1000313-001 verified in database on attempt 1 before adding to Redis.
2025-07-15 21:57:32,205 - INFO - orders - Skipping Redis storage for Barclays user pending order 1000313-001
2025-07-15 21:57:32,220 - INFO - orders - [PERF] TOTAL place_order: 0.4677s
2025-07-15 21:57:32,273 - INFO - orders - Background balance/margin cache updated for user 14: balance=9902.02000000, margin=0.0
2025-07-15 21:57:32,281 - INFO - orders - [BARCLAYS] barclays_push called for user 14, is_barclays_live_user=True
2025-07-15 21:57:39,459 - INFO - orders - Service provider update request received: {"order_id":"1000313-001","order_status":"PENDING","status":"PENDING"}
2025-07-15 21:57:39,466 - INFO - orders - Original order status: PENDING_PROCESSING
2025-07-15 21:57:39,466 - INFO - orders - Update fields: {'order_id': '1000313-001', 'order_status': 'PENDING', 'status': 'PENDING'}
2025-07-15 21:57:39,466 - INFO - orders - Processing regular update for order 1000313-001
2025-07-15 21:57:39,525 - INFO - orders - Balance/margin cache updated for user 14: balance=9902.02000000, margin=0.0
2025-07-15 21:57:39,525 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-15 21:57:39,525 - INFO - orders - Using order model: UserOrder
2025-07-15 21:57:39,529 - INFO - orders - Fetched 0 open orders for user 14
2025-07-15 21:57:39,532 - INFO - orders - Fetched 1 pending orders for user 14
2025-07-15 21:57:39,533 - INFO - orders - Updated static orders cache for user 14 with 0 open orders and 1 pending orders
2025-07-15 21:57:39,558 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=0.0
2025-07-15 21:57:40,102 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-15 21:57:40,103 - INFO - orders - Using order model: UserOrder
2025-07-15 21:57:40,108 - INFO - orders - Fetched 0 open orders for user 14
2025-07-15 21:57:40,111 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-15 21:57:40,112 - INFO - orders - Updated static orders cache for user 14 with 0 open orders and 0 pending orders
2025-07-15 21:57:40,119 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=0.0
2025-07-15 22:02:54,041 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-15 22:02:55,261 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-15 22:02:55,262 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-15 22:02:55,262 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-15 22:02:55,262 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-15 22:02:59,349 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-15 22:02:59,349 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-15 22:03:00,274 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-15 22:03:05,273 - INFO - orders - Starting the users with orders cache updater task.
2025-07-15 22:03:19,694 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-15 22:03:19,694 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-15 22:03:19,694 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-15 22:03:19,694 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-15 22:03:19,694 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-15 22:03:19,694 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-15 22:03:19,694 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-15 22:03:19,695 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-15 22:03:19,695 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-15 22:03:19,737 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-15 22:03:19,737 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-15 22:03:19,737 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-15 22:03:19,738 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-15 22:03:19,738 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-15 22:03:24,252 - INFO - orders - Pending order placement request received - User ID: 14, Symbol: BTCUSD, Type: BUY_LIMIT, Quantity: 1
2025-07-15 22:03:24,321 - INFO - orders - Calculated contract_value for pending order: 1.00000000 (contract_size: 1.00000000 * quantity: 1)
2025-07-15 22:03:24,323 - INFO - orders - [DEBUG] User data from cache: {'id': 14, 'email': 'cursordemo3@gmail.com', 'account_number': 'DB7JG', 'group_name': 'Standard', 'leverage': Decimal('100.00'), 'wallet_balance': Decimal('9902.02000000'), 'margin': Decimal('0E-8'), 'user_type': 'live', 'first_name': None, 'last_name': None, 'country': 'India', 'phone_number': Decimal('918618025298')}
2025-07-15 22:03:24,324 - INFO - orders - [DEBUG] Group name: Standard
2025-07-15 22:03:24,326 - INFO - orders - User 14 is_barclays_live_user: True (user_type: live, sending_orders_normalized: barclays)
2025-07-15 22:03:24,331 - INFO - orders - [SYMBOL_INFO] Retrieved external symbol info for BTCUSD: contract_size=1.00000000, profit_currency=USD, digit=2.00000
2025-07-15 22:03:24,682 - INFO - orders - [MARGIN_CALC] Market data for BTCUSD: {'b': '117647.3000000000', 'o': '117647.2000000000'}
2025-07-15 22:03:24,683 - WARNING - orders - [MARGIN_CALC] Missing ask price for BTCUSD, using bid price with spread: bid=117647.3000000000, ask=117659.06473000000000
2025-07-15 22:03:24,683 - INFO - orders - [MARGIN_CALC] Using prices for BTCUSD: bid=117647.3000000000, ask=117659.06473000000000
2025-07-15 22:03:24,683 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: BTCUSD, Type: BUY_LIMIT, Qty: 1, Price: 117659.06473000000000, Margin: 23531.81, Commission: 588.30
2025-07-15 22:03:24,684 - INFO - orders - Calculated initial margin: 23531.81, commission: 588.30 for pending order 1000317-001
2025-07-15 22:03:24,751 - INFO - orders - [DEBUG][pending_order] Prepared order_data_for_internal_processing: {'order_id': '1000317-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY_LIMIT', 'order_quantity': Decimal('1'), 'order_price': Decimal('111'), 'user_type': 'live', 'status': 'PENDING', 'stop_loss': Decimal('0'), 'take_profit': Decimal('0'), 'stoploss_id': '1000318-005', 'takeprofit_id': '1000319-006', 'order_user_id': 14, 'order_status': 'PENDING_PROCESSING', 'contract_value': Decimal('1.00000000'), 'margin': Decimal('23531.81'), 'commission': Decimal('588.30'), 'open_time': None}
2025-07-15 22:03:24,752 - INFO - orders - [BARCLAYS] Setting initial order_status to PENDING_PROCESSING for Barclays user. Will be updated to PENDING after service provider confirmation.
2025-07-15 22:03:24,752 - INFO - orders - Placing PENDING order: BUY_LIMIT for user 14 at price 111
2025-07-15 22:03:24,753 - INFO - orders - [ENTER-CRUD] create_order called with: {'order_id': '1000317-001', 'order_status': 'PENDING_PROCESSING', 'order_user_id': 14, 'order_company_name': 'BTCUSD', 'order_type': 'BUY_LIMIT', 'order_price': Decimal('111'), 'order_quantity': Decimal('1'), 'contract_value': Decimal('1.00000000'), 'margin': Decimal('23531.81'), 'commission': Decimal('588.30'), 'status': 'PENDING', 'stop_loss': Decimal('0'), 'take_profit': Decimal('0'), 'stoploss_id': '1000318-005', 'takeprofit_id': '1000319-006', 'close_id': None}
2025-07-15 22:03:24,830 - INFO - orders - Order 1000317-001 verified in database on attempt 1 before adding to Redis.
2025-07-15 22:03:24,842 - INFO - orders - Skipping Redis storage for Barclays user pending order 1000317-001
2025-07-15 22:03:24,977 - INFO - orders - [PERF] TOTAL place_order: 0.7266s
2025-07-15 22:03:25,127 - INFO - orders - Background balance/margin cache updated for user 14: balance=9902.02000000, margin=0.0
2025-07-15 22:03:25,170 - INFO - orders - [BARCLAYS] barclays_push called for user 14, is_barclays_live_user=True
2025-07-15 22:03:35,470 - INFO - orders - Order placement request received - User: 14, Symbol: AUDJPY, Type: SELL
2025-07-15 22:03:37,574 - INFO - orders - [MARGIN_CALC] Market data for AUDJPY: {'b': '97.1570000000', 'o': '97.1510000000'}
2025-07-15 22:03:37,574 - WARNING - orders - [MARGIN_CALC] Missing ask price for AUDJPY, using bid price with spread: bid=97.1570000000, ask=97.16671570000000
2025-07-15 22:03:37,574 - INFO - orders - [MARGIN_CALC] Using prices for AUDJPY: bid=97.1570000000, ask=97.16671570000000
2025-07-15 22:03:37,607 - INFO - orders - [CURRENCY_CONVERT] Starting conversion of 971.57 JPY to USD for margin_calculation (user_id: 14, position: None)
2025-07-15 22:03:37,608 - INFO - orders - [CURRENCY_CONVERT] Trying direct conversion with symbol: JPYUSD
2025-07-15 22:03:37,615 - INFO - orders - [CURRENCY_CONVERT] Direct conversion prices from cache: None
2025-07-15 22:03:37,615 - INFO - orders - [CURRENCY_CONVERT] No direct conversion rate found for JPYUSD, trying inverse
2025-07-15 22:03:37,615 - INFO - orders - [CURRENCY_CONVERT] Trying inverse conversion with symbol: USDJPY
2025-07-15 22:03:37,623 - INFO - orders - [CURRENCY_CONVERT] Inverse conversion prices from cache: {'b': Decimal('148.8980000000'), 'o': Decimal('148.8960000000')}
2025-07-15 22:03:37,623 - INFO - orders - [CURRENCY_CONVERT] Found inverse conversion rate (bid): 148.8980000000
2025-07-15 22:03:37,624 - INFO - orders - [CURRENCY_CONVERT] Inverse conversion successful: 971.57 JPY / 148.8980000000 = 6.525070853873121197061075367 USD
2025-07-15 22:03:37,624 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: AUDJPY, Type: SELL, Qty: 0.01, Price: 97.1570000000, Margin: 6.525070853873121197061075367, Commission: 0.10
2025-07-15 22:03:37,625 - INFO - orders - [HEDGING_MARGIN_DEBUG] Starting hedging calculation for User: 14, Symbol: AUDJPY, OrderType: SELL, Quantity: 0.01, FullMargin: 6.525070853873121197061075367
2025-07-15 22:03:37,625 - INFO - orders - [HEDGING_MARGIN_DEBUG] Existing open orders count: 0
2025-07-15 22:03:37,625 - INFO - orders - [HEDGING_MARGIN_DEBUG] Created simulated order: Type=SELL, Qty=0.01, Margin=6.525070853873121197061075367
2025-07-15 22:03:37,625 - INFO - orders - [HEDGING_MARGIN_DEBUG] About to calculate margin before and after for 0 existing orders + 1 new order
2025-07-15 22:03:37,626 - INFO - orders - [HEDGING_MARGIN_DEBUG] Executing margin calculation tasks...
2025-07-15 22:03:37,631 - INFO - orders - [MARGIN_TOTAL_CONTRIB] No open positions for User 14, Symbol AUDJPY. Returning zero margin.
2025-07-15 22:03:37,632 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol AUDJPY
2025-07-15 22:03:37,632 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0, TotalSellQty=0.01, NetQty=0.01, IsHedged=False
2025-07-15 22:03:37,633 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.5070853873121197061075367')], HighestMarginPerLot=652.5070853873121197061075367
2025-07-15 22:03:37,633 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=6.53
2025-07-15 22:03:37,638 - INFO - orders - [HEDGING_MARGIN_DEBUG] Margin calculation tasks completed
2025-07-15 22:03:37,639 - INFO - orders - [HEDGING_MARGIN_DEBUG] User: 14, Symbol: AUDJPY, OrderType: SELL, MarginBefore: 0.0, MarginAfter: 6.53, AdditionalMargin: 6.53, OpenOrders: 0
2025-07-15 22:03:37,639 - INFO - orders - [HEDGING_MARGIN_DEBUG] Simulated order: Type=SELL, Qty=0.01, Margin=6.525070853873121197061075367
2025-07-15 22:03:37,640 - INFO - orders - [PERF] Order processing: 2.1518s
2025-07-15 22:03:37,794 - INFO - orders - [PERF] Order creation: 0.1535s
2025-07-15 22:03:37,794 - INFO - orders - is_barclays_live_user in place_order: True
2025-07-15 22:03:37,795 - INFO - orders - [BARCLAYS] Scheduling barclays_push in place_order
2025-07-15 22:03:37,795 - INFO - orders - [PERF] TOTAL place_order: 2.3878s
2025-07-15 22:03:37,964 - INFO - orders - Background balance/margin cache updated for user 14: balance=9902.02000000, margin=0.0
2025-07-15 22:03:38,035 - INFO - orders - [BARCLAYS] barclays_push called in place_order
2025-07-15 22:03:38,347 - INFO - orders - [PUBLISH_ASYNC] Triggering websocket updates for user 14
2025-07-15 22:03:41,205 - INFO - orders - Order placement request received - User: 14, Symbol: AUDJPY, Type: BUY
2025-07-15 22:03:41,556 - INFO - orders - [MARGIN_CALC] Market data for AUDJPY: {'b': '97.1530000000', 'o': '97.1480000000'}
2025-07-15 22:03:41,557 - WARNING - orders - [MARGIN_CALC] Missing ask price for AUDJPY, using bid price with spread: bid=97.1530000000, ask=97.16271530000000
2025-07-15 22:03:41,557 - INFO - orders - [MARGIN_CALC] Using prices for AUDJPY: bid=97.1530000000, ask=97.16271530000000
2025-07-15 22:03:41,560 - INFO - orders - [CURRENCY_CONVERT] Starting conversion of 971.63 JPY to USD for margin_calculation (user_id: 14, position: None)
2025-07-15 22:03:41,560 - INFO - orders - [CURRENCY_CONVERT] Trying direct conversion with symbol: JPYUSD
2025-07-15 22:03:41,562 - INFO - orders - [CURRENCY_CONVERT] Direct conversion prices from cache: None
2025-07-15 22:03:41,562 - INFO - orders - [CURRENCY_CONVERT] No direct conversion rate found for JPYUSD, trying inverse
2025-07-15 22:03:41,562 - INFO - orders - [CURRENCY_CONVERT] Trying inverse conversion with symbol: USDJPY
2025-07-15 22:03:41,564 - INFO - orders - [CURRENCY_CONVERT] Inverse conversion prices from cache: {'b': Decimal('148.8970000000'), 'o': Decimal('148.8920000000')}
2025-07-15 22:03:41,565 - INFO - orders - [CURRENCY_CONVERT] Found inverse conversion rate (bid): 148.8970000000
2025-07-15 22:03:41,565 - INFO - orders - [CURRENCY_CONVERT] Inverse conversion successful: 971.63 JPY / 148.8970000000 = 6.525517639710672478290361794 USD
2025-07-15 22:03:41,565 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: AUDJPY, Type: BUY, Qty: 0.01, Price: 97.16271530000000, Margin: 6.525517639710672478290361794, Commission: 0.10
2025-07-15 22:03:41,566 - INFO - orders - [HEDGING_MARGIN_DEBUG] Starting hedging calculation for User: 14, Symbol: AUDJPY, OrderType: BUY, Quantity: 0.01, FullMargin: 6.525517639710672478290361794
2025-07-15 22:03:41,566 - INFO - orders - [HEDGING_MARGIN_DEBUG] Existing open orders count: 0
2025-07-15 22:03:41,566 - INFO - orders - [HEDGING_MARGIN_DEBUG] Created simulated order: Type=BUY, Qty=0.01, Margin=6.525517639710672478290361794
2025-07-15 22:03:41,567 - INFO - orders - [HEDGING_MARGIN_DEBUG] About to calculate margin before and after for 0 existing orders + 1 new order
2025-07-15 22:03:41,567 - INFO - orders - [HEDGING_MARGIN_DEBUG] Executing margin calculation tasks...
2025-07-15 22:03:41,568 - INFO - orders - [MARGIN_TOTAL_CONTRIB] No open positions for User 14, Symbol AUDJPY. Returning zero margin.
2025-07-15 22:03:41,569 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol AUDJPY
2025-07-15 22:03:41,569 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.01, TotalSellQty=0, NetQty=0.01, IsHedged=False
2025-07-15 22:03:41,570 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.5517639710672478290361794')], HighestMarginPerLot=652.5517639710672478290361794
2025-07-15 22:03:41,570 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=6.53
2025-07-15 22:03:41,571 - INFO - orders - [HEDGING_MARGIN_DEBUG] Margin calculation tasks completed
2025-07-15 22:03:41,571 - INFO - orders - [HEDGING_MARGIN_DEBUG] User: 14, Symbol: AUDJPY, OrderType: BUY, MarginBefore: 0.0, MarginAfter: 6.53, AdditionalMargin: 6.53, OpenOrders: 0
2025-07-15 22:03:41,571 - INFO - orders - [HEDGING_MARGIN_DEBUG] Simulated order: Type=BUY, Qty=0.01, Margin=6.525517639710672478290361794
2025-07-15 22:03:41,571 - INFO - orders - [PERF] Order processing: 0.3637s
2025-07-15 22:03:41,596 - INFO - orders - [PERF] Order creation: 0.0238s
2025-07-15 22:03:41,596 - INFO - orders - is_barclays_live_user in place_order: True
2025-07-15 22:03:41,596 - INFO - orders - [BARCLAYS] Scheduling barclays_push in place_order
2025-07-15 22:03:41,596 - INFO - orders - [PERF] TOTAL place_order: 0.3927s
2025-07-15 22:03:41,612 - INFO - orders - Background balance/margin cache updated for user 14: balance=9902.02000000, margin=0.0
2025-07-15 22:03:41,627 - INFO - orders - [BARCLAYS] barclays_push called in place_order
2025-07-15 22:03:41,958 - INFO - orders - [PUBLISH_ASYNC] Triggering websocket updates for user 14
2025-07-15 22:55:56,178 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-15 22:55:57,441 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-15 22:55:57,441 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-15 22:55:57,441 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-15 22:55:57,441 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-15 22:56:01,519 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-15 22:56:01,519 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-15 22:56:02,445 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-15 22:56:07,443 - INFO - orders - Starting the users with orders cache updater task.
2025-07-15 22:56:19,014 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-15 22:56:19,014 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-15 22:56:19,014 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-15 22:56:19,014 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-15 22:56:19,014 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-15 22:56:19,014 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-15 22:56:19,014 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-15 22:56:19,015 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-15 22:56:19,015 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-15 22:56:19,046 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-15 22:56:19,046 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-15 22:56:19,046 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-15 22:56:19,047 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-15 22:56:19,047 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-15 22:56:46,234 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-15 22:57:29,514 - INFO - orders - Pending order placement request received - User ID: 14, Symbol: BTCUSD, Type: BUY_LIMIT, Quantity: 1
2025-07-15 22:57:29,536 - INFO - orders - Calculated contract_value for pending order: 1.00000000 (contract_size: 1.00000000 * quantity: 1)
2025-07-15 22:57:29,537 - INFO - orders - [DEBUG] User data from cache: {'id': 14, 'email': 'cursordemo3@gmail.com', 'account_number': 'DB7JG', 'group_name': 'Standard', 'leverage': Decimal('100.00'), 'wallet_balance': Decimal('9902.02000000'), 'margin': Decimal('0E-8'), 'user_type': 'live', 'first_name': None, 'last_name': None, 'country': 'India', 'phone_number': Decimal('918618025298')}
2025-07-15 22:57:29,537 - INFO - orders - [DEBUG] Group name: Standard
2025-07-15 22:57:29,538 - INFO - orders - User 14 is_barclays_live_user: True (user_type: live, sending_orders_normalized: barclays)
2025-07-15 22:57:29,543 - INFO - orders - [SYMBOL_INFO] Retrieved external symbol info for BTCUSD: contract_size=1.00000000, profit_currency=USD, digit=2.00000
2025-07-15 22:57:29,831 - INFO - orders - [MARGIN_CALC] Market data for BTCUSD: {'b': '117860.2000000000', 'o': '117860.1000000000'}
2025-07-15 22:57:29,831 - WARNING - orders - [MARGIN_CALC] Missing ask price for BTCUSD, using bid price with spread: bid=117860.2000000000, ask=117871.98602000000000
2025-07-15 22:57:29,831 - INFO - orders - [MARGIN_CALC] Using prices for BTCUSD: bid=117860.2000000000, ask=117871.98602000000000
2025-07-15 22:57:29,831 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: BTCUSD, Type: BUY_LIMIT, Qty: 1, Price: 117871.98602000000000, Margin: 23574.40, Commission: 589.36
2025-07-15 22:57:29,831 - INFO - orders - Calculated initial margin: 23574.40, commission: 589.36 for pending order 1000322-001
2025-07-15 22:57:29,852 - INFO - orders - [DEBUG][pending_order] Prepared order_data_for_internal_processing: {'order_id': '1000322-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY_LIMIT', 'order_quantity': Decimal('1'), 'order_price': Decimal('123'), 'user_type': 'live', 'status': 'PENDING', 'stop_loss': Decimal('0'), 'take_profit': Decimal('0'), 'stoploss_id': '1000323-005', 'takeprofit_id': '1000324-006', 'order_user_id': 14, 'order_status': 'PENDING_PROCESSING', 'contract_value': Decimal('1.00000000'), 'margin': Decimal('23574.40'), 'commission': Decimal('589.36'), 'open_time': None}
2025-07-15 22:57:29,852 - INFO - orders - [BARCLAYS] Setting initial order_status to PENDING_PROCESSING for Barclays user. Will be updated to PENDING after service provider confirmation.
2025-07-15 22:57:29,852 - INFO - orders - Placing PENDING order: BUY_LIMIT for user 14 at price 123
2025-07-15 22:57:29,853 - INFO - orders - [ENTER-CRUD] create_order called with: {'order_id': '1000322-001', 'order_status': 'PENDING_PROCESSING', 'order_user_id': 14, 'order_company_name': 'BTCUSD', 'order_type': 'BUY_LIMIT', 'order_price': Decimal('123'), 'order_quantity': Decimal('1'), 'contract_value': Decimal('1.00000000'), 'margin': Decimal('23574.40'), 'commission': Decimal('589.36'), 'status': 'PENDING', 'stop_loss': Decimal('0'), 'take_profit': Decimal('0'), 'stoploss_id': '1000323-005', 'takeprofit_id': '1000324-006', 'close_id': None}
2025-07-15 22:57:29,874 - INFO - orders - Order 1000322-001 verified in database on attempt 1 before adding to Redis.
2025-07-15 22:57:29,875 - INFO - orders - Skipping Redis storage for Barclays user pending order 1000322-001
2025-07-15 22:57:29,884 - INFO - orders - [PERF] TOTAL place_order: 0.3714s
2025-07-15 22:57:29,906 - INFO - orders - Background balance/margin cache updated for user 14: balance=9902.02000000, margin=0.0
2025-07-15 22:57:29,916 - INFO - orders - [BARCLAYS] barclays_push called for user 14, is_barclays_live_user=True
2025-07-15 22:58:13,518 - INFO - orders - Service provider update request received: {"order_id":"1000322-001","order_status":"PENDING","status":"PENDING"}
2025-07-15 22:58:13,533 - INFO - orders - Original order status: PENDING_PROCESSING
2025-07-15 22:58:13,533 - INFO - orders - Update fields: {'order_id': '1000322-001', 'order_status': 'PENDING', 'status': 'PENDING'}
2025-07-15 22:58:13,533 - INFO - orders - Processing regular update for order 1000322-001
2025-07-15 22:58:13,560 - INFO - orders - Balance/margin cache updated for user 14: balance=9902.02000000, margin=0.0
2025-07-15 22:58:13,560 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-15 22:58:13,560 - INFO - orders - Using order model: UserOrder
2025-07-15 22:58:13,563 - INFO - orders - Fetched 0 open orders for user 14
2025-07-15 22:58:13,566 - INFO - orders - Fetched 1 pending orders for user 14
2025-07-15 22:58:13,567 - INFO - orders - Updated static orders cache for user 14 with 0 open orders and 1 pending orders
2025-07-15 22:58:13,573 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=0.0
2025-07-15 22:58:14,627 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-15 22:58:14,628 - INFO - orders - Using order model: UserOrder
2025-07-15 22:58:14,631 - INFO - orders - Fetched 0 open orders for user 14
2025-07-15 22:58:14,634 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-15 22:58:14,636 - INFO - orders - Updated static orders cache for user 14 with 0 open orders and 0 pending orders
2025-07-15 22:58:14,642 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=0.0
2025-07-15 22:58:25,772 - INFO - orders - Pending order placement request received - User ID: 14, Symbol: BTCUSD, Type: BUY_LIMIT, Quantity: 1
2025-07-15 22:58:25,798 - INFO - orders - Calculated contract_value for pending order: 1.00000000 (contract_size: 1.00000000 * quantity: 1)
2025-07-15 22:58:25,800 - INFO - orders - [DEBUG] User data from cache: {'id': 14, 'email': 'cursordemo3@gmail.com', 'group_name': 'Standard', 'leverage': Decimal('100.00'), 'user_type': 'live', 'account_number': 'DB7JG', 'wallet_balance': Decimal('9902.02000000'), 'margin': Decimal('0.0'), 'first_name': None, 'last_name': None, 'country': 'India', 'phone_number': Decimal('918618025298')}
2025-07-15 22:58:25,800 - INFO - orders - [DEBUG] Group name: Standard
2025-07-15 22:58:25,801 - INFO - orders - User 14 is_barclays_live_user: True (user_type: live, sending_orders_normalized: barclays)
2025-07-15 22:58:25,803 - INFO - orders - [SYMBOL_INFO] Retrieved external symbol info for BTCUSD: contract_size=1.00000000, profit_currency=USD, digit=2.00000
2025-07-15 22:58:26,208 - INFO - orders - [MARGIN_CALC] Market data for BTCUSD: {'b': '117849.8000000000', 'o': '117849.7000000000'}
2025-07-15 22:58:26,208 - WARNING - orders - [MARGIN_CALC] Missing ask price for BTCUSD, using bid price with spread: bid=117849.8000000000, ask=117861.58498000000000
2025-07-15 22:58:26,209 - INFO - orders - [MARGIN_CALC] Using prices for BTCUSD: bid=117849.8000000000, ask=117861.58498000000000
2025-07-15 22:58:26,209 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: BTCUSD, Type: BUY_LIMIT, Qty: 1, Price: 117861.58498000000000, Margin: 23572.32, Commission: 589.31
2025-07-15 22:58:26,209 - INFO - orders - Calculated initial margin: 23572.32, commission: 589.31 for pending order 1000326-001
2025-07-15 22:58:26,230 - INFO - orders - [DEBUG][pending_order] Prepared order_data_for_internal_processing: {'order_id': '1000326-001', 'order_company_name': 'BTCUSD', 'order_type': 'BUY_LIMIT', 'order_quantity': Decimal('1'), 'order_price': Decimal('155'), 'user_type': 'live', 'status': 'PENDING', 'stop_loss': Decimal('0'), 'take_profit': Decimal('0'), 'stoploss_id': '1000327-005', 'takeprofit_id': '1000328-006', 'order_user_id': 14, 'order_status': 'PENDING_PROCESSING', 'contract_value': Decimal('1.00000000'), 'margin': Decimal('23572.32'), 'commission': Decimal('589.31'), 'open_time': None}
2025-07-15 22:58:26,230 - INFO - orders - [BARCLAYS] Setting initial order_status to PENDING_PROCESSING for Barclays user. Will be updated to PENDING after service provider confirmation.
2025-07-15 22:58:26,230 - INFO - orders - Placing PENDING order: BUY_LIMIT for user 14 at price 155
2025-07-15 22:58:26,230 - INFO - orders - [ENTER-CRUD] create_order called with: {'order_id': '1000326-001', 'order_status': 'PENDING_PROCESSING', 'order_user_id': 14, 'order_company_name': 'BTCUSD', 'order_type': 'BUY_LIMIT', 'order_price': Decimal('155'), 'order_quantity': Decimal('1'), 'contract_value': Decimal('1.00000000'), 'margin': Decimal('23572.32'), 'commission': Decimal('589.31'), 'status': 'PENDING', 'stop_loss': Decimal('0'), 'take_profit': Decimal('0'), 'stoploss_id': '1000327-005', 'takeprofit_id': '1000328-006', 'close_id': None}
2025-07-15 22:58:26,254 - INFO - orders - Order 1000326-001 verified in database on attempt 1 before adding to Redis.
2025-07-15 22:58:26,255 - INFO - orders - Skipping Redis storage for Barclays user pending order 1000326-001
2025-07-15 22:58:26,276 - INFO - orders - [PERF] TOTAL place_order: 0.5042s
2025-07-15 22:58:26,318 - INFO - orders - Background balance/margin cache updated for user 14: balance=9902.02000000, margin=0.0
2025-07-15 22:58:26,333 - INFO - orders - [BARCLAYS] barclays_push called for user 14, is_barclays_live_user=True
2025-07-15 22:58:33,065 - INFO - orders - Service provider update request received: {"order_id":"1000326-001","order_status":"PENDING","status":"PENDING"}
2025-07-15 22:58:33,072 - INFO - orders - Original order status: PENDING_PROCESSING
2025-07-15 22:58:33,072 - INFO - orders - Update fields: {'order_id': '1000326-001', 'order_status': 'PENDING', 'status': 'PENDING'}
2025-07-15 22:58:33,072 - INFO - orders - Processing regular update for order 1000326-001
2025-07-15 22:58:33,101 - INFO - orders - Balance/margin cache updated for user 14: balance=9902.02000000, margin=0.0
2025-07-15 22:58:33,101 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-15 22:58:33,102 - INFO - orders - Using order model: UserOrder
2025-07-15 22:58:33,105 - INFO - orders - Fetched 0 open orders for user 14
2025-07-15 22:58:33,108 - INFO - orders - Fetched 1 pending orders for user 14
2025-07-15 22:58:33,108 - INFO - orders - Updated static orders cache for user 14 with 0 open orders and 1 pending orders
2025-07-15 22:58:33,113 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=0.0
2025-07-15 22:58:33,685 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-15 22:58:33,686 - INFO - orders - Using order model: UserOrder
2025-07-15 22:58:33,696 - INFO - orders - Fetched 0 open orders for user 14
2025-07-15 22:58:33,718 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-15 22:58:33,731 - INFO - orders - Updated static orders cache for user 14 with 0 open orders and 0 pending orders
2025-07-15 22:58:33,753 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=0.0
2025-07-15 22:58:36,160 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-15 22:58:46,575 - INFO - orders - [get_closed_orders] user_type: live
2025-07-15 22:59:00,969 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-15 23:00:08,704 - INFO - orders - Order placement request received - User: 14, Symbol: BTCUSD, Type: BUY
2025-07-15 23:00:09,062 - INFO - orders - [MARGIN_CALC] Market data for BTCUSD: {'b': '117858.5000000000', 'o': '117858.4000000000'}
2025-07-15 23:00:09,062 - WARNING - orders - [MARGIN_CALC] Missing ask price for BTCUSD, using bid price with spread: bid=117858.5000000000, ask=117870.28585000000000
2025-07-15 23:00:09,062 - INFO - orders - [MARGIN_CALC] Using prices for BTCUSD: bid=117858.5000000000, ask=117870.28585000000000
2025-07-15 23:00:09,062 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: BTCUSD, Type: BUY, Qty: 0.4, Price: 117870.28585000000000, Margin: 9429.62, Commission: 235.74
2025-07-15 23:00:09,062 - INFO - orders - [HEDGING_MARGIN_DEBUG] Starting hedging calculation for User: 14, Symbol: BTCUSD, OrderType: BUY, Quantity: 0.4, FullMargin: 9429.62
2025-07-15 23:00:09,063 - INFO - orders - [HEDGING_MARGIN_DEBUG] Existing open orders count: 0
2025-07-15 23:00:09,063 - INFO - orders - [HEDGING_MARGIN_DEBUG] Created simulated order: Type=BUY, Qty=0.4, Margin=9429.62
2025-07-15 23:00:09,063 - INFO - orders - [HEDGING_MARGIN_DEBUG] About to calculate margin before and after for 0 existing orders + 1 new order
2025-07-15 23:00:09,063 - INFO - orders - [HEDGING_MARGIN_DEBUG] Executing margin calculation tasks...
2025-07-15 23:00:09,064 - INFO - orders - [MARGIN_TOTAL_CONTRIB] No open positions for User 14, Symbol BTCUSD. Returning zero margin.
2025-07-15 23:00:09,064 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-15 23:00:09,064 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.4, TotalSellQty=0, NetQty=0.4, IsHedged=False
2025-07-15 23:00:09,065 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23574.05')], HighestMarginPerLot=23574.05
2025-07-15 23:00:09,065 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9429.62
2025-07-15 23:00:09,065 - INFO - orders - [HEDGING_MARGIN_DEBUG] Margin calculation tasks completed
2025-07-15 23:00:09,065 - INFO - orders - [HEDGING_MARGIN_DEBUG] User: 14, Symbol: BTCUSD, OrderType: BUY, MarginBefore: 0.0, MarginAfter: 9429.62, AdditionalMargin: 9429.62, OpenOrders: 0
2025-07-15 23:00:09,066 - INFO - orders - [HEDGING_MARGIN_DEBUG] Simulated order: Type=BUY, Qty=0.4, Margin=9429.62
2025-07-15 23:00:09,066 - INFO - orders - [PERF] Order processing: 0.3594s
2025-07-15 23:00:09,080 - INFO - orders - [PERF] Order creation: 0.0136s
2025-07-15 23:00:09,080 - INFO - orders - is_barclays_live_user in place_order: True
2025-07-15 23:00:09,080 - INFO - orders - [BARCLAYS] Scheduling barclays_push in place_order
2025-07-15 23:00:09,080 - INFO - orders - [PERF] TOTAL place_order: 0.3811s
2025-07-15 23:00:09,105 - INFO - orders - Background balance/margin cache updated for user 14: balance=9902.02000000, margin=0.0
2025-07-15 23:00:09,117 - INFO - orders - [BARCLAYS] barclays_push called in place_order
2025-07-15 23:00:09,518 - INFO - orders - [PUBLISH_ASYNC] Triggering websocket updates for user 14
2025-07-15 23:02:06,574 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-15 23:02:07,705 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-15 23:02:07,705 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-15 23:02:07,705 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-15 23:02:07,705 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-15 23:02:11,777 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-15 23:02:11,777 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-15 23:02:12,705 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-15 23:02:17,717 - INFO - orders - Starting the users with orders cache updater task.
2025-07-15 23:02:22,556 - INFO - orders - [get_closed_orders] user_type: live
2025-07-15 23:02:24,089 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-15 23:02:31,260 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-15 23:02:31,260 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-15 23:02:31,260 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-15 23:02:31,260 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-15 23:02:31,260 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-15 23:02:31,260 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-15 23:02:31,260 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-15 23:02:31,260 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-15 23:02:31,260 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-15 23:02:31,293 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-15 23:02:31,293 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-15 23:02:31,293 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-15 23:02:31,293 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-15 23:02:31,293 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-15 23:02:52,383 - INFO - orders - Order 1000330-001 transitioning to OPEN. Calculating margin.
2025-07-15 23:02:52,384 - INFO - orders - Using fixed UserOrder model for Barclays service provider integration
2025-07-15 23:02:52,385 - INFO - orders - Using group_name: Standard for order 1000330-001
2025-07-15 23:02:52,753 - INFO - orders - [SYMBOL_INFO] Retrieved external symbol info for BTCUSD: contract_size=1.00000000, profit_currency=USD, digit=2.00000
2025-07-15 23:02:52,753 - INFO - orders - Using user's leverage from cache: 100.00
2025-07-15 23:02:52,753 - INFO - orders - [MARGIN_CALC] Market data for BTCUSD: {'b': '117772.3300000000', 'o': '117772.3300000000'}
2025-07-15 23:02:52,754 - WARNING - orders - [MARGIN_CALC] Missing ask price for BTCUSD, using bid price with spread: bid=117772.3300000000, ask=117784.10723300000000
2025-07-15 23:02:52,754 - INFO - orders - [MARGIN_CALC] Using prices for BTCUSD: bid=117772.3300000000, ask=117784.10723300000000
2025-07-15 23:02:52,754 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: BTCUSD, Type: BUY, Qty: 0.40000000, Price: 117784.10723300000000, Margin: 9422.73, Commission: 235.57
2025-07-15 23:02:52,754 - INFO - orders - New margin calculated: 9422.73, contract_value: 0.40
2025-07-15 23:02:52,754 - INFO - orders - [MARGIN] Final stored margin (USD): 9422.73
2025-07-15 23:02:52,754 - INFO - orders - Recalculating total hedged margin for user 14 on symbol BTCUSD
2025-07-15 23:02:52,757 - INFO - orders - Found 0 existing open positions for this symbol
2025-07-15 23:02:52,757 - INFO - orders - [MARGIN_TOTAL_CONTRIB] No open positions for User 14, Symbol BTCUSD. Returning zero margin.
2025-07-15 23:02:52,757 - INFO - orders - Old total margin for BTCUSD: 0.0
2025-07-15 23:02:52,757 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-15 23:02:52,757 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-15 23:02:52,757 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-15 23:02:52,757 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-15 23:02:52,757 - INFO - orders - New total margin for BTCUSD: 9422.73
2025-07-15 23:02:52,757 - INFO - orders - Margin change for user 14: 9422.73
2025-07-15 23:02:52,762 - INFO - orders - User 14 margin updated from 0 to 9422.73
2025-07-15 23:02:52,804 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-15 23:02:52,804 - INFO - orders - Using order model: UserOrder
2025-07-15 23:02:52,808 - INFO - orders - Fetched 1 open orders for user 14
2025-07-15 23:02:52,811 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-15 23:02:52,811 - INFO - orders - Updated static orders cache for user 14 with 1 open orders and 0 pending orders
2025-07-15 23:02:52,815 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-15 23:02:52,815 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-15 23:02:52,815 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-15 23:02:52,815 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-15 23:02:52,815 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9422.73
2025-07-15 23:02:52,817 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9422.73
2025-07-15 23:05:06,107 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-15 23:05:09,105 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-15 23:05:09,106 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-15 23:05:09,106 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-15 23:05:09,106 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-15 23:05:09,106 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9422.73
2025-07-15 23:42:01,629 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-15 23:42:02,577 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-15 23:42:02,577 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-15 23:42:02,577 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-15 23:42:02,578 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-15 23:42:06,658 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-15 23:42:06,659 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-15 23:42:07,586 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-15 23:42:12,585 - INFO - orders - Starting the users with orders cache updater task.
2025-07-15 23:42:16,117 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-15 23:42:24,845 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-15 23:42:26,967 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-15 23:42:26,967 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-15 23:42:26,967 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-15 23:42:26,967 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-15 23:42:26,967 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-15 23:42:26,967 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-15 23:42:26,967 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-15 23:42:26,968 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-15 23:42:26,968 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-15 23:42:27,023 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-15 23:42:27,023 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-15 23:42:27,023 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-15 23:42:27,023 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-15 23:42:27,023 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-15 23:42:27,343 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-15 23:42:27,343 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-15 23:42:27,343 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-15 23:42:27,343 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-15 23:42:27,344 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9422.73
2025-07-15 23:42:27,570 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-15 23:42:27,570 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-15 23:42:27,570 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-15 23:42:27,570 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-15 23:42:27,570 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9422.73
2025-07-16 00:08:02,102 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 00:08:03,261 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 00:08:03,261 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 00:08:03,261 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 00:08:03,262 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 00:08:07,327 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 00:08:07,327 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 00:08:08,244 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 00:08:13,244 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 00:08:21,975 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 00:08:21,975 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 00:08:21,976 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 00:08:21,976 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 00:08:21,976 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9422.73
2025-07-16 00:08:26,455 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 00:08:26,455 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 00:08:26,455 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 00:08:26,455 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 00:08:26,455 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 00:08:26,455 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 00:08:26,455 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 00:08:26,455 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 00:08:26,455 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 00:08:26,498 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 00:08:26,498 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 00:08:26,498 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 00:08:26,498 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 00:08:26,498 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 00:13:26,766 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 00:13:26,766 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 00:13:26,766 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 00:13:26,766 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 00:13:26,766 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9422.73
2025-07-16 00:13:26,890 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 00:13:26,890 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 00:13:26,890 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 00:13:26,891 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 00:13:26,891 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 00:13:26,891 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 00:13:26,891 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 00:13:26,891 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 00:13:26,891 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 00:13:26,898 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 00:13:26,898 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 00:13:26,898 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 00:13:26,898 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 00:13:26,898 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 00:18:27,000 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 00:18:27,000 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 00:18:27,000 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 00:18:27,000 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 00:18:27,000 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9422.73
2025-07-16 00:18:27,067 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 00:18:27,067 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 00:18:27,067 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 00:18:27,067 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 00:18:27,067 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 00:18:27,067 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 00:18:27,067 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 00:18:27,067 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 00:18:27,067 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 00:18:27,073 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 00:18:27,073 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 00:18:27,073 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 00:18:27,073 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 00:18:27,073 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 00:22:13,499 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 00:22:14,677 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 00:22:14,677 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 00:22:14,677 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 00:22:14,677 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 00:22:18,775 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 00:22:18,775 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 00:22:19,678 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 00:22:24,686 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 00:22:31,708 - INFO - orders - Starting update_user_static_orders for user 1, user_type demo
2025-07-16 00:22:31,708 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 00:22:31,712 - INFO - orders - Fetched 2 open orders for user 1
2025-07-16 00:22:31,715 - INFO - orders - Fetched 1 pending orders for user 1
2025-07-16 00:22:33,743 - INFO - orders - Updated static orders cache for user 1 with 2 open orders and 1 pending orders
2025-07-16 00:22:33,763 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 00:22:33,763 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 00:22:33,764 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 00:22:33,764 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 00:22:33,764 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 00:22:33,779 - INFO - orders - User 1: Updated balance/margin cache after static orders update - balance=17011.54000000, margin=6.54
2025-07-16 00:24:16,887 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 00:24:17,847 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 00:24:17,847 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 00:24:17,847 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 00:24:17,848 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 00:24:21,942 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 00:24:21,943 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 00:24:22,854 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 00:24:27,854 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 00:24:37,349 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 00:24:37,349 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 00:24:37,349 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 00:24:37,349 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 00:24:37,349 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9422.73
2025-07-16 00:24:41,858 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 00:24:41,858 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 00:24:41,858 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 00:24:41,859 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 00:24:41,859 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 00:24:41,859 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 00:24:41,859 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 00:24:41,859 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 00:24:41,859 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 01:30:34,501 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 01:30:35,613 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 01:30:35,613 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 01:30:35,613 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 01:30:35,613 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 01:30:39,684 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 01:30:39,684 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 01:30:40,619 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 01:30:45,622 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 01:30:56,811 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 01:30:56,811 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 01:30:56,811 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 01:30:56,811 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 01:30:56,811 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9422.73
2025-07-16 01:30:56,961 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 01:30:56,962 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 01:30:56,962 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 01:30:56,962 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 01:30:56,962 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 01:30:56,962 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 01:30:56,962 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 01:30:56,962 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 01:30:56,962 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 01:30:56,986 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 01:30:56,986 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 01:30:56,986 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 01:30:56,986 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 01:30:56,987 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 01:35:57,170 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 01:35:57,170 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 01:35:57,170 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 01:35:57,170 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 01:35:57,170 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9422.73
2025-07-16 01:35:57,223 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 01:35:57,223 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 01:35:57,223 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 01:35:57,223 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 01:35:57,223 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 01:35:57,223 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 01:35:57,223 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 01:35:57,223 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 01:35:57,223 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 01:35:57,234 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 01:35:57,234 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 01:35:57,234 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 01:35:57,234 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 01:35:57,234 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 01:40:57,313 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 01:40:57,313 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 01:40:57,313 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 01:40:57,313 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 01:40:57,313 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9422.73
2025-07-16 01:40:57,363 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 01:40:57,363 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 01:40:57,363 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 01:40:57,363 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 01:40:57,363 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 01:40:57,364 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 01:40:57,364 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 01:40:57,364 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 01:40:57,364 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 01:40:57,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 01:40:57,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 01:40:57,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 01:40:57,370 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 01:40:57,370 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 01:48:53,557 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 01:48:53,557 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 01:48:53,558 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 01:48:53,558 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 01:48:53,558 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9422.73
2025-07-16 01:48:53,650 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 01:48:53,650 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 01:48:53,650 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 01:48:53,650 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 01:48:53,650 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 01:48:53,650 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 01:48:53,650 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 01:48:53,650 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 01:48:53,650 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 01:48:53,655 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 01:48:53,655 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 01:48:53,655 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 01:48:53,656 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 01:48:53,656 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 01:49:20,023 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-16 01:49:20,581 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 01:49:20,581 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 01:49:20,581 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 01:49:20,581 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 01:49:20,581 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9422.73
2025-07-16 01:49:28,130 - INFO - orders - Order close request received - Order ID: 1000330-001, User ID: 14, Close Price: 118680
2025-07-16 01:49:28,130 - INFO - orders - Request to close order 1000330-001 for user 14 (user_type: live) with price 118680. Frontend provided type: BUY, company: BTCUSD, status: CLOSED, frontend_status: CLOSED.
2025-07-16 01:49:28,165 - INFO - orders - User group: Standard, sending_orders setting: barclays
2025-07-16 01:49:28,166 - INFO - orders - Live user 14 from group 'Standard' has 'sending_orders' set to 'barclays'. Pushing close request to Firebase and skipping local DB update.
2025-07-16 01:49:28,175 - INFO - orders - [FIREBASE_CLOSE_REQUEST] Preparing to send payload for user-initiated close: {'order_id': '1000330-001', 'close_price': '118680', 'user_id': 14, 'order_type': 'BUY', 'order_company_name': 'BTCUSD', 'order_quantity': '0.40000000', 'contract_value': '0.40000000', 'order_status': 'CLOSED', 'status': 'CLOSED', 'action': 'close_order', 'close_id': '1000331-003'}
2025-07-16 01:49:52,414 - INFO - orders - Order placement request received - User: 14, Symbol: AUDJPY, Type: BUY
2025-07-16 01:49:52,839 - INFO - orders - [MARGIN_CALC] Market data for AUDJPY: {'b': '97.0330000000', 'o': '97.0270000000'}
2025-07-16 01:49:52,839 - WARNING - orders - [MARGIN_CALC] Missing ask price for AUDJPY, using bid price with spread: bid=97.0330000000, ask=97.04270330000000
2025-07-16 01:49:52,839 - INFO - orders - [MARGIN_CALC] Using prices for AUDJPY: bid=97.0330000000, ask=97.04270330000000
2025-07-16 01:49:52,840 - INFO - orders - [CURRENCY_CONVERT] Starting conversion of 9704.27 JPY to USD for margin_calculation (user_id: 14, position: None)
2025-07-16 01:49:52,841 - INFO - orders - [CURRENCY_CONVERT] Trying direct conversion with symbol: JPYUSD
2025-07-16 01:49:52,842 - INFO - orders - [CURRENCY_CONVERT] Direct conversion prices from cache: None
2025-07-16 01:49:52,842 - INFO - orders - [CURRENCY_CONVERT] No direct conversion rate found for JPYUSD, trying inverse
2025-07-16 01:49:52,843 - INFO - orders - [CURRENCY_CONVERT] Trying inverse conversion with symbol: USDJPY
2025-07-16 01:49:52,844 - INFO - orders - [CURRENCY_CONVERT] Inverse conversion prices from cache: {'b': Decimal('148.8640000000'), 'o': Decimal('148.8590000000')}
2025-07-16 01:49:52,845 - INFO - orders - [CURRENCY_CONVERT] Found inverse conversion rate (bid): 148.8640000000
2025-07-16 01:49:52,845 - INFO - orders - [CURRENCY_CONVERT] Inverse conversion successful: 9704.27 JPY / 148.8640000000 = 65.18883007308684436801375752 USD
2025-07-16 01:49:52,845 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: AUDJPY, Type: BUY, Qty: 0.1, Price: 97.04270330000000, Margin: 65.18883007308684436801375752, Commission: 1.00
2025-07-16 01:49:52,845 - INFO - orders - [HEDGING_MARGIN_DEBUG] Starting hedging calculation for User: 14, Symbol: AUDJPY, OrderType: BUY, Quantity: 0.1, FullMargin: 65.18883007308684436801375752
2025-07-16 01:49:52,845 - INFO - orders - [HEDGING_MARGIN_DEBUG] Existing open orders count: 0
2025-07-16 01:49:52,845 - INFO - orders - [HEDGING_MARGIN_DEBUG] Created simulated order: Type=BUY, Qty=0.1, Margin=65.18883007308684436801375752
2025-07-16 01:49:52,846 - INFO - orders - [HEDGING_MARGIN_DEBUG] About to calculate margin before and after for 0 existing orders + 1 new order
2025-07-16 01:49:52,846 - INFO - orders - [HEDGING_MARGIN_DEBUG] Executing margin calculation tasks...
2025-07-16 01:49:52,846 - INFO - orders - [MARGIN_TOTAL_CONTRIB] No open positions for User 14, Symbol AUDJPY. Returning zero margin.
2025-07-16 01:49:52,846 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol AUDJPY
2025-07-16 01:49:52,846 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.1, TotalSellQty=0, NetQty=0.1, IsHedged=False
2025-07-16 01:49:52,847 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('651.8883007308684436801375752')], HighestMarginPerLot=651.8883007308684436801375752
2025-07-16 01:49:52,847 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=65.19
2025-07-16 01:49:52,847 - INFO - orders - [HEDGING_MARGIN_DEBUG] Margin calculation tasks completed
2025-07-16 01:49:52,847 - INFO - orders - [HEDGING_MARGIN_DEBUG] User: 14, Symbol: AUDJPY, OrderType: BUY, MarginBefore: 0.0, MarginAfter: 65.19, AdditionalMargin: 65.19, OpenOrders: 0
2025-07-16 01:49:52,847 - INFO - orders - [HEDGING_MARGIN_DEBUG] Simulated order: Type=BUY, Qty=0.1, Margin=65.18883007308684436801375752
2025-07-16 01:49:52,848 - INFO - orders - [PERF] Order processing: 0.4322s
2025-07-16 01:49:52,890 - INFO - orders - [PERF] Order creation: 0.0416s
2025-07-16 01:49:52,890 - INFO - orders - is_barclays_live_user in place_order: True
2025-07-16 01:49:52,891 - INFO - orders - [BARCLAYS] Scheduling barclays_push in place_order
2025-07-16 01:49:52,891 - INFO - orders - [PERF] TOTAL place_order: 0.4779s
2025-07-16 01:49:52,924 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 01:49:52,925 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 01:49:52,926 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 01:49:52,926 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 01:49:52,926 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9422.73
2025-07-16 01:49:52,952 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 01:49:52,953 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 01:49:52,953 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 01:49:52,953 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 01:49:52,953 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9422.73
2025-07-16 01:49:52,962 - INFO - orders - Background balance/margin cache updated for user 14: balance=9902.02000000, margin=9422.73
2025-07-16 01:49:53,341 - INFO - orders - [BARCLAYS] barclays_push called in place_order
2025-07-16 01:49:53,705 - INFO - orders - [PUBLISH_ASYNC] Triggering websocket updates for user 14
2025-07-16 01:50:57,448 - INFO - orders - Order 1000332-001 transitioning to OPEN. Calculating margin.
2025-07-16 01:50:57,448 - INFO - orders - Using fixed UserOrder model for Barclays service provider integration
2025-07-16 01:50:57,448 - INFO - orders - Using group_name: Standard for order 1000332-001
2025-07-16 01:50:57,813 - INFO - orders - [SYMBOL_INFO] Retrieved external symbol info for AUDJPY: contract_size=100000.00000000, profit_currency=JPY, digit=3.00000
2025-07-16 01:50:57,813 - INFO - orders - Using user's leverage from cache: 100.00
2025-07-16 01:50:57,814 - INFO - orders - [MARGIN_CALC] Market data for AUDJPY: {'b': '97.0370000000', 'o': '97.0320000000'}
2025-07-16 01:50:57,814 - WARNING - orders - [MARGIN_CALC] Missing ask price for AUDJPY, using bid price with spread: bid=97.0370000000, ask=97.04670370000000
2025-07-16 01:50:57,814 - INFO - orders - [MARGIN_CALC] Using prices for AUDJPY: bid=97.0370000000, ask=97.04670370000000
2025-07-16 01:50:57,815 - INFO - orders - [CURRENCY_CONVERT] Starting conversion of 9704.67 JPY to USD for margin_calculation (user_id: 14, position: None)
2025-07-16 01:50:57,815 - INFO - orders - [CURRENCY_CONVERT] Trying direct conversion with symbol: JPYUSD
2025-07-16 01:50:57,816 - INFO - orders - [CURRENCY_CONVERT] Direct conversion prices from cache: None
2025-07-16 01:50:57,816 - INFO - orders - [CURRENCY_CONVERT] No direct conversion rate found for JPYUSD, trying inverse
2025-07-16 01:50:57,817 - INFO - orders - [CURRENCY_CONVERT] Trying inverse conversion with symbol: USDJPY
2025-07-16 01:50:57,818 - INFO - orders - [CURRENCY_CONVERT] Inverse conversion prices from cache: {'b': Decimal('148.8100000000'), 'o': Decimal('148.8080000000')}
2025-07-16 01:50:57,818 - INFO - orders - [CURRENCY_CONVERT] Found inverse conversion rate (bid): 148.8100000000
2025-07-16 01:50:57,818 - INFO - orders - [CURRENCY_CONVERT] Inverse conversion successful: 9704.67 JPY / 148.8100000000 = 65.21517371144412337880518782 USD
2025-07-16 01:50:57,818 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: AUDJPY, Type: BUY, Qty: 0.10000000, Price: 97.04670370000000, Margin: 65.21517371144412337880518782, Commission: 1.00
2025-07-16 01:50:57,819 - INFO - orders - New margin calculated: 65.21517371144412337880518782, contract_value: 10000.00
2025-07-16 01:50:57,819 - INFO - orders - [MARGIN] Final stored margin (USD): 65.21517371144412337880518782
2025-07-16 01:50:57,819 - INFO - orders - Recalculating total hedged margin for user 14 on symbol AUDJPY
2025-07-16 01:50:57,823 - INFO - orders - Found 0 existing open positions for this symbol
2025-07-16 01:50:57,824 - INFO - orders - [MARGIN_TOTAL_CONTRIB] No open positions for User 14, Symbol AUDJPY. Returning zero margin.
2025-07-16 01:50:57,824 - INFO - orders - Old total margin for AUDJPY: 0.0
2025-07-16 01:50:57,824 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol AUDJPY
2025-07-16 01:50:57,825 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.10000000, TotalSellQty=0, NetQty=0.10000000, IsHedged=False
2025-07-16 01:50:57,825 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371144412337880518782')], HighestMarginPerLot=652.1517371144412337880518782
2025-07-16 01:50:57,825 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=65.22
2025-07-16 01:50:57,825 - INFO - orders - New total margin for AUDJPY: 65.22
2025-07-16 01:50:57,825 - INFO - orders - Margin change for user 14: 65.22
2025-07-16 01:50:57,833 - INFO - orders - User 14 margin updated from 9422.73000000 to 9487.95000000
2025-07-16 01:50:57,887 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 01:50:57,887 - INFO - orders - Using order model: UserOrder
2025-07-16 01:50:57,893 - INFO - orders - Fetched 2 open orders for user 14
2025-07-16 01:50:57,899 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 01:50:57,901 - INFO - orders - Updated static orders cache for user 14 with 2 open orders and 0 pending orders
2025-07-16 01:50:57,907 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 01:50:57,907 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 01:50:57,907 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 01:50:57,907 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 01:50:57,907 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol AUDJPY
2025-07-16 01:50:57,907 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.10000000, TotalSellQty=0, NetQty=0.10000000, IsHedged=False
2025-07-16 01:50:57,907 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371')], HighestMarginPerLot=652.1517371
2025-07-16 01:50:57,907 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=65.22
2025-07-16 01:50:57,908 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9487.95
2025-07-16 01:50:57,911 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9487.95
2025-07-16 01:51:53,924 - INFO - orders - Order placement request received - User: 14, Symbol: AUDJPY, Type: BUY
2025-07-16 01:51:54,311 - INFO - orders - [MARGIN_CALC] Market data for AUDJPY: {'b': '97.0470000000', 'o': '97.0440000000'}
2025-07-16 01:51:54,312 - WARNING - orders - [MARGIN_CALC] Missing ask price for AUDJPY, using bid price with spread: bid=97.0470000000, ask=97.05670470000000
2025-07-16 01:51:54,312 - INFO - orders - [MARGIN_CALC] Using prices for AUDJPY: bid=97.0470000000, ask=97.05670470000000
2025-07-16 01:51:54,312 - INFO - orders - [CURRENCY_CONVERT] Starting conversion of 970.57 JPY to USD for margin_calculation (user_id: 14, position: None)
2025-07-16 01:51:54,312 - INFO - orders - [CURRENCY_CONVERT] Trying direct conversion with symbol: JPYUSD
2025-07-16 01:51:54,313 - INFO - orders - [CURRENCY_CONVERT] Direct conversion prices from cache: None
2025-07-16 01:51:54,313 - INFO - orders - [CURRENCY_CONVERT] No direct conversion rate found for JPYUSD, trying inverse
2025-07-16 01:51:54,314 - INFO - orders - [CURRENCY_CONVERT] Trying inverse conversion with symbol: USDJPY
2025-07-16 01:51:54,314 - INFO - orders - [CURRENCY_CONVERT] Inverse conversion prices from cache: {'b': Decimal('148.8170000000'), 'o': Decimal('148.8130000000')}
2025-07-16 01:51:54,314 - INFO - orders - [CURRENCY_CONVERT] Found inverse conversion rate (bid): 148.8170000000
2025-07-16 01:51:54,315 - INFO - orders - [CURRENCY_CONVERT] Inverse conversion successful: 970.57 JPY / 148.8170000000 = 6.521902739606362176364259460 USD
2025-07-16 01:51:54,315 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: AUDJPY, Type: BUY, Qty: 0.01, Price: 97.05670470000000, Margin: 6.521902739606362176364259460, Commission: 0.10
2025-07-16 01:51:54,315 - INFO - orders - [HEDGING_MARGIN_DEBUG] Starting hedging calculation for User: 14, Symbol: AUDJPY, OrderType: BUY, Quantity: 0.01, FullMargin: 6.521902739606362176364259460
2025-07-16 01:51:54,315 - INFO - orders - [HEDGING_MARGIN_DEBUG] Existing open orders count: 1
2025-07-16 01:51:54,315 - INFO - orders - [HEDGING_MARGIN_DEBUG] Created simulated order: Type=BUY, Qty=0.01, Margin=6.521902739606362176364259460
2025-07-16 01:51:54,315 - INFO - orders - [HEDGING_MARGIN_DEBUG] About to calculate margin before and after for 1 existing orders + 1 new order
2025-07-16 01:51:54,315 - INFO - orders - [HEDGING_MARGIN_DEBUG] Executing margin calculation tasks...
2025-07-16 01:51:54,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol AUDJPY
2025-07-16 01:51:54,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.10000000, TotalSellQty=0, NetQty=0.10000000, IsHedged=False
2025-07-16 01:51:54,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371')], HighestMarginPerLot=652.1517371
2025-07-16 01:51:54,317 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=65.22
2025-07-16 01:51:54,317 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 01:51:54,317 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 01:51:54,318 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.1902739606362176364259460')], HighestMarginPerLot=652.1902739606362176364259460
2025-07-16 01:51:54,318 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 01:51:54,318 - INFO - orders - [HEDGING_MARGIN_DEBUG] Margin calculation tasks completed
2025-07-16 01:51:54,318 - INFO - orders - [HEDGING_MARGIN_DEBUG] User: 14, Symbol: AUDJPY, OrderType: BUY, MarginBefore: 65.22, MarginAfter: 71.74, AdditionalMargin: 6.52, OpenOrders: 1
2025-07-16 01:51:54,318 - INFO - orders - [HEDGING_MARGIN_DEBUG] Simulated order: Type=BUY, Qty=0.01, Margin=6.521902739606362176364259460
2025-07-16 01:51:54,318 - INFO - orders - [PERF] Order processing: 0.3919s
2025-07-16 01:51:54,333 - INFO - orders - [PERF] Order creation: 0.0146s
2025-07-16 01:51:54,333 - INFO - orders - is_barclays_live_user in place_order: True
2025-07-16 01:51:54,334 - INFO - orders - [BARCLAYS] Scheduling barclays_push in place_order
2025-07-16 01:51:54,334 - INFO - orders - [PERF] TOTAL place_order: 0.4118s
2025-07-16 01:51:54,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 01:51:54,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 01:51:54,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 01:51:54,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 01:51:54,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol AUDJPY
2025-07-16 01:51:54,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.10000000, TotalSellQty=0, NetQty=0.10000000, IsHedged=False
2025-07-16 01:51:54,370 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371')], HighestMarginPerLot=652.1517371
2025-07-16 01:51:54,370 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=65.22
2025-07-16 01:51:54,370 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9487.95
2025-07-16 01:51:54,383 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 01:51:54,384 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 01:51:54,384 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 01:51:54,384 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 01:51:54,384 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol AUDJPY
2025-07-16 01:51:54,384 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.10000000, TotalSellQty=0, NetQty=0.10000000, IsHedged=False
2025-07-16 01:51:54,384 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371')], HighestMarginPerLot=652.1517371
2025-07-16 01:51:54,385 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=65.22
2025-07-16 01:51:54,385 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9487.95
2025-07-16 01:51:54,389 - INFO - orders - Background balance/margin cache updated for user 14: balance=9902.02000000, margin=9487.95
2025-07-16 01:51:55,013 - INFO - orders - [BARCLAYS] barclays_push called in place_order
2025-07-16 01:51:55,362 - INFO - orders - [PUBLISH_ASYNC] Triggering websocket updates for user 14
2025-07-16 01:52:19,434 - INFO - orders - Order 1000333-001 transitioning to OPEN. Calculating margin.
2025-07-16 01:52:19,434 - INFO - orders - Using fixed UserOrder model for Barclays service provider integration
2025-07-16 01:52:19,435 - INFO - orders - Using group_name: Standard for order 1000333-001
2025-07-16 01:52:19,854 - INFO - orders - [SYMBOL_INFO] Retrieved external symbol info for AUDJPY: contract_size=100000.00000000, profit_currency=JPY, digit=3.00000
2025-07-16 01:52:19,854 - INFO - orders - Using user's leverage from cache: 100.00
2025-07-16 01:52:19,854 - INFO - orders - [MARGIN_CALC] Market data for AUDJPY: {'b': '97.0420000000', 'o': '97.0410000000'}
2025-07-16 01:52:19,857 - WARNING - orders - [MARGIN_CALC] Missing ask price for AUDJPY, using bid price with spread: bid=97.0420000000, ask=97.05170420000000
2025-07-16 01:52:19,857 - INFO - orders - [MARGIN_CALC] Using prices for AUDJPY: bid=97.0420000000, ask=97.05170420000000
2025-07-16 01:52:19,866 - INFO - orders - [CURRENCY_CONVERT] Starting conversion of 970.52 JPY to USD for margin_calculation (user_id: 14, position: None)
2025-07-16 01:52:19,866 - INFO - orders - [CURRENCY_CONVERT] Trying direct conversion with symbol: JPYUSD
2025-07-16 01:52:19,871 - INFO - orders - [CURRENCY_CONVERT] Direct conversion prices from cache: None
2025-07-16 01:52:19,871 - INFO - orders - [CURRENCY_CONVERT] No direct conversion rate found for JPYUSD, trying inverse
2025-07-16 01:52:19,871 - INFO - orders - [CURRENCY_CONVERT] Trying inverse conversion with symbol: USDJPY
2025-07-16 01:52:19,874 - INFO - orders - [CURRENCY_CONVERT] Inverse conversion prices from cache: {'b': Decimal('148.8220000000'), 'o': Decimal('148.8200000000')}
2025-07-16 01:52:19,874 - INFO - orders - [CURRENCY_CONVERT] Found inverse conversion rate (bid): 148.8220000000
2025-07-16 01:52:19,874 - INFO - orders - [CURRENCY_CONVERT] Inverse conversion successful: 970.52 JPY / 148.8220000000 = 6.521347650213006141565091183 USD
2025-07-16 01:52:19,875 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: AUDJPY, Type: BUY, Qty: 0.01000000, Price: 97.05170420000000, Margin: 6.521347650213006141565091183, Commission: 0.10
2025-07-16 01:52:19,875 - INFO - orders - New margin calculated: 6.521347650213006141565091183, contract_value: 1000.00
2025-07-16 01:52:19,875 - INFO - orders - [MARGIN] Final stored margin (USD): 6.521347650213006141565091183
2025-07-16 01:52:19,875 - INFO - orders - Recalculating total hedged margin for user 14 on symbol AUDJPY
2025-07-16 01:52:19,882 - INFO - orders - Found 1 existing open positions for this symbol
2025-07-16 01:52:19,882 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol AUDJPY
2025-07-16 01:52:19,882 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.10000000, TotalSellQty=0, NetQty=0.10000000, IsHedged=False
2025-07-16 01:52:19,882 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371')], HighestMarginPerLot=652.1517371
2025-07-16 01:52:19,883 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=65.22
2025-07-16 01:52:19,883 - INFO - orders - Old total margin for AUDJPY: 65.22
2025-07-16 01:52:19,884 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 01:52:19,884 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 01:52:19,884 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.1347650213006141565091183')], HighestMarginPerLot=652.1517371
2025-07-16 01:52:19,884 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 01:52:19,884 - INFO - orders - New total margin for AUDJPY: 71.74
2025-07-16 01:52:19,884 - INFO - orders - Margin change for user 14: 6.52
2025-07-16 01:52:19,894 - INFO - orders - User 14 margin updated from 9487.95000000 to 9494.47000000
2025-07-16 01:52:19,953 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 01:52:19,954 - INFO - orders - Using order model: UserOrder
2025-07-16 01:52:19,957 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 01:52:19,960 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 01:52:19,961 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 01:52:19,965 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 01:52:19,965 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 01:52:19,965 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 01:52:19,965 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 01:52:19,965 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 01:52:19,965 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 01:52:19,965 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 01:52:19,965 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 01:52:19,965 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 01:52:19,968 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 01:53:54,030 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 01:53:54,030 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 01:53:54,030 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 01:53:54,030 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 01:53:54,031 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 01:53:54,031 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 01:53:54,031 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 01:53:54,031 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 01:53:54,031 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 01:53:54,050 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 01:53:54,050 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 01:53:54,050 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 01:53:54,051 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 01:53:54,051 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 02:09:26,599 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 02:09:28,328 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 02:09:28,329 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 02:09:28,329 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 02:09:28,329 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 02:09:32,409 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 02:09:32,410 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 02:09:33,329 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 02:09:38,326 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 02:09:52,179 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 02:09:52,179 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 02:09:52,179 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 02:09:52,179 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 02:09:52,179 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 02:09:52,179 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 02:09:52,179 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 02:09:52,179 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 02:09:52,179 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 02:09:52,244 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 02:09:52,244 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 02:09:52,244 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 02:09:52,245 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 02:09:52,245 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 02:09:52,656 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:09:52,656 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:09:52,656 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:09:52,656 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:09:52,656 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:09:52,656 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:09:52,656 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:09:52,657 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:09:52,657 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:11:59,688 - INFO - orders - Service provider update request received: {"order_id":"1000330-001","order_price":"119908.50"}
2025-07-16 02:11:59,711 - INFO - orders - Original order status: OPEN
2025-07-16 02:11:59,712 - INFO - orders - Update fields: {'order_id': '1000330-001', 'order_price': Decimal('119908.50')}
2025-07-16 02:11:59,712 - INFO - orders - Processing regular update for order 1000330-001
2025-07-16 02:11:59,748 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:11:59,748 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:11:59,748 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:11:59,748 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:11:59,748 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:11:59,748 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:11:59,749 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:11:59,749 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:11:59,749 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:11:59,752 - INFO - orders - Balance/margin cache updated for user 14: balance=9902.02000000, margin=9494.47
2025-07-16 02:11:59,752 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 02:11:59,752 - INFO - orders - Using order model: UserOrder
2025-07-16 02:11:59,755 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 02:11:59,758 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 02:11:59,759 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 02:11:59,763 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:11:59,763 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:11:59,763 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:11:59,763 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:11:59,763 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:11:59,763 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:11:59,763 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:11:59,763 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:11:59,764 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:11:59,766 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 02:14:05,085 - INFO - orders - Service provider update request received: {"order_id":"1000330-001","order_price":"139908.50"}
2025-07-16 02:14:05,090 - INFO - orders - Original order status: OPEN
2025-07-16 02:14:05,090 - INFO - orders - Update fields: {'order_id': '1000330-001', 'order_price': Decimal('139908.50')}
2025-07-16 02:14:05,090 - INFO - orders - Processing regular update for order 1000330-001
2025-07-16 02:14:05,137 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:14:05,137 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:14:05,137 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:14:05,137 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:14:05,137 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:14:05,138 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:14:05,138 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:14:05,138 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:14:05,138 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:14:05,141 - INFO - orders - Balance/margin cache updated for user 14: balance=9902.02000000, margin=9494.47
2025-07-16 02:14:05,141 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 02:14:05,141 - INFO - orders - Using order model: UserOrder
2025-07-16 02:14:05,143 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 02:14:05,146 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 02:14:05,147 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 02:14:05,149 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:14:05,149 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:14:05,149 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:14:05,149 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:14:05,149 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:14:05,149 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:14:05,149 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:14:05,149 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:14:05,150 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:14:05,151 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 02:14:15,970 - INFO - orders - Service provider update request received: {"order_id":"1000330-001","order_price":"141908.50"}
2025-07-16 02:14:15,976 - INFO - orders - Original order status: OPEN
2025-07-16 02:14:15,976 - INFO - orders - Update fields: {'order_id': '1000330-001', 'order_price': Decimal('141908.50')}
2025-07-16 02:14:15,976 - INFO - orders - Processing regular update for order 1000330-001
2025-07-16 02:14:15,999 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:14:15,999 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:14:15,999 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:14:15,999 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:14:15,999 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:14:15,999 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:14:15,999 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:14:15,999 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:14:15,999 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:14:16,002 - INFO - orders - Balance/margin cache updated for user 14: balance=9902.02000000, margin=9494.47
2025-07-16 02:14:16,002 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 02:14:16,002 - INFO - orders - Using order model: UserOrder
2025-07-16 02:14:16,004 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 02:14:16,006 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 02:14:16,006 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 02:14:16,008 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:14:16,008 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:14:16,008 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:14:16,008 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:14:16,008 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:14:16,008 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:14:16,009 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:14:16,009 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:14:16,009 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:14:16,010 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 02:14:28,344 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 02:14:28,344 - INFO - orders - Using order model: UserOrder
2025-07-16 02:14:28,347 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 02:14:28,352 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 02:14:28,353 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 02:14:28,359 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:14:28,359 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:14:28,359 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:14:28,359 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:14:28,359 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:14:28,359 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:14:28,359 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:14:28,359 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:14:28,359 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:14:28,361 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 02:14:52,616 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 02:14:52,616 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 02:14:52,616 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 02:14:52,616 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 02:14:52,616 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 02:14:52,616 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 02:14:52,616 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 02:14:52,616 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 02:14:52,616 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 02:14:52,621 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 02:14:52,621 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 02:14:52,621 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 02:14:52,621 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 02:14:52,621 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 02:15:27,110 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 02:15:27,110 - INFO - orders - Using order model: UserOrder
2025-07-16 02:15:27,114 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 02:15:27,117 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 02:15:27,117 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 02:15:27,121 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:15:27,121 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:15:27,121 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:15:27,121 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:15:27,121 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:15:27,122 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:15:27,122 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:15:27,122 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:15:27,122 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:15:27,124 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 02:16:27,121 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 02:16:27,121 - INFO - orders - Using order model: UserOrder
2025-07-16 02:16:27,125 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 02:16:27,127 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 02:16:27,128 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 02:16:27,131 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:16:27,131 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:16:27,131 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:16:27,131 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:16:27,131 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:16:27,131 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:16:27,131 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:16:27,131 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:16:27,131 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:16:27,133 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 02:17:27,122 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 02:17:27,122 - INFO - orders - Using order model: UserOrder
2025-07-16 02:17:27,124 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 02:17:27,125 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 02:17:27,125 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 02:17:27,127 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:17:27,127 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:17:27,127 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:17:27,127 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:17:27,127 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:17:27,128 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:17:27,128 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:17:27,128 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:17:27,128 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:17:27,129 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 02:18:27,151 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 02:18:27,152 - INFO - orders - Using order model: UserOrder
2025-07-16 02:18:27,154 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 02:18:27,156 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 02:18:27,157 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 02:18:27,159 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:18:27,159 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:18:27,159 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:18:27,159 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:18:27,159 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:18:27,159 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:18:27,159 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:18:27,159 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:18:27,159 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:18:27,161 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 02:19:27,060 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 02:19:27,060 - INFO - orders - Using order model: UserOrder
2025-07-16 02:19:27,064 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 02:19:27,067 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 02:19:27,068 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 02:19:27,070 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:19:27,071 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:19:27,071 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:19:27,071 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:19:27,071 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:19:27,071 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:19:27,071 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:19:27,071 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:19:27,071 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:19:27,073 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 02:19:52,744 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 02:19:52,744 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 02:19:52,744 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 02:19:52,744 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 02:19:52,744 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 02:19:52,744 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 02:19:52,744 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 02:19:52,744 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 02:19:52,744 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 02:19:52,748 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 02:19:52,748 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 02:19:52,748 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 02:19:52,748 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 02:19:52,748 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 02:20:27,061 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 02:20:27,061 - INFO - orders - Using order model: UserOrder
2025-07-16 02:20:27,065 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 02:20:27,068 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 02:20:27,069 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 02:20:27,072 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:20:27,072 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:20:27,072 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:20:27,072 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:20:27,072 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:20:27,072 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:20:27,073 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:20:27,073 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:20:27,073 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:20:27,074 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 02:49:48,852 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 02:49:50,262 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 02:49:50,263 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 02:49:50,263 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 02:49:50,263 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 02:49:54,395 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 02:49:54,395 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 02:50:24,981 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 02:50:25,879 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 02:50:25,893 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 02:50:25,893 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 02:50:25,894 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 02:50:29,969 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 02:50:29,969 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 02:50:30,890 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 02:50:35,880 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 02:50:45,446 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:50:45,447 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:50:45,447 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:50:45,447 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:50:45,447 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:50:45,447 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:50:45,447 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:50:45,447 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:50:45,447 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:50:49,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 02:50:49,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 02:50:49,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 02:50:49,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 02:50:49,921 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 02:50:49,921 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 02:50:49,921 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 02:50:49,921 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 02:50:49,921 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 02:50:49,933 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 02:50:49,933 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 02:50:49,933 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 02:50:49,933 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 02:50:49,933 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 02:50:58,982 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-16 02:51:25,595 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 02:51:25,595 - INFO - orders - Using order model: UserOrder
2025-07-16 02:51:25,600 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 02:51:25,602 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 02:51:25,603 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 02:51:25,607 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:51:25,607 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:51:25,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:51:25,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:51:25,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:51:25,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:51:25,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:51:25,610 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:51:25,611 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:51:25,614 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 02:51:48,651 - INFO - orders - Pending order placement request received - User ID: 9, Symbol: BTCUSD, Type: SELL_LIMIT, Quantity: 1
2025-07-16 02:51:48,715 - INFO - orders - Calculated contract_value for pending order: 1.00000000 (contract_size: 1.00000000 * quantity: 1)
2025-07-16 02:51:48,718 - INFO - orders - [DEBUG] User data from cache: {'id': 9, 'email': 'kodideladinesh123@gmail.com', 'account_number': 'PF5CZ', 'group_name': 'Standard', 'leverage': Decimal('100.00'), 'wallet_balance': Decimal('9794.75000000'), 'margin': Decimal('30.00000000'), 'user_type': 'live', 'first_name': None, 'last_name': None, 'country': 'India', 'phone_number': Decimal('917075781960')}
2025-07-16 02:51:48,718 - INFO - orders - [DEBUG] Group name: Standard
2025-07-16 02:51:48,720 - INFO - orders - User 9 is_barclays_live_user: True (user_type: live, sending_orders_normalized: barclays)
2025-07-16 02:51:48,726 - INFO - orders - [SYMBOL_INFO] Retrieved external symbol info for BTCUSD: contract_size=1.00000000, profit_currency=USD, digit=2.00000
2025-07-16 02:51:49,030 - INFO - orders - [MARGIN_CALC] Market data for BTCUSD: {'b': '119129.9000000000', 'o': '119129.8000000000'}
2025-07-16 02:51:49,031 - WARNING - orders - [MARGIN_CALC] Missing ask price for BTCUSD, using bid price with spread: bid=119129.9000000000, ask=119141.81299000000000
2025-07-16 02:51:49,031 - INFO - orders - [MARGIN_CALC] Using prices for BTCUSD: bid=119129.9000000000, ask=119141.81299000000000
2025-07-16 02:51:49,031 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: BTCUSD, Type: SELL_LIMIT, Qty: 1, Price: 119129.9000000000, Margin: 23825.98, Commission: 595.65
2025-07-16 02:51:49,032 - INFO - orders - Calculated initial margin: 23825.98, commission: 595.65 for pending order 1000337-001
2025-07-16 02:51:49,096 - INFO - orders - [DEBUG][pending_order] Prepared order_data_for_internal_processing: {'order_id': '1000337-001', 'order_company_name': 'BTCUSD', 'order_type': 'SELL_LIMIT', 'order_quantity': Decimal('1'), 'order_price': Decimal('1100000'), 'user_type': 'live', 'status': 'PENDING', 'stop_loss': Decimal('0'), 'take_profit': Decimal('0'), 'stoploss_id': '1000338-005', 'takeprofit_id': '1000339-006', 'order_user_id': 9, 'order_status': 'PENDING_PROCESSING', 'contract_value': Decimal('1.00000000'), 'margin': Decimal('23825.98'), 'commission': Decimal('595.65'), 'open_time': None}
2025-07-16 02:51:49,096 - INFO - orders - [BARCLAYS] Setting initial order_status to PENDING_PROCESSING for Barclays user. Will be updated to PENDING after service provider confirmation.
2025-07-16 02:51:49,096 - INFO - orders - Placing PENDING order: SELL_LIMIT for user 9 at price 1100000
2025-07-16 02:51:49,097 - INFO - orders - [ENTER-CRUD] create_order called with: {'order_id': '1000337-001', 'order_status': 'PENDING_PROCESSING', 'order_user_id': 9, 'order_company_name': 'BTCUSD', 'order_type': 'SELL_LIMIT', 'order_price': Decimal('1100000'), 'order_quantity': Decimal('1'), 'contract_value': Decimal('1.00000000'), 'margin': Decimal('23825.98'), 'commission': Decimal('595.65'), 'status': 'PENDING', 'stop_loss': Decimal('0'), 'take_profit': Decimal('0'), 'stoploss_id': '1000338-005', 'takeprofit_id': '1000339-006', 'close_id': None}
2025-07-16 02:51:49,157 - INFO - orders - Order 1000337-001 verified in database on attempt 1 before adding to Redis.
2025-07-16 02:51:49,160 - INFO - orders - Skipping Redis storage for Barclays user pending order 1000337-001
2025-07-16 02:51:49,185 - INFO - orders - [PERF] TOTAL place_order: 0.5386s
2025-07-16 02:51:49,242 - INFO - orders - Background balance/margin cache updated for user 9: balance=9794.75000000, margin=0.0
2025-07-16 02:51:49,262 - INFO - orders - [BARCLAYS] barclays_push called for user 9, is_barclays_live_user=True
2025-07-16 02:52:20,435 - INFO - orders - Service provider update request received: {"order_id":"1000337-001","order_status":"PENDING","status":"PENDING"}
2025-07-16 02:52:20,451 - INFO - orders - Original order status: PENDING_PROCESSING
2025-07-16 02:52:20,451 - INFO - orders - Update fields: {'order_id': '1000337-001', 'order_status': 'PENDING', 'status': 'PENDING'}
2025-07-16 02:52:20,451 - INFO - orders - Processing regular update for order 1000337-001
2025-07-16 02:52:20,482 - INFO - orders - Balance/margin cache updated for user 9: balance=9794.75000000, margin=0.0
2025-07-16 02:52:20,482 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 02:52:20,482 - INFO - orders - Using order model: UserOrder
2025-07-16 02:52:20,484 - INFO - orders - Fetched 0 open orders for user 9
2025-07-16 02:52:20,487 - INFO - orders - Fetched 1 pending orders for user 9
2025-07-16 02:52:20,488 - INFO - orders - Updated static orders cache for user 9 with 0 open orders and 1 pending orders
2025-07-16 02:52:20,493 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=0.0
2025-07-16 02:52:25,888 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 02:52:25,888 - INFO - orders - Using order model: UserOrder
2025-07-16 02:52:25,895 - INFO - orders - Fetched 0 open orders for user 9
2025-07-16 02:52:25,898 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 02:52:25,899 - INFO - orders - Updated static orders cache for user 9 with 0 open orders and 0 pending orders
2025-07-16 02:52:25,906 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=0.0
2025-07-16 02:52:26,411 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 02:52:26,411 - INFO - orders - Using order model: UserOrder
2025-07-16 02:52:26,415 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 02:52:26,419 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 02:52:26,420 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 02:52:26,424 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:52:26,424 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:52:26,424 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:52:26,425 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:52:26,425 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:52:26,425 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:52:26,425 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:52:26,425 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:52:26,425 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:52:26,428 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 02:53:08,751 - INFO - orders - Order placement request received - User: 9, Symbol: BTCUSD, Type: BUY
2025-07-16 02:53:09,119 - INFO - orders - [MARGIN_CALC] Market data for BTCUSD: {'b': '119150.0000000000', 'o': '119149.9000000000'}
2025-07-16 02:53:09,120 - WARNING - orders - [MARGIN_CALC] Missing ask price for BTCUSD, using bid price with spread: bid=119150.0000000000, ask=119161.91500000000000
2025-07-16 02:53:09,120 - INFO - orders - [MARGIN_CALC] Using prices for BTCUSD: bid=119150.0000000000, ask=119161.91500000000000
2025-07-16 02:53:09,120 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: BTCUSD, Type: BUY, Qty: 0.41, Price: 119161.91500000000000, Margin: 9771.28, Commission: 244.28
2025-07-16 02:53:09,121 - INFO - orders - [HEDGING_MARGIN_DEBUG] Starting hedging calculation for User: 9, Symbol: BTCUSD, OrderType: BUY, Quantity: 0.41, FullMargin: 9771.28
2025-07-16 02:53:09,121 - INFO - orders - [HEDGING_MARGIN_DEBUG] Existing open orders count: 0
2025-07-16 02:53:09,121 - INFO - orders - [HEDGING_MARGIN_DEBUG] Created simulated order: Type=BUY, Qty=0.41, Margin=9771.28
2025-07-16 02:53:09,122 - INFO - orders - [HEDGING_MARGIN_DEBUG] About to calculate margin before and after for 0 existing orders + 1 new order
2025-07-16 02:53:09,122 - INFO - orders - [HEDGING_MARGIN_DEBUG] Executing margin calculation tasks...
2025-07-16 02:53:09,122 - INFO - orders - [MARGIN_TOTAL_CONTRIB] No open positions for User 9, Symbol BTCUSD. Returning zero margin.
2025-07-16 02:53:09,123 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 02:53:09,123 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41, TotalSellQty=0, NetQty=0.41, IsHedged=False
2025-07-16 02:53:09,123 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23832.39024390243902439024390')], HighestMarginPerLot=23832.39024390243902439024390
2025-07-16 02:53:09,123 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9771.28
2025-07-16 02:53:09,124 - INFO - orders - [HEDGING_MARGIN_DEBUG] Margin calculation tasks completed
2025-07-16 02:53:09,124 - INFO - orders - [HEDGING_MARGIN_DEBUG] User: 9, Symbol: BTCUSD, OrderType: BUY, MarginBefore: 0.0, MarginAfter: 9771.28, AdditionalMargin: 9771.28, OpenOrders: 0
2025-07-16 02:53:09,124 - INFO - orders - [HEDGING_MARGIN_DEBUG] Simulated order: Type=BUY, Qty=0.41, Margin=9771.28
2025-07-16 02:53:09,124 - INFO - orders - [PERF] Order processing: 0.3671s
2025-07-16 02:53:09,144 - INFO - orders - [PERF] Order creation: 0.0198s
2025-07-16 02:53:09,145 - INFO - orders - is_barclays_live_user in place_order: True
2025-07-16 02:53:09,145 - INFO - orders - [BARCLAYS] Scheduling barclays_push in place_order
2025-07-16 02:53:09,145 - INFO - orders - [PERF] TOTAL place_order: 0.3981s
2025-07-16 02:53:09,187 - INFO - orders - Background balance/margin cache updated for user 9: balance=9794.75000000, margin=0.0
2025-07-16 02:53:09,195 - INFO - orders - [BARCLAYS] barclays_push called in place_order
2025-07-16 02:53:09,515 - INFO - orders - [PUBLISH_ASYNC] Triggering websocket updates for user 9
2025-07-16 02:53:25,607 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 02:53:25,607 - INFO - orders - Using order model: UserOrder
2025-07-16 02:53:25,611 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 02:53:25,616 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 02:53:25,617 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 02:53:25,622 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:53:25,622 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:53:25,622 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:53:25,622 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:53:25,622 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:53:25,622 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:53:25,622 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:53:25,623 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:53:25,623 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:53:25,626 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 02:53:38,485 - INFO - orders - Order 1000341-001 transitioning to OPEN. Calculating margin.
2025-07-16 02:53:38,485 - INFO - orders - Using fixed UserOrder model for Barclays service provider integration
2025-07-16 02:53:38,485 - INFO - orders - Using group_name: Standard for order 1000341-001
2025-07-16 02:53:38,901 - INFO - orders - [SYMBOL_INFO] Retrieved external symbol info for BTCUSD: contract_size=1.00000000, profit_currency=USD, digit=2.00000
2025-07-16 02:53:38,901 - INFO - orders - Using user's leverage from cache: 100.00
2025-07-16 02:53:38,901 - INFO - orders - [MARGIN_CALC] Market data for BTCUSD: {'b': '119181.1300000000', 'o': '119181.1300000000'}
2025-07-16 02:53:38,901 - WARNING - orders - [MARGIN_CALC] Missing ask price for BTCUSD, using bid price with spread: bid=119181.1300000000, ask=119193.04811300000000
2025-07-16 02:53:38,902 - INFO - orders - [MARGIN_CALC] Using prices for BTCUSD: bid=119181.1300000000, ask=119193.04811300000000
2025-07-16 02:53:38,902 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: BTCUSD, Type: BUY, Qty: 0.41000000, Price: 119193.04811300000000, Margin: 9773.83, Commission: 244.35
2025-07-16 02:53:38,902 - INFO - orders - New margin calculated: 9773.83, contract_value: 0.41
2025-07-16 02:53:38,902 - INFO - orders - [MARGIN] Final stored margin (USD): 9773.83
2025-07-16 02:53:38,902 - INFO - orders - Recalculating total hedged margin for user 9 on symbol BTCUSD
2025-07-16 02:53:38,905 - INFO - orders - Found 0 existing open positions for this symbol
2025-07-16 02:53:38,905 - INFO - orders - [MARGIN_TOTAL_CONTRIB] No open positions for User 9, Symbol BTCUSD. Returning zero margin.
2025-07-16 02:53:38,905 - INFO - orders - Old total margin for BTCUSD: 0.0
2025-07-16 02:53:38,905 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 02:53:38,906 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 02:53:38,906 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 02:53:38,906 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 02:53:38,906 - INFO - orders - New total margin for BTCUSD: 9773.83
2025-07-16 02:53:38,906 - INFO - orders - Margin change for user 9: 9773.83
2025-07-16 02:53:38,942 - ERROR - orders - User 9 does not have enough wallet balance to cover margin. wallet_balance=9794.75000000, new_margin=9803.83000000
2025-07-16 02:53:38,942 - INFO - orders - User 9 margin updated from 30.00000000 to 9803.83000000
2025-07-16 02:53:38,970 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 02:53:38,971 - INFO - orders - Using order model: UserOrder
2025-07-16 02:53:38,973 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 02:53:38,975 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 02:53:38,976 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 02:53:38,980 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 02:53:38,980 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 02:53:38,980 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 02:53:38,980 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 02:53:38,980 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 02:53:38,982 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 02:54:29,724 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 02:54:29,724 - INFO - orders - Using order model: UserOrder
2025-07-16 02:54:29,729 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 02:54:29,732 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 02:54:29,733 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 02:54:29,735 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:54:29,735 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:54:29,735 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:54:29,735 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:54:29,736 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:54:29,736 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:54:29,736 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:54:29,736 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:54:29,736 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:54:29,739 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 02:55:29,920 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 02:55:29,920 - INFO - orders - Using order model: UserOrder
2025-07-16 02:55:29,923 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 02:55:29,927 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 02:55:29,927 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 02:55:29,929 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:55:29,929 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:55:29,929 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:55:29,929 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:55:29,929 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:55:29,929 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:55:29,929 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:55:29,929 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:55:29,929 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:55:29,930 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 02:55:40,547 - INFO - orders - Service provider update request received: {"order_id":"1000341-001","order_price":"131921.60"}
2025-07-16 02:55:40,553 - INFO - orders - Original order status: OPEN
2025-07-16 02:55:40,553 - INFO - orders - Update fields: {'order_id': '1000341-001', 'order_price': Decimal('131921.60')}
2025-07-16 02:55:40,553 - INFO - orders - Processing regular update for order 1000341-001
2025-07-16 02:55:40,575 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 02:55:40,576 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 02:55:40,576 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 02:55:40,576 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 02:55:40,576 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 02:55:40,579 - INFO - orders - Balance/margin cache updated for user 9: balance=9794.75000000, margin=9773.83
2025-07-16 02:55:40,579 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 02:55:40,579 - INFO - orders - Using order model: UserOrder
2025-07-16 02:55:40,583 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 02:55:40,587 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 02:55:40,588 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 02:55:40,591 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 02:55:40,591 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 02:55:40,591 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 02:55:40,592 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 02:55:40,592 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 02:55:40,594 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 02:55:46,692 - INFO - orders - Service provider update request received: {"order_id":"1000341-001","order_price":"141921.60"}
2025-07-16 02:55:46,697 - INFO - orders - Original order status: OPEN
2025-07-16 02:55:46,698 - INFO - orders - Update fields: {'order_id': '1000341-001', 'order_price': Decimal('141921.60')}
2025-07-16 02:55:46,698 - INFO - orders - Processing regular update for order 1000341-001
2025-07-16 02:55:46,752 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 02:55:46,752 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 02:55:46,753 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 02:55:46,753 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 02:55:46,753 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 02:55:46,756 - INFO - orders - Balance/margin cache updated for user 9: balance=9794.75000000, margin=9773.83
2025-07-16 02:55:46,756 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 02:55:46,756 - INFO - orders - Using order model: UserOrder
2025-07-16 02:55:46,759 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 02:55:46,762 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 02:55:46,762 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 02:55:46,765 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 02:55:46,766 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 02:55:46,766 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 02:55:46,766 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 02:55:46,766 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 02:55:46,768 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 02:55:50,274 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 02:55:50,274 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 02:55:50,274 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 02:55:50,274 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 02:55:50,274 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 02:55:50,275 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 02:55:50,275 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 02:55:50,275 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 02:55:50,275 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 02:55:50,292 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 02:55:50,293 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 02:55:50,293 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 02:55:50,293 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 02:55:50,293 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 02:56:25,837 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 02:56:25,837 - INFO - orders - Using order model: UserOrder
2025-07-16 02:56:25,841 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 02:56:25,844 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 02:56:25,845 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 02:56:25,849 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 02:56:25,849 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 02:56:25,849 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 02:56:25,849 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 02:56:25,849 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 02:56:25,851 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 02:56:26,336 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 02:56:26,336 - INFO - orders - Using order model: UserOrder
2025-07-16 02:56:26,340 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 02:56:26,343 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 02:56:26,343 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 02:56:26,346 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:56:26,346 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:56:26,346 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:56:26,346 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:56:26,346 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:56:26,346 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:56:26,346 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:56:26,346 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:56:26,346 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:56:26,348 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 02:57:25,454 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 02:57:25,454 - INFO - orders - Using order model: UserOrder
2025-07-16 02:57:25,458 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 02:57:25,464 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 02:57:25,467 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 02:57:25,478 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 02:57:25,478 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 02:57:25,478 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 02:57:25,478 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 02:57:25,478 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 02:57:25,485 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 02:57:25,942 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 02:57:25,942 - INFO - orders - Using order model: UserOrder
2025-07-16 02:57:25,944 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 02:57:25,947 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 02:57:25,948 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 02:57:25,950 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:57:25,950 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:57:25,950 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:57:25,951 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:57:25,951 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:57:25,951 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:57:25,951 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:57:25,951 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:57:25,951 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:57:25,953 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 02:58:25,421 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 02:58:25,421 - INFO - orders - Using order model: UserOrder
2025-07-16 02:58:25,424 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 02:58:25,427 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 02:58:25,428 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 02:58:25,432 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 02:58:25,432 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 02:58:25,432 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 02:58:25,432 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 02:58:25,432 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 02:58:25,435 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 02:58:25,938 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 02:58:25,938 - INFO - orders - Using order model: UserOrder
2025-07-16 02:58:25,940 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 02:58:25,941 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 02:58:25,942 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 02:58:25,944 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:58:25,944 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:58:25,944 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:58:25,944 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:58:25,944 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:58:25,944 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:58:25,945 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:58:25,945 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:58:25,945 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:58:25,947 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 02:59:25,432 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 02:59:25,432 - INFO - orders - Using order model: UserOrder
2025-07-16 02:59:25,436 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 02:59:25,438 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 02:59:25,439 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 02:59:25,442 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 02:59:25,442 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 02:59:25,442 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 02:59:25,442 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 02:59:25,442 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 02:59:25,444 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 02:59:25,989 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 02:59:25,989 - INFO - orders - Using order model: UserOrder
2025-07-16 02:59:25,992 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 02:59:25,996 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 02:59:25,999 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 02:59:26,003 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 02:59:26,003 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 02:59:26,003 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 02:59:26,003 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 02:59:26,003 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 02:59:26,003 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 02:59:26,003 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 02:59:26,003 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 02:59:26,003 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 02:59:26,010 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 03:00:25,430 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 03:00:25,430 - INFO - orders - Using order model: UserOrder
2025-07-16 03:00:25,432 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 03:00:25,434 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 03:00:25,435 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 03:00:25,439 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 03:00:25,439 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 03:00:25,439 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 03:00:25,439 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 03:00:25,439 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 03:00:25,442 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 03:00:25,900 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 03:00:25,900 - INFO - orders - Using order model: UserOrder
2025-07-16 03:00:25,902 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 03:00:25,905 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 03:00:25,906 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 03:00:25,910 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 03:00:25,910 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 03:00:25,910 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 03:00:25,910 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 03:00:25,910 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 03:00:25,910 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 03:00:25,910 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 03:00:25,910 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 03:00:25,910 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 03:00:25,914 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 03:00:50,414 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 03:00:50,414 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 03:00:50,414 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 03:00:50,414 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 03:00:50,414 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 03:00:50,414 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 03:00:50,414 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 03:00:50,414 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 03:00:50,414 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 03:00:50,420 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 03:00:50,420 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 03:00:50,420 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 03:00:50,420 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 03:00:50,420 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 03:01:25,539 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 03:01:25,539 - INFO - orders - Using order model: UserOrder
2025-07-16 03:01:25,542 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 03:01:25,544 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 03:01:25,546 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 03:01:25,549 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 03:01:25,549 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 03:01:25,549 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 03:01:25,549 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 03:01:25,549 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 03:01:25,551 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 03:01:26,055 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 03:01:26,055 - INFO - orders - Using order model: UserOrder
2025-07-16 03:01:26,058 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 03:01:26,060 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 03:01:26,061 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 03:01:26,064 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 03:01:26,065 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 03:01:26,065 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 03:01:26,065 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 03:01:26,065 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 03:01:26,065 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 03:01:26,065 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 03:01:26,065 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 03:01:26,065 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 03:01:26,067 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 03:02:25,446 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 03:02:25,446 - INFO - orders - Using order model: UserOrder
2025-07-16 03:02:25,449 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 03:02:25,451 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 03:02:25,452 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 03:02:25,454 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 03:02:25,454 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 03:02:25,454 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 03:02:25,454 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 03:02:25,454 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 03:02:25,455 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 03:02:25,891 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 03:02:25,891 - INFO - orders - Using order model: UserOrder
2025-07-16 03:02:25,893 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 03:02:25,895 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 03:02:25,896 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 03:02:25,900 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 03:02:25,900 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 03:02:25,900 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 03:02:25,900 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 03:02:25,900 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 03:02:25,900 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 03:02:25,900 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 03:02:25,900 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 03:02:25,900 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 03:02:25,903 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 03:03:25,531 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 03:03:25,531 - INFO - orders - Using order model: UserOrder
2025-07-16 03:03:25,537 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 03:03:25,543 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 03:03:25,544 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 03:03:25,548 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 03:03:25,549 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 03:03:25,549 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 03:03:25,549 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 03:03:25,549 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 03:03:25,552 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 03:03:26,289 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 03:03:26,290 - INFO - orders - Using order model: UserOrder
2025-07-16 03:03:26,293 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 03:03:26,296 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 03:03:26,297 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 03:03:26,300 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 03:03:26,300 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 03:03:26,300 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 03:03:26,300 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 03:03:26,301 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 03:03:26,301 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 03:03:26,301 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 03:03:26,301 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 03:03:26,301 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 03:03:26,303 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 03:04:25,418 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 03:04:25,418 - INFO - orders - Using order model: UserOrder
2025-07-16 03:04:25,421 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 03:04:25,427 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 03:04:25,429 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 03:04:25,433 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 03:04:25,433 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 03:04:25,434 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 03:04:25,434 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 03:04:25,434 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 03:04:25,438 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 03:04:26,082 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 03:04:26,082 - INFO - orders - Using order model: UserOrder
2025-07-16 03:04:26,094 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 03:04:26,102 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 03:04:26,106 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 03:04:26,126 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 03:04:26,126 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 03:04:26,126 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 03:04:26,127 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 03:04:26,127 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 03:04:26,127 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 03:04:26,127 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 03:04:26,127 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 03:04:26,127 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 03:04:26,138 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 03:05:25,369 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 03:05:25,369 - INFO - orders - Using order model: UserOrder
2025-07-16 03:05:25,372 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 03:05:25,376 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 03:05:25,376 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 03:05:25,380 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 03:05:25,380 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 03:05:25,380 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 03:05:25,380 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 03:05:25,380 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 03:05:25,382 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 03:05:25,911 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 03:05:25,911 - INFO - orders - Using order model: UserOrder
2025-07-16 03:05:25,913 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 03:05:25,915 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 03:05:25,916 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 03:05:25,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 03:05:25,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 03:05:25,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 03:05:25,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 03:05:25,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 03:05:25,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 03:05:25,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 03:05:25,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 03:05:25,920 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 03:05:25,921 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 03:05:50,522 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 03:05:50,522 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 03:05:50,522 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 03:05:50,522 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 03:05:50,522 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 03:05:50,522 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 03:05:50,522 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 03:05:50,522 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 03:05:50,522 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 03:05:50,527 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 03:05:50,527 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 03:05:50,527 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 03:05:50,528 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 03:05:50,528 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 03:06:25,497 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 03:06:25,497 - INFO - orders - Using order model: UserOrder
2025-07-16 03:06:25,500 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 03:06:25,503 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 03:06:25,503 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 03:06:25,507 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 03:06:25,507 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 03:06:25,507 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 03:06:25,507 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 03:06:25,507 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 03:06:25,509 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 03:06:26,093 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 03:06:26,094 - INFO - orders - Using order model: UserOrder
2025-07-16 03:06:26,098 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 03:06:26,103 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 03:06:26,105 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 03:06:26,112 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 03:06:26,112 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 03:06:26,112 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 03:06:26,112 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 03:06:26,112 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 03:06:26,112 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 03:06:26,112 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 03:06:26,112 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 03:06:26,112 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 03:06:26,116 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 03:07:25,535 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 03:07:25,535 - INFO - orders - Using order model: UserOrder
2025-07-16 03:07:25,546 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 03:07:25,553 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 03:07:25,555 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 03:07:25,564 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 03:07:25,564 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 03:07:25,564 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 03:07:25,564 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 03:07:25,565 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 03:07:25,574 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 03:07:26,196 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 03:07:26,196 - INFO - orders - Using order model: UserOrder
2025-07-16 03:07:26,201 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 03:07:26,204 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 03:07:26,205 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 03:07:26,210 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 03:07:26,210 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 03:07:26,210 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 03:07:26,211 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 03:07:26,211 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 03:07:26,211 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 03:07:26,211 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 03:07:26,211 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 03:07:26,211 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 03:07:26,215 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 03:08:25,546 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 03:08:25,546 - INFO - orders - Using order model: UserOrder
2025-07-16 03:08:25,551 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 03:08:25,557 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 03:08:25,560 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 03:08:25,569 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 03:08:25,569 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 03:08:25,569 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 03:08:25,569 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 03:08:25,569 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 03:08:25,580 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 03:08:26,201 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 03:08:26,201 - INFO - orders - Using order model: UserOrder
2025-07-16 03:08:26,206 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 03:08:26,210 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 03:08:26,211 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 03:08:26,215 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 03:08:26,216 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 03:08:26,216 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 03:08:26,216 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 03:08:26,216 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 03:08:26,216 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 03:08:26,216 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 03:08:26,216 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 03:08:26,216 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 03:08:26,219 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 03:34:36,849 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 03:34:38,022 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 03:34:38,023 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 03:34:38,023 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 03:34:38,024 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 03:34:42,150 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 03:34:42,150 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 03:34:43,024 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 03:34:48,026 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 03:34:53,168 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 03:34:53,168 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 03:34:53,168 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 03:34:53,168 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 03:34:53,168 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 03:34:57,493 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 03:34:57,493 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 03:34:57,493 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 03:34:57,494 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 03:34:57,494 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 03:34:57,494 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 03:34:57,494 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 03:34:57,494 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 03:34:57,494 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 03:35:02,005 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 03:35:02,005 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 03:35:02,006 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 03:35:02,006 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 03:35:02,006 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 03:35:02,007 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 03:35:02,007 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 03:35:02,007 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 03:35:02,007 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 03:35:02,045 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 03:35:02,045 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 03:35:02,045 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 03:35:02,045 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 03:35:02,045 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 03:35:37,404 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 03:35:37,405 - INFO - orders - Using order model: UserOrder
2025-07-16 03:35:37,410 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 03:35:37,414 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 03:35:37,416 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 03:35:37,420 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 03:35:37,420 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 03:35:37,420 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 03:35:37,420 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 03:35:37,420 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 03:35:37,422 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 03:35:37,920 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 03:35:37,921 - INFO - orders - Using order model: UserOrder
2025-07-16 03:35:37,925 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 03:35:37,928 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 03:35:37,929 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 03:35:37,934 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 03:35:37,934 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 03:35:37,934 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 03:35:37,934 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 03:35:37,934 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 03:35:37,935 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 03:35:37,935 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 03:35:37,935 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 03:35:37,935 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 03:35:37,938 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 03:36:37,413 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 03:36:37,413 - INFO - orders - Using order model: UserOrder
2025-07-16 03:36:37,416 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 03:36:37,419 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 03:36:37,420 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 03:36:37,423 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 03:36:37,423 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 03:36:37,424 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 03:36:37,424 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 03:36:37,424 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 03:36:37,426 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 03:36:38,024 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 03:36:38,024 - INFO - orders - Using order model: UserOrder
2025-07-16 03:36:38,028 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 03:36:38,031 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 03:36:38,032 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 03:36:38,035 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 03:36:38,036 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 03:36:38,036 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 03:36:38,036 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 03:36:38,036 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 03:36:38,036 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 03:36:38,036 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 03:36:38,036 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 03:36:38,036 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 03:36:38,039 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 03:37:37,409 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 03:37:37,409 - INFO - orders - Using order model: UserOrder
2025-07-16 03:37:37,412 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 03:37:37,414 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 03:37:37,415 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 03:37:37,419 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 03:37:37,419 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 03:37:37,419 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 03:37:37,419 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 03:37:37,419 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 03:37:37,422 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 03:37:37,978 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 03:37:37,979 - INFO - orders - Using order model: UserOrder
2025-07-16 03:37:37,984 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 03:37:37,989 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 03:37:37,992 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 03:37:37,999 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 03:37:37,999 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 03:37:37,999 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 03:37:37,999 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 03:37:37,999 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 03:37:38,000 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 03:37:38,000 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 03:37:38,000 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 03:37:38,000 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 03:37:38,006 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 03:38:37,417 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 03:38:37,417 - INFO - orders - Using order model: UserOrder
2025-07-16 03:38:37,421 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 03:38:37,424 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 03:38:37,426 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 03:38:37,432 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 03:38:37,433 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 03:38:37,433 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 03:38:37,434 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 03:38:37,434 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 03:38:37,438 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 03:38:38,136 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 03:38:38,136 - INFO - orders - Using order model: UserOrder
2025-07-16 03:38:38,139 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 03:38:38,143 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 03:38:38,144 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 03:38:38,147 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 03:38:38,148 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 03:38:38,148 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 03:38:38,148 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 03:38:38,148 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 03:38:38,148 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 03:38:38,148 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 03:38:38,148 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 03:38:38,148 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 03:38:38,151 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 03:39:37,509 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 03:39:37,510 - INFO - orders - Using order model: UserOrder
2025-07-16 03:39:37,522 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 03:39:37,533 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 03:39:37,538 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 03:39:37,559 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 03:39:37,559 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 03:39:37,560 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 03:39:37,560 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 03:39:37,561 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 03:39:37,578 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 03:39:38,244 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 03:39:38,244 - INFO - orders - Using order model: UserOrder
2025-07-16 03:39:38,248 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 03:39:38,251 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 03:39:38,252 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 03:39:38,255 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 03:39:38,255 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 03:39:38,255 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 03:39:38,256 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 03:39:38,256 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 03:39:38,256 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 03:39:38,256 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 03:39:38,256 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 03:39:38,256 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 03:39:38,258 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 03:40:08,773 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 03:40:09,904 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 03:40:09,905 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 03:40:09,905 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 03:40:09,906 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 03:40:13,969 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 03:40:13,969 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 03:40:15,209 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 03:40:19,890 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 03:40:34,370 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 03:40:34,371 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 03:40:34,371 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 03:40:34,371 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 03:40:34,371 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 03:40:34,371 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 03:40:34,371 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 03:40:34,371 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 03:40:34,371 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 03:40:34,409 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 03:40:34,410 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 03:40:34,410 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 03:40:34,410 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 03:40:34,410 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 03:41:09,337 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 03:41:09,337 - INFO - orders - Using order model: UserOrder
2025-07-16 03:41:09,344 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 03:41:09,354 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 03:41:09,360 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 03:41:09,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 03:41:09,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 03:41:09,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 03:41:09,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 03:41:09,369 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 03:41:09,376 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 03:41:09,994 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 03:41:09,995 - INFO - orders - Using order model: UserOrder
2025-07-16 03:41:09,998 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 03:41:10,001 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 03:41:10,001 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 03:41:10,005 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 03:41:10,006 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 03:41:10,006 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 03:41:10,006 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 03:41:10,006 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 03:41:10,006 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 03:41:10,006 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 03:41:10,006 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 03:41:10,006 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 03:41:10,009 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 03:42:09,363 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 03:42:09,364 - INFO - orders - Using order model: UserOrder
2025-07-16 03:42:09,370 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 03:42:09,376 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 03:42:09,378 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 03:42:09,386 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 03:42:09,387 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 03:42:09,387 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 03:42:09,387 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 03:42:09,388 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 03:42:09,399 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 03:42:10,088 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 03:42:10,089 - INFO - orders - Using order model: UserOrder
2025-07-16 03:42:10,096 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 03:42:10,099 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 03:42:10,101 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 03:42:10,108 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 03:42:10,109 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 03:42:10,109 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 03:42:10,109 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 03:42:10,109 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 03:42:10,109 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 03:42:10,109 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 03:42:10,109 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 03:42:10,109 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 03:42:10,111 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 04:27:12,060 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 04:27:13,216 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 04:27:13,216 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 04:27:13,216 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 04:27:13,217 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 04:27:17,307 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 04:27:17,307 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 04:27:18,212 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 04:27:23,209 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 04:27:32,460 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 04:27:32,461 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 04:27:32,462 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 04:27:32,462 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 04:27:32,462 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 04:27:34,182 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-16 04:27:34,775 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 04:27:34,775 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 04:27:34,776 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 04:27:34,776 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 04:27:34,776 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 04:27:34,776 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 04:27:34,776 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 04:27:34,776 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 04:27:34,776 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 04:27:35,269 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 04:27:35,269 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 04:27:35,269 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 04:27:35,269 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 04:27:35,269 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 04:27:35,269 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 04:27:35,270 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 04:27:35,270 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 04:27:35,270 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 04:27:35,323 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 04:27:35,323 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 04:27:35,323 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 04:27:35,323 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 04:27:35,324 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 04:27:35,431 - INFO - orders - Starting update_user_static_orders for user 4, user_type demo
2025-07-16 04:27:35,432 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 04:27:35,438 - INFO - orders - Fetched 0 open orders for user 4
2025-07-16 04:27:35,450 - INFO - orders - Fetched 0 pending orders for user 4
2025-07-16 04:27:35,454 - INFO - orders - Updated static orders cache for user 4 with 0 open orders and 0 pending orders
2025-07-16 04:27:35,492 - INFO - orders - User 4: Updated balance/margin cache after static orders update - balance=100000.00000000, margin=0.0
2025-07-16 04:27:35,573 - INFO - orders - Starting update_user_static_orders for user 9, user_type demo
2025-07-16 04:27:35,573 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 04:27:35,578 - INFO - orders - Fetched 28 open orders for user 9
2025-07-16 04:27:35,583 - INFO - orders - Fetched 6 pending orders for user 9
2025-07-16 04:27:35,587 - INFO - orders - Updated static orders cache for user 9 with 28 open orders and 6 pending orders
2025-07-16 04:27:35,607 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol AUDUSD
2025-07-16 04:27:35,607 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol AUDUSD: TotalBuyQty=0.10000000, TotalSellQty=0.22000000, NetQty=0.22000000, IsHedged=True
2025-07-16 04:27:35,607 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol AUDUSD: AllMarginsPerLot=[Decimal('647.4'), Decimal('647.0909090909090909090909091')], HighestMarginPerLot=647.4
2025-07-16 04:27:35,607 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol AUDUSD: CalculatedTotalMargin=142.43
2025-07-16 04:27:35,607 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol CHFSGD
2025-07-16 04:27:35,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFSGD: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 04:27:35,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFSGD: AllMarginsPerLot=[Decimal('1223.5389131'), Decimal('1223.150636')], HighestMarginPerLot=1223.5389131
2025-07-16 04:27:35,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol CHFSGD: CalculatedTotalMargin=122.35
2025-07-16 04:27:35,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol CADJPY
2025-07-16 04:27:35,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CADJPY: TotalBuyQty=0.15000000, TotalSellQty=0.15000000, NetQty=0.15000000, IsHedged=True
2025-07-16 04:27:35,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CADJPY: AllMarginsPerLot=[Decimal('729.6658264666666666666666667'), Decimal('729.8549729333333333333333333')], HighestMarginPerLot=729.8549729333333333333333333
2025-07-16 04:27:35,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol CADJPY: CalculatedTotalMargin=109.48
2025-07-16 04:27:35,609 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 4 positions for User 9, Symbol EURAUD
2025-07-16 04:27:35,609 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURAUD: TotalBuyQty=0.27000000, TotalSellQty=0.26000000, NetQty=0.27000000, IsHedged=True
2025-07-16 04:27:35,609 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURAUD: AllMarginsPerLot=[Decimal('1148.786564545454545454545455'), Decimal('1148.503559047619047619047619'), Decimal('1148.863536'), Decimal('1148.622352')], HighestMarginPerLot=1148.863536
2025-07-16 04:27:35,609 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURAUD: CalculatedTotalMargin=310.19
2025-07-16 04:27:35,609 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol CHFJPY
2025-07-16 04:27:35,609 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFJPY: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 04:27:35,609 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFJPY: AllMarginsPerLot=[Decimal('1223.5584187'), Decimal('1223.1379417')], HighestMarginPerLot=1223.5584187
2025-07-16 04:27:35,609 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol CHFJPY: CalculatedTotalMargin=122.36
2025-07-16 04:27:35,609 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol EURGBP
2025-07-16 04:27:35,610 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURGBP: TotalBuyQty=0, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=False
2025-07-16 04:27:35,610 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURGBP: AllMarginsPerLot=[Decimal('1148.51044')], HighestMarginPerLot=1148.51044
2025-07-16 04:27:35,610 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURGBP: CalculatedTotalMargin=114.85
2025-07-16 04:27:35,610 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol EURJPY
2025-07-16 04:27:35,610 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURJPY: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 04:27:35,610 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURJPY: AllMarginsPerLot=[Decimal('1148.7277223'), Decimal('1148.5285533')], HighestMarginPerLot=1148.7277223
2025-07-16 04:27:35,610 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURJPY: CalculatedTotalMargin=114.87
2025-07-16 04:27:35,610 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol EURNZD
2025-07-16 04:27:35,610 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURNZD: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 04:27:35,610 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURNZD: AllMarginsPerLot=[Decimal('1148.532825'), Decimal('1148.192298')], HighestMarginPerLot=1148.532825
2025-07-16 04:27:35,610 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURNZD: CalculatedTotalMargin=114.85
2025-07-16 04:27:35,610 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 4 positions for User 9, Symbol GBPUSD
2025-07-16 04:27:35,611 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol GBPUSD: TotalBuyQty=0.50000000, TotalSellQty=0.50000000, NetQty=0.50000000, IsHedged=True
2025-07-16 04:27:35,611 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol GBPUSD: AllMarginsPerLot=[Decimal('0'), Decimal('0'), Decimal('0'), Decimal('0')], HighestMarginPerLot=0
2025-07-16 04:27:35,611 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol GBPUSD: CalculatedTotalMargin=0.00
2025-07-16 04:27:35,611 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol NZDJPY
2025-07-16 04:27:35,611 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol NZDJPY: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 04:27:35,611 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol NZDJPY: AllMarginsPerLot=[Decimal('597.837949')], HighestMarginPerLot=597.837949
2025-07-16 04:27:35,611 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol NZDJPY: CalculatedTotalMargin=5.98
2025-07-16 04:27:35,611 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol USDCHF
2025-07-16 04:27:35,611 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDCHF: TotalBuyQty=0.15000000, TotalSellQty=0.15000000, NetQty=0.15000000, IsHedged=True
2025-07-16 04:27:35,611 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDCHF: AllMarginsPerLot=[Decimal('999.8084502'), Decimal('1000.203773866666666666666667')], HighestMarginPerLot=1000.203773866666666666666667
2025-07-16 04:27:35,611 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDCHF: CalculatedTotalMargin=150.03
2025-07-16 04:27:35,611 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol USDNOK
2025-07-16 04:27:35,612 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDNOK: TotalBuyQty=0.20000000, TotalSellQty=0, NetQty=0.20000000, IsHedged=False
2025-07-16 04:27:35,612 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDNOK: AllMarginsPerLot=[Decimal('1000.0169162'), Decimal('1000.0169154')], HighestMarginPerLot=1000.0169162
2025-07-16 04:27:35,612 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDNOK: CalculatedTotalMargin=200.00
2025-07-16 04:27:35,612 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol USDSGD
2025-07-16 04:27:35,612 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDSGD: TotalBuyQty=0, TotalSellQty=0.31000000, NetQty=0.31000000, IsHedged=False
2025-07-16 04:27:35,612 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDSGD: AllMarginsPerLot=[Decimal('999.7869010967741935483870968')], HighestMarginPerLot=999.7869010967741935483870968
2025-07-16 04:27:35,612 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDSGD: CalculatedTotalMargin=309.93
2025-07-16 04:27:35,612 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol USDTRY
2025-07-16 04:27:35,612 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDTRY: TotalBuyQty=0, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=False
2025-07-16 04:27:35,613 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDTRY: AllMarginsPerLot=[Decimal('999.8738813')], HighestMarginPerLot=999.8738813
2025-07-16 04:27:35,613 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDTRY: CalculatedTotalMargin=99.99
2025-07-16 04:27:35,613 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 1917.31
2025-07-16 04:27:35,619 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=98181.73000000, margin=1917.31
2025-07-16 04:27:35,623 - INFO - orders - Starting update_user_static_orders for user 10, user_type demo
2025-07-16 04:27:35,623 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 04:27:35,627 - INFO - orders - Fetched 0 open orders for user 10
2025-07-16 04:27:35,632 - INFO - orders - Fetched 1 pending orders for user 10
2025-07-16 04:27:35,634 - INFO - orders - Updated static orders cache for user 10 with 0 open orders and 1 pending orders
2025-07-16 04:27:35,659 - INFO - orders - User 10: Updated balance/margin cache after static orders update - balance=9958.40000000, margin=0.0
2025-07-16 04:27:35,661 - INFO - orders - Starting update_user_static_orders for user 11, user_type demo
2025-07-16 04:27:35,662 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 04:27:35,665 - INFO - orders - Fetched 1 open orders for user 11
2025-07-16 04:27:35,669 - INFO - orders - Fetched 0 pending orders for user 11
2025-07-16 04:27:35,671 - INFO - orders - Updated static orders cache for user 11 with 1 open orders and 0 pending orders
2025-07-16 04:27:35,684 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 11, Symbol AUDCAD
2025-07-16 04:27:35,684 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 11, Symbol AUDCAD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 04:27:35,684 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 11, Symbol AUDCAD: AllMarginsPerLot=[Decimal('655.364428')], HighestMarginPerLot=655.364428
2025-07-16 04:27:35,684 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 11, Symbol AUDCAD: CalculatedTotalMargin=6.55
2025-07-16 04:27:35,684 - INFO - orders - [TOTAL_USER_MARGIN] User 11 total margin across all symbols: 6.55
2025-07-16 04:27:35,689 - INFO - orders - User 11: Updated balance/margin cache after static orders update - balance=99998.61000000, margin=6.55
2025-07-16 04:27:35,693 - INFO - orders - Starting update_user_static_orders for user 12, user_type demo
2025-07-16 04:27:35,693 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 04:27:35,697 - INFO - orders - Fetched 0 open orders for user 12
2025-07-16 04:27:35,701 - INFO - orders - Fetched 0 pending orders for user 12
2025-07-16 04:27:35,702 - INFO - orders - Updated static orders cache for user 12 with 0 open orders and 0 pending orders
2025-07-16 04:27:35,724 - INFO - orders - User 12: Updated balance/margin cache after static orders update - balance=99984.34000000, margin=0.0
2025-07-16 04:27:35,727 - INFO - orders - Starting update_user_static_orders for user 13, user_type demo
2025-07-16 04:27:35,727 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 04:27:35,730 - INFO - orders - Fetched 0 open orders for user 13
2025-07-16 04:27:35,734 - INFO - orders - Fetched 0 pending orders for user 13
2025-07-16 04:27:35,736 - INFO - orders - Updated static orders cache for user 13 with 0 open orders and 0 pending orders
2025-07-16 04:27:35,756 - INFO - orders - User 13: Updated balance/margin cache after static orders update - balance=10000.00000000, margin=0.0
2025-07-16 04:27:35,812 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 04:27:35,813 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 04:27:35,813 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 04:27:35,813 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 04:27:35,813 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 05:04:40,601 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 05:04:41,982 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 05:04:41,988 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 05:04:41,989 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 05:04:41,989 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 05:04:46,139 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 05:04:46,140 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 05:04:47,005 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 05:04:51,996 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 05:04:57,302 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 05:04:57,303 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 05:04:57,303 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 05:04:57,303 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 05:04:57,303 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 05:05:01,083 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-16 05:05:01,734 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 05:05:01,734 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 05:05:01,734 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 05:05:01,734 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 05:05:01,734 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 05:05:01,734 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 05:05:01,735 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 05:05:01,735 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 05:05:01,735 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 05:05:02,054 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 05:05:02,054 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 05:05:02,054 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 05:05:02,054 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 05:05:02,054 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 05:05:02,054 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 05:05:02,054 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 05:05:02,054 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 05:05:02,054 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 05:05:02,073 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 05:05:02,073 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 05:05:02,073 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 05:05:02,073 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 05:05:02,073 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 05:05:02,096 - INFO - orders - Starting update_user_static_orders for user 4, user_type demo
2025-07-16 05:05:02,096 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 05:05:02,097 - INFO - orders - Fetched 0 open orders for user 4
2025-07-16 05:05:02,099 - INFO - orders - Fetched 0 pending orders for user 4
2025-07-16 05:05:02,100 - INFO - orders - Updated static orders cache for user 4 with 0 open orders and 0 pending orders
2025-07-16 05:05:02,107 - INFO - orders - User 4: Updated balance/margin cache after static orders update - balance=100000.00000000, margin=0.0
2025-07-16 05:05:02,119 - INFO - orders - Starting update_user_static_orders for user 9, user_type demo
2025-07-16 05:05:02,119 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 05:05:02,122 - INFO - orders - Fetched 28 open orders for user 9
2025-07-16 05:05:02,124 - INFO - orders - Fetched 6 pending orders for user 9
2025-07-16 05:05:02,125 - INFO - orders - Updated static orders cache for user 9 with 28 open orders and 6 pending orders
2025-07-16 05:05:02,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol AUDUSD
2025-07-16 05:05:02,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol AUDUSD: TotalBuyQty=0.10000000, TotalSellQty=0.22000000, NetQty=0.22000000, IsHedged=True
2025-07-16 05:05:02,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol AUDUSD: AllMarginsPerLot=[Decimal('647.4'), Decimal('647.0909090909090909090909091')], HighestMarginPerLot=647.4
2025-07-16 05:05:02,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol AUDUSD: CalculatedTotalMargin=142.43
2025-07-16 05:05:02,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol CHFSGD
2025-07-16 05:05:02,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFSGD: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 05:05:02,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFSGD: AllMarginsPerLot=[Decimal('1223.5389131'), Decimal('1223.150636')], HighestMarginPerLot=1223.5389131
2025-07-16 05:05:02,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol CHFSGD: CalculatedTotalMargin=122.35
2025-07-16 05:05:02,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol CADJPY
2025-07-16 05:05:02,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CADJPY: TotalBuyQty=0.15000000, TotalSellQty=0.15000000, NetQty=0.15000000, IsHedged=True
2025-07-16 05:05:02,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CADJPY: AllMarginsPerLot=[Decimal('729.6658264666666666666666667'), Decimal('729.8549729333333333333333333')], HighestMarginPerLot=729.8549729333333333333333333
2025-07-16 05:05:02,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol CADJPY: CalculatedTotalMargin=109.48
2025-07-16 05:05:02,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 4 positions for User 9, Symbol EURAUD
2025-07-16 05:05:02,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURAUD: TotalBuyQty=0.27000000, TotalSellQty=0.26000000, NetQty=0.27000000, IsHedged=True
2025-07-16 05:05:02,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURAUD: AllMarginsPerLot=[Decimal('1148.786564545454545454545455'), Decimal('1148.503559047619047619047619'), Decimal('1148.863536'), Decimal('1148.622352')], HighestMarginPerLot=1148.863536
2025-07-16 05:05:02,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURAUD: CalculatedTotalMargin=310.19
2025-07-16 05:05:02,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol CHFJPY
2025-07-16 05:05:02,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFJPY: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFJPY: AllMarginsPerLot=[Decimal('1223.5584187'), Decimal('1223.1379417')], HighestMarginPerLot=1223.5584187
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol CHFJPY: CalculatedTotalMargin=122.36
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol EURGBP
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURGBP: TotalBuyQty=0, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=False
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURGBP: AllMarginsPerLot=[Decimal('1148.51044')], HighestMarginPerLot=1148.51044
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURGBP: CalculatedTotalMargin=114.85
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol EURJPY
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURJPY: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURJPY: AllMarginsPerLot=[Decimal('1148.7277223'), Decimal('1148.5285533')], HighestMarginPerLot=1148.7277223
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURJPY: CalculatedTotalMargin=114.87
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol EURNZD
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURNZD: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURNZD: AllMarginsPerLot=[Decimal('1148.532825'), Decimal('1148.192298')], HighestMarginPerLot=1148.532825
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURNZD: CalculatedTotalMargin=114.85
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 4 positions for User 9, Symbol GBPUSD
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol GBPUSD: TotalBuyQty=0.50000000, TotalSellQty=0.50000000, NetQty=0.50000000, IsHedged=True
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol GBPUSD: AllMarginsPerLot=[Decimal('0'), Decimal('0'), Decimal('0'), Decimal('0')], HighestMarginPerLot=0
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol GBPUSD: CalculatedTotalMargin=0.00
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol NZDJPY
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol NZDJPY: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol NZDJPY: AllMarginsPerLot=[Decimal('597.837949')], HighestMarginPerLot=597.837949
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol NZDJPY: CalculatedTotalMargin=5.98
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol USDCHF
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDCHF: TotalBuyQty=0.15000000, TotalSellQty=0.15000000, NetQty=0.15000000, IsHedged=True
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDCHF: AllMarginsPerLot=[Decimal('999.8084502'), Decimal('1000.203773866666666666666667')], HighestMarginPerLot=1000.203773866666666666666667
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDCHF: CalculatedTotalMargin=150.03
2025-07-16 05:05:02,135 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol USDNOK
2025-07-16 05:05:02,136 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDNOK: TotalBuyQty=0.20000000, TotalSellQty=0, NetQty=0.20000000, IsHedged=False
2025-07-16 05:05:02,136 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDNOK: AllMarginsPerLot=[Decimal('1000.0169162'), Decimal('1000.0169154')], HighestMarginPerLot=1000.0169162
2025-07-16 05:05:02,136 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDNOK: CalculatedTotalMargin=200.00
2025-07-16 05:05:02,136 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol USDSGD
2025-07-16 05:05:02,136 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDSGD: TotalBuyQty=0, TotalSellQty=0.31000000, NetQty=0.31000000, IsHedged=False
2025-07-16 05:05:02,136 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDSGD: AllMarginsPerLot=[Decimal('999.7869010967741935483870968')], HighestMarginPerLot=999.7869010967741935483870968
2025-07-16 05:05:02,136 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDSGD: CalculatedTotalMargin=309.93
2025-07-16 05:05:02,136 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol USDTRY
2025-07-16 05:05:02,136 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDTRY: TotalBuyQty=0, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=False
2025-07-16 05:05:02,136 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDTRY: AllMarginsPerLot=[Decimal('999.8738813')], HighestMarginPerLot=999.8738813
2025-07-16 05:05:02,136 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDTRY: CalculatedTotalMargin=99.99
2025-07-16 05:05:02,136 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 1917.31
2025-07-16 05:05:02,140 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=98181.73000000, margin=1917.31
2025-07-16 05:05:02,142 - INFO - orders - Starting update_user_static_orders for user 10, user_type demo
2025-07-16 05:05:02,142 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 05:05:02,144 - INFO - orders - Fetched 0 open orders for user 10
2025-07-16 05:05:02,147 - INFO - orders - Fetched 1 pending orders for user 10
2025-07-16 05:05:02,151 - INFO - orders - Updated static orders cache for user 10 with 0 open orders and 1 pending orders
2025-07-16 05:05:02,165 - INFO - orders - User 10: Updated balance/margin cache after static orders update - balance=9958.40000000, margin=0.0
2025-07-16 05:05:02,168 - INFO - orders - Starting update_user_static_orders for user 11, user_type demo
2025-07-16 05:05:02,168 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 05:05:02,172 - INFO - orders - Fetched 1 open orders for user 11
2025-07-16 05:05:02,174 - INFO - orders - Fetched 0 pending orders for user 11
2025-07-16 05:05:02,175 - INFO - orders - Updated static orders cache for user 11 with 1 open orders and 0 pending orders
2025-07-16 05:05:02,185 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 11, Symbol AUDCAD
2025-07-16 05:05:02,185 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 11, Symbol AUDCAD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 05:05:02,185 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 11, Symbol AUDCAD: AllMarginsPerLot=[Decimal('655.364428')], HighestMarginPerLot=655.364428
2025-07-16 05:05:02,185 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 11, Symbol AUDCAD: CalculatedTotalMargin=6.55
2025-07-16 05:05:02,185 - INFO - orders - [TOTAL_USER_MARGIN] User 11 total margin across all symbols: 6.55
2025-07-16 05:05:02,188 - INFO - orders - User 11: Updated balance/margin cache after static orders update - balance=99998.61000000, margin=6.55
2025-07-16 05:05:02,189 - INFO - orders - Starting update_user_static_orders for user 12, user_type demo
2025-07-16 05:05:02,189 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 05:05:02,191 - INFO - orders - Fetched 0 open orders for user 12
2025-07-16 05:05:02,193 - INFO - orders - Fetched 0 pending orders for user 12
2025-07-16 05:05:02,194 - INFO - orders - Updated static orders cache for user 12 with 0 open orders and 0 pending orders
2025-07-16 05:05:02,202 - INFO - orders - User 12: Updated balance/margin cache after static orders update - balance=99984.34000000, margin=0.0
2025-07-16 05:05:02,204 - INFO - orders - Starting update_user_static_orders for user 13, user_type demo
2025-07-16 05:05:02,204 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 05:05:02,206 - INFO - orders - Fetched 0 open orders for user 13
2025-07-16 05:05:02,207 - INFO - orders - Fetched 0 pending orders for user 13
2025-07-16 05:05:02,208 - INFO - orders - Updated static orders cache for user 13 with 0 open orders and 0 pending orders
2025-07-16 05:05:02,217 - INFO - orders - User 13: Updated balance/margin cache after static orders update - balance=10000.00000000, margin=0.0
2025-07-16 05:05:02,241 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 05:05:02,241 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 05:05:02,241 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 05:05:02,241 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 05:05:02,241 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 05:05:44,313 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-16 05:05:48,154 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 05:05:48,155 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 05:05:48,155 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 05:05:48,155 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 05:05:48,155 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 05:10:02,332 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 05:10:02,332 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 05:10:02,333 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 05:10:02,333 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 05:10:02,333 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 05:10:02,333 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 05:10:02,333 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 05:10:02,333 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 05:10:02,333 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 05:10:02,425 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 05:10:02,425 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 05:10:02,425 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 05:10:02,425 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 05:10:02,426 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 05:10:02,426 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 05:10:02,426 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 05:10:02,426 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 05:10:02,426 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 05:10:02,437 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 05:10:02,437 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 05:10:02,437 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 05:10:02,437 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 05:10:02,437 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 05:10:48,725 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 05:10:48,725 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 05:10:48,725 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 05:10:48,725 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 05:10:48,725 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 05:15:02,562 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 05:15:02,562 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 05:15:02,562 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 05:15:02,563 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 05:15:02,563 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 05:15:02,563 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 05:15:02,563 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 05:15:02,563 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 05:15:02,563 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 05:15:02,635 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 05:15:02,635 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 05:15:02,635 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 05:15:02,635 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 05:15:02,635 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 05:15:02,635 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 05:15:02,635 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 05:15:02,635 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 05:15:02,635 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 05:15:02,643 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 05:15:02,643 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 05:15:02,643 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 05:15:02,643 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 05:15:02,643 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 05:15:50,543 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 05:15:50,543 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 05:15:50,544 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 05:15:50,544 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 05:15:50,544 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 05:20:02,756 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 05:20:02,756 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 05:20:02,756 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 05:20:02,756 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 05:20:02,756 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 05:20:02,756 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 05:20:02,756 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 05:20:02,756 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 05:20:02,756 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 05:20:02,807 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 05:20:02,807 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 05:20:02,807 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 05:20:02,807 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 05:20:02,807 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 05:20:02,807 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 05:20:02,807 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 05:20:02,807 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 05:20:02,807 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 05:20:02,812 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 05:20:02,812 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 05:20:02,812 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 05:20:02,812 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 05:20:02,812 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 05:20:52,783 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 05:20:52,783 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 05:20:52,783 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 05:20:52,783 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 05:20:52,783 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 05:25:02,894 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 05:25:02,895 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 05:25:02,895 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 05:25:02,895 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 05:25:02,895 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 05:25:02,895 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 05:25:02,895 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 05:25:02,895 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 05:25:02,895 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 05:25:02,937 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 05:25:02,938 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 05:25:02,938 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 05:25:02,938 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 05:25:02,938 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 05:25:02,938 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 05:25:02,938 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 05:25:02,938 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 05:25:02,938 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 05:25:02,944 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 05:25:02,944 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 05:25:02,944 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 05:25:02,944 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 05:25:02,944 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 05:25:52,962 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 05:25:52,962 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 05:25:52,962 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 05:25:52,962 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 05:25:52,963 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 05:30:03,076 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 05:30:03,076 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 05:30:03,076 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 05:30:03,076 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 05:30:03,076 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 05:30:03,076 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 05:30:03,076 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 05:30:03,076 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 05:30:03,076 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 05:30:03,208 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 05:30:03,208 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 05:30:03,208 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 05:30:03,208 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 05:30:03,208 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 05:30:03,208 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 05:30:03,208 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 05:30:03,208 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 05:30:03,209 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 05:30:03,233 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 05:30:03,234 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 05:30:03,234 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 05:30:03,234 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 05:30:03,234 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 05:31:03,451 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 05:31:04,544 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 05:31:04,544 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 05:31:04,544 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 05:31:04,544 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 05:31:08,630 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 05:31:08,630 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 05:31:09,546 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 05:31:14,551 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 05:31:19,540 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 05:31:19,541 - INFO - orders - Using order model: UserOrder
2025-07-16 05:31:19,548 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 05:31:19,553 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 05:31:19,561 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 05:31:19,569 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 05:31:19,569 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 05:31:19,569 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 05:31:19,569 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 05:31:19,569 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 05:31:19,579 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 05:31:21,705 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 05:31:21,705 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 05:31:21,705 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 05:31:21,705 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 05:31:21,705 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 05:31:21,705 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 05:31:21,705 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 05:31:21,705 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 05:31:21,705 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 05:31:24,052 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 05:31:24,052 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 05:31:24,052 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 05:31:24,052 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 05:31:24,052 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 05:31:24,052 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 05:31:24,052 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 05:31:24,052 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 05:31:24,052 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 05:31:24,078 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 05:31:24,078 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 05:31:24,078 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 05:31:24,078 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 05:31:24,078 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 05:31:24,166 - INFO - orders - Starting update_user_static_orders for user 4, user_type demo
2025-07-16 05:31:24,166 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 05:31:24,173 - INFO - orders - Fetched 0 open orders for user 4
2025-07-16 05:31:24,180 - INFO - orders - Fetched 0 pending orders for user 4
2025-07-16 05:31:24,185 - INFO - orders - Updated static orders cache for user 4 with 0 open orders and 0 pending orders
2025-07-16 05:31:24,214 - INFO - orders - User 4: Updated balance/margin cache after static orders update - balance=100000.00000000, margin=0.0
2025-07-16 05:31:24,263 - INFO - orders - Starting update_user_static_orders for user 10, user_type demo
2025-07-16 05:31:24,263 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 05:31:24,268 - INFO - orders - Fetched 0 open orders for user 10
2025-07-16 05:31:24,271 - INFO - orders - Fetched 1 pending orders for user 10
2025-07-16 05:31:24,273 - INFO - orders - Updated static orders cache for user 10 with 0 open orders and 1 pending orders
2025-07-16 05:31:24,295 - INFO - orders - User 10: Updated balance/margin cache after static orders update - balance=9958.40000000, margin=0.0
2025-07-16 05:31:24,297 - INFO - orders - Starting update_user_static_orders for user 11, user_type demo
2025-07-16 05:31:24,298 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 05:31:24,302 - INFO - orders - Fetched 1 open orders for user 11
2025-07-16 05:31:24,306 - INFO - orders - Fetched 0 pending orders for user 11
2025-07-16 05:31:24,308 - INFO - orders - Updated static orders cache for user 11 with 1 open orders and 0 pending orders
2025-07-16 05:31:24,325 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 11, Symbol AUDCAD
2025-07-16 05:31:24,325 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 11, Symbol AUDCAD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 05:31:24,325 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 11, Symbol AUDCAD: AllMarginsPerLot=[Decimal('655.364428')], HighestMarginPerLot=655.364428
2025-07-16 05:31:24,325 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 11, Symbol AUDCAD: CalculatedTotalMargin=6.55
2025-07-16 05:31:24,325 - INFO - orders - [TOTAL_USER_MARGIN] User 11 total margin across all symbols: 6.55
2025-07-16 05:31:24,330 - INFO - orders - User 11: Updated balance/margin cache after static orders update - balance=99998.61000000, margin=6.55
2025-07-16 05:31:24,333 - INFO - orders - Starting update_user_static_orders for user 12, user_type demo
2025-07-16 05:31:24,333 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 05:31:24,338 - INFO - orders - Fetched 0 open orders for user 12
2025-07-16 05:31:24,342 - INFO - orders - Fetched 0 pending orders for user 12
2025-07-16 05:31:24,343 - INFO - orders - Updated static orders cache for user 12 with 0 open orders and 0 pending orders
2025-07-16 05:31:24,361 - INFO - orders - User 12: Updated balance/margin cache after static orders update - balance=99984.34000000, margin=0.0
2025-07-16 05:31:24,364 - INFO - orders - Starting update_user_static_orders for user 13, user_type demo
2025-07-16 05:31:24,364 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 05:31:24,367 - INFO - orders - Fetched 0 open orders for user 13
2025-07-16 05:31:24,371 - INFO - orders - Fetched 0 pending orders for user 13
2025-07-16 05:31:24,372 - INFO - orders - Updated static orders cache for user 13 with 0 open orders and 0 pending orders
2025-07-16 05:31:24,393 - INFO - orders - User 13: Updated balance/margin cache after static orders update - balance=10000.00000000, margin=0.0
2025-07-16 05:31:24,423 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 05:31:24,423 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 05:31:24,423 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 05:31:24,423 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 05:31:24,423 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 05:36:24,452 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 05:36:24,452 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 05:36:24,452 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 05:36:24,453 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 05:36:24,453 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 05:36:24,514 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 05:36:24,514 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 05:36:24,515 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 05:36:24,515 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 05:36:24,515 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 05:36:24,515 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 05:36:24,515 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 05:36:24,515 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 05:36:24,515 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 05:36:24,627 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 05:36:24,627 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 05:36:24,627 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 05:36:24,627 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 05:36:24,627 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 05:36:24,628 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 05:36:24,628 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 05:36:24,628 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 05:36:24,628 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 05:36:24,641 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 05:36:24,642 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 05:36:24,642 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 05:36:24,642 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 05:36:24,642 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 05:40:56,682 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 05:40:56,683 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 05:40:56,684 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 05:40:56,684 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 05:40:56,684 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 05:40:56,751 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-16 05:41:38,916 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 05:41:38,916 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 05:41:38,917 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 05:41:38,917 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 05:41:38,917 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 05:41:39,406 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-16 05:41:40,219 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 05:41:40,219 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 05:41:40,220 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 05:41:40,220 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 05:41:40,220 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 05:42:37,605 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 05:42:38,727 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 05:42:38,728 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 05:42:38,728 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 05:42:38,729 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 05:42:38,788 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 05:42:38,788 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 05:42:39,744 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 05:42:39,744 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 05:42:39,744 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 05:42:39,745 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 05:42:39,745 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 05:42:39,745 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 05:42:39,745 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 05:42:39,745 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 05:42:39,745 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 05:42:39,848 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 05:42:39,848 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 05:42:39,848 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 05:42:39,848 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 05:42:39,848 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 05:42:39,848 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 05:42:39,848 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 05:42:39,848 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 05:42:39,848 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 05:42:39,861 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 05:42:39,861 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 05:42:39,861 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 05:42:39,861 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 05:42:39,861 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 05:42:39,886 - INFO - orders - Starting update_user_static_orders for user 4, user_type demo
2025-07-16 05:42:39,886 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 05:42:39,889 - INFO - orders - Fetched 0 open orders for user 4
2025-07-16 05:42:39,891 - INFO - orders - Fetched 0 pending orders for user 4
2025-07-16 05:42:39,893 - INFO - orders - Updated static orders cache for user 4 with 0 open orders and 0 pending orders
2025-07-16 05:42:39,901 - INFO - orders - User 4: Updated balance/margin cache after static orders update - balance=100000.00000000, margin=0.0
2025-07-16 05:42:39,927 - INFO - orders - Starting update_user_static_orders for user 10, user_type demo
2025-07-16 05:42:39,927 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 05:42:39,928 - INFO - orders - Fetched 0 open orders for user 10
2025-07-16 05:42:39,930 - INFO - orders - Fetched 1 pending orders for user 10
2025-07-16 05:42:39,931 - INFO - orders - Updated static orders cache for user 10 with 0 open orders and 1 pending orders
2025-07-16 05:42:39,945 - INFO - orders - User 10: Updated balance/margin cache after static orders update - balance=9958.40000000, margin=0.0
2025-07-16 05:42:39,948 - INFO - orders - Starting update_user_static_orders for user 11, user_type demo
2025-07-16 05:42:39,948 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 05:42:39,950 - INFO - orders - Fetched 1 open orders for user 11
2025-07-16 05:42:39,953 - INFO - orders - Fetched 0 pending orders for user 11
2025-07-16 05:42:39,954 - INFO - orders - Updated static orders cache for user 11 with 1 open orders and 0 pending orders
2025-07-16 05:42:39,967 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 11, Symbol AUDCAD
2025-07-16 05:42:39,967 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 11, Symbol AUDCAD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 05:42:39,967 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 11, Symbol AUDCAD: AllMarginsPerLot=[Decimal('655.364428')], HighestMarginPerLot=655.364428
2025-07-16 05:42:39,967 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 11, Symbol AUDCAD: CalculatedTotalMargin=6.55
2025-07-16 05:42:39,967 - INFO - orders - [TOTAL_USER_MARGIN] User 11 total margin across all symbols: 6.55
2025-07-16 05:42:39,973 - INFO - orders - User 11: Updated balance/margin cache after static orders update - balance=99998.61000000, margin=6.55
2025-07-16 05:42:39,976 - INFO - orders - Starting update_user_static_orders for user 12, user_type demo
2025-07-16 05:42:39,976 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 05:42:39,977 - INFO - orders - Fetched 0 open orders for user 12
2025-07-16 05:42:39,980 - INFO - orders - Fetched 0 pending orders for user 12
2025-07-16 05:42:39,982 - INFO - orders - Updated static orders cache for user 12 with 0 open orders and 0 pending orders
2025-07-16 05:42:39,995 - INFO - orders - User 12: Updated balance/margin cache after static orders update - balance=99984.34000000, margin=0.0
2025-07-16 05:42:39,998 - INFO - orders - Starting update_user_static_orders for user 13, user_type demo
2025-07-16 05:42:39,998 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 05:42:40,000 - INFO - orders - Fetched 0 open orders for user 13
2025-07-16 05:42:40,002 - INFO - orders - Fetched 0 pending orders for user 13
2025-07-16 05:42:40,003 - INFO - orders - Updated static orders cache for user 13 with 0 open orders and 0 pending orders
2025-07-16 05:42:40,015 - INFO - orders - User 13: Updated balance/margin cache after static orders update - balance=10000.00000000, margin=0.0
2025-07-16 05:42:43,709 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 05:42:49,208 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 05:42:51,151 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-16 05:43:37,408 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-16 05:45:15,927 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-16 05:45:16,522 - INFO - orders - [get_closed_orders] user_type: live
2025-07-16 05:45:43,420 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-16 05:45:44,776 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 05:45:44,776 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 05:45:44,776 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 05:45:44,776 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 05:45:44,776 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 05:45:44,776 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 05:45:44,777 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 05:45:44,777 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 05:45:44,777 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 05:47:40,638 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 05:47:40,638 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 05:47:40,638 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 05:47:40,638 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 05:47:40,638 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 05:47:41,290 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 05:47:41,290 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 05:47:41,290 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 05:47:41,290 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 05:47:41,290 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 05:47:41,290 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 05:47:41,290 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 05:47:41,290 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 05:47:41,290 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 05:47:41,314 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 05:47:41,314 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 05:47:41,314 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 05:47:41,314 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 05:47:41,314 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 06:13:12,122 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 06:13:13,414 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 06:13:13,414 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 06:13:13,414 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 06:13:13,416 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 06:13:13,466 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 06:13:13,467 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 06:13:14,535 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 06:13:14,535 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 06:13:14,535 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 06:13:14,535 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 06:13:14,535 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 06:13:14,681 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 06:13:14,681 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 06:13:14,681 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 06:13:14,681 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 06:13:14,681 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 06:13:14,681 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 06:13:14,681 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 06:13:14,681 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 06:13:14,682 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 06:13:14,695 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 06:13:14,695 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 06:13:14,695 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 06:13:14,695 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 06:13:14,695 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 06:13:14,853 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 06:13:14,853 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 06:13:14,853 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 06:13:14,853 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 06:13:14,853 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 06:13:14,853 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 06:13:14,853 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 06:13:14,853 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 06:13:14,853 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 06:13:18,415 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 06:13:23,414 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 06:13:41,439 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 06:13:42,358 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 06:13:42,359 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 06:13:42,360 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 06:13:42,360 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 06:13:42,451 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 06:13:42,451 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 06:13:43,486 - INFO - orders - Starting update_user_static_orders for user 5, user_type live
2025-07-16 06:13:43,487 - INFO - orders - Using order model: UserOrder
2025-07-16 06:13:43,492 - INFO - orders - Fetched 0 open orders for user 5
2025-07-16 06:13:43,498 - INFO - orders - Fetched 0 pending orders for user 5
2025-07-16 06:13:43,504 - INFO - orders - Updated static orders cache for user 5 with 0 open orders and 0 pending orders
2025-07-16 06:13:43,520 - WARNING - orders - User 5: Could not get user data for balance/margin cache update
2025-07-16 06:13:43,527 - INFO - orders - Starting update_user_static_orders for user 8, user_type live
2025-07-16 06:13:43,528 - INFO - orders - Using order model: UserOrder
2025-07-16 06:13:43,533 - INFO - orders - Fetched 0 open orders for user 8
2025-07-16 06:13:43,536 - INFO - orders - Fetched 0 pending orders for user 8
2025-07-16 06:13:43,538 - INFO - orders - Updated static orders cache for user 8 with 0 open orders and 0 pending orders
2025-07-16 06:13:43,549 - INFO - orders - User 8: Updated balance/margin cache after static orders update - balance=0E-8, margin=0.0
2025-07-16 06:13:43,565 - INFO - orders - Starting update_user_static_orders for user 16, user_type live
2025-07-16 06:13:43,565 - INFO - orders - Using order model: UserOrder
2025-07-16 06:13:43,567 - INFO - orders - Fetched 0 open orders for user 16
2025-07-16 06:13:43,569 - INFO - orders - Fetched 0 pending orders for user 16
2025-07-16 06:13:43,573 - INFO - orders - Updated static orders cache for user 16 with 0 open orders and 0 pending orders
2025-07-16 06:13:43,584 - INFO - orders - User 16: Updated balance/margin cache after static orders update - balance=0E-8, margin=0.0
2025-07-16 06:13:43,587 - INFO - orders - Starting update_user_static_orders for user 17, user_type live
2025-07-16 06:13:43,587 - INFO - orders - Using order model: UserOrder
2025-07-16 06:13:43,589 - INFO - orders - Fetched 0 open orders for user 17
2025-07-16 06:13:43,591 - INFO - orders - Fetched 0 pending orders for user 17
2025-07-16 06:13:43,592 - INFO - orders - Updated static orders cache for user 17 with 0 open orders and 0 pending orders
2025-07-16 06:13:43,600 - INFO - orders - User 17: Updated balance/margin cache after static orders update - balance=26302.98000000, margin=0.0
2025-07-16 06:13:43,603 - INFO - orders - Starting update_user_static_orders for user 18, user_type live
2025-07-16 06:13:43,603 - INFO - orders - Using order model: UserOrder
2025-07-16 06:13:43,604 - INFO - orders - Fetched 0 open orders for user 18
2025-07-16 06:13:43,606 - INFO - orders - Fetched 0 pending orders for user 18
2025-07-16 06:13:43,608 - INFO - orders - Updated static orders cache for user 18 with 0 open orders and 0 pending orders
2025-07-16 06:13:43,616 - INFO - orders - User 18: Updated balance/margin cache after static orders update - balance=17323.75000000, margin=0.0
2025-07-16 06:13:43,618 - INFO - orders - Starting update_user_static_orders for user 19, user_type live
2025-07-16 06:13:43,618 - INFO - orders - Using order model: UserOrder
2025-07-16 06:13:43,620 - INFO - orders - Fetched 0 open orders for user 19
2025-07-16 06:13:43,622 - INFO - orders - Fetched 0 pending orders for user 19
2025-07-16 06:13:43,623 - INFO - orders - Updated static orders cache for user 19 with 0 open orders and 0 pending orders
2025-07-16 06:13:43,630 - INFO - orders - User 19: Updated balance/margin cache after static orders update - balance=9610.04000000, margin=0.0
2025-07-16 06:13:43,632 - INFO - orders - Starting update_user_static_orders for user 20, user_type live
2025-07-16 06:13:43,633 - INFO - orders - Using order model: UserOrder
2025-07-16 06:13:43,634 - INFO - orders - Fetched 0 open orders for user 20
2025-07-16 06:13:43,636 - INFO - orders - Fetched 0 pending orders for user 20
2025-07-16 06:13:43,637 - INFO - orders - Updated static orders cache for user 20 with 0 open orders and 0 pending orders
2025-07-16 06:13:43,645 - INFO - orders - User 20: Updated balance/margin cache after static orders update - balance=8712.00000000, margin=0.0
2025-07-16 06:13:43,648 - INFO - orders - Starting update_user_static_orders for user 21, user_type live
2025-07-16 06:13:43,648 - INFO - orders - Using order model: UserOrder
2025-07-16 06:13:43,649 - INFO - orders - Fetched 0 open orders for user 21
2025-07-16 06:13:43,652 - INFO - orders - Fetched 0 pending orders for user 21
2025-07-16 06:13:43,653 - INFO - orders - Updated static orders cache for user 21 with 0 open orders and 0 pending orders
2025-07-16 06:13:43,660 - INFO - orders - User 21: Updated balance/margin cache after static orders update - balance=0E-8, margin=0.0
2025-07-16 06:13:43,663 - INFO - orders - Starting update_user_static_orders for user 22, user_type live
2025-07-16 06:13:43,663 - INFO - orders - Using order model: UserOrder
2025-07-16 06:13:43,665 - INFO - orders - Fetched 0 open orders for user 22
2025-07-16 06:13:43,667 - INFO - orders - Fetched 0 pending orders for user 22
2025-07-16 06:13:43,668 - INFO - orders - Updated static orders cache for user 22 with 0 open orders and 0 pending orders
2025-07-16 06:13:43,676 - INFO - orders - User 22: Updated balance/margin cache after static orders update - balance=5961.56000000, margin=0.0
2025-07-16 06:13:43,680 - INFO - orders - Starting update_user_static_orders for user 23, user_type live
2025-07-16 06:13:43,680 - INFO - orders - Using order model: UserOrder
2025-07-16 06:13:43,682 - INFO - orders - Fetched 0 open orders for user 23
2025-07-16 06:13:43,684 - INFO - orders - Fetched 0 pending orders for user 23
2025-07-16 06:13:43,685 - INFO - orders - Updated static orders cache for user 23 with 0 open orders and 0 pending orders
2025-07-16 06:13:43,692 - INFO - orders - User 23: Updated balance/margin cache after static orders update - balance=1000000.00000000, margin=0.0
2025-07-16 06:13:43,695 - INFO - orders - Starting update_user_static_orders for user 25, user_type live
2025-07-16 06:13:43,695 - INFO - orders - Using order model: UserOrder
2025-07-16 06:13:43,696 - INFO - orders - Fetched 0 open orders for user 25
2025-07-16 06:13:43,698 - INFO - orders - Fetched 0 pending orders for user 25
2025-07-16 06:13:43,700 - INFO - orders - Updated static orders cache for user 25 with 0 open orders and 0 pending orders
2025-07-16 06:13:43,707 - INFO - orders - User 25: Updated balance/margin cache after static orders update - balance=250000.00000000, margin=0.0
2025-07-16 06:13:43,709 - INFO - orders - Starting update_user_static_orders for user 26, user_type live
2025-07-16 06:13:43,709 - INFO - orders - Using order model: UserOrder
2025-07-16 06:13:43,711 - INFO - orders - Fetched 2 open orders for user 26
2025-07-16 06:13:43,712 - INFO - orders - Fetched 0 pending orders for user 26
2025-07-16 06:13:43,713 - INFO - orders - Updated static orders cache for user 26 with 2 open orders and 0 pending orders
2025-07-16 06:13:43,716 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 06:13:43,716 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 06:13:43,716 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 06:13:43,716 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 06:13:43,716 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 06:13:43,716 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 06:13:43,717 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 06:13:43,717 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 06:13:43,717 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 06:13:43,720 - INFO - orders - User 26: Updated balance/margin cache after static orders update - balance=184345.81000000, margin=146484.47
2025-07-16 06:13:43,722 - INFO - orders - Starting update_user_static_orders for user 1, user_type demo
2025-07-16 06:13:43,722 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 06:13:43,728 - INFO - orders - Fetched 2 open orders for user 1
2025-07-16 06:13:43,732 - INFO - orders - Fetched 1 pending orders for user 1
2025-07-16 06:13:43,733 - INFO - orders - Updated static orders cache for user 1 with 2 open orders and 1 pending orders
2025-07-16 06:13:43,737 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 06:13:43,737 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 06:13:43,737 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 06:13:43,737 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 06:13:43,737 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 06:13:43,741 - INFO - orders - User 1: Updated balance/margin cache after static orders update - balance=17011.54000000, margin=6.54
2025-07-16 06:13:43,744 - INFO - orders - Starting update_user_static_orders for user 2, user_type demo
2025-07-16 06:13:43,744 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 06:13:43,745 - INFO - orders - Fetched 0 open orders for user 2
2025-07-16 06:13:43,747 - INFO - orders - Fetched 0 pending orders for user 2
2025-07-16 06:13:43,748 - INFO - orders - Updated static orders cache for user 2 with 0 open orders and 0 pending orders
2025-07-16 06:13:43,754 - INFO - orders - User 2: Updated balance/margin cache after static orders update - balance=100000.00000000, margin=0.0
2025-07-16 06:13:43,756 - INFO - orders - Starting update_user_static_orders for user 3, user_type demo
2025-07-16 06:13:43,756 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 06:13:43,758 - INFO - orders - Fetched 0 open orders for user 3
2025-07-16 06:13:43,760 - INFO - orders - Fetched 0 pending orders for user 3
2025-07-16 06:13:43,761 - INFO - orders - Updated static orders cache for user 3 with 0 open orders and 0 pending orders
2025-07-16 06:13:43,767 - INFO - orders - User 3: Updated balance/margin cache after static orders update - balance=100000.00000000, margin=0.0
2025-07-16 06:13:43,773 - INFO - orders - Starting update_user_static_orders for user 6, user_type demo
2025-07-16 06:13:43,773 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 06:13:43,775 - INFO - orders - Fetched 0 open orders for user 6
2025-07-16 06:13:43,776 - INFO - orders - Fetched 0 pending orders for user 6
2025-07-16 06:13:43,778 - INFO - orders - Updated static orders cache for user 6 with 0 open orders and 0 pending orders
2025-07-16 06:13:43,785 - INFO - orders - User 6: Updated balance/margin cache after static orders update - balance=100000.00000000, margin=0.0
2025-07-16 06:13:43,867 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 06:13:43,867 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 06:13:43,867 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 06:13:43,867 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 06:13:43,868 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 06:13:43,868 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 06:13:43,868 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 06:13:43,868 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 06:13:43,868 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 06:13:47,352 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 06:13:52,349 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 21:19:52,890 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 21:19:54,002 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 21:19:54,002 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 21:19:54,003 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 21:19:54,003 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 21:19:58,058 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 21:19:58,058 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 21:19:59,682 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 21:20:04,003 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 21:20:12,148 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 21:20:12,149 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 21:20:12,149 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 21:20:12,149 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 21:20:12,149 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 21:20:14,321 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 21:20:14,322 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 21:20:14,322 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 21:20:14,322 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 21:20:14,322 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 21:20:14,322 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 21:20:14,322 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 21:20:14,322 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 21:20:14,322 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 21:20:14,586 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 21:20:14,586 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 21:20:14,586 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 21:20:14,586 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 21:20:14,586 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 21:20:14,586 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 21:20:14,586 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 21:20:14,586 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 21:20:14,586 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 21:20:14,614 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 21:20:14,614 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 21:20:14,615 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 21:20:14,615 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 21:20:14,615 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 21:20:14,663 - INFO - orders - Starting update_user_static_orders for user 4, user_type demo
2025-07-16 21:20:14,663 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:20:14,670 - INFO - orders - Fetched 0 open orders for user 4
2025-07-16 21:20:14,676 - INFO - orders - Fetched 0 pending orders for user 4
2025-07-16 21:20:14,678 - INFO - orders - Updated static orders cache for user 4 with 0 open orders and 0 pending orders
2025-07-16 21:20:14,703 - INFO - orders - User 4: Updated balance/margin cache after static orders update - balance=100000.00000000, margin=0.0
2025-07-16 21:20:14,721 - INFO - orders - Starting update_user_static_orders for user 9, user_type demo
2025-07-16 21:20:14,721 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:20:14,723 - INFO - orders - Fetched 28 open orders for user 9
2025-07-16 21:20:14,725 - INFO - orders - Fetched 6 pending orders for user 9
2025-07-16 21:20:14,726 - INFO - orders - Updated static orders cache for user 9 with 28 open orders and 6 pending orders
2025-07-16 21:20:14,731 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol AUDUSD
2025-07-16 21:20:14,731 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol AUDUSD: TotalBuyQty=0.10000000, TotalSellQty=0.22000000, NetQty=0.22000000, IsHedged=True
2025-07-16 21:20:14,731 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol AUDUSD: AllMarginsPerLot=[Decimal('647.4'), Decimal('647.0909090909090909090909091')], HighestMarginPerLot=647.4
2025-07-16 21:20:14,731 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol AUDUSD: CalculatedTotalMargin=142.43
2025-07-16 21:20:14,731 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol CHFSGD
2025-07-16 21:20:14,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFSGD: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 21:20:14,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFSGD: AllMarginsPerLot=[Decimal('1223.5389131'), Decimal('1223.150636')], HighestMarginPerLot=1223.5389131
2025-07-16 21:20:14,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol CHFSGD: CalculatedTotalMargin=122.35
2025-07-16 21:20:14,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol CADJPY
2025-07-16 21:20:14,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CADJPY: TotalBuyQty=0.15000000, TotalSellQty=0.15000000, NetQty=0.15000000, IsHedged=True
2025-07-16 21:20:14,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CADJPY: AllMarginsPerLot=[Decimal('729.6658264666666666666666667'), Decimal('729.8549729333333333333333333')], HighestMarginPerLot=729.8549729333333333333333333
2025-07-16 21:20:14,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol CADJPY: CalculatedTotalMargin=109.48
2025-07-16 21:20:14,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 4 positions for User 9, Symbol EURAUD
2025-07-16 21:20:14,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURAUD: TotalBuyQty=0.27000000, TotalSellQty=0.26000000, NetQty=0.27000000, IsHedged=True
2025-07-16 21:20:14,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURAUD: AllMarginsPerLot=[Decimal('1148.786564545454545454545455'), Decimal('1148.503559047619047619047619'), Decimal('1148.863536'), Decimal('1148.622352')], HighestMarginPerLot=1148.863536
2025-07-16 21:20:14,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURAUD: CalculatedTotalMargin=310.19
2025-07-16 21:20:14,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol CHFJPY
2025-07-16 21:20:14,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFJPY: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 21:20:14,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFJPY: AllMarginsPerLot=[Decimal('1223.5584187'), Decimal('1223.1379417')], HighestMarginPerLot=1223.5584187
2025-07-16 21:20:14,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol CHFJPY: CalculatedTotalMargin=122.36
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol EURGBP
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURGBP: TotalBuyQty=0, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=False
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURGBP: AllMarginsPerLot=[Decimal('1148.51044')], HighestMarginPerLot=1148.51044
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURGBP: CalculatedTotalMargin=114.85
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol EURJPY
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURJPY: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURJPY: AllMarginsPerLot=[Decimal('1148.7277223'), Decimal('1148.5285533')], HighestMarginPerLot=1148.7277223
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURJPY: CalculatedTotalMargin=114.87
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol EURNZD
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURNZD: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURNZD: AllMarginsPerLot=[Decimal('1148.532825'), Decimal('1148.192298')], HighestMarginPerLot=1148.532825
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURNZD: CalculatedTotalMargin=114.85
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 4 positions for User 9, Symbol GBPUSD
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol GBPUSD: TotalBuyQty=0.50000000, TotalSellQty=0.50000000, NetQty=0.50000000, IsHedged=True
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol GBPUSD: AllMarginsPerLot=[Decimal('0'), Decimal('0'), Decimal('0'), Decimal('0')], HighestMarginPerLot=0
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol GBPUSD: CalculatedTotalMargin=0.00
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol NZDJPY
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol NZDJPY: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol NZDJPY: AllMarginsPerLot=[Decimal('597.837949')], HighestMarginPerLot=597.837949
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol NZDJPY: CalculatedTotalMargin=5.98
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol USDCHF
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDCHF: TotalBuyQty=0.15000000, TotalSellQty=0.15000000, NetQty=0.15000000, IsHedged=True
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDCHF: AllMarginsPerLot=[Decimal('999.8084502'), Decimal('1000.203773866666666666666667')], HighestMarginPerLot=1000.203773866666666666666667
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDCHF: CalculatedTotalMargin=150.03
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol USDNOK
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDNOK: TotalBuyQty=0.20000000, TotalSellQty=0, NetQty=0.20000000, IsHedged=False
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDNOK: AllMarginsPerLot=[Decimal('1000.0169162'), Decimal('1000.0169154')], HighestMarginPerLot=1000.0169162
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDNOK: CalculatedTotalMargin=200.00
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol USDSGD
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDSGD: TotalBuyQty=0, TotalSellQty=0.31000000, NetQty=0.31000000, IsHedged=False
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDSGD: AllMarginsPerLot=[Decimal('999.7869010967741935483870968')], HighestMarginPerLot=999.7869010967741935483870968
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDSGD: CalculatedTotalMargin=309.93
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol USDTRY
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDTRY: TotalBuyQty=0, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=False
2025-07-16 21:20:14,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDTRY: AllMarginsPerLot=[Decimal('999.8738813')], HighestMarginPerLot=999.8738813
2025-07-16 21:20:14,734 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDTRY: CalculatedTotalMargin=99.99
2025-07-16 21:20:14,734 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 1917.31
2025-07-16 21:20:14,735 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=98181.73000000, margin=1917.31
2025-07-16 21:20:14,736 - INFO - orders - Starting update_user_static_orders for user 10, user_type demo
2025-07-16 21:20:14,736 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:20:14,738 - INFO - orders - Fetched 0 open orders for user 10
2025-07-16 21:20:14,740 - INFO - orders - Fetched 1 pending orders for user 10
2025-07-16 21:20:14,741 - INFO - orders - Updated static orders cache for user 10 with 0 open orders and 1 pending orders
2025-07-16 21:20:14,746 - INFO - orders - User 10: Updated balance/margin cache after static orders update - balance=9958.40000000, margin=0.0
2025-07-16 21:20:14,747 - INFO - orders - Starting update_user_static_orders for user 11, user_type demo
2025-07-16 21:20:14,747 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:20:14,749 - INFO - orders - Fetched 1 open orders for user 11
2025-07-16 21:20:14,750 - INFO - orders - Fetched 0 pending orders for user 11
2025-07-16 21:20:14,751 - INFO - orders - Updated static orders cache for user 11 with 1 open orders and 0 pending orders
2025-07-16 21:20:14,758 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 11, Symbol AUDCAD
2025-07-16 21:20:14,758 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 11, Symbol AUDCAD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 21:20:14,758 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 11, Symbol AUDCAD: AllMarginsPerLot=[Decimal('655.364428')], HighestMarginPerLot=655.364428
2025-07-16 21:20:14,758 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 11, Symbol AUDCAD: CalculatedTotalMargin=6.55
2025-07-16 21:20:14,758 - INFO - orders - [TOTAL_USER_MARGIN] User 11 total margin across all symbols: 6.55
2025-07-16 21:20:14,761 - INFO - orders - User 11: Updated balance/margin cache after static orders update - balance=99998.61000000, margin=6.55
2025-07-16 21:20:14,764 - INFO - orders - Starting update_user_static_orders for user 12, user_type demo
2025-07-16 21:20:14,764 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:20:14,766 - INFO - orders - Fetched 0 open orders for user 12
2025-07-16 21:20:14,768 - INFO - orders - Fetched 0 pending orders for user 12
2025-07-16 21:20:14,769 - INFO - orders - Updated static orders cache for user 12 with 0 open orders and 0 pending orders
2025-07-16 21:20:14,779 - INFO - orders - User 12: Updated balance/margin cache after static orders update - balance=99984.34000000, margin=0.0
2025-07-16 21:20:14,780 - INFO - orders - Starting update_user_static_orders for user 13, user_type demo
2025-07-16 21:20:14,780 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:20:14,782 - INFO - orders - Fetched 0 open orders for user 13
2025-07-16 21:20:14,784 - INFO - orders - Fetched 0 pending orders for user 13
2025-07-16 21:20:14,785 - INFO - orders - Updated static orders cache for user 13 with 0 open orders and 0 pending orders
2025-07-16 21:20:14,795 - INFO - orders - User 13: Updated balance/margin cache after static orders update - balance=10000.00000000, margin=0.0
2025-07-16 21:22:18,464 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 21:22:19,481 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 21:22:19,495 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 21:22:19,497 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 21:22:19,497 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 21:22:23,551 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 21:22:23,552 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 21:22:33,397 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 21:22:34,258 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 21:22:34,259 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 21:22:34,259 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 21:22:34,259 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 21:22:38,343 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 21:22:38,344 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 21:22:39,267 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 21:22:44,259 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 21:22:51,447 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 21:22:51,457 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 21:22:51,457 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 21:22:51,457 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 21:22:51,458 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 21:22:53,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 21:22:53,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 21:22:53,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 21:22:53,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 21:22:53,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 21:22:53,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 21:22:53,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 21:22:53,608 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 21:22:53,608 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 21:22:53,724 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 21:22:53,724 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 21:22:53,724 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 21:22:53,724 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 21:22:53,724 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 21:22:53,724 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 21:22:53,724 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 21:22:53,724 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 21:22:53,724 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 21:22:53,734 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 21:22:53,734 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 21:22:53,734 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 21:22:53,734 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 21:22:53,734 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 21:22:53,747 - INFO - orders - Starting update_user_static_orders for user 4, user_type demo
2025-07-16 21:22:53,747 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:22:53,749 - INFO - orders - Fetched 0 open orders for user 4
2025-07-16 21:22:53,752 - INFO - orders - Fetched 0 pending orders for user 4
2025-07-16 21:22:53,752 - INFO - orders - Updated static orders cache for user 4 with 0 open orders and 0 pending orders
2025-07-16 21:22:53,759 - INFO - orders - User 4: Updated balance/margin cache after static orders update - balance=100000.00000000, margin=0.0
2025-07-16 21:22:53,771 - INFO - orders - Starting update_user_static_orders for user 9, user_type demo
2025-07-16 21:22:53,771 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:22:53,775 - INFO - orders - Fetched 28 open orders for user 9
2025-07-16 21:22:53,777 - INFO - orders - Fetched 6 pending orders for user 9
2025-07-16 21:22:53,778 - INFO - orders - Updated static orders cache for user 9 with 28 open orders and 6 pending orders
2025-07-16 21:22:53,785 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol AUDUSD
2025-07-16 21:22:53,785 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol AUDUSD: TotalBuyQty=0.10000000, TotalSellQty=0.22000000, NetQty=0.22000000, IsHedged=True
2025-07-16 21:22:53,785 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol AUDUSD: AllMarginsPerLot=[Decimal('647.4'), Decimal('647.0909090909090909090909091')], HighestMarginPerLot=647.4
2025-07-16 21:22:53,785 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol AUDUSD: CalculatedTotalMargin=142.43
2025-07-16 21:22:53,785 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol CHFSGD
2025-07-16 21:22:53,785 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFSGD: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 21:22:53,785 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFSGD: AllMarginsPerLot=[Decimal('1223.5389131'), Decimal('1223.150636')], HighestMarginPerLot=1223.5389131
2025-07-16 21:22:53,785 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol CHFSGD: CalculatedTotalMargin=122.35
2025-07-16 21:22:53,785 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol CADJPY
2025-07-16 21:22:53,785 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CADJPY: TotalBuyQty=0.15000000, TotalSellQty=0.15000000, NetQty=0.15000000, IsHedged=True
2025-07-16 21:22:53,785 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CADJPY: AllMarginsPerLot=[Decimal('729.6658264666666666666666667'), Decimal('729.8549729333333333333333333')], HighestMarginPerLot=729.8549729333333333333333333
2025-07-16 21:22:53,785 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol CADJPY: CalculatedTotalMargin=109.48
2025-07-16 21:22:53,785 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 4 positions for User 9, Symbol EURAUD
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURAUD: TotalBuyQty=0.27000000, TotalSellQty=0.26000000, NetQty=0.27000000, IsHedged=True
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURAUD: AllMarginsPerLot=[Decimal('1148.786564545454545454545455'), Decimal('1148.503559047619047619047619'), Decimal('1148.863536'), Decimal('1148.622352')], HighestMarginPerLot=1148.863536
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURAUD: CalculatedTotalMargin=310.19
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol CHFJPY
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFJPY: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFJPY: AllMarginsPerLot=[Decimal('1223.5584187'), Decimal('1223.1379417')], HighestMarginPerLot=1223.5584187
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol CHFJPY: CalculatedTotalMargin=122.36
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol EURGBP
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURGBP: TotalBuyQty=0, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=False
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURGBP: AllMarginsPerLot=[Decimal('1148.51044')], HighestMarginPerLot=1148.51044
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURGBP: CalculatedTotalMargin=114.85
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol EURJPY
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURJPY: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURJPY: AllMarginsPerLot=[Decimal('1148.7277223'), Decimal('1148.5285533')], HighestMarginPerLot=1148.7277223
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURJPY: CalculatedTotalMargin=114.87
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol EURNZD
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURNZD: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURNZD: AllMarginsPerLot=[Decimal('1148.532825'), Decimal('1148.192298')], HighestMarginPerLot=1148.532825
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURNZD: CalculatedTotalMargin=114.85
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 4 positions for User 9, Symbol GBPUSD
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol GBPUSD: TotalBuyQty=0.50000000, TotalSellQty=0.50000000, NetQty=0.50000000, IsHedged=True
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol GBPUSD: AllMarginsPerLot=[Decimal('0'), Decimal('0'), Decimal('0'), Decimal('0')], HighestMarginPerLot=0
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol GBPUSD: CalculatedTotalMargin=0.00
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol NZDJPY
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol NZDJPY: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol NZDJPY: AllMarginsPerLot=[Decimal('597.837949')], HighestMarginPerLot=597.837949
2025-07-16 21:22:53,786 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol NZDJPY: CalculatedTotalMargin=5.98
2025-07-16 21:22:53,787 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol USDCHF
2025-07-16 21:22:53,787 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDCHF: TotalBuyQty=0.15000000, TotalSellQty=0.15000000, NetQty=0.15000000, IsHedged=True
2025-07-16 21:22:53,787 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDCHF: AllMarginsPerLot=[Decimal('999.8084502'), Decimal('1000.203773866666666666666667')], HighestMarginPerLot=1000.203773866666666666666667
2025-07-16 21:22:53,787 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDCHF: CalculatedTotalMargin=150.03
2025-07-16 21:22:53,787 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol USDNOK
2025-07-16 21:22:53,787 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDNOK: TotalBuyQty=0.20000000, TotalSellQty=0, NetQty=0.20000000, IsHedged=False
2025-07-16 21:22:53,787 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDNOK: AllMarginsPerLot=[Decimal('1000.0169162'), Decimal('1000.0169154')], HighestMarginPerLot=1000.0169162
2025-07-16 21:22:53,787 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDNOK: CalculatedTotalMargin=200.00
2025-07-16 21:22:53,787 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol USDSGD
2025-07-16 21:22:53,787 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDSGD: TotalBuyQty=0, TotalSellQty=0.31000000, NetQty=0.31000000, IsHedged=False
2025-07-16 21:22:53,787 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDSGD: AllMarginsPerLot=[Decimal('999.7869010967741935483870968')], HighestMarginPerLot=999.7869010967741935483870968
2025-07-16 21:22:53,787 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDSGD: CalculatedTotalMargin=309.93
2025-07-16 21:22:53,787 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol USDTRY
2025-07-16 21:22:53,787 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDTRY: TotalBuyQty=0, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=False
2025-07-16 21:22:53,787 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDTRY: AllMarginsPerLot=[Decimal('999.8738813')], HighestMarginPerLot=999.8738813
2025-07-16 21:22:53,787 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDTRY: CalculatedTotalMargin=99.99
2025-07-16 21:22:53,787 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 1917.31
2025-07-16 21:22:53,789 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=98181.73000000, margin=1917.31
2025-07-16 21:22:53,790 - INFO - orders - Starting update_user_static_orders for user 10, user_type demo
2025-07-16 21:22:53,790 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:22:53,792 - INFO - orders - Fetched 0 open orders for user 10
2025-07-16 21:22:53,794 - INFO - orders - Fetched 1 pending orders for user 10
2025-07-16 21:22:53,794 - INFO - orders - Updated static orders cache for user 10 with 0 open orders and 1 pending orders
2025-07-16 21:22:53,801 - INFO - orders - User 10: Updated balance/margin cache after static orders update - balance=9958.40000000, margin=0.0
2025-07-16 21:22:53,802 - INFO - orders - Starting update_user_static_orders for user 11, user_type demo
2025-07-16 21:22:53,802 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:22:53,804 - INFO - orders - Fetched 1 open orders for user 11
2025-07-16 21:22:53,806 - INFO - orders - Fetched 0 pending orders for user 11
2025-07-16 21:22:53,806 - INFO - orders - Updated static orders cache for user 11 with 1 open orders and 0 pending orders
2025-07-16 21:22:53,814 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 11, Symbol AUDCAD
2025-07-16 21:22:53,814 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 11, Symbol AUDCAD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 21:22:53,815 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 11, Symbol AUDCAD: AllMarginsPerLot=[Decimal('655.364428')], HighestMarginPerLot=655.364428
2025-07-16 21:22:53,815 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 11, Symbol AUDCAD: CalculatedTotalMargin=6.55
2025-07-16 21:22:53,815 - INFO - orders - [TOTAL_USER_MARGIN] User 11 total margin across all symbols: 6.55
2025-07-16 21:22:53,816 - INFO - orders - User 11: Updated balance/margin cache after static orders update - balance=99998.61000000, margin=6.55
2025-07-16 21:22:53,817 - INFO - orders - Starting update_user_static_orders for user 12, user_type demo
2025-07-16 21:22:53,817 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:22:53,819 - INFO - orders - Fetched 0 open orders for user 12
2025-07-16 21:22:53,824 - INFO - orders - Fetched 0 pending orders for user 12
2025-07-16 21:22:53,824 - INFO - orders - Updated static orders cache for user 12 with 0 open orders and 0 pending orders
2025-07-16 21:22:53,830 - INFO - orders - User 12: Updated balance/margin cache after static orders update - balance=99984.34000000, margin=0.0
2025-07-16 21:22:53,831 - INFO - orders - Starting update_user_static_orders for user 13, user_type demo
2025-07-16 21:22:53,831 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:22:53,833 - INFO - orders - Fetched 0 open orders for user 13
2025-07-16 21:22:53,835 - INFO - orders - Fetched 0 pending orders for user 13
2025-07-16 21:22:53,835 - INFO - orders - Updated static orders cache for user 13 with 0 open orders and 0 pending orders
2025-07-16 21:22:53,842 - INFO - orders - User 13: Updated balance/margin cache after static orders update - balance=10000.00000000, margin=0.0
2025-07-16 21:24:22,540 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 21:24:23,835 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 21:24:23,836 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 21:24:23,836 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 21:24:23,836 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 21:24:27,921 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 21:24:27,922 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 21:24:28,838 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 21:24:33,848 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 21:24:38,845 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 21:24:38,845 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 21:24:38,846 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 21:24:38,846 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 21:24:38,846 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 21:24:43,053 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 21:24:43,053 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 21:24:43,053 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 21:24:43,054 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 21:24:43,054 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 21:24:43,054 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 21:24:43,054 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 21:24:43,054 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 21:24:43,054 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 21:24:43,276 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 21:24:43,276 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 21:24:43,276 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 21:24:43,276 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 21:24:43,276 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 21:24:43,276 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 21:24:43,276 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 21:24:43,276 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 21:24:43,277 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 21:24:43,292 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 21:24:43,292 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 21:24:43,292 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 21:24:43,292 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 21:24:43,292 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 21:24:43,309 - INFO - orders - Starting update_user_static_orders for user 4, user_type demo
2025-07-16 21:24:43,309 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:24:43,311 - INFO - orders - Fetched 0 open orders for user 4
2025-07-16 21:24:43,314 - INFO - orders - Fetched 0 pending orders for user 4
2025-07-16 21:24:43,315 - INFO - orders - Updated static orders cache for user 4 with 0 open orders and 0 pending orders
2025-07-16 21:24:43,325 - INFO - orders - User 4: Updated balance/margin cache after static orders update - balance=100000.00000000, margin=0.0
2025-07-16 21:24:43,346 - INFO - orders - Starting update_user_static_orders for user 9, user_type demo
2025-07-16 21:24:43,346 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:24:43,351 - INFO - orders - Fetched 28 open orders for user 9
2025-07-16 21:24:43,355 - INFO - orders - Fetched 6 pending orders for user 9
2025-07-16 21:24:43,357 - INFO - orders - Updated static orders cache for user 9 with 28 open orders and 6 pending orders
2025-07-16 21:24:43,366 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol AUDUSD
2025-07-16 21:24:43,366 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol AUDUSD: TotalBuyQty=0.10000000, TotalSellQty=0.22000000, NetQty=0.22000000, IsHedged=True
2025-07-16 21:24:43,366 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol AUDUSD: AllMarginsPerLot=[Decimal('647.4'), Decimal('647.0909090909090909090909091')], HighestMarginPerLot=647.4
2025-07-16 21:24:43,366 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol AUDUSD: CalculatedTotalMargin=142.43
2025-07-16 21:24:43,366 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol CHFSGD
2025-07-16 21:24:43,366 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFSGD: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 21:24:43,367 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFSGD: AllMarginsPerLot=[Decimal('1223.5389131'), Decimal('1223.150636')], HighestMarginPerLot=1223.5389131
2025-07-16 21:24:43,367 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol CHFSGD: CalculatedTotalMargin=122.35
2025-07-16 21:24:43,367 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol CADJPY
2025-07-16 21:24:43,367 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CADJPY: TotalBuyQty=0.15000000, TotalSellQty=0.15000000, NetQty=0.15000000, IsHedged=True
2025-07-16 21:24:43,367 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CADJPY: AllMarginsPerLot=[Decimal('729.6658264666666666666666667'), Decimal('729.8549729333333333333333333')], HighestMarginPerLot=729.8549729333333333333333333
2025-07-16 21:24:43,367 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol CADJPY: CalculatedTotalMargin=109.48
2025-07-16 21:24:43,367 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 4 positions for User 9, Symbol EURAUD
2025-07-16 21:24:43,367 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURAUD: TotalBuyQty=0.27000000, TotalSellQty=0.26000000, NetQty=0.27000000, IsHedged=True
2025-07-16 21:24:43,367 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURAUD: AllMarginsPerLot=[Decimal('1148.786564545454545454545455'), Decimal('1148.503559047619047619047619'), Decimal('1148.863536'), Decimal('1148.622352')], HighestMarginPerLot=1148.863536
2025-07-16 21:24:43,367 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURAUD: CalculatedTotalMargin=310.19
2025-07-16 21:24:43,367 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol CHFJPY
2025-07-16 21:24:43,367 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFJPY: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 21:24:43,367 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFJPY: AllMarginsPerLot=[Decimal('1223.5584187'), Decimal('1223.1379417')], HighestMarginPerLot=1223.5584187
2025-07-16 21:24:43,367 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol CHFJPY: CalculatedTotalMargin=122.36
2025-07-16 21:24:43,367 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol EURGBP
2025-07-16 21:24:43,367 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURGBP: TotalBuyQty=0, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=False
2025-07-16 21:24:43,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURGBP: AllMarginsPerLot=[Decimal('1148.51044')], HighestMarginPerLot=1148.51044
2025-07-16 21:24:43,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURGBP: CalculatedTotalMargin=114.85
2025-07-16 21:24:43,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol EURJPY
2025-07-16 21:24:43,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURJPY: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 21:24:43,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURJPY: AllMarginsPerLot=[Decimal('1148.7277223'), Decimal('1148.5285533')], HighestMarginPerLot=1148.7277223
2025-07-16 21:24:43,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURJPY: CalculatedTotalMargin=114.87
2025-07-16 21:24:43,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol EURNZD
2025-07-16 21:24:43,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURNZD: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 21:24:43,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURNZD: AllMarginsPerLot=[Decimal('1148.532825'), Decimal('1148.192298')], HighestMarginPerLot=1148.532825
2025-07-16 21:24:43,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURNZD: CalculatedTotalMargin=114.85
2025-07-16 21:24:43,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 4 positions for User 9, Symbol GBPUSD
2025-07-16 21:24:43,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol GBPUSD: TotalBuyQty=0.50000000, TotalSellQty=0.50000000, NetQty=0.50000000, IsHedged=True
2025-07-16 21:24:43,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol GBPUSD: AllMarginsPerLot=[Decimal('0'), Decimal('0'), Decimal('0'), Decimal('0')], HighestMarginPerLot=0
2025-07-16 21:24:43,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol GBPUSD: CalculatedTotalMargin=0.00
2025-07-16 21:24:43,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol NZDJPY
2025-07-16 21:24:43,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol NZDJPY: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 21:24:43,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol NZDJPY: AllMarginsPerLot=[Decimal('597.837949')], HighestMarginPerLot=597.837949
2025-07-16 21:24:43,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol NZDJPY: CalculatedTotalMargin=5.98
2025-07-16 21:24:43,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol USDCHF
2025-07-16 21:24:43,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDCHF: TotalBuyQty=0.15000000, TotalSellQty=0.15000000, NetQty=0.15000000, IsHedged=True
2025-07-16 21:24:43,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDCHF: AllMarginsPerLot=[Decimal('999.8084502'), Decimal('1000.203773866666666666666667')], HighestMarginPerLot=1000.203773866666666666666667
2025-07-16 21:24:43,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDCHF: CalculatedTotalMargin=150.03
2025-07-16 21:24:43,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol USDNOK
2025-07-16 21:24:43,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDNOK: TotalBuyQty=0.20000000, TotalSellQty=0, NetQty=0.20000000, IsHedged=False
2025-07-16 21:24:43,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDNOK: AllMarginsPerLot=[Decimal('1000.0169162'), Decimal('1000.0169154')], HighestMarginPerLot=1000.0169162
2025-07-16 21:24:43,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDNOK: CalculatedTotalMargin=200.00
2025-07-16 21:24:43,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol USDSGD
2025-07-16 21:24:43,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDSGD: TotalBuyQty=0, TotalSellQty=0.31000000, NetQty=0.31000000, IsHedged=False
2025-07-16 21:24:43,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDSGD: AllMarginsPerLot=[Decimal('999.7869010967741935483870968')], HighestMarginPerLot=999.7869010967741935483870968
2025-07-16 21:24:43,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDSGD: CalculatedTotalMargin=309.93
2025-07-16 21:24:43,370 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol USDTRY
2025-07-16 21:24:43,370 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDTRY: TotalBuyQty=0, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=False
2025-07-16 21:24:43,370 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDTRY: AllMarginsPerLot=[Decimal('999.8738813')], HighestMarginPerLot=999.8738813
2025-07-16 21:24:43,370 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDTRY: CalculatedTotalMargin=99.99
2025-07-16 21:24:43,370 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 1917.31
2025-07-16 21:24:43,372 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=98181.73000000, margin=1917.31
2025-07-16 21:24:43,372 - INFO - orders - Starting update_user_static_orders for user 10, user_type demo
2025-07-16 21:24:43,372 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:24:43,374 - INFO - orders - Fetched 0 open orders for user 10
2025-07-16 21:24:43,376 - INFO - orders - Fetched 1 pending orders for user 10
2025-07-16 21:24:43,377 - INFO - orders - Updated static orders cache for user 10 with 0 open orders and 1 pending orders
2025-07-16 21:24:43,385 - INFO - orders - User 10: Updated balance/margin cache after static orders update - balance=9958.40000000, margin=0.0
2025-07-16 21:24:43,386 - INFO - orders - Starting update_user_static_orders for user 11, user_type demo
2025-07-16 21:24:43,386 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:24:43,389 - INFO - orders - Fetched 1 open orders for user 11
2025-07-16 21:24:43,391 - INFO - orders - Fetched 0 pending orders for user 11
2025-07-16 21:24:43,391 - INFO - orders - Updated static orders cache for user 11 with 1 open orders and 0 pending orders
2025-07-16 21:24:43,397 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 11, Symbol AUDCAD
2025-07-16 21:24:43,398 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 11, Symbol AUDCAD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 21:24:43,398 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 11, Symbol AUDCAD: AllMarginsPerLot=[Decimal('655.364428')], HighestMarginPerLot=655.364428
2025-07-16 21:24:43,398 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 11, Symbol AUDCAD: CalculatedTotalMargin=6.55
2025-07-16 21:24:43,398 - INFO - orders - [TOTAL_USER_MARGIN] User 11 total margin across all symbols: 6.55
2025-07-16 21:24:43,400 - INFO - orders - User 11: Updated balance/margin cache after static orders update - balance=99998.61000000, margin=6.55
2025-07-16 21:24:43,401 - INFO - orders - Starting update_user_static_orders for user 12, user_type demo
2025-07-16 21:24:43,401 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:24:43,403 - INFO - orders - Fetched 0 open orders for user 12
2025-07-16 21:24:43,405 - INFO - orders - Fetched 0 pending orders for user 12
2025-07-16 21:24:43,406 - INFO - orders - Updated static orders cache for user 12 with 0 open orders and 0 pending orders
2025-07-16 21:24:43,415 - INFO - orders - User 12: Updated balance/margin cache after static orders update - balance=99984.34000000, margin=0.0
2025-07-16 21:24:43,416 - INFO - orders - Starting update_user_static_orders for user 13, user_type demo
2025-07-16 21:24:43,416 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:24:43,418 - INFO - orders - Fetched 0 open orders for user 13
2025-07-16 21:24:43,420 - INFO - orders - Fetched 0 pending orders for user 13
2025-07-16 21:24:43,421 - INFO - orders - Updated static orders cache for user 13 with 0 open orders and 0 pending orders
2025-07-16 21:24:43,430 - INFO - orders - User 13: Updated balance/margin cache after static orders update - balance=10000.00000000, margin=0.0
2025-07-16 21:31:09,220 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 21:31:10,352 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 21:31:10,352 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 21:31:10,352 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 21:31:10,352 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 21:31:10,390 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 21:31:10,390 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 21:31:11,149 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 21:31:11,149 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 21:31:11,149 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 21:31:11,149 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 21:31:11,149 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 21:31:11,171 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 21:31:11,171 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 21:31:11,171 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 21:31:11,171 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 21:31:11,171 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 21:31:11,171 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 21:31:11,171 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 21:31:11,171 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 21:31:11,171 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 21:31:11,214 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 21:31:11,214 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 21:31:11,214 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 21:31:11,214 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 21:31:11,214 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 21:31:11,214 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 21:31:11,214 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 21:31:11,214 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 21:31:11,214 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 21:31:11,221 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 21:31:11,221 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 21:31:11,221 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 21:31:11,221 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 21:31:11,221 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 21:31:11,232 - INFO - orders - Starting update_user_static_orders for user 4, user_type demo
2025-07-16 21:31:11,232 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:31:11,233 - INFO - orders - Fetched 0 open orders for user 4
2025-07-16 21:31:11,234 - INFO - orders - Fetched 0 pending orders for user 4
2025-07-16 21:31:11,235 - INFO - orders - Updated static orders cache for user 4 with 0 open orders and 0 pending orders
2025-07-16 21:31:11,240 - INFO - orders - User 4: Updated balance/margin cache after static orders update - balance=100000.00000000, margin=0.0
2025-07-16 21:31:11,251 - INFO - orders - Starting update_user_static_orders for user 9, user_type demo
2025-07-16 21:31:11,251 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:31:11,253 - INFO - orders - Fetched 28 open orders for user 9
2025-07-16 21:31:11,254 - INFO - orders - Fetched 6 pending orders for user 9
2025-07-16 21:31:11,299 - INFO - orders - Updated static orders cache for user 9 with 28 open orders and 6 pending orders
2025-07-16 21:31:11,314 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol AUDUSD
2025-07-16 21:31:11,314 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol AUDUSD: TotalBuyQty=0.10000000, TotalSellQty=0.22000000, NetQty=0.22000000, IsHedged=True
2025-07-16 21:31:11,314 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol AUDUSD: AllMarginsPerLot=[Decimal('647.4'), Decimal('647.0909090909090909090909091')], HighestMarginPerLot=647.4
2025-07-16 21:31:11,314 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol AUDUSD: CalculatedTotalMargin=142.43
2025-07-16 21:31:11,314 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol CHFSGD
2025-07-16 21:31:11,314 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFSGD: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 21:31:11,314 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFSGD: AllMarginsPerLot=[Decimal('1223.5389131'), Decimal('1223.150636')], HighestMarginPerLot=1223.5389131
2025-07-16 21:31:11,314 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol CHFSGD: CalculatedTotalMargin=122.35
2025-07-16 21:31:11,315 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol CADJPY
2025-07-16 21:31:11,315 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CADJPY: TotalBuyQty=0.15000000, TotalSellQty=0.15000000, NetQty=0.15000000, IsHedged=True
2025-07-16 21:31:11,315 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CADJPY: AllMarginsPerLot=[Decimal('729.6658264666666666666666667'), Decimal('729.8549729333333333333333333')], HighestMarginPerLot=729.8549729333333333333333333
2025-07-16 21:31:11,315 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol CADJPY: CalculatedTotalMargin=109.48
2025-07-16 21:31:11,315 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 4 positions for User 9, Symbol EURAUD
2025-07-16 21:31:11,315 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURAUD: TotalBuyQty=0.27000000, TotalSellQty=0.26000000, NetQty=0.27000000, IsHedged=True
2025-07-16 21:31:11,315 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURAUD: AllMarginsPerLot=[Decimal('1148.786564545454545454545455'), Decimal('1148.503559047619047619047619'), Decimal('1148.863536'), Decimal('1148.622352')], HighestMarginPerLot=1148.863536
2025-07-16 21:31:11,315 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURAUD: CalculatedTotalMargin=310.19
2025-07-16 21:31:11,315 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol CHFJPY
2025-07-16 21:31:11,315 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFJPY: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 21:31:11,315 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFJPY: AllMarginsPerLot=[Decimal('1223.5584187'), Decimal('1223.1379417')], HighestMarginPerLot=1223.5584187
2025-07-16 21:31:11,315 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol CHFJPY: CalculatedTotalMargin=122.36
2025-07-16 21:31:11,315 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol EURGBP
2025-07-16 21:31:11,315 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURGBP: TotalBuyQty=0, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=False
2025-07-16 21:31:11,315 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURGBP: AllMarginsPerLot=[Decimal('1148.51044')], HighestMarginPerLot=1148.51044
2025-07-16 21:31:11,315 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURGBP: CalculatedTotalMargin=114.85
2025-07-16 21:31:11,315 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol EURJPY
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURJPY: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURJPY: AllMarginsPerLot=[Decimal('1148.7277223'), Decimal('1148.5285533')], HighestMarginPerLot=1148.7277223
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURJPY: CalculatedTotalMargin=114.87
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol EURNZD
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURNZD: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURNZD: AllMarginsPerLot=[Decimal('1148.532825'), Decimal('1148.192298')], HighestMarginPerLot=1148.532825
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURNZD: CalculatedTotalMargin=114.85
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 4 positions for User 9, Symbol GBPUSD
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol GBPUSD: TotalBuyQty=0.50000000, TotalSellQty=0.50000000, NetQty=0.50000000, IsHedged=True
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol GBPUSD: AllMarginsPerLot=[Decimal('0'), Decimal('0'), Decimal('0'), Decimal('0')], HighestMarginPerLot=0
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol GBPUSD: CalculatedTotalMargin=0.00
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol NZDJPY
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol NZDJPY: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol NZDJPY: AllMarginsPerLot=[Decimal('597.837949')], HighestMarginPerLot=597.837949
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol NZDJPY: CalculatedTotalMargin=5.98
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol USDCHF
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDCHF: TotalBuyQty=0.15000000, TotalSellQty=0.15000000, NetQty=0.15000000, IsHedged=True
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDCHF: AllMarginsPerLot=[Decimal('999.8084502'), Decimal('1000.203773866666666666666667')], HighestMarginPerLot=1000.203773866666666666666667
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDCHF: CalculatedTotalMargin=150.03
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol USDNOK
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDNOK: TotalBuyQty=0.20000000, TotalSellQty=0, NetQty=0.20000000, IsHedged=False
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDNOK: AllMarginsPerLot=[Decimal('1000.0169162'), Decimal('1000.0169154')], HighestMarginPerLot=1000.0169162
2025-07-16 21:31:11,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDNOK: CalculatedTotalMargin=200.00
2025-07-16 21:31:11,317 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol USDSGD
2025-07-16 21:31:11,317 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDSGD: TotalBuyQty=0, TotalSellQty=0.31000000, NetQty=0.31000000, IsHedged=False
2025-07-16 21:31:11,317 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDSGD: AllMarginsPerLot=[Decimal('999.7869010967741935483870968')], HighestMarginPerLot=999.7869010967741935483870968
2025-07-16 21:31:11,317 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDSGD: CalculatedTotalMargin=309.93
2025-07-16 21:31:11,317 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol USDTRY
2025-07-16 21:31:11,317 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDTRY: TotalBuyQty=0, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=False
2025-07-16 21:31:11,317 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDTRY: AllMarginsPerLot=[Decimal('999.8738813')], HighestMarginPerLot=999.8738813
2025-07-16 21:31:11,317 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDTRY: CalculatedTotalMargin=99.99
2025-07-16 21:31:11,317 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 1917.31
2025-07-16 21:31:11,321 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=98181.73000000, margin=1917.31
2025-07-16 21:31:11,322 - INFO - orders - Starting update_user_static_orders for user 10, user_type demo
2025-07-16 21:31:11,322 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:31:11,325 - INFO - orders - Fetched 0 open orders for user 10
2025-07-16 21:31:11,326 - INFO - orders - Fetched 1 pending orders for user 10
2025-07-16 21:31:11,328 - INFO - orders - Updated static orders cache for user 10 with 0 open orders and 1 pending orders
2025-07-16 21:31:11,341 - INFO - orders - User 10: Updated balance/margin cache after static orders update - balance=9958.40000000, margin=0.0
2025-07-16 21:31:11,343 - INFO - orders - Starting update_user_static_orders for user 11, user_type demo
2025-07-16 21:31:11,343 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:31:11,346 - INFO - orders - Fetched 1 open orders for user 11
2025-07-16 21:31:11,347 - INFO - orders - Fetched 0 pending orders for user 11
2025-07-16 21:31:11,348 - INFO - orders - Updated static orders cache for user 11 with 1 open orders and 0 pending orders
2025-07-16 21:31:11,354 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 11, Symbol AUDCAD
2025-07-16 21:31:11,354 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 11, Symbol AUDCAD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 21:31:11,354 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 11, Symbol AUDCAD: AllMarginsPerLot=[Decimal('655.364428')], HighestMarginPerLot=655.364428
2025-07-16 21:31:11,354 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 11, Symbol AUDCAD: CalculatedTotalMargin=6.55
2025-07-16 21:31:11,354 - INFO - orders - [TOTAL_USER_MARGIN] User 11 total margin across all symbols: 6.55
2025-07-16 21:31:11,356 - INFO - orders - User 11: Updated balance/margin cache after static orders update - balance=99998.61000000, margin=6.55
2025-07-16 21:31:11,357 - INFO - orders - Starting update_user_static_orders for user 12, user_type demo
2025-07-16 21:31:11,357 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:31:11,358 - INFO - orders - Fetched 0 open orders for user 12
2025-07-16 21:31:11,359 - INFO - orders - Fetched 0 pending orders for user 12
2025-07-16 21:31:11,360 - INFO - orders - Updated static orders cache for user 12 with 0 open orders and 0 pending orders
2025-07-16 21:31:11,366 - INFO - orders - User 12: Updated balance/margin cache after static orders update - balance=99984.34000000, margin=0.0
2025-07-16 21:31:11,367 - INFO - orders - Starting update_user_static_orders for user 13, user_type demo
2025-07-16 21:31:11,367 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:31:11,368 - INFO - orders - Fetched 0 open orders for user 13
2025-07-16 21:31:11,369 - INFO - orders - Fetched 0 pending orders for user 13
2025-07-16 21:31:11,370 - INFO - orders - Updated static orders cache for user 13 with 0 open orders and 0 pending orders
2025-07-16 21:31:11,375 - INFO - orders - User 13: Updated balance/margin cache after static orders update - balance=10000.00000000, margin=0.0
2025-07-16 21:31:15,365 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 21:31:20,356 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 21:35:20,489 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 21:35:21,530 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 21:35:21,533 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 21:35:21,534 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 21:35:21,534 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 21:35:21,561 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 21:35:21,561 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 21:35:22,217 - INFO - orders - Starting update_user_static_orders for user 5, user_type live
2025-07-16 21:35:22,217 - INFO - orders - Using order model: UserOrder
2025-07-16 21:35:22,220 - INFO - orders - Fetched 0 open orders for user 5
2025-07-16 21:35:22,222 - INFO - orders - Fetched 0 pending orders for user 5
2025-07-16 21:35:22,224 - INFO - orders - Updated static orders cache for user 5 with 0 open orders and 0 pending orders
2025-07-16 21:35:22,227 - WARNING - orders - User 5: Could not get user data for balance/margin cache update
2025-07-16 21:35:22,228 - INFO - orders - Starting update_user_static_orders for user 8, user_type live
2025-07-16 21:35:22,228 - INFO - orders - Using order model: UserOrder
2025-07-16 21:35:22,230 - INFO - orders - Fetched 0 open orders for user 8
2025-07-16 21:35:22,231 - INFO - orders - Fetched 0 pending orders for user 8
2025-07-16 21:35:22,232 - INFO - orders - Updated static orders cache for user 8 with 0 open orders and 0 pending orders
2025-07-16 21:35:22,235 - INFO - orders - User 8: Updated balance/margin cache after static orders update - balance=0E-8, margin=0.0
2025-07-16 21:35:22,239 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-16 21:35:22,239 - INFO - orders - Using order model: UserOrder
2025-07-16 21:35:22,241 - INFO - orders - Fetched 3 open orders for user 14
2025-07-16 21:35:22,242 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-16 21:35:22,243 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-16 21:35:22,245 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 21:35:22,245 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 21:35:22,245 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 21:35:22,245 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 21:35:22,245 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 21:35:22,245 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 21:35:22,245 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 21:35:22,245 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 21:35:22,245 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 21:35:22,246 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-16 21:35:22,247 - INFO - orders - Starting update_user_static_orders for user 16, user_type live
2025-07-16 21:35:22,247 - INFO - orders - Using order model: UserOrder
2025-07-16 21:35:22,248 - INFO - orders - Fetched 0 open orders for user 16
2025-07-16 21:35:22,249 - INFO - orders - Fetched 0 pending orders for user 16
2025-07-16 21:35:22,250 - INFO - orders - Updated static orders cache for user 16 with 0 open orders and 0 pending orders
2025-07-16 21:35:22,252 - INFO - orders - User 16: Updated balance/margin cache after static orders update - balance=0E-8, margin=0.0
2025-07-16 21:35:22,253 - INFO - orders - Starting update_user_static_orders for user 17, user_type live
2025-07-16 21:35:22,253 - INFO - orders - Using order model: UserOrder
2025-07-16 21:35:22,254 - INFO - orders - Fetched 0 open orders for user 17
2025-07-16 21:35:22,255 - INFO - orders - Fetched 0 pending orders for user 17
2025-07-16 21:35:22,256 - INFO - orders - Updated static orders cache for user 17 with 0 open orders and 0 pending orders
2025-07-16 21:35:22,259 - INFO - orders - User 17: Updated balance/margin cache after static orders update - balance=26302.98000000, margin=0.0
2025-07-16 21:35:22,260 - INFO - orders - Starting update_user_static_orders for user 18, user_type live
2025-07-16 21:35:22,260 - INFO - orders - Using order model: UserOrder
2025-07-16 21:35:22,261 - INFO - orders - Fetched 0 open orders for user 18
2025-07-16 21:35:22,262 - INFO - orders - Fetched 0 pending orders for user 18
2025-07-16 21:35:22,262 - INFO - orders - Updated static orders cache for user 18 with 0 open orders and 0 pending orders
2025-07-16 21:35:22,265 - INFO - orders - User 18: Updated balance/margin cache after static orders update - balance=17323.75000000, margin=0.0
2025-07-16 21:35:22,265 - INFO - orders - Starting update_user_static_orders for user 19, user_type live
2025-07-16 21:35:22,265 - INFO - orders - Using order model: UserOrder
2025-07-16 21:35:22,266 - INFO - orders - Fetched 0 open orders for user 19
2025-07-16 21:35:22,267 - INFO - orders - Fetched 0 pending orders for user 19
2025-07-16 21:35:22,268 - INFO - orders - Updated static orders cache for user 19 with 0 open orders and 0 pending orders
2025-07-16 21:35:22,270 - INFO - orders - User 19: Updated balance/margin cache after static orders update - balance=9610.04000000, margin=0.0
2025-07-16 21:35:22,271 - INFO - orders - Starting update_user_static_orders for user 20, user_type live
2025-07-16 21:35:22,271 - INFO - orders - Using order model: UserOrder
2025-07-16 21:35:22,272 - INFO - orders - Fetched 0 open orders for user 20
2025-07-16 21:35:22,272 - INFO - orders - Fetched 0 pending orders for user 20
2025-07-16 21:35:22,273 - INFO - orders - Updated static orders cache for user 20 with 0 open orders and 0 pending orders
2025-07-16 21:35:22,276 - INFO - orders - User 20: Updated balance/margin cache after static orders update - balance=8712.00000000, margin=0.0
2025-07-16 21:35:22,277 - INFO - orders - Starting update_user_static_orders for user 21, user_type live
2025-07-16 21:35:22,277 - INFO - orders - Using order model: UserOrder
2025-07-16 21:35:22,278 - INFO - orders - Fetched 0 open orders for user 21
2025-07-16 21:35:22,279 - INFO - orders - Fetched 0 pending orders for user 21
2025-07-16 21:35:22,280 - INFO - orders - Updated static orders cache for user 21 with 0 open orders and 0 pending orders
2025-07-16 21:35:22,283 - INFO - orders - User 21: Updated balance/margin cache after static orders update - balance=0E-8, margin=0.0
2025-07-16 21:35:22,284 - INFO - orders - Starting update_user_static_orders for user 22, user_type live
2025-07-16 21:35:22,284 - INFO - orders - Using order model: UserOrder
2025-07-16 21:35:22,285 - INFO - orders - Fetched 0 open orders for user 22
2025-07-16 21:35:22,286 - INFO - orders - Fetched 0 pending orders for user 22
2025-07-16 21:35:22,287 - INFO - orders - Updated static orders cache for user 22 with 0 open orders and 0 pending orders
2025-07-16 21:35:22,291 - INFO - orders - User 22: Updated balance/margin cache after static orders update - balance=5961.56000000, margin=0.0
2025-07-16 21:35:22,292 - INFO - orders - Starting update_user_static_orders for user 23, user_type live
2025-07-16 21:35:22,292 - INFO - orders - Using order model: UserOrder
2025-07-16 21:35:22,293 - INFO - orders - Fetched 0 open orders for user 23
2025-07-16 21:35:22,294 - INFO - orders - Fetched 0 pending orders for user 23
2025-07-16 21:35:22,295 - INFO - orders - Updated static orders cache for user 23 with 0 open orders and 0 pending orders
2025-07-16 21:35:22,298 - INFO - orders - User 23: Updated balance/margin cache after static orders update - balance=1000000.00000000, margin=0.0
2025-07-16 21:35:22,300 - INFO - orders - Starting update_user_static_orders for user 25, user_type live
2025-07-16 21:35:22,300 - INFO - orders - Using order model: UserOrder
2025-07-16 21:35:22,301 - INFO - orders - Fetched 0 open orders for user 25
2025-07-16 21:35:22,303 - INFO - orders - Fetched 0 pending orders for user 25
2025-07-16 21:35:22,303 - INFO - orders - Updated static orders cache for user 25 with 0 open orders and 0 pending orders
2025-07-16 21:35:22,307 - INFO - orders - User 25: Updated balance/margin cache after static orders update - balance=250000.00000000, margin=0.0
2025-07-16 21:35:22,309 - INFO - orders - Starting update_user_static_orders for user 26, user_type live
2025-07-16 21:35:22,309 - INFO - orders - Using order model: UserOrder
2025-07-16 21:35:22,310 - INFO - orders - Fetched 2 open orders for user 26
2025-07-16 21:35:22,311 - INFO - orders - Fetched 0 pending orders for user 26
2025-07-16 21:35:22,312 - INFO - orders - Updated static orders cache for user 26 with 2 open orders and 0 pending orders
2025-07-16 21:35:22,314 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 21:35:22,314 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 21:35:22,314 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 21:35:22,314 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 21:35:22,314 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 21:35:22,314 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 21:35:22,314 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 21:35:22,314 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 21:35:22,315 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 21:35:22,316 - INFO - orders - User 26: Updated balance/margin cache after static orders update - balance=184345.81000000, margin=146484.47
2025-07-16 21:35:22,318 - INFO - orders - Starting update_user_static_orders for user 1, user_type demo
2025-07-16 21:35:22,318 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:35:22,321 - INFO - orders - Fetched 2 open orders for user 1
2025-07-16 21:35:22,323 - INFO - orders - Fetched 1 pending orders for user 1
2025-07-16 21:35:22,324 - INFO - orders - Updated static orders cache for user 1 with 2 open orders and 1 pending orders
2025-07-16 21:35:22,326 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 21:35:22,326 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 21:35:22,326 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 21:35:22,326 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 21:35:22,326 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 21:35:22,328 - INFO - orders - User 1: Updated balance/margin cache after static orders update - balance=17011.54000000, margin=6.54
2025-07-16 21:35:22,329 - INFO - orders - Starting update_user_static_orders for user 2, user_type demo
2025-07-16 21:35:22,329 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:35:22,330 - INFO - orders - Fetched 0 open orders for user 2
2025-07-16 21:35:22,331 - INFO - orders - Fetched 0 pending orders for user 2
2025-07-16 21:35:22,331 - INFO - orders - Updated static orders cache for user 2 with 0 open orders and 0 pending orders
2025-07-16 21:35:22,334 - INFO - orders - User 2: Updated balance/margin cache after static orders update - balance=100000.00000000, margin=0.0
2025-07-16 21:35:22,335 - INFO - orders - Starting update_user_static_orders for user 3, user_type demo
2025-07-16 21:35:22,335 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:35:22,336 - INFO - orders - Fetched 0 open orders for user 3
2025-07-16 21:35:22,337 - INFO - orders - Fetched 0 pending orders for user 3
2025-07-16 21:35:22,338 - INFO - orders - Updated static orders cache for user 3 with 0 open orders and 0 pending orders
2025-07-16 21:35:22,341 - INFO - orders - User 3: Updated balance/margin cache after static orders update - balance=100000.00000000, margin=0.0
2025-07-16 21:35:22,343 - INFO - orders - Starting update_user_static_orders for user 6, user_type demo
2025-07-16 21:35:22,343 - INFO - orders - Using order model: DemoUserOrder
2025-07-16 21:35:22,344 - INFO - orders - Fetched 0 open orders for user 6
2025-07-16 21:35:22,345 - INFO - orders - Fetched 0 pending orders for user 6
2025-07-16 21:35:22,345 - INFO - orders - Updated static orders cache for user 6 with 0 open orders and 0 pending orders
2025-07-16 21:35:22,348 - INFO - orders - User 6: Updated balance/margin cache after static orders update - balance=100000.00000000, margin=0.0
2025-07-16 21:35:26,538 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 21:35:31,541 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 21:48:19,159 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 21:48:20,275 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 21:48:20,275 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 21:48:20,275 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 21:48:20,276 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 21:48:20,319 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 21:48:20,319 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 21:48:21,033 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 21:48:21,034 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 21:48:21,034 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 21:48:21,034 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 21:48:21,034 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 21:48:21,056 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 21:48:21,056 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 21:48:21,056 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 21:48:21,056 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 21:48:21,056 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 21:48:21,056 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 21:48:21,056 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 21:48:21,056 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 21:48:21,056 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 21:48:21,101 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 21:48:21,101 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 21:48:21,101 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 21:48:21,101 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 21:48:21,101 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 21:48:21,101 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 21:48:21,101 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 21:48:21,101 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 21:48:21,101 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 21:48:21,108 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 21:48:21,108 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 21:48:21,108 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 21:48:21,108 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 21:48:21,108 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 21:48:25,282 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 21:48:30,269 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 21:53:43,491 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 21:53:43,492 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 21:53:43,492 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 21:53:43,492 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 21:53:43,492 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 21:53:43,959 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 21:53:43,959 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 21:53:43,959 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 21:53:43,959 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 21:53:43,959 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 21:53:43,959 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 21:53:43,959 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 21:53:43,959 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 21:53:43,959 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 21:53:44,828 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 21:53:44,829 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 21:53:44,829 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 21:53:44,829 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 21:53:44,829 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 21:53:44,829 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 21:53:44,829 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 21:53:44,829 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 21:53:44,829 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 21:53:45,140 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 21:53:45,140 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 21:53:45,140 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 21:53:45,140 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 21:53:45,140 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 21:58:45,845 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 21:58:45,845 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 21:58:45,845 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 21:58:45,845 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 21:58:45,845 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 21:58:45,869 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 21:58:45,869 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 21:58:45,870 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 21:58:45,870 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 21:58:45,870 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 21:58:45,870 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 21:58:45,870 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 21:58:45,870 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 21:58:45,870 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 21:58:45,918 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 21:58:45,919 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 21:58:45,919 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 21:58:45,919 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 21:58:45,919 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 21:58:45,919 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 21:58:45,919 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 21:58:45,919 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 21:58:45,919 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 21:58:45,924 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 21:58:45,924 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 21:58:45,924 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 21:58:45,924 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 21:58:45,924 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 22:38:37,886 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 22:38:39,175 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 22:38:39,175 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 22:38:39,176 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 22:38:39,176 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 22:38:39,229 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 22:38:39,230 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 22:38:40,497 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 22:38:40,498 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 22:38:40,498 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 22:38:40,498 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 22:38:40,498 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 22:38:40,890 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 22:38:40,890 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 22:38:40,890 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 22:38:40,890 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 22:38:40,890 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 22:38:40,890 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 22:38:40,890 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 22:38:40,890 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 22:38:40,891 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 22:38:41,825 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 22:38:41,825 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 22:38:41,825 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 22:38:41,826 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 22:38:41,826 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 22:38:41,826 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 22:38:41,826 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 22:38:41,826 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 22:38:41,826 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 22:38:41,845 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 22:38:41,845 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 22:38:41,845 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 22:38:41,845 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 22:38:41,846 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 22:38:44,380 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 22:38:49,357 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 22:50:09,054 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 22:50:10,288 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 22:50:10,288 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 22:50:10,289 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 22:50:10,290 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 22:50:10,348 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 22:50:10,348 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 22:50:11,672 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 22:50:11,673 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 22:50:11,673 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 22:50:11,673 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 22:50:11,673 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 22:50:14,679 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 22:50:14,679 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 22:50:14,680 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 22:50:14,680 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 22:50:14,681 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 22:50:14,681 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 22:50:14,681 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 22:50:14,681 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 22:50:14,681 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 22:50:15,181 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 22:50:15,182 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 22:50:15,182 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 22:50:15,182 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 22:50:15,182 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 22:50:15,182 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 22:50:15,182 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 22:50:15,182 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 22:50:15,182 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 22:50:15,571 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 22:50:15,592 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 22:50:15,593 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 22:50:15,593 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 22:50:15,593 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 22:50:15,593 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 22:50:20,274 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 22:50:34,053 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 22:50:35,149 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 22:50:35,149 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 22:50:35,150 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 22:50:35,150 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 22:50:35,223 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 22:50:35,224 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 22:50:40,143 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 22:50:45,147 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 22:55:37,072 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 22:55:37,072 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 22:55:37,072 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 22:55:37,072 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 22:55:37,072 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 22:55:37,491 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 22:55:37,491 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 22:55:37,491 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 22:55:37,491 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 22:55:37,491 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 22:55:37,491 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 22:55:37,491 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 22:55:37,491 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 22:55:37,491 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 22:55:38,641 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 22:55:38,641 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 22:55:38,641 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 22:55:38,641 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 22:55:38,641 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 22:55:38,641 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 22:55:38,641 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 22:55:38,641 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 22:55:38,641 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 22:55:38,670 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 22:55:38,670 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 22:55:38,670 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 22:55:38,670 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 22:55:38,670 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 23:00:39,652 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 23:00:39,652 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 23:00:39,652 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 23:00:39,652 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 23:00:39,652 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 23:00:39,712 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 23:00:39,712 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 23:00:39,712 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 23:00:39,713 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 23:00:39,713 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 23:00:39,713 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 23:00:39,713 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 23:00:39,713 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 23:00:39,713 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 23:00:39,830 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 23:00:39,830 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 23:00:39,830 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 23:00:39,830 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 23:00:39,830 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 23:00:39,830 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 23:00:39,830 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 23:00:39,830 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 23:00:39,830 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 23:00:39,847 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 23:00:39,847 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 23:00:39,847 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 23:00:39,848 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 23:00:39,848 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 23:05:39,973 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 23:05:39,973 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 23:05:39,973 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 23:05:39,973 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 23:05:39,973 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 23:05:40,026 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 23:05:40,026 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 23:05:40,026 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 23:05:40,026 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 23:05:40,026 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 23:05:40,026 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 23:05:40,026 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 23:05:40,026 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 23:05:40,026 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 23:05:40,103 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 23:05:40,103 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 23:05:40,103 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 23:05:40,103 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 23:05:40,103 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 23:05:40,103 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 23:05:40,103 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 23:05:40,103 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 23:05:40,103 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 23:05:40,113 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 23:05:40,113 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 23:05:40,114 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 23:05:40,114 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 23:05:40,114 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 23:13:49,436 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 23:13:50,723 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 23:13:50,743 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 23:13:50,743 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 23:13:50,744 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 23:13:50,828 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 23:13:50,828 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 23:13:51,686 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 23:13:51,686 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 23:13:51,686 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 23:13:51,686 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 23:13:51,686 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 23:13:51,759 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 23:13:51,759 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 23:13:51,759 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 23:13:51,759 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 23:13:51,759 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 23:13:51,759 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 23:13:51,759 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 23:13:51,759 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 23:13:51,759 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 23:13:51,915 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 23:13:51,916 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 23:13:51,916 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 23:13:51,916 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 23:13:51,916 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 23:13:51,916 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 23:13:51,916 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 23:13:51,916 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 23:13:51,916 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 23:13:51,938 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 23:13:51,938 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 23:13:51,938 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 23:13:51,938 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 23:13:51,938 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 23:13:55,726 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 23:14:00,747 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 23:15:04,263 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-16 23:15:04,765 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 23:15:04,765 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 23:15:04,765 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 23:15:04,765 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 23:15:04,765 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 23:15:16,059 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-16 23:15:16,799 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 23:15:16,799 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 23:15:16,799 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 23:15:16,799 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 23:15:16,799 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 23:17:35,257 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-16 23:17:36,133 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 23:17:36,133 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 23:17:36,133 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 23:17:36,133 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 23:17:36,134 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 23:17:52,744 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-16 23:17:53,557 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 23:17:53,557 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 23:17:53,557 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 23:17:53,557 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 23:17:53,558 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 23:18:52,140 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 23:18:52,140 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 23:18:52,140 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 23:18:52,141 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 23:18:52,141 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 23:18:52,141 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 23:18:52,141 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 23:18:52,141 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 23:18:52,141 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 23:18:52,269 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 23:18:52,270 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 23:18:52,270 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 23:18:52,270 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 23:18:52,270 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 23:18:52,270 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 23:18:52,270 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 23:18:52,270 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 23:18:52,270 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 23:18:52,283 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 23:18:52,283 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 23:18:52,283 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 23:18:52,283 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 23:18:52,283 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 23:20:28,578 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 23:20:29,787 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 23:20:29,787 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 23:20:29,788 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 23:20:29,789 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 23:20:29,836 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 23:20:29,837 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 23:20:33,531 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 23:20:33,531 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 23:20:33,531 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 23:20:33,531 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 23:20:33,532 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 23:20:34,787 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 23:20:39,794 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 23:21:34,729 - INFO - orders - Service provider update request received: {"order_id":"1000341-001","order_price":"131921.60"}
2025-07-16 23:21:34,747 - INFO - orders - Original order status: OPEN
2025-07-16 23:21:34,747 - INFO - orders - Update fields: {'order_id': '1000341-001', 'order_price': Decimal('131921.60')}
2025-07-16 23:21:34,748 - INFO - orders - Processing regular update for order 1000341-001
2025-07-16 23:21:34,837 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 23:21:34,837 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 23:21:34,837 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 23:21:34,837 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 23:21:34,837 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 23:21:34,846 - INFO - orders - Balance/margin cache updated for user 9: balance=9794.75000000, margin=9773.83
2025-07-16 23:21:34,846 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 23:21:34,846 - INFO - orders - Using order model: UserOrder
2025-07-16 23:21:34,850 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 23:21:34,853 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 23:21:34,855 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 23:21:34,860 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 23:21:34,860 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 23:21:34,860 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 23:21:34,860 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 23:21:34,861 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 23:21:34,866 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 23:23:27,205 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 23:23:28,143 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 23:23:28,143 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 23:23:28,144 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 23:23:28,144 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 23:23:28,222 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 23:23:28,222 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 23:23:29,701 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 23:23:29,701 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 23:23:29,701 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 23:23:29,701 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 23:23:29,701 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 23:23:33,144 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 23:23:38,141 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 23:24:02,824 - INFO - orders - Service provider update request received: {"order_id":"1000341-001","order_price":"121921.60"}
2025-07-16 23:24:02,857 - INFO - orders - Original order status: OPEN
2025-07-16 23:24:02,857 - INFO - orders - Update fields: {'order_id': '1000341-001', 'order_price': Decimal('121921.60')}
2025-07-16 23:24:02,857 - INFO - orders - Processing regular update for order 1000341-001
2025-07-16 23:24:02,953 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 23:24:02,954 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 23:24:02,954 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 23:24:02,954 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 23:24:02,954 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 23:24:02,975 - INFO - orders - Balance/margin cache updated for user 9: balance=9794.75000000, margin=9773.83
2025-07-16 23:24:02,975 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 23:24:02,975 - INFO - orders - Using order model: UserOrder
2025-07-16 23:24:02,982 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 23:24:02,987 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 23:24:02,990 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 23:24:02,995 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 23:24:02,995 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 23:24:02,995 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 23:24:02,996 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 23:24:02,996 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 23:24:03,002 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 23:24:20,944 - INFO - orders - Service provider update request received: {"order_id":"1000341-001","order_price":"111921.60"}
2025-07-16 23:24:20,953 - INFO - orders - Original order status: OPEN
2025-07-16 23:24:20,954 - INFO - orders - Update fields: {'order_id': '1000341-001', 'order_price': Decimal('111921.60')}
2025-07-16 23:24:20,954 - INFO - orders - Processing regular update for order 1000341-001
2025-07-16 23:24:20,987 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 23:24:20,987 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 23:24:20,988 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 23:24:20,988 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 23:24:20,988 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 23:24:21,000 - INFO - orders - Balance/margin cache updated for user 9: balance=9794.75000000, margin=9773.83
2025-07-16 23:24:21,000 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 23:24:21,000 - INFO - orders - Using order model: UserOrder
2025-07-16 23:24:21,003 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 23:24:21,007 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 23:24:21,009 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 23:24:21,018 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 23:24:21,018 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 23:24:21,018 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 23:24:21,018 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 23:24:21,019 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 23:24:21,027 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 23:24:30,177 - INFO - orders - Service provider update request received: {"order_id":"1000341-001","order_price":"121921.60"}
2025-07-16 23:24:30,187 - INFO - orders - Original order status: OPEN
2025-07-16 23:24:30,187 - INFO - orders - Update fields: {'order_id': '1000341-001', 'order_price': Decimal('121921.60')}
2025-07-16 23:24:30,188 - INFO - orders - Processing regular update for order 1000341-001
2025-07-16 23:24:30,241 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 23:24:30,241 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 23:24:30,241 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 23:24:30,241 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 23:24:30,242 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 23:24:30,253 - INFO - orders - Balance/margin cache updated for user 9: balance=9794.75000000, margin=9773.83
2025-07-16 23:24:30,254 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-16 23:24:30,254 - INFO - orders - Using order model: UserOrder
2025-07-16 23:24:30,263 - INFO - orders - Fetched 1 open orders for user 9
2025-07-16 23:24:30,271 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-16 23:24:30,276 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-16 23:24:30,287 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 23:24:30,287 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 23:24:30,288 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 23:24:30,288 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 23:24:30,288 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 23:24:30,301 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=9794.75000000, margin=9773.83
2025-07-16 23:29:42,267 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 23:29:43,446 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 23:29:43,447 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 23:29:43,447 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 23:29:43,447 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 23:29:43,518 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 23:29:43,518 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 23:29:44,564 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 23:29:44,564 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 23:29:44,564 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 23:29:44,564 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 23:29:44,564 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 23:29:44,991 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 23:29:44,991 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 23:29:44,991 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 23:29:44,991 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 23:29:44,991 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 23:29:44,991 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 23:29:44,991 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 23:29:44,991 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 23:29:44,991 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 23:29:45,524 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 23:29:45,525 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 23:29:45,525 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 23:29:45,525 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 23:29:45,525 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 23:29:45,525 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 23:29:45,525 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 23:29:45,525 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 23:29:45,525 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 23:29:45,558 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 23:29:45,559 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 23:29:45,559 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 23:29:45,559 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 23:29:45,559 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 23:29:48,446 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 23:29:49,609 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 23:29:49,609 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 23:29:49,609 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 23:29:49,609 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 23:29:49,609 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 23:29:53,447 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 23:47:21,904 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-16 23:47:23,098 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-16 23:47:23,128 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-16 23:47:23,139 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-16 23:47:23,149 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-16 23:47:23,272 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-16 23:47:23,273 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-16 23:47:24,572 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-16 23:47:24,573 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-16 23:47:24,573 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-16 23:47:24,573 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-16 23:47:24,574 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-16 23:47:28,083 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-16 23:47:28,316 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-16 23:47:28,317 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-16 23:47:28,318 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-16 23:47:28,318 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-16 23:47:28,319 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-16 23:47:28,320 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-16 23:47:28,321 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-16 23:47:28,321 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-16 23:47:28,323 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-16 23:47:30,154 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-16 23:47:30,155 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-16 23:47:30,155 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-16 23:47:30,155 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-16 23:47:30,155 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-16 23:47:30,156 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-16 23:47:30,156 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-16 23:47:30,156 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-16 23:47:30,156 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-16 23:47:30,219 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-16 23:47:30,219 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-16 23:47:30,219 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-16 23:47:30,220 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-16 23:47:30,220 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-16 23:47:33,051 - INFO - orders - Starting the users with orders cache updater task.
2025-07-16 23:47:41,348 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 00:19:38,257 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 00:19:39,716 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 00:19:39,716 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 00:19:39,718 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 00:19:39,718 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 00:19:39,743 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 00:19:39,743 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 00:19:40,534 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 00:19:40,534 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 00:19:40,534 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 00:19:40,534 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 00:19:40,534 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-17 00:19:40,597 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 00:19:40,597 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 00:19:40,598 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 00:19:40,598 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 00:19:40,598 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 00:19:40,598 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 00:19:40,598 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 00:19:40,598 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 00:19:40,598 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 00:19:40,707 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 00:19:40,707 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 00:19:40,707 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 00:19:40,707 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 00:19:40,707 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 00:19:40,707 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 00:19:40,707 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 00:19:40,707 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 00:19:40,707 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 00:19:40,723 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 00:19:40,724 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 00:19:40,724 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 00:19:40,724 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 00:19:40,724 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 00:19:44,731 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 00:19:49,721 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 00:48:47,270 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 00:48:48,377 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 00:48:48,377 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 00:48:48,378 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 00:48:48,378 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 00:48:48,425 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 00:48:48,425 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 00:48:49,281 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 00:48:49,281 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 00:48:49,281 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 00:48:49,281 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 00:48:49,281 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-17 01:50:48,319 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 01:50:49,378 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 01:50:49,378 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 01:50:49,378 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 01:50:49,391 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 01:50:49,452 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 01:50:49,453 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 01:50:50,259 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 01:50:50,260 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 01:50:50,260 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 01:50:50,260 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 01:50:50,260 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-17 01:50:50,639 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 01:50:50,639 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 01:50:50,639 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 01:50:50,639 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 01:50:50,639 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 01:50:50,639 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 01:50:50,639 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 01:50:50,639 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 01:50:50,639 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 01:50:51,245 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 01:50:51,245 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 01:50:51,245 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 01:50:51,245 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 01:50:51,245 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 01:50:51,245 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 01:50:51,245 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 01:50:51,245 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 01:50:51,245 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 01:50:51,275 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 01:50:51,275 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 01:50:51,275 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 01:50:51,275 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 01:50:51,275 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 01:50:54,382 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 01:51:21,310 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 01:51:22,252 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 01:51:22,252 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 01:51:22,252 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 01:51:22,253 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 01:51:22,286 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 01:51:22,286 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 01:51:27,663 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 01:51:32,255 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 02:33:40,279 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 02:33:41,448 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 02:33:41,448 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 02:33:41,448 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 02:33:41,448 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 02:33:41,545 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 02:33:41,545 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 02:33:42,528 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 02:33:42,529 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 02:33:42,529 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 02:33:42,529 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 02:33:42,529 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-17 02:33:47,335 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 02:33:47,560 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 02:33:47,560 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 02:33:47,560 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 02:33:47,560 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 02:33:47,560 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 02:33:47,560 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 02:33:47,561 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 02:33:47,561 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 02:33:47,561 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 02:33:48,193 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 02:33:48,194 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 02:33:48,194 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 02:33:48,194 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 02:33:48,194 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 02:33:48,194 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 02:33:48,194 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 02:33:48,194 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 02:33:48,194 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 02:33:48,236 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 02:33:48,236 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 02:33:48,236 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 02:33:48,236 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 02:33:48,236 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 02:33:48,310 - INFO - orders - Starting update_user_static_orders for user 4, user_type demo
2025-07-17 02:33:48,310 - INFO - orders - Using order model: DemoUserOrder
2025-07-17 02:33:48,314 - INFO - orders - Fetched 0 open orders for user 4
2025-07-17 02:33:48,320 - INFO - orders - Fetched 0 pending orders for user 4
2025-07-17 02:33:48,322 - INFO - orders - Updated static orders cache for user 4 with 0 open orders and 0 pending orders
2025-07-17 02:33:48,344 - INFO - orders - User 4: Updated balance/margin cache after static orders update - balance=100000.00000000, margin=0.0
2025-07-17 02:33:48,386 - INFO - orders - Starting update_user_static_orders for user 9, user_type demo
2025-07-17 02:33:48,386 - INFO - orders - Using order model: DemoUserOrder
2025-07-17 02:33:48,391 - INFO - orders - Fetched 28 open orders for user 9
2025-07-17 02:33:48,398 - INFO - orders - Fetched 6 pending orders for user 9
2025-07-17 02:33:48,709 - INFO - orders - Updated static orders cache for user 9 with 28 open orders and 6 pending orders
2025-07-17 02:33:48,730 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol AUDUSD
2025-07-17 02:33:48,730 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol AUDUSD: TotalBuyQty=0.10000000, TotalSellQty=0.22000000, NetQty=0.22000000, IsHedged=True
2025-07-17 02:33:48,731 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol AUDUSD: AllMarginsPerLot=[Decimal('647.4'), Decimal('647.0909090909090909090909091')], HighestMarginPerLot=647.4
2025-07-17 02:33:48,731 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol AUDUSD: CalculatedTotalMargin=142.43
2025-07-17 02:33:48,731 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol CHFSGD
2025-07-17 02:33:48,731 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFSGD: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-17 02:33:48,731 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFSGD: AllMarginsPerLot=[Decimal('1223.5389131'), Decimal('1223.150636')], HighestMarginPerLot=1223.5389131
2025-07-17 02:33:48,731 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol CHFSGD: CalculatedTotalMargin=122.35
2025-07-17 02:33:48,731 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol CADJPY
2025-07-17 02:33:48,731 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CADJPY: TotalBuyQty=0.15000000, TotalSellQty=0.15000000, NetQty=0.15000000, IsHedged=True
2025-07-17 02:33:48,731 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CADJPY: AllMarginsPerLot=[Decimal('729.6658264666666666666666667'), Decimal('729.8549729333333333333333333')], HighestMarginPerLot=729.8549729333333333333333333
2025-07-17 02:33:48,731 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol CADJPY: CalculatedTotalMargin=109.48
2025-07-17 02:33:48,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 4 positions for User 9, Symbol EURAUD
2025-07-17 02:33:48,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURAUD: TotalBuyQty=0.27000000, TotalSellQty=0.26000000, NetQty=0.27000000, IsHedged=True
2025-07-17 02:33:48,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURAUD: AllMarginsPerLot=[Decimal('1148.786564545454545454545455'), Decimal('1148.503559047619047619047619'), Decimal('1148.863536'), Decimal('1148.622352')], HighestMarginPerLot=1148.863536
2025-07-17 02:33:48,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURAUD: CalculatedTotalMargin=310.19
2025-07-17 02:33:48,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol CHFJPY
2025-07-17 02:33:48,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFJPY: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-17 02:33:48,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol CHFJPY: AllMarginsPerLot=[Decimal('1223.5584187'), Decimal('1223.1379417')], HighestMarginPerLot=1223.5584187
2025-07-17 02:33:48,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol CHFJPY: CalculatedTotalMargin=122.36
2025-07-17 02:33:48,732 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol EURGBP
2025-07-17 02:33:48,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURGBP: TotalBuyQty=0, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=False
2025-07-17 02:33:48,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURGBP: AllMarginsPerLot=[Decimal('1148.51044')], HighestMarginPerLot=1148.51044
2025-07-17 02:33:48,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURGBP: CalculatedTotalMargin=114.85
2025-07-17 02:33:48,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol EURJPY
2025-07-17 02:33:48,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURJPY: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-17 02:33:48,733 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURJPY: AllMarginsPerLot=[Decimal('1148.7277223'), Decimal('1148.5285533')], HighestMarginPerLot=1148.7277223
2025-07-17 02:33:48,734 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURJPY: CalculatedTotalMargin=114.87
2025-07-17 02:33:48,734 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol EURNZD
2025-07-17 02:33:48,734 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURNZD: TotalBuyQty=0.10000000, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=True
2025-07-17 02:33:48,734 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol EURNZD: AllMarginsPerLot=[Decimal('1148.532825'), Decimal('1148.192298')], HighestMarginPerLot=1148.532825
2025-07-17 02:33:48,734 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol EURNZD: CalculatedTotalMargin=114.85
2025-07-17 02:33:48,734 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 4 positions for User 9, Symbol GBPUSD
2025-07-17 02:33:48,734 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol GBPUSD: TotalBuyQty=0.50000000, TotalSellQty=0.50000000, NetQty=0.50000000, IsHedged=True
2025-07-17 02:33:48,734 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol GBPUSD: AllMarginsPerLot=[Decimal('0'), Decimal('0'), Decimal('0'), Decimal('0')], HighestMarginPerLot=0
2025-07-17 02:33:48,734 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol GBPUSD: CalculatedTotalMargin=0.00
2025-07-17 02:33:48,735 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol NZDJPY
2025-07-17 02:33:48,735 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol NZDJPY: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 02:33:48,735 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol NZDJPY: AllMarginsPerLot=[Decimal('597.837949')], HighestMarginPerLot=597.837949
2025-07-17 02:33:48,735 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol NZDJPY: CalculatedTotalMargin=5.98
2025-07-17 02:33:48,735 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol USDCHF
2025-07-17 02:33:48,735 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDCHF: TotalBuyQty=0.15000000, TotalSellQty=0.15000000, NetQty=0.15000000, IsHedged=True
2025-07-17 02:33:48,735 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDCHF: AllMarginsPerLot=[Decimal('999.8084502'), Decimal('1000.203773866666666666666667')], HighestMarginPerLot=1000.203773866666666666666667
2025-07-17 02:33:48,735 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDCHF: CalculatedTotalMargin=150.03
2025-07-17 02:33:48,735 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 9, Symbol USDNOK
2025-07-17 02:33:48,735 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDNOK: TotalBuyQty=0.20000000, TotalSellQty=0, NetQty=0.20000000, IsHedged=False
2025-07-17 02:33:48,735 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDNOK: AllMarginsPerLot=[Decimal('1000.0169162'), Decimal('1000.0169154')], HighestMarginPerLot=1000.0169162
2025-07-17 02:33:48,736 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDNOK: CalculatedTotalMargin=200.00
2025-07-17 02:33:48,736 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol USDSGD
2025-07-17 02:33:48,736 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDSGD: TotalBuyQty=0, TotalSellQty=0.31000000, NetQty=0.31000000, IsHedged=False
2025-07-17 02:33:48,736 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDSGD: AllMarginsPerLot=[Decimal('999.7869010967741935483870968')], HighestMarginPerLot=999.7869010967741935483870968
2025-07-17 02:33:48,736 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDSGD: CalculatedTotalMargin=309.93
2025-07-17 02:33:48,736 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol USDTRY
2025-07-17 02:33:48,736 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDTRY: TotalBuyQty=0, TotalSellQty=0.10000000, NetQty=0.10000000, IsHedged=False
2025-07-17 02:33:48,736 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol USDTRY: AllMarginsPerLot=[Decimal('999.8738813')], HighestMarginPerLot=999.8738813
2025-07-17 02:33:48,736 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol USDTRY: CalculatedTotalMargin=99.99
2025-07-17 02:33:48,736 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 1917.31
2025-07-17 02:33:48,745 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=98181.73000000, margin=1917.31
2025-07-17 02:33:48,752 - INFO - orders - Starting update_user_static_orders for user 10, user_type demo
2025-07-17 02:33:48,752 - INFO - orders - Using order model: DemoUserOrder
2025-07-17 02:33:48,756 - INFO - orders - Fetched 0 open orders for user 10
2025-07-17 02:33:48,765 - INFO - orders - Fetched 1 pending orders for user 10
2025-07-17 02:33:48,768 - INFO - orders - Updated static orders cache for user 10 with 0 open orders and 1 pending orders
2025-07-17 02:33:49,228 - INFO - orders - User 10: Updated balance/margin cache after static orders update - balance=9958.40000000, margin=0.0
2025-07-17 02:33:49,246 - INFO - orders - Starting update_user_static_orders for user 11, user_type demo
2025-07-17 02:33:49,246 - INFO - orders - Using order model: DemoUserOrder
2025-07-17 02:33:49,252 - INFO - orders - Fetched 1 open orders for user 11
2025-07-17 02:33:49,257 - INFO - orders - Fetched 0 pending orders for user 11
2025-07-17 02:33:49,264 - INFO - orders - Updated static orders cache for user 11 with 1 open orders and 0 pending orders
2025-07-17 02:33:49,295 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 11, Symbol AUDCAD
2025-07-17 02:33:49,296 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 11, Symbol AUDCAD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 02:33:49,296 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 11, Symbol AUDCAD: AllMarginsPerLot=[Decimal('655.364428')], HighestMarginPerLot=655.364428
2025-07-17 02:33:49,296 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 11, Symbol AUDCAD: CalculatedTotalMargin=6.55
2025-07-17 02:33:49,296 - INFO - orders - [TOTAL_USER_MARGIN] User 11 total margin across all symbols: 6.55
2025-07-17 02:33:49,302 - INFO - orders - User 11: Updated balance/margin cache after static orders update - balance=99998.61000000, margin=6.55
2025-07-17 02:33:49,308 - INFO - orders - Starting update_user_static_orders for user 12, user_type demo
2025-07-17 02:33:49,308 - INFO - orders - Using order model: DemoUserOrder
2025-07-17 02:33:49,311 - INFO - orders - Fetched 0 open orders for user 12
2025-07-17 02:33:49,313 - INFO - orders - Fetched 0 pending orders for user 12
2025-07-17 02:33:49,315 - INFO - orders - Updated static orders cache for user 12 with 0 open orders and 0 pending orders
2025-07-17 02:33:49,336 - INFO - orders - User 12: Updated balance/margin cache after static orders update - balance=99984.34000000, margin=0.0
2025-07-17 02:33:49,340 - INFO - orders - Starting update_user_static_orders for user 13, user_type demo
2025-07-17 02:33:49,341 - INFO - orders - Using order model: DemoUserOrder
2025-07-17 02:33:49,344 - INFO - orders - Fetched 0 open orders for user 13
2025-07-17 02:33:49,359 - INFO - orders - Fetched 0 pending orders for user 13
2025-07-17 02:33:49,363 - INFO - orders - Updated static orders cache for user 13 with 0 open orders and 0 pending orders
2025-07-17 02:33:49,717 - INFO - orders - User 13: Updated balance/margin cache after static orders update - balance=10000.00000000, margin=0.0
2025-07-17 02:33:51,447 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 02:33:59,836 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 02:38:49,787 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 02:38:49,787 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 02:38:49,787 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 02:38:49,788 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 02:38:49,788 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-17 02:38:49,867 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 02:38:49,867 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 02:38:49,867 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 02:38:49,867 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 02:38:49,868 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 02:38:49,868 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 02:38:49,868 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 02:38:49,868 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 02:38:49,868 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 02:38:50,062 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 02:38:50,062 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 02:38:50,062 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 02:38:50,062 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 02:38:50,062 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 02:38:50,063 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 02:38:50,063 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 02:38:50,063 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 02:38:50,063 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 02:38:50,085 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 02:38:50,085 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 02:38:50,085 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 02:38:50,085 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 02:38:50,086 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 02:42:13,543 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 02:42:15,128 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 02:42:15,128 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 02:42:15,128 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 02:42:15,128 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 02:42:15,129 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-17 02:42:22,463 - INFO - orders - [get_closed_orders] user_type: live
2025-07-17 02:42:23,117 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 02:43:06,243 - INFO - orders - [get_closed_orders] user_type: live
2025-07-17 02:43:50,306 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 02:43:50,306 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 02:43:50,306 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 02:43:50,306 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 02:43:50,306 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 02:43:50,306 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 02:43:50,306 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 02:43:50,306 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 02:43:50,306 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 02:43:50,499 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 02:43:50,499 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 02:43:50,499 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 02:43:50,499 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 02:43:50,500 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 02:43:50,500 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 02:43:50,500 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 02:43:50,500 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 02:43:50,500 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 02:43:50,519 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 02:43:50,519 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 02:43:50,519 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 02:43:50,519 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 02:43:50,519 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 02:46:57,947 - INFO - orders - [get_closed_orders] user_type: live
2025-07-17 02:46:58,283 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 02:47:16,595 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 02:47:16,595 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 02:47:16,595 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 02:47:16,595 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 02:47:16,595 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-17 03:02:51,135 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 03:02:52,306 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 03:02:52,306 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 03:02:52,307 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 03:02:52,307 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 03:02:52,338 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 03:02:52,338 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 03:02:53,136 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 03:02:53,136 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 03:02:53,136 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 03:02:53,137 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 03:02:53,137 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-17 03:02:53,218 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 03:02:53,218 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 03:02:53,218 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 03:02:53,219 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 03:02:53,219 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 03:02:53,219 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 03:02:53,219 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 03:02:53,219 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 03:02:53,219 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 03:02:53,357 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 03:02:53,357 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 03:02:53,357 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 03:02:53,357 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 03:02:53,357 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 03:02:53,357 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 03:02:53,357 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 03:02:53,357 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 03:02:53,357 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 03:02:53,379 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 03:02:53,379 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 03:02:53,379 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 03:02:53,379 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 03:02:53,379 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 03:02:54,188 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 03:02:54,188 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 03:02:54,188 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 03:02:54,188 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 03:02:54,188 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-17 03:02:56,179 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 03:02:56,179 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 03:02:56,179 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 03:02:56,179 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 03:02:56,179 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-17 03:02:57,306 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 03:03:02,310 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 03:06:15,248 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 03:06:16,288 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 03:06:16,288 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 03:06:16,288 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 03:06:16,288 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 03:06:16,344 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 03:06:16,344 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 03:06:17,041 - INFO - orders - Starting update_user_static_orders for user 5, user_type live
2025-07-17 03:06:17,041 - INFO - orders - Using order model: UserOrder
2025-07-17 03:06:17,046 - INFO - orders - Fetched 0 open orders for user 5
2025-07-17 03:06:17,051 - INFO - orders - Fetched 0 pending orders for user 5
2025-07-17 03:06:17,054 - INFO - orders - Updated static orders cache for user 5 with 0 open orders and 0 pending orders
2025-07-17 03:06:17,072 - WARNING - orders - User 5: Could not get user data for balance/margin cache update
2025-07-17 03:06:17,077 - INFO - orders - Starting update_user_static_orders for user 8, user_type live
2025-07-17 03:06:17,077 - INFO - orders - Using order model: UserOrder
2025-07-17 03:06:17,081 - INFO - orders - Fetched 0 open orders for user 8
2025-07-17 03:06:17,084 - INFO - orders - Fetched 0 pending orders for user 8
2025-07-17 03:06:17,086 - INFO - orders - Updated static orders cache for user 8 with 0 open orders and 0 pending orders
2025-07-17 03:06:17,099 - INFO - orders - User 8: Updated balance/margin cache after static orders update - balance=0E-8, margin=0.0
2025-07-17 03:06:17,133 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-17 03:06:17,133 - INFO - orders - Using order model: UserOrder
2025-07-17 03:06:17,136 - INFO - orders - Fetched 3 open orders for user 14
2025-07-17 03:06:17,140 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-17 03:06:17,142 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-17 03:06:17,437 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 03:06:17,437 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 03:06:17,437 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 03:06:17,437 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 03:06:17,438 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 03:06:17,438 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 03:06:17,438 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 03:06:17,438 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 03:06:17,438 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 03:06:17,459 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-17 03:06:17,465 - INFO - orders - Starting update_user_static_orders for user 16, user_type live
2025-07-17 03:06:17,465 - INFO - orders - Using order model: UserOrder
2025-07-17 03:06:17,468 - INFO - orders - Fetched 0 open orders for user 16
2025-07-17 03:06:17,475 - INFO - orders - Fetched 0 pending orders for user 16
2025-07-17 03:06:17,477 - INFO - orders - Updated static orders cache for user 16 with 0 open orders and 0 pending orders
2025-07-17 03:06:17,520 - INFO - orders - User 16: Updated balance/margin cache after static orders update - balance=0E-8, margin=0.0
2025-07-17 03:06:17,531 - INFO - orders - Starting update_user_static_orders for user 17, user_type live
2025-07-17 03:06:17,531 - INFO - orders - Using order model: UserOrder
2025-07-17 03:06:17,539 - INFO - orders - Fetched 0 open orders for user 17
2025-07-17 03:06:17,545 - INFO - orders - Fetched 0 pending orders for user 17
2025-07-17 03:06:17,548 - INFO - orders - Updated static orders cache for user 17 with 0 open orders and 0 pending orders
2025-07-17 03:06:17,580 - INFO - orders - User 17: Updated balance/margin cache after static orders update - balance=26302.98000000, margin=0.0
2025-07-17 03:06:17,586 - INFO - orders - Starting update_user_static_orders for user 18, user_type live
2025-07-17 03:06:17,586 - INFO - orders - Using order model: UserOrder
2025-07-17 03:06:17,590 - INFO - orders - Fetched 0 open orders for user 18
2025-07-17 03:06:17,593 - INFO - orders - Fetched 0 pending orders for user 18
2025-07-17 03:06:17,595 - INFO - orders - Updated static orders cache for user 18 with 0 open orders and 0 pending orders
2025-07-17 03:06:17,603 - INFO - orders - User 18: Updated balance/margin cache after static orders update - balance=17323.75000000, margin=0.0
2025-07-17 03:06:17,606 - INFO - orders - Starting update_user_static_orders for user 19, user_type live
2025-07-17 03:06:17,606 - INFO - orders - Using order model: UserOrder
2025-07-17 03:06:17,609 - INFO - orders - Fetched 0 open orders for user 19
2025-07-17 03:06:17,613 - INFO - orders - Fetched 0 pending orders for user 19
2025-07-17 03:06:17,617 - INFO - orders - Updated static orders cache for user 19 with 0 open orders and 0 pending orders
2025-07-17 03:06:17,626 - INFO - orders - User 19: Updated balance/margin cache after static orders update - balance=9610.04000000, margin=0.0
2025-07-17 03:06:17,629 - INFO - orders - Starting update_user_static_orders for user 20, user_type live
2025-07-17 03:06:17,629 - INFO - orders - Using order model: UserOrder
2025-07-17 03:06:17,631 - INFO - orders - Fetched 0 open orders for user 20
2025-07-17 03:06:17,633 - INFO - orders - Fetched 0 pending orders for user 20
2025-07-17 03:06:17,637 - INFO - orders - Updated static orders cache for user 20 with 0 open orders and 0 pending orders
2025-07-17 03:06:17,650 - INFO - orders - User 20: Updated balance/margin cache after static orders update - balance=8712.00000000, margin=0.0
2025-07-17 03:06:17,654 - INFO - orders - Starting update_user_static_orders for user 21, user_type live
2025-07-17 03:06:17,654 - INFO - orders - Using order model: UserOrder
2025-07-17 03:06:17,658 - INFO - orders - Fetched 0 open orders for user 21
2025-07-17 03:06:17,661 - INFO - orders - Fetched 0 pending orders for user 21
2025-07-17 03:06:17,664 - INFO - orders - Updated static orders cache for user 21 with 0 open orders and 0 pending orders
2025-07-17 03:06:17,680 - INFO - orders - User 21: Updated balance/margin cache after static orders update - balance=0E-8, margin=0.0
2025-07-17 03:06:17,972 - INFO - orders - Starting update_user_static_orders for user 22, user_type live
2025-07-17 03:06:17,972 - INFO - orders - Using order model: UserOrder
2025-07-17 03:06:17,974 - INFO - orders - Fetched 0 open orders for user 22
2025-07-17 03:06:17,976 - INFO - orders - Fetched 0 pending orders for user 22
2025-07-17 03:06:17,978 - INFO - orders - Updated static orders cache for user 22 with 0 open orders and 0 pending orders
2025-07-17 03:06:17,987 - INFO - orders - User 22: Updated balance/margin cache after static orders update - balance=5961.56000000, margin=0.0
2025-07-17 03:06:17,994 - INFO - orders - Starting update_user_static_orders for user 23, user_type live
2025-07-17 03:06:17,994 - INFO - orders - Using order model: UserOrder
2025-07-17 03:06:17,998 - INFO - orders - Fetched 0 open orders for user 23
2025-07-17 03:06:18,003 - INFO - orders - Fetched 0 pending orders for user 23
2025-07-17 03:06:18,005 - INFO - orders - Updated static orders cache for user 23 with 0 open orders and 0 pending orders
2025-07-17 03:06:18,018 - INFO - orders - User 23: Updated balance/margin cache after static orders update - balance=1000000.00000000, margin=0.0
2025-07-17 03:06:18,021 - INFO - orders - Starting update_user_static_orders for user 25, user_type live
2025-07-17 03:06:18,021 - INFO - orders - Using order model: UserOrder
2025-07-17 03:06:18,025 - INFO - orders - Fetched 0 open orders for user 25
2025-07-17 03:06:18,028 - INFO - orders - Fetched 0 pending orders for user 25
2025-07-17 03:06:18,028 - INFO - orders - Updated static orders cache for user 25 with 0 open orders and 0 pending orders
2025-07-17 03:06:18,041 - INFO - orders - User 25: Updated balance/margin cache after static orders update - balance=250000.00000000, margin=0.0
2025-07-17 03:06:18,045 - INFO - orders - Starting update_user_static_orders for user 26, user_type live
2025-07-17 03:06:18,045 - INFO - orders - Using order model: UserOrder
2025-07-17 03:06:18,048 - INFO - orders - Fetched 2 open orders for user 26
2025-07-17 03:06:18,052 - INFO - orders - Fetched 0 pending orders for user 26
2025-07-17 03:06:18,054 - INFO - orders - Updated static orders cache for user 26 with 2 open orders and 0 pending orders
2025-07-17 03:06:18,059 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 03:06:18,059 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 03:06:18,059 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 03:06:18,059 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 03:06:18,059 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 03:06:18,059 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 03:06:18,059 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 03:06:18,059 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 03:06:18,059 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 03:06:18,066 - INFO - orders - User 26: Updated balance/margin cache after static orders update - balance=184345.81000000, margin=146484.47
2025-07-17 03:06:18,071 - INFO - orders - Starting update_user_static_orders for user 1, user_type demo
2025-07-17 03:06:18,071 - INFO - orders - Using order model: DemoUserOrder
2025-07-17 03:06:18,076 - INFO - orders - Fetched 2 open orders for user 1
2025-07-17 03:06:18,080 - INFO - orders - Fetched 1 pending orders for user 1
2025-07-17 03:06:18,083 - INFO - orders - Updated static orders cache for user 1 with 2 open orders and 1 pending orders
2025-07-17 03:06:18,088 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 03:06:18,089 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 03:06:18,089 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 03:06:18,089 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 03:06:18,089 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 03:06:18,098 - INFO - orders - User 1: Updated balance/margin cache after static orders update - balance=17011.54000000, margin=6.54
2025-07-17 03:06:18,103 - INFO - orders - Starting update_user_static_orders for user 2, user_type demo
2025-07-17 03:06:18,103 - INFO - orders - Using order model: DemoUserOrder
2025-07-17 03:06:18,106 - INFO - orders - Fetched 0 open orders for user 2
2025-07-17 03:06:18,109 - INFO - orders - Fetched 0 pending orders for user 2
2025-07-17 03:06:18,111 - INFO - orders - Updated static orders cache for user 2 with 0 open orders and 0 pending orders
2025-07-17 03:06:18,122 - INFO - orders - User 2: Updated balance/margin cache after static orders update - balance=100000.00000000, margin=0.0
2025-07-17 03:06:18,129 - INFO - orders - Starting update_user_static_orders for user 3, user_type demo
2025-07-17 03:06:18,129 - INFO - orders - Using order model: DemoUserOrder
2025-07-17 03:06:18,131 - INFO - orders - Fetched 0 open orders for user 3
2025-07-17 03:06:18,134 - INFO - orders - Fetched 0 pending orders for user 3
2025-07-17 03:06:18,137 - INFO - orders - Updated static orders cache for user 3 with 0 open orders and 0 pending orders
2025-07-17 03:06:18,148 - INFO - orders - User 3: Updated balance/margin cache after static orders update - balance=100000.00000000, margin=0.0
2025-07-17 03:06:18,162 - INFO - orders - Starting update_user_static_orders for user 6, user_type demo
2025-07-17 03:06:18,162 - INFO - orders - Using order model: DemoUserOrder
2025-07-17 03:06:18,165 - INFO - orders - Fetched 0 open orders for user 6
2025-07-17 03:06:18,168 - INFO - orders - Fetched 0 pending orders for user 6
2025-07-17 03:06:18,169 - INFO - orders - Updated static orders cache for user 6 with 0 open orders and 0 pending orders
2025-07-17 03:06:18,180 - INFO - orders - User 6: Updated balance/margin cache after static orders update - balance=100000.00000000, margin=0.0
2025-07-17 03:06:18,929 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 03:06:18,929 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 03:06:18,929 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 03:06:18,929 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 03:06:18,929 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-17 03:06:21,289 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 03:06:23,383 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 03:06:23,383 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 03:06:23,383 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 03:06:23,383 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 03:06:23,383 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-17 03:06:26,294 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 03:07:18,238 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 03:07:19,419 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 03:07:19,419 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 03:07:19,419 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 03:07:19,419 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 03:07:19,420 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-17 03:07:37,724 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 03:07:38,450 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 03:07:38,450 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 03:07:38,450 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 03:07:38,450 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 03:07:38,451 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 03:07:38,451 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 03:07:38,451 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 03:07:38,451 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 03:07:38,451 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 03:11:53,108 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 03:11:54,191 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 03:11:54,191 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 03:11:54,191 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 03:11:54,192 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 03:11:54,243 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 03:11:54,243 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 03:11:59,720 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 03:12:00,401 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 03:12:00,401 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 03:12:00,401 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 03:12:00,401 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 03:12:00,401 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 03:12:00,401 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 03:12:00,401 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 03:12:00,401 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 03:12:00,401 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 03:12:00,424 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 03:12:00,424 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 03:12:00,424 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 03:12:00,424 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 03:12:00,424 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 03:12:01,815 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 03:12:01,815 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 03:12:01,815 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 03:12:01,815 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 03:12:01,815 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 03:12:01,815 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 03:12:01,815 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 03:12:01,815 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 03:12:01,815 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 03:12:01,816 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 03:12:01,816 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 03:12:01,816 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 03:12:01,816 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 03:12:01,816 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 03:12:01,816 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 03:12:01,816 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 03:12:01,816 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 03:12:01,816 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 03:12:04,198 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 03:13:18,082 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 03:13:19,602 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 03:13:19,602 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 03:13:19,603 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 03:13:19,603 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 03:13:19,603 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-17 03:14:57,135 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 03:14:58,205 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 03:14:58,205 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 03:14:58,205 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 03:14:58,206 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 03:14:58,235 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 03:14:58,235 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 03:15:03,208 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 03:15:04,192 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 03:15:04,192 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 03:15:04,192 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 03:15:04,192 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 03:15:04,192 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-17 03:15:04,223 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 03:15:04,223 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 03:15:04,223 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 03:15:04,223 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 03:15:04,223 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-17 03:15:08,220 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 03:15:59,322 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 03:15:59,919 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 03:15:59,919 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 03:15:59,919 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 03:15:59,919 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 03:15:59,919 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-17 03:16:22,444 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 03:16:23,335 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 03:16:23,335 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 03:16:23,335 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 03:16:23,335 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 03:16:23,336 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 03:16:23,336 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 03:16:23,336 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 03:16:23,336 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 03:16:23,336 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 03:18:32,419 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 03:18:33,679 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 03:18:33,688 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 03:18:33,689 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 03:18:33,690 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 03:18:33,782 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 03:18:33,782 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 03:18:38,667 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 03:18:39,111 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 03:18:39,111 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 03:18:39,111 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 03:18:39,111 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 03:18:39,111 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 03:18:39,111 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 03:18:39,111 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 03:18:39,111 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 03:18:39,111 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 03:18:39,137 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 03:18:39,138 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 03:18:39,138 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 03:18:39,138 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 03:18:39,138 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 03:18:39,644 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 03:18:39,644 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 03:18:39,644 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 03:18:39,644 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 03:18:39,644 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 03:18:39,644 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 03:18:39,644 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 03:18:39,644 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 03:18:39,644 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 03:18:39,670 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 03:18:39,670 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 03:18:39,670 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 03:18:39,670 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 03:18:39,670 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 03:18:39,670 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 03:18:39,670 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 03:18:39,671 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 03:18:39,671 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 03:18:43,667 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 03:19:36,422 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 03:19:37,448 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 03:19:37,448 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 03:19:37,448 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 03:19:37,448 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 03:19:37,497 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 03:19:37,497 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 03:19:42,757 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 03:19:43,261 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 03:19:43,261 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 03:19:43,262 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 03:19:43,262 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 03:19:43,262 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 03:19:43,262 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 03:19:43,262 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 03:19:43,262 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 03:19:43,262 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 03:19:43,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 03:19:43,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 03:19:43,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 03:19:43,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 03:19:43,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 03:19:43,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 03:19:43,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 03:19:43,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 03:19:43,920 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 03:19:47,454 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 03:20:00,988 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 03:20:01,566 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 03:20:01,567 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 03:20:01,567 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 03:20:01,567 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 03:20:01,567 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 03:20:01,567 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 03:20:01,567 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 03:20:01,567 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 03:20:01,568 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 03:21:10,905 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 03:21:11,977 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 03:21:11,977 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 03:21:11,977 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 03:21:11,977 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 03:21:12,025 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 03:21:12,026 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 03:21:12,890 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 03:21:12,890 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 03:21:12,891 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 03:21:12,891 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 03:21:12,891 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-17 03:21:17,240 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 03:21:19,255 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 03:21:19,256 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 03:21:19,256 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 03:21:19,256 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 03:21:19,256 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 03:21:19,256 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 03:21:19,256 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 03:21:19,257 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 03:21:19,257 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 03:21:19,491 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 03:21:19,491 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 03:21:19,492 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 03:21:19,492 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 03:21:19,492 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 03:21:19,492 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 03:21:19,492 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 03:21:19,492 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 03:21:19,492 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 03:21:21,238 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 03:21:22,167 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 03:21:23,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 03:21:23,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 03:21:23,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 03:21:23,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 03:21:23,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 03:21:23,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 03:21:23,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 03:21:23,369 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 03:21:23,369 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 03:22:08,515 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 03:29:07,759 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 03:29:09,033 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 03:29:09,033 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 03:29:09,033 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 03:29:09,033 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 03:29:09,073 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 03:29:09,074 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 03:29:09,890 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 03:29:09,890 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 03:29:09,890 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 03:29:09,890 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 03:29:09,890 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-17 03:29:10,352 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 03:29:10,352 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 03:29:10,352 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 03:29:10,352 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 03:29:10,352 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 03:29:10,352 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 03:29:10,352 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 03:29:10,352 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 03:29:10,353 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 03:29:14,317 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 03:29:14,767 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 03:29:14,767 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 03:29:14,767 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 03:29:14,767 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 03:29:14,767 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 03:29:14,767 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 03:29:14,767 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 03:29:14,767 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 03:29:14,767 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 03:29:14,817 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 03:29:14,817 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 03:29:14,817 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 03:29:14,817 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 03:29:14,817 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 03:29:15,527 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 03:29:18,989 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 03:29:19,032 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 03:29:20,017 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 03:29:20,687 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 03:29:21,325 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 03:29:22,132 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 03:29:22,767 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 03:30:04,591 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 03:31:12,388 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 03:31:13,348 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 03:31:13,348 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 03:31:13,348 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 03:31:13,348 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 03:31:13,411 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 03:31:13,411 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 03:31:46,437 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 03:31:47,292 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 03:31:47,292 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 03:31:47,292 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 03:31:47,292 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 03:31:47,337 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 03:31:47,338 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 03:31:52,518 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 03:31:52,539 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 03:31:57,283 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 03:32:27,882 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 03:37:54,431 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 03:37:55,655 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 03:37:55,655 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 03:37:55,656 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 03:37:55,656 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 03:37:55,820 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 03:37:55,821 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 03:37:56,849 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 03:37:56,850 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 03:37:56,850 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 03:37:56,850 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 03:37:56,850 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-17 03:38:01,648 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 03:38:01,752 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 03:38:01,753 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 03:38:01,753 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 03:38:01,753 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 03:38:01,753 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 03:38:01,754 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 03:38:01,754 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 03:38:01,754 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 03:38:01,754 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 03:38:02,678 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 03:38:02,678 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 03:38:02,678 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 03:38:02,678 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 03:38:02,678 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 03:38:02,678 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 03:38:02,678 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 03:38:02,678 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 03:38:02,678 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 03:38:02,709 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 03:38:02,709 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 03:38:02,710 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 03:38:02,710 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 03:38:02,710 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 03:38:05,997 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 03:38:10,279 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 03:38:31,108 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 03:38:32,146 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 03:38:32,146 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 03:38:32,146 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 03:38:32,146 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 03:38:32,146 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 9773.83
2025-07-17 03:38:50,067 - INFO - orders - Order close request received - Order ID: 1000341-001, User ID: 9, Close Price: 118410
2025-07-17 03:38:50,068 - INFO - orders - Request to close order 1000341-001 for user 9 (user_type: live) with price 118410. Frontend provided type: BUY, company: BTCUSD, status: CLOSED, frontend_status: CLOSED.
2025-07-17 03:38:50,131 - INFO - orders - User group: Standard, sending_orders setting: barclays
2025-07-17 03:38:50,131 - INFO - orders - Live user 9 from group 'Standard' has 'sending_orders' set to 'barclays'. Pushing close request to Firebase and skipping local DB update.
2025-07-17 03:38:50,136 - INFO - orders - [FIREBASE_CLOSE_REQUEST] Preparing to send payload for user-initiated close: {'order_id': '1000341-001', 'close_price': '118410', 'user_id': 9, 'order_type': 'BUY', 'order_company_name': 'BTCUSD', 'order_quantity': '0.41000000', 'contract_value': '0.41000000', 'order_status': 'CLOSED', 'status': 'CLOSED', 'action': 'close_order', 'close_id': '1000343-003'}
2025-07-17 03:39:34,347 - INFO - orders - [CURRENCY_CONVERT] Starting conversion of -1113.806000000000000000000000 USD to USD for PnL (user_id: 9, position: 1000341-001)
2025-07-17 03:39:34,347 - INFO - orders - [CURRENCY_CONVERT] Currency is already USD, no conversion needed
2025-07-17 03:39:34,349 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 03:39:34,349 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.41000000, TotalSellQty=0, NetQty=0.41000000, IsHedged=False
2025-07-17 03:39:34,349 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23838.60975609756097560975610')], HighestMarginPerLot=23838.60975609756097560975610
2025-07-17 03:39:34,349 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=9773.83
2025-07-17 03:39:34,349 - INFO - orders - [MARGIN_TOTAL_CONTRIB] No open positions for User 9, Symbol BTCUSD. Returning zero margin.
2025-07-17 03:39:34,493 - INFO - orders - Balance/margin cache updated for user 9: balance=8436.59000000, margin=30.00000000
2025-07-17 03:39:34,493 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-17 03:39:34,493 - INFO - orders - Using order model: UserOrder
2025-07-17 03:39:34,495 - INFO - orders - Fetched 0 open orders for user 9
2025-07-17 03:39:34,497 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-17 03:39:34,499 - INFO - orders - Updated static orders cache for user 9 with 0 open orders and 0 pending orders
2025-07-17 03:39:34,507 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=8436.59000000, margin=0.0
2025-07-17 04:07:21,684 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 04:07:23,023 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 04:07:23,023 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 04:07:23,024 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 04:07:23,024 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 04:07:23,070 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 04:07:23,070 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 04:07:24,157 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 04:07:24,157 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 04:07:24,157 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 04:07:24,157 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 04:07:24,157 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 04:07:24,157 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 04:07:24,157 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 04:07:24,157 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 04:07:24,157 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 04:07:24,452 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 04:07:24,452 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 04:07:24,452 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 04:07:24,452 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 04:07:24,452 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 04:07:24,452 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 04:07:24,452 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 04:07:24,452 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 04:07:24,452 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 04:07:24,491 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 04:07:24,491 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 04:07:24,491 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 04:07:24,491 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 04:07:24,491 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 04:07:28,024 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 04:07:33,027 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 04:08:48,392 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 04:09:41,749 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 04:09:43,038 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 04:09:43,039 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 04:09:43,039 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 04:09:43,040 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 04:09:43,077 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 04:09:43,077 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 04:09:48,242 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 04:09:53,041 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 04:10:00,146 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 04:10:47,248 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 04:10:47,372 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 04:10:47,372 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 04:10:47,373 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 04:10:47,375 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 04:10:47,375 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 04:10:47,375 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 04:10:47,376 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 04:10:47,376 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 04:10:47,376 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 04:11:36,107 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 04:11:36,775 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 04:11:36,775 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 04:11:36,775 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 04:11:36,776 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 04:11:36,776 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 04:11:36,776 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 04:11:36,776 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 04:11:36,776 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 04:11:36,776 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 04:19:14,734 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 04:19:16,091 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 04:19:16,091 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 04:19:16,091 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 04:19:16,092 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 04:19:16,162 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 04:19:16,162 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 04:19:17,217 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 04:19:17,217 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 04:19:17,217 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 04:19:17,217 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 04:19:17,217 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 04:19:17,217 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 04:19:17,217 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 04:19:17,217 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 04:19:17,217 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 04:19:17,393 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 04:19:17,393 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 04:19:17,393 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 04:19:17,393 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 04:19:17,393 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 04:19:17,393 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 04:19:17,393 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 04:19:17,393 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 04:19:17,394 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 04:19:17,416 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 04:19:17,416 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 04:19:17,416 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 04:19:17,416 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 04:19:17,416 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 04:19:20,410 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 04:19:20,410 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 04:19:20,410 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 04:19:20,410 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 04:19:20,410 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 04:19:20,410 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 04:19:20,410 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 04:19:20,410 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 04:19:20,410 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 04:19:21,098 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 04:19:26,090 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 04:24:18,056 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 04:24:18,056 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 04:24:18,056 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 04:24:18,056 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 04:24:18,057 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 04:24:18,057 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 04:24:18,057 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 04:24:18,057 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 04:24:18,057 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 04:24:18,072 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 04:24:18,072 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 04:24:18,072 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 04:24:18,072 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 04:24:18,072 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 04:24:22,772 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 04:24:22,772 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 04:24:22,773 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 04:24:22,773 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 04:24:22,773 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 04:24:22,773 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 04:24:22,773 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 04:24:22,773 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 04:24:22,773 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 04:25:16,777 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 04:27:16,157 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 04:28:45,908 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 04:28:47,020 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 04:28:47,021 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 04:28:47,021 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 04:28:47,021 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 04:28:47,057 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 04:28:47,057 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 04:28:52,020 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 04:28:57,020 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 04:29:21,926 - INFO - orders - Order placement request received - User: 9, Symbol: BTCUSD, Type: BUY
2025-07-17 04:29:22,300 - INFO - orders - [MARGIN_CALC] Market data for BTCUSD: {'b': '118155.0000000000', 'o': '118154.9000000000'}
2025-07-17 04:29:22,300 - WARNING - orders - [MARGIN_CALC] Missing ask price for BTCUSD, using bid price with spread: bid=118155.0000000000, ask=118166.81550000000000
2025-07-17 04:29:22,300 - INFO - orders - [MARGIN_CALC] Using prices for BTCUSD: bid=118155.0000000000, ask=118166.81550000000000
2025-07-17 04:29:22,300 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: BTCUSD, Type: BUY, Qty: 0.35, Price: 118166.81550000000000, Margin: 8271.68, Commission: 206.79
2025-07-17 04:29:22,301 - INFO - orders - [HEDGING_MARGIN_DEBUG] Starting hedging calculation for User: 9, Symbol: BTCUSD, OrderType: BUY, Quantity: 0.35, FullMargin: 8271.68
2025-07-17 04:29:22,301 - INFO - orders - [HEDGING_MARGIN_DEBUG] Existing open orders count: 0
2025-07-17 04:29:22,301 - INFO - orders - [HEDGING_MARGIN_DEBUG] Created simulated order: Type=BUY, Qty=0.35, Margin=8271.68
2025-07-17 04:29:22,301 - INFO - orders - [HEDGING_MARGIN_DEBUG] About to calculate margin before and after for 0 existing orders + 1 new order
2025-07-17 04:29:22,301 - INFO - orders - [HEDGING_MARGIN_DEBUG] Executing margin calculation tasks...
2025-07-17 04:29:22,302 - INFO - orders - [MARGIN_TOTAL_CONTRIB] No open positions for User 9, Symbol BTCUSD. Returning zero margin.
2025-07-17 04:29:22,302 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 04:29:22,303 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35, TotalSellQty=0, NetQty=0.35, IsHedged=False
2025-07-17 04:29:22,303 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 04:29:22,303 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 04:29:22,303 - INFO - orders - [HEDGING_MARGIN_DEBUG] Margin calculation tasks completed
2025-07-17 04:29:22,303 - INFO - orders - [HEDGING_MARGIN_DEBUG] User: 9, Symbol: BTCUSD, OrderType: BUY, MarginBefore: 0.0, MarginAfter: 8271.68, AdditionalMargin: 8271.68, OpenOrders: 0
2025-07-17 04:29:22,303 - INFO - orders - [HEDGING_MARGIN_DEBUG] Simulated order: Type=BUY, Qty=0.35, Margin=8271.68
2025-07-17 04:29:22,303 - INFO - orders - [PERF] Order processing: 0.3730s
2025-07-17 04:29:22,331 - INFO - orders - [PERF] Order creation: 0.0275s
2025-07-17 04:29:22,331 - INFO - orders - is_barclays_live_user in place_order: True
2025-07-17 04:29:22,331 - INFO - orders - [BARCLAYS] Scheduling barclays_push in place_order
2025-07-17 04:29:22,331 - INFO - orders - [PERF] TOTAL place_order: 0.4106s
2025-07-17 04:29:22,358 - INFO - orders - Background balance/margin cache updated for user 9: balance=8436.59000000, margin=0.0
2025-07-17 04:29:22,374 - INFO - orders - [BARCLAYS] barclays_push called in place_order
2025-07-17 04:29:22,676 - INFO - orders - [PUBLISH_ASYNC] Triggering websocket updates for user 9
2025-07-17 04:29:46,703 - INFO - orders - Order 1000347-001 transitioning to OPEN. Calculating margin.
2025-07-17 04:29:46,703 - INFO - orders - Using fixed UserOrder model for Barclays service provider integration
2025-07-17 04:29:46,705 - INFO - orders - Using group_name: Standard for order 1000347-001
2025-07-17 04:29:47,074 - INFO - orders - [SYMBOL_INFO] Retrieved external symbol info for BTCUSD: contract_size=1.00000000, profit_currency=USD, digit=2.00000
2025-07-17 04:29:47,074 - INFO - orders - Using user's leverage from cache: 100.00
2025-07-17 04:29:47,075 - INFO - orders - [MARGIN_CALC] Market data for BTCUSD: {'b': '118155.0000000000', 'o': '118154.9000000000'}
2025-07-17 04:29:47,075 - WARNING - orders - [MARGIN_CALC] Missing ask price for BTCUSD, using bid price with spread: bid=118155.0000000000, ask=118166.81550000000000
2025-07-17 04:29:47,075 - INFO - orders - [MARGIN_CALC] Using prices for BTCUSD: bid=118155.0000000000, ask=118166.81550000000000
2025-07-17 04:29:47,075 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: BTCUSD, Type: BUY, Qty: 0.35000000, Price: 118166.81550000000000, Margin: 8271.68, Commission: 206.79
2025-07-17 04:29:47,075 - INFO - orders - New margin calculated: 8271.68, contract_value: 0.35
2025-07-17 04:29:47,076 - INFO - orders - [MARGIN] Final stored margin (USD): 8271.68
2025-07-17 04:29:47,076 - INFO - orders - Recalculating total hedged margin for user 9 on symbol BTCUSD
2025-07-17 04:29:47,079 - INFO - orders - Found 0 existing open positions for this symbol
2025-07-17 04:29:47,080 - INFO - orders - [MARGIN_TOTAL_CONTRIB] No open positions for User 9, Symbol BTCUSD. Returning zero margin.
2025-07-17 04:29:47,080 - INFO - orders - Old total margin for BTCUSD: 0.0
2025-07-17 04:29:47,080 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 04:29:47,080 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 04:29:47,080 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 04:29:47,080 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 04:29:47,081 - INFO - orders - New total margin for BTCUSD: 8271.68
2025-07-17 04:29:47,081 - INFO - orders - Margin change for user 9: 8271.68
2025-07-17 04:29:47,086 - INFO - orders - User 9 margin updated from 30.00000000 to 8301.68000000
2025-07-17 04:29:47,133 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-17 04:29:47,134 - INFO - orders - Using order model: UserOrder
2025-07-17 04:29:47,137 - INFO - orders - Fetched 1 open orders for user 9
2025-07-17 04:29:47,143 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-17 04:29:47,146 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-17 04:29:47,151 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 04:29:47,151 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 04:29:47,151 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 04:29:47,152 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 04:29:47,152 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 04:29:47,158 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=8436.59000000, margin=8271.68
2025-07-17 04:33:48,056 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 04:33:48,056 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 04:33:48,056 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 04:33:48,056 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 04:33:48,056 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 04:33:48,056 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 04:33:48,056 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 04:33:48,056 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 04:33:48,056 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 04:33:48,125 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 04:33:48,125 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 04:33:48,125 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 04:33:48,125 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 04:33:48,125 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 04:33:48,125 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 04:33:48,125 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 04:33:48,125 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 04:33:48,125 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 04:33:48,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 04:33:48,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 04:33:48,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 04:33:48,134 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 04:33:48,134 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 04:41:24,402 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 04:41:25,584 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 04:41:25,584 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 04:41:25,584 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 04:41:25,584 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 04:41:25,614 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 04:41:25,614 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 04:41:26,541 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 04:41:26,542 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 04:41:26,542 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 04:41:26,542 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 04:41:26,542 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 04:41:26,911 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 04:41:26,911 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 04:41:26,911 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 04:41:26,911 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 04:41:26,912 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 04:41:26,912 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 04:41:26,912 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 04:41:26,912 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 04:41:26,912 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 04:41:27,095 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 04:41:27,096 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 04:41:27,096 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 04:41:27,096 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 04:41:27,096 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 04:41:27,096 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 04:41:27,096 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 04:41:27,096 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 04:41:27,096 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 04:41:27,147 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 04:41:27,148 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 04:41:27,148 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 04:41:27,148 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 04:41:27,148 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 04:41:30,586 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 04:41:31,200 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 04:41:31,200 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 04:41:31,200 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 04:41:31,200 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 04:41:31,200 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 04:41:35,584 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 04:41:40,602 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 04:41:41,557 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 04:41:41,557 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 04:41:41,558 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 04:41:41,558 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 04:41:41,594 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 04:41:41,594 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 04:41:43,743 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 04:41:43,743 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 04:41:43,744 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 04:41:43,744 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 04:41:43,744 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 04:41:46,563 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 04:41:51,557 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 04:46:42,409 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 04:46:42,409 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 04:46:42,409 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 04:46:42,409 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 04:46:42,409 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 04:46:42,409 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 04:46:42,409 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 04:46:42,409 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 04:46:42,409 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 04:46:42,469 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 04:46:42,469 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 04:46:42,469 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 04:46:42,469 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 04:46:42,469 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 04:46:42,469 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 04:46:42,469 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 04:46:42,469 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 04:46:42,470 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 04:46:42,477 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 04:46:42,477 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 04:46:42,477 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 04:46:42,477 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 04:46:42,477 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 04:46:44,460 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 04:46:44,460 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 04:46:44,460 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 04:46:44,460 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 04:46:44,460 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 04:47:08,100 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 04:47:09,338 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 04:47:09,338 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 04:47:09,338 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 04:47:09,338 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 04:47:09,367 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 04:47:09,367 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 04:47:11,348 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 04:47:11,349 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 04:47:11,349 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 04:47:11,349 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 04:47:11,349 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 04:47:14,337 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 04:47:19,350 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 04:53:56,586 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 04:53:57,500 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 04:53:57,500 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 04:53:57,501 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 04:53:57,501 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 04:53:57,532 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 04:53:57,532 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 04:53:58,352 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 04:53:58,352 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 04:53:58,352 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 04:53:58,352 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 04:53:58,352 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 04:53:58,412 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 04:53:58,412 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 04:53:58,412 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 04:53:58,412 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 04:53:58,412 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 04:53:58,412 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 04:53:58,412 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 04:53:58,412 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 04:53:58,412 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 04:53:58,566 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 04:53:58,566 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 04:53:58,566 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 04:53:58,566 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 04:53:58,566 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 04:53:58,566 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 04:53:58,566 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 04:53:58,566 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 04:53:58,566 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 04:53:58,586 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 04:53:58,586 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 04:53:58,586 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 04:53:58,586 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 04:53:58,586 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 04:54:02,501 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 04:54:04,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 04:54:04,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 04:54:04,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 04:54:04,368 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 04:54:04,368 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 04:54:07,513 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 04:55:09,020 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-17 04:55:09,020 - INFO - orders - Using order model: UserOrder
2025-07-17 04:55:09,023 - INFO - orders - Fetched 3 open orders for user 14
2025-07-17 04:55:09,024 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-17 04:55:09,026 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-17 04:55:09,033 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 04:55:09,033 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 04:55:09,033 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 04:55:09,033 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 04:55:09,033 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 04:55:09,033 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 04:55:09,033 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 04:55:09,033 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 04:55:09,033 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 04:55:09,042 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-17 04:56:12,575 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-17 04:56:12,575 - INFO - orders - Using order model: UserOrder
2025-07-17 04:56:12,578 - INFO - orders - Fetched 3 open orders for user 14
2025-07-17 04:56:12,580 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-17 04:56:12,582 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-17 04:56:12,585 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 04:56:12,586 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 04:56:12,586 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 04:56:12,586 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 04:56:12,586 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 04:56:12,586 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 04:56:12,586 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 04:56:12,586 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 04:56:12,586 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 04:56:12,591 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-17 04:57:05,709 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 04:57:06,738 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 04:57:06,738 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 04:57:06,738 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 04:57:06,739 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 04:57:06,827 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 04:57:06,827 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 04:57:11,990 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 04:57:13,319 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 04:57:13,319 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 04:57:13,319 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 04:57:13,319 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 04:57:13,319 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 04:57:16,741 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 04:58:15,922 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 04:58:16,993 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 04:58:16,993 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 04:58:16,993 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 04:58:16,994 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 04:58:17,032 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 04:58:17,032 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 04:58:18,660 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 04:58:18,660 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 04:58:18,661 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 04:58:18,661 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 04:58:18,661 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 04:58:19,150 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-17 04:58:19,151 - INFO - orders - Using order model: UserOrder
2025-07-17 04:58:19,153 - INFO - orders - Fetched 3 open orders for user 14
2025-07-17 04:58:19,158 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-17 04:58:19,162 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-17 04:58:19,174 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 04:58:19,175 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 04:58:19,175 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 04:58:19,175 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 04:58:19,175 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 04:58:19,175 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 04:58:19,175 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 04:58:19,176 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 04:58:19,176 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 04:58:19,185 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-17 04:58:21,993 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 04:58:27,002 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 05:03:18,116 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 05:03:18,116 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 05:03:18,116 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 05:03:18,116 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 05:03:18,116 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 05:03:18,116 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 05:03:18,117 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 05:03:18,117 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 05:03:18,117 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 05:03:18,125 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 05:03:18,125 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 05:03:18,125 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 05:03:18,125 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 05:03:18,125 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 05:03:19,274 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:03:19,274 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:03:19,274 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:03:19,274 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:03:19,274 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:12:45,281 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 05:12:46,442 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 05:12:46,442 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 05:12:46,442 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 05:12:46,443 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 05:12:46,485 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 05:12:46,485 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 05:12:47,322 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:12:47,322 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:12:47,322 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:12:47,322 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:12:47,322 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:12:47,378 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 05:12:47,378 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 05:12:47,378 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 05:12:47,378 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 05:12:47,378 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 05:12:47,378 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 05:12:47,378 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 05:12:47,378 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 05:12:47,378 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 05:12:47,528 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 05:12:47,528 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 05:12:47,528 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 05:12:47,529 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 05:12:47,529 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 05:12:47,529 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 05:12:47,529 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 05:12:47,529 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 05:12:47,529 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 05:12:47,575 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 05:12:47,575 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 05:12:47,575 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 05:12:47,575 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 05:12:47,575 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 05:12:49,461 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:12:49,461 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:12:49,461 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:12:49,461 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:12:49,461 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:12:51,544 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 05:12:56,449 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 05:14:20,820 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 05:14:21,583 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:14:21,583 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:14:21,583 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:14:21,583 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:14:21,583 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:19:58,649 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 05:19:59,893 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 05:19:59,894 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 05:19:59,894 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 05:19:59,894 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 05:19:59,937 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 05:19:59,937 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 05:20:00,709 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:20:00,709 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:20:00,709 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:20:00,709 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:20:00,710 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:20:00,754 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 05:20:00,754 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 05:20:00,754 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 05:20:00,754 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 05:20:00,754 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 05:20:00,754 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 05:20:00,754 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 05:20:00,754 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 05:20:00,754 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 05:20:00,854 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 05:20:00,854 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 05:20:00,855 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 05:20:00,855 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 05:20:00,855 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 05:20:00,855 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 05:20:00,855 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 05:20:00,855 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 05:20:00,855 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 05:20:00,869 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 05:20:00,869 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 05:20:00,869 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 05:20:00,869 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 05:20:00,869 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 05:20:04,894 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 05:20:05,930 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:20:05,930 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:20:05,930 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:20:05,930 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:20:05,930 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:20:09,909 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 05:21:31,298 - INFO - orders - Service provider update request received: {"order_id":"1000347-001","order_price":"118205.60"}
2025-07-17 05:21:31,310 - INFO - orders - Original order status: OPEN
2025-07-17 05:21:31,311 - INFO - orders - Update fields: {'order_id': '1000347-001', 'order_price': Decimal('118205.60')}
2025-07-17 05:21:31,311 - INFO - orders - Processing regular update for order 1000347-001
2025-07-17 05:21:31,362 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:21:31,362 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:21:31,362 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:21:31,362 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:21:31,362 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:21:31,370 - INFO - orders - Balance/margin cache updated for user 9: balance=8436.59000000, margin=8271.68
2025-07-17 05:21:31,370 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-17 05:21:31,370 - INFO - orders - Using order model: UserOrder
2025-07-17 05:21:31,372 - INFO - orders - Fetched 1 open orders for user 9
2025-07-17 05:21:31,375 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-17 05:21:31,376 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-17 05:21:31,381 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:21:31,381 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:21:31,381 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:21:31,381 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:21:31,381 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:21:31,384 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=8436.59000000, margin=8271.68
2025-07-17 05:21:43,263 - INFO - orders - Service provider update request received: {"order_id":"1000347-001","order_price":"117205.60"}
2025-07-17 05:21:43,270 - INFO - orders - Original order status: OPEN
2025-07-17 05:21:43,270 - INFO - orders - Update fields: {'order_id': '1000347-001', 'order_price': Decimal('117205.60')}
2025-07-17 05:21:43,270 - INFO - orders - Processing regular update for order 1000347-001
2025-07-17 05:21:43,287 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:21:43,287 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:21:43,287 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:21:43,287 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:21:43,287 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:21:43,291 - INFO - orders - Balance/margin cache updated for user 9: balance=8436.59000000, margin=8271.68
2025-07-17 05:21:43,292 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-17 05:21:43,292 - INFO - orders - Using order model: UserOrder
2025-07-17 05:21:43,293 - INFO - orders - Fetched 1 open orders for user 9
2025-07-17 05:21:43,295 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-17 05:21:43,297 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-17 05:21:43,299 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:21:43,300 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:21:43,300 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:21:43,300 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:21:43,300 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:21:43,302 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=8436.59000000, margin=8271.68
2025-07-17 05:22:40,038 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:22:40,038 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:22:40,038 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:22:40,038 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:22:40,038 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:22:44,584 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:22:44,584 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:22:44,585 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:22:44,585 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:22:44,585 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:23:25,480 - INFO - orders - Service provider update request received: {"order_id":"1000347-001","order_price":"119205.60"}
2025-07-17 05:23:25,487 - INFO - orders - Original order status: OPEN
2025-07-17 05:23:25,488 - INFO - orders - Update fields: {'order_id': '1000347-001', 'order_price': Decimal('119205.60')}
2025-07-17 05:23:25,488 - INFO - orders - Processing regular update for order 1000347-001
2025-07-17 05:23:25,511 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:23:25,511 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:23:25,511 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:23:25,511 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:23:25,511 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:23:25,517 - INFO - orders - Balance/margin cache updated for user 9: balance=8436.59000000, margin=8271.68
2025-07-17 05:23:25,517 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-17 05:23:25,517 - INFO - orders - Using order model: UserOrder
2025-07-17 05:23:25,520 - INFO - orders - Fetched 1 open orders for user 9
2025-07-17 05:23:25,523 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-17 05:23:25,525 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-17 05:23:25,529 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:23:25,529 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:23:25,529 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:23:25,529 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:23:25,529 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:23:25,535 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=8436.59000000, margin=8271.68
2025-07-17 05:26:18,180 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 05:26:19,275 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 05:26:19,275 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 05:26:19,276 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 05:26:19,276 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 05:26:19,319 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 05:26:19,319 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 05:26:20,224 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 05:26:20,224 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 05:26:20,224 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 05:26:20,224 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 05:26:20,224 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 05:26:20,224 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 05:26:20,224 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 05:26:20,224 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 05:26:20,224 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 05:26:20,319 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 05:26:20,319 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 05:26:20,320 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 05:26:20,320 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 05:26:20,320 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 05:26:20,320 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 05:26:20,320 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 05:26:20,320 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 05:26:20,320 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 05:26:20,361 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 05:26:20,361 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 05:26:20,361 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 05:26:20,361 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 05:26:20,361 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 05:26:21,258 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:26:21,258 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:26:21,258 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:26:21,258 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:26:21,258 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:26:24,275 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 05:26:29,280 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 05:31:20,519 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 05:31:20,519 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 05:31:20,519 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 05:31:20,519 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 05:31:20,519 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 05:31:20,519 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 05:31:20,519 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 05:31:20,519 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 05:31:20,519 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 05:31:20,587 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 05:31:20,587 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 05:31:20,587 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 05:31:20,587 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 05:31:20,587 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 05:31:20,587 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 05:31:20,587 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 05:31:20,587 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 05:31:20,587 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 05:31:20,594 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 05:31:20,594 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 05:31:20,594 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 05:31:20,594 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 05:31:20,594 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 05:31:21,628 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:31:21,628 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:31:21,628 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:31:21,628 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:31:21,628 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:35:10,061 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 05:35:10,959 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 05:35:10,959 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 05:35:10,959 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 05:35:10,959 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 05:35:11,011 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 05:35:11,011 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 05:35:12,763 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:35:12,763 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:35:12,763 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:35:12,763 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:35:12,763 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:35:16,227 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 05:35:20,977 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 05:37:09,119 - INFO - orders - [get_rejected_orders] user_type: live
2025-07-17 05:37:09,785 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:37:09,785 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:37:09,785 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:37:09,785 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:37:09,785 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:40:11,931 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 05:40:11,931 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 05:40:11,931 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 05:40:11,931 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 05:40:11,931 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 05:40:11,932 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 05:40:11,932 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 05:40:11,932 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 05:40:11,932 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 05:40:12,005 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 05:40:12,005 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 05:40:12,005 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 05:40:12,005 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 05:40:12,005 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 05:40:12,005 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 05:40:12,005 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 05:40:12,005 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 05:40:12,005 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 05:40:12,014 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 05:40:12,014 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 05:40:12,014 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 05:40:12,014 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 05:40:12,014 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 05:42:15,814 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:42:15,814 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:42:15,814 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:42:15,814 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:42:15,814 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:50:55,374 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 05:50:56,580 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 05:50:56,580 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 05:50:56,581 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 05:50:56,581 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 05:50:56,632 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 05:50:56,632 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 05:50:57,402 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:50:57,403 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:50:57,403 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:50:57,403 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:50:57,403 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:50:57,459 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 05:50:57,459 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 05:50:57,459 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 05:50:57,459 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 05:50:57,459 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 05:50:57,459 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 05:50:57,459 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 05:50:57,459 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 05:50:57,459 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 05:50:57,573 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol XAGUSD
2025-07-17 05:50:57,573 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: TotalBuyQty=0.01000000, TotalSellQty=0, NetQty=0.01000000, IsHedged=False
2025-07-17 05:50:57,573 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol XAGUSD: AllMarginsPerLot=[Decimal('1954')], HighestMarginPerLot=1954
2025-07-17 05:50:57,573 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol XAGUSD: CalculatedTotalMargin=19.54
2025-07-17 05:50:57,573 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 26, Symbol BTCUSD
2025-07-17 05:50:57,574 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: TotalBuyQty=6.00000000, TotalSellQty=0, NetQty=6.00000000, IsHedged=False
2025-07-17 05:50:57,574 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 26, Symbol BTCUSD: AllMarginsPerLot=[Decimal('24410.82166666666666666666667')], HighestMarginPerLot=24410.82166666666666666666667
2025-07-17 05:50:57,574 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 26, Symbol BTCUSD: CalculatedTotalMargin=146464.93
2025-07-17 05:50:57,574 - INFO - orders - [TOTAL_USER_MARGIN] User 26 total margin across all symbols: 146484.47
2025-07-17 05:50:57,590 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 1, Symbol AUDJPY
2025-07-17 05:50:57,590 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: TotalBuyQty=0.01000000, TotalSellQty=0.01000000, NetQty=0.01000000, IsHedged=True
2025-07-17 05:50:57,590 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 1, Symbol AUDJPY: AllMarginsPerLot=[Decimal('654.341805'), Decimal('654.258453')], HighestMarginPerLot=654.341805
2025-07-17 05:50:57,590 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 1, Symbol AUDJPY: CalculatedTotalMargin=6.54
2025-07-17 05:50:57,590 - INFO - orders - [TOTAL_USER_MARGIN] User 1 total margin across all symbols: 6.54
2025-07-17 05:50:58,728 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-17 05:50:58,728 - INFO - orders - Using order model: UserOrder
2025-07-17 05:50:58,730 - INFO - orders - Fetched 3 open orders for user 14
2025-07-17 05:50:58,732 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-17 05:50:58,733 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-17 05:50:58,737 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 05:50:58,737 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 05:50:58,737 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 05:50:58,737 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 05:50:58,737 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 05:50:58,737 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 05:50:58,737 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 05:50:58,737 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 05:50:58,737 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 05:50:58,740 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-17 05:51:03,177 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 05:51:06,583 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 05:51:32,244 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:51:32,244 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:51:32,244 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:51:32,244 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:51:32,244 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:52:05,918 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-17 05:52:05,918 - INFO - orders - Using order model: UserOrder
2025-07-17 05:52:05,920 - INFO - orders - Fetched 3 open orders for user 14
2025-07-17 05:52:05,922 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-17 05:52:05,922 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-17 05:52:05,925 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 05:52:05,925 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 05:52:05,925 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 05:52:05,925 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 05:52:05,925 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 05:52:05,925 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 05:52:05,925 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 05:52:05,925 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 05:52:05,925 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 05:52:05,927 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-17 05:53:09,968 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-17 05:53:09,968 - INFO - orders - Using order model: UserOrder
2025-07-17 05:53:09,970 - INFO - orders - Fetched 3 open orders for user 14
2025-07-17 05:53:09,972 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-17 05:53:09,974 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-17 05:53:09,976 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 05:53:09,976 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 05:53:09,976 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 05:53:09,976 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 05:53:09,976 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 05:53:09,976 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 05:53:09,976 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 05:53:09,976 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 05:53:09,976 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 05:53:09,979 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-17 05:53:23,835 - INFO - orders - Service provider update request received: {"order_id":"1000347-001","order_price":"109205.60"}
2025-07-17 05:53:23,848 - INFO - orders - Original order status: OPEN
2025-07-17 05:53:23,849 - INFO - orders - Update fields: {'order_id': '1000347-001', 'order_price': Decimal('109205.60')}
2025-07-17 05:53:23,849 - INFO - orders - Processing regular update for order 1000347-001
2025-07-17 05:53:23,905 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:53:23,905 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:53:23,906 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:53:23,906 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:53:23,906 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:53:23,913 - INFO - orders - Balance/margin cache updated for user 9: balance=8436.59000000, margin=8271.68
2025-07-17 05:53:23,913 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-17 05:53:23,913 - INFO - orders - Using order model: UserOrder
2025-07-17 05:53:23,915 - INFO - orders - Fetched 1 open orders for user 9
2025-07-17 05:53:23,917 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-17 05:53:23,918 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-17 05:53:23,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:53:23,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:53:23,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:53:23,920 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:53:23,920 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:53:23,924 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=8436.59000000, margin=8271.68
2025-07-17 05:54:13,163 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-17 05:54:13,163 - INFO - orders - Using order model: UserOrder
2025-07-17 05:54:13,165 - INFO - orders - Fetched 3 open orders for user 14
2025-07-17 05:54:13,167 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-17 05:54:13,168 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-17 05:54:13,170 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 05:54:13,170 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 05:54:13,170 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 05:54:13,170 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 05:54:13,170 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 05:54:13,170 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 05:54:13,170 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 05:54:13,170 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 05:54:13,170 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 05:54:13,172 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-17 05:54:22,978 - INFO - orders - [CLEANUP] Starting pending order stream cleanup
2025-07-17 05:54:24,051 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream
2025-07-17 05:54:24,051 - INFO - orders - [CLEANUP] Pending order stream cleanup completed
2025-07-17 05:54:24,051 - INFO - orders - [CLEANUP] Starting pending order stream cleanup with trigger price validation
2025-07-17 05:54:24,051 - INFO - orders - [PENDING_TRIGGER_WORKER] Starting pending order trigger worker
2025-07-17 05:54:24,116 - INFO - orders - [CLEANUP] Cleared pending_trigger_queue stream to remove old format entries
2025-07-17 05:54:24,116 - INFO - orders - [CLEANUP] Pending order stream cleanup with trigger price validation completed
2025-07-17 05:54:25,815 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:54:25,816 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:54:25,816 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:54:25,816 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:54:25,816 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:54:26,329 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-17 05:54:26,330 - INFO - orders - Using order model: UserOrder
2025-07-17 05:54:26,332 - INFO - orders - Fetched 3 open orders for user 14
2025-07-17 05:54:26,335 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-17 05:54:26,337 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-17 05:54:26,342 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 05:54:26,342 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 05:54:26,342 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 05:54:26,342 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 05:54:26,343 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 05:54:26,343 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 05:54:26,343 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 05:54:26,343 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 05:54:26,343 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 05:54:26,349 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-17 05:54:29,218 - INFO - orders - Starting the simplified pending order checker background task.
2025-07-17 05:54:34,069 - INFO - orders - Starting the users with orders cache updater task.
2025-07-17 05:54:54,328 - INFO - orders - Service provider update request received: {"order_id":"1000347-001","order_price":"119205.60"}
2025-07-17 05:54:54,357 - INFO - orders - Original order status: OPEN
2025-07-17 05:54:54,358 - INFO - orders - Update fields: {'order_id': '1000347-001', 'order_price': Decimal('119205.60')}
2025-07-17 05:54:54,358 - INFO - orders - Processing regular update for order 1000347-001
2025-07-17 05:54:54,395 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:54:54,395 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:54:54,395 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:54:54,395 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:54:54,395 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:54:54,403 - INFO - orders - Balance/margin cache updated for user 9: balance=8436.59000000, margin=8271.68
2025-07-17 05:54:54,403 - INFO - orders - Starting update_user_static_orders for user 9, user_type live
2025-07-17 05:54:54,403 - INFO - orders - Using order model: UserOrder
2025-07-17 05:54:54,405 - INFO - orders - Fetched 1 open orders for user 9
2025-07-17 05:54:54,407 - INFO - orders - Fetched 0 pending orders for user 9
2025-07-17 05:54:54,408 - INFO - orders - Updated static orders cache for user 9 with 1 open orders and 0 pending orders
2025-07-17 05:54:54,412 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 9, Symbol BTCUSD
2025-07-17 05:54:54,412 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: TotalBuyQty=0.35000000, TotalSellQty=0, NetQty=0.35000000, IsHedged=False
2025-07-17 05:54:54,412 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 9, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23633.37142857142857142857143')], HighestMarginPerLot=23633.37142857142857142857143
2025-07-17 05:54:54,413 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 9, Symbol BTCUSD: CalculatedTotalMargin=8271.68
2025-07-17 05:54:54,413 - INFO - orders - [TOTAL_USER_MARGIN] User 9 total margin across all symbols: 8271.68
2025-07-17 05:54:54,417 - INFO - orders - User 9: Updated balance/margin cache after static orders update - balance=8436.59000000, margin=8271.68
2025-07-17 05:55:04,883 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-17 05:55:04,884 - INFO - orders - Using order model: UserOrder
2025-07-17 05:55:04,886 - INFO - orders - Fetched 3 open orders for user 14
2025-07-17 05:55:04,888 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-17 05:55:04,889 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-17 05:55:04,892 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 05:55:04,892 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 05:55:04,892 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 05:55:04,892 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 05:55:04,892 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 05:55:04,892 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 05:55:04,892 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 05:55:04,892 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 05:55:04,892 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 05:55:04,895 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
2025-07-17 05:55:38,532 - INFO - orders - Starting update_user_static_orders for user 14, user_type live
2025-07-17 05:55:38,532 - INFO - orders - Using order model: UserOrder
2025-07-17 05:55:38,535 - INFO - orders - Fetched 3 open orders for user 14
2025-07-17 05:55:38,537 - INFO - orders - Fetched 0 pending orders for user 14
2025-07-17 05:55:38,538 - INFO - orders - Updated static orders cache for user 14 with 3 open orders and 0 pending orders
2025-07-17 05:55:38,542 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 1 positions for User 14, Symbol BTCUSD
2025-07-17 05:55:38,542 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: TotalBuyQty=0.40000000, TotalSellQty=0, NetQty=0.40000000, IsHedged=False
2025-07-17 05:55:38,542 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol BTCUSD: AllMarginsPerLot=[Decimal('23556.825')], HighestMarginPerLot=23556.825
2025-07-17 05:55:38,542 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol BTCUSD: CalculatedTotalMargin=9422.73
2025-07-17 05:55:38,542 - INFO - orders - [MARGIN_TOTAL_CONTRIB] Calculating margin for 2 positions for User 14, Symbol AUDJPY
2025-07-17 05:55:38,542 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: TotalBuyQty=0.11000000, TotalSellQty=0, NetQty=0.11000000, IsHedged=False
2025-07-17 05:55:38,542 - INFO - orders - [MARGIN_TOTAL_CONTRIB_CALC] User 14, Symbol AUDJPY: AllMarginsPerLot=[Decimal('652.1517371'), Decimal('652.134765')], HighestMarginPerLot=652.1517371
2025-07-17 05:55:38,542 - INFO - orders - [MARGIN_TOTAL_CONTRIB_EXIT] User 14, Symbol AUDJPY: CalculatedTotalMargin=71.74
2025-07-17 05:55:38,542 - INFO - orders - [TOTAL_USER_MARGIN] User 14 total margin across all symbols: 9494.47
2025-07-17 05:55:38,545 - INFO - orders - User 14: Updated balance/margin cache after static orders update - balance=9902.02000000, margin=9494.47
