2025-07-06 21:12:08,504 - INFO - orders - Application starting up - Orders logging initialized
2025-07-06 21:12:08,506 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-06 21:12:32,143 - INFO - orders - Application starting up - Orders logging initialized
2025-07-06 21:12:32,143 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-06 23:09:52,228 - INFO - orders - Application starting up - Orders logging initialized
2025-07-06 23:09:52,229 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-06 23:10:08,433 - INFO - orders - Application starting up - Orders logging initialized
2025-07-06 23:10:08,433 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-06 23:10:47,919 - INFO - orders - Application starting up - Orders logging initialized
2025-07-06 23:10:47,920 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-06 23:10:53,256 - INFO - orders - Application starting up - Orders logging initialized
2025-07-06 23:10:53,256 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-06 23:11:04,479 - INFO - orders - Application starting up - Orders logging initialized
2025-07-06 23:11:04,479 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-06 23:11:08,343 - INFO - orders - Application starting up - Orders logging initialized
2025-07-06 23:11:08,343 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-06 23:19:08,615 - INFO - orders - Application starting up - Orders logging initialized
2025-07-06 23:19:08,615 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-06 23:19:12,272 - INFO - orders - Application starting up - Orders logging initialized
2025-07-06 23:19:12,272 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-06 23:20:39,152 - app.api.v1.endpoints.orders - INFO - [get_rejected_orders] user_type: live
2025-07-06 23:23:33,390 - INFO - orders - Application starting up - Orders logging initialized
2025-07-06 23:23:33,390 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-06 23:23:42,366 - INFO - orders - Application starting up - Orders logging initialized
2025-07-06 23:23:42,366 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-06 23:42:35,954 - app.api.v1.endpoints.orders - INFO - [get_rejected_orders] user_type: live
2025-07-06 23:59:50,155 - INFO - orders - Application starting up - Orders logging initialized
2025-07-06 23:59:50,155 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-07 00:06:11,044 - INFO - orders - Application starting up - Orders logging initialized
2025-07-07 00:06:11,044 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-07 00:06:25,004 - INFO - orders - Application starting up - Orders logging initialized
2025-07-07 00:06:25,004 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-07 00:11:04,207 - INFO - orders - Application starting up - Orders logging initialized
2025-07-07 00:11:04,207 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-07 00:12:36,492 - INFO - orders - Application starting up - Orders logging initialized
2025-07-07 00:12:36,493 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-07 00:13:00,783 - INFO - orders - Application starting up - Orders logging initialized
2025-07-07 00:13:00,784 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-07 00:13:07,768 - INFO - orders - Starting the pending order checker background task.
2025-07-07 00:13:07,769 - INFO - orders - Starting the SL/TP checker task (triggered by market updates).
2025-07-07 00:13:09,873 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 00:13:12,287 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 00:13:14,672 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 00:13:16,893 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 00:13:19,549 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 00:13:21,484 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 00:13:23,813 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 00:13:26,102 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 00:13:27,803 - INFO - orders - Order placement request received - User: 4, Symbol: AUDCAD, Type: BUY
2025-07-07 00:13:28,146 - INFO - orders - [MARGIN_CALC] Market data for AUDCAD: {'b': '0.8888700000', 'o': '0.8888100000'}
2025-07-07 00:13:28,146 - WARNING - orders - [MARGIN_CALC] Missing ask price for AUDCAD, using bid price with spread: bid=0.8888700000, ask=0.88895888700000
2025-07-07 00:13:28,146 - INFO - orders - [MARGIN_CALC] Using prices for AUDCAD: bid=0.8888700000, ask=0.88895888700000
2025-07-07 00:13:28,147 - INFO - orders - [CURRENCY_CONVERT] Starting conversion of 8.89 CAD to USD for margin_calculation (user_id: 4, position: None)
2025-07-07 00:13:28,147 - INFO - orders - [CURRENCY_CONVERT] Trying direct conversion with symbol: CADUSD
2025-07-07 00:13:28,148 - INFO - orders - [CURRENCY_CONVERT] Direct conversion prices from cache: None
2025-07-07 00:13:28,148 - INFO - orders - [CURRENCY_CONVERT] No direct conversion rate found for CADUSD, trying inverse
2025-07-07 00:13:28,148 - INFO - orders - [CURRENCY_CONVERT] Trying inverse conversion with symbol: USDCAD
2025-07-07 00:13:28,148 - INFO - orders - [CURRENCY_CONVERT] Inverse conversion prices from cache: {'b': Decimal('1.3646600000'), 'o': Decimal('1.3646100000')}
2025-07-07 00:13:28,149 - INFO - orders - [CURRENCY_CONVERT] Found inverse conversion rate (bid): 1.3646600000
2025-07-07 00:13:28,149 - INFO - orders - [CURRENCY_CONVERT] Inverse conversion successful: 8.89 CAD / 1.3646600000 = 6.514443158002725953717409465 USD
2025-07-07 00:13:28,149 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: AUDCAD, Type: BUY, Qty: 0.01, Price: 0.88895888700000, Margin: 6.514443158002725953717409465, Commission: 0.00
2025-07-07 00:13:28,149 - INFO - orders - [PERF] Order processing: 0.3326s
2025-07-07 00:13:28,150 - DEBUG - orders - [DEBUG][create_user_order] Received order_data: {'order_id': '9066577232', 'order_status': 'PROCESSING', 'order_user_id': 4, 'order_company_name': 'AUDCAD', 'order_type': 'BUY', 'order_price': Decimal('0.88895888700000'), 'order_quantity': Decimal('0.01'), 'contract_value': Decimal('1000.00'), 'margin': Decimal('6.514443158002725953717409465'), 'commission': Decimal('0.00'), 'status': 'OPEN', 'stop_loss': None, 'take_profit': None, 'stoploss_id': None, 'takeprofit_id': None, 'close_id': None}
2025-07-07 00:13:28,150 - DEBUG - orders - [DEBUG][create_user_order] Created OrderActionHistory record for order_id: 9066577232
2025-07-07 00:13:28,223 - INFO - orders - [PERF] Order creation: 0.0742s
2025-07-07 00:13:28,224 - INFO - orders - is_barclays_live_user in place_order: True
2025-07-07 00:13:28,224 - INFO - orders - [BARCLAYS] Scheduling barclays_push in place_order
2025-07-07 00:13:28,224 - INFO - orders - Publishing order update for user 4
2025-07-07 00:13:28,225 - INFO - orders - Publishing user data update for user 4
2025-07-07 00:13:28,226 - INFO - orders - Publishing market data trigger
2025-07-07 00:13:28,227 - INFO - orders - [PERF] TOTAL place_order: 0.4257s
2025-07-07 00:13:28,228 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 00:13:28,258 - ERROR - orders - Error updating portfolio: calculate_user_portfolio() missing 1 required positional argument: 'redis_client'
2025-07-07 00:13:28,261 - INFO - orders - [BARCLAYS] barclays_push called in place_order
2025-07-07 00:13:28,264 - DEBUG - orders - [BARCLAYS] Calling send_order_to_firebase with data: {'order_id': '9066577232', 'user_id': 4, 'order_company_name': 'AUDCAD', 'order_type': 'BUY', 'order_quantity': 0.01, 'price': 0.888958887, 'status': 'OPEN', 'contract_value': 1000.0}
2025-07-07 00:13:28,661 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 00:13:30,709 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 00:13:33,090 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 00:13:35,438 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 00:13:37,661 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 00:13:39,925 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:36:37,098 - INFO - orders - Application starting up - Orders logging initialized
2025-07-07 01:36:37,099 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-07 01:36:44,000 - INFO - orders - Starting the pending order checker background task.
2025-07-07 01:36:44,002 - INFO - orders - Starting the SL/TP checker task (triggered by market updates).
2025-07-07 01:36:46,874 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:36:48,481 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:36:50,797 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:36:53,074 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:36:55,442 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:36:57,692 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:36:59,998 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:02,419 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:04,658 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:07,019 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:09,275 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:11,614 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:13,875 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:16,128 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:18,499 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:20,738 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:23,009 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:25,335 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:28,104 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:29,335 - INFO - orders - Order close request received - Order ID: 1621588803, User ID: 4, Close Price: 94.298
2025-07-07 01:37:29,336 - INFO - orders - user_to_operate_on: <app.database.models.User object at 0x000002403B825E50>, type: <class 'app.database.models.User'>, user_type: live, attrs: ['__abstract__', '__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__firstlineno__', '__format__', '__ge__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__mapper__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__static_attributes__', '__str__', '__subclasshook__', '__table__', '__table_args__', '__tablename__', '__weakref__', '_sa_class_manager', '_sa_instance_state', '_sa_registry', 'account_number', 'address_proof', 'address_proof_image', 'bank_account_number', 'bank_branch_name', 'bank_holder_name', 'bank_ifsc_code', 'city', 'country', 'created_at', 'email', 'fund_manager', 'group_name', 'hashed_password', 'id', 'id_proof', 'id_proof_image', 'isActive', 'is_self_trading', 'is_service_account', 'leverage', 'margin', 'metadata', 'money_requests', 'name', 'net_profit', 'orders', 'otps', 'phone_number', 'pincode', 'referred_by_id', 'reffered_code', 'registry', 'rock_orders', 'security_answer', 'security_question', 'state', 'status', 'updated_at', 'user_favorites', 'user_type', 'wallet_balance', 'wallet_transactions']
2025-07-07 01:37:29,336 - INFO - orders - Using order model: user_orders for user 4 (user_type: live)
2025-07-07 01:37:29,336 - INFO - orders - Request to close order 1621588803 for user 4 (user_type: live) with price 94.298. Frontend provided type: BUY, company: AUDJPY, status: CLOSED, frontend_status: CLOSED.
2025-07-07 01:37:29,341 - INFO - orders - User group: Standard, sending_orders setting: barclays
2025-07-07 01:37:29,342 - INFO - orders - Live user 4 from group 'Standard' has 'sending_orders' set to 'barclays'. Pushing close request to Firebase and skipping local DB update.
2025-07-07 01:37:29,349 - INFO - orders - [FIREBASE_CLOSE_REQUEST] Preparing to send payload for user-initiated close: {'order_id': '1621588803', 'close_price': '94.298', 'user_id': 4, 'order_type': 'BUY', 'order_company_name': 'AUDJPY', 'order_quantity': '0.01000000', 'contract_value': '1000.00000000', 'order_status': 'CLOSED', 'status': 'CLOSED', 'action': 'close_order', 'close_id': '2392229723'}
2025-07-07 01:37:30,569 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:32,807 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:35,117 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:37,614 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:39,709 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:42,009 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:44,379 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:46,647 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:48,991 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:51,261 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:53,573 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:55,868 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:37:58,212 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:00,576 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:02,828 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:05,064 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:07,467 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:09,690 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:12,348 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:14,713 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:16,908 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:19,194 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:21,476 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:23,810 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:26,103 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:28,401 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:30,678 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:32,986 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:35,393 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:37,608 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:39,890 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:42,165 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:44,460 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:46,767 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:49,058 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:51,342 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:53,661 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:55,955 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:38:58,244 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:39:00,561 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:39:02,881 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:39:05,141 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:39:07,430 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:39:09,790 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:39:12,022 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:39:14,576 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:39:16,925 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 01:39:19,208 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:09:41,356 - INFO - orders - Application starting up - Orders logging initialized
2025-07-07 03:09:41,356 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-07 03:09:48,445 - INFO - orders - Starting the pending order checker background task.
2025-07-07 03:09:48,446 - INFO - orders - Starting the SL/TP checker task (triggered by market updates).
2025-07-07 03:09:48,577 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:09:51,312 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:09:53,190 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:09:55,542 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:09:57,783 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:00,151 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:02,490 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:04,756 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:07,025 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:09,373 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:11,636 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:13,960 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:16,216 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:18,480 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:20,824 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:21,064 - INFO - orders - Order placement request received - User: 4, Symbol: USDNOK, Type: BUY
2025-07-07 03:10:21,452 - INFO - orders - [MARGIN_CALC] Market data for USDNOK: {'b': '10.1400000000', 'o': '10.1388100000'}
2025-07-07 03:10:21,452 - WARNING - orders - [MARGIN_CALC] Missing ask price for USDNOK, using bid price with spread: bid=10.1400000000, ask=10.14101400000000
2025-07-07 03:10:21,453 - INFO - orders - [MARGIN_CALC] Using prices for USDNOK: bid=10.1400000000, ask=10.14101400000000
2025-07-07 03:10:21,456 - INFO - orders - [CURRENCY_CONVERT] Starting conversion of 101.41 NOK to USD for margin_calculation (user_id: 4, position: None)
2025-07-07 03:10:21,456 - INFO - orders - [CURRENCY_CONVERT] Trying direct conversion with symbol: NOKUSD
2025-07-07 03:10:21,460 - INFO - orders - [CURRENCY_CONVERT] Direct conversion prices from cache: None
2025-07-07 03:10:21,460 - INFO - orders - [CURRENCY_CONVERT] No direct conversion rate found for NOKUSD, trying inverse
2025-07-07 03:10:21,460 - INFO - orders - [CURRENCY_CONVERT] Trying inverse conversion with symbol: USDNOK
2025-07-07 03:10:21,463 - INFO - orders - [CURRENCY_CONVERT] Inverse conversion prices from cache: {'b': Decimal('10.1177400000'), 'o': Decimal('10.1162600000')}
2025-07-07 03:10:21,464 - INFO - orders - [CURRENCY_CONVERT] Found inverse conversion rate (bid): 10.1177400000
2025-07-07 03:10:21,464 - INFO - orders - [CURRENCY_CONVERT] Inverse conversion successful: 101.41 NOK / 10.1177400000 = 10.02298932370272412613884128 USD
2025-07-07 03:10:21,464 - INFO - orders - [MARGIN_CALC_OPTIMIZED] Symbol: USDNOK, Type: BUY, Qty: 0.01, Price: 10.14101400000000, Margin: 10.02298932370272412613884128, Commission: 0.10
2025-07-07 03:10:21,469 - INFO - orders - [PERF] Order processing: 0.3873s
2025-07-07 03:10:21,470 - DEBUG - orders - [DEBUG][create_user_order] Received order_data: {'order_id': '7270472652', 'order_status': 'PROCESSING', 'order_user_id': 4, 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_price': Decimal('10.14101400000000'), 'order_quantity': Decimal('0.01'), 'contract_value': Decimal('1000.00'), 'margin': Decimal('10.02298932370272412613884128'), 'commission': Decimal('0.10'), 'status': 'OPEN', 'stop_loss': None, 'take_profit': None, 'stoploss_id': None, 'takeprofit_id': None, 'close_id': None}
2025-07-07 03:10:21,471 - DEBUG - orders - [DEBUG][create_user_order] Created OrderActionHistory record for order_id: 7270472652
2025-07-07 03:10:21,715 - INFO - orders - [PERF] Order creation: 0.2457s
2025-07-07 03:10:21,716 - INFO - orders - is_barclays_live_user in place_order: True
2025-07-07 03:10:21,716 - INFO - orders - [BARCLAYS] Scheduling barclays_push in place_order
2025-07-07 03:10:21,717 - INFO - orders - Publishing order update for user 4
2025-07-07 03:10:21,722 - INFO - orders - Publishing user data update for user 4
2025-07-07 03:10:21,730 - INFO - orders - Publishing market data trigger
2025-07-07 03:10:21,734 - INFO - orders - [PERF] TOTAL place_order: 0.6704s
2025-07-07 03:10:21,735 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:21,761 - ERROR - orders - Error updating user cache: name 'update_user_static_orders_cache_after_order_change' is not defined
2025-07-07 03:10:21,772 - ERROR - orders - Error updating portfolio: calculate_user_portfolio() missing 1 required positional argument: 'redis_client'
2025-07-07 03:10:21,787 - INFO - orders - [BARCLAYS] barclays_push called in place_order
2025-07-07 03:10:21,807 - DEBUG - orders - [BARCLAYS] Calling send_order_to_firebase with data: {'order_id': '7270472652', 'user_id': 4, 'order_company_name': 'USDNOK', 'order_type': 'BUY', 'order_quantity': 0.01, 'price': 10.141014, 'status': 'OPEN', 'contract_value': 1000.0}
2025-07-07 03:10:23,273 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:25,544 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:27,995 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:30,231 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:32,497 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:34,745 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:37,094 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:39,482 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:41,900 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:43,976 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:46,256 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:48,454 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:50,821 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:53,075 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:55,323 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:57,670 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:10:59,991 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:02,281 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:04,636 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:06,895 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:09,345 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:11,644 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:13,950 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:16,214 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:18,563 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:20,854 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:23,143 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:25,526 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:27,779 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:30,008 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:32,279 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:34,582 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:36,857 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:39,160 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:41,460 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:43,752 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:46,041 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:48,366 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:50,717 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:52,965 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:54,484 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:11:55,324 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:57,576 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:11:59,931 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:02,191 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:04,440 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:06,793 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:07,202 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:12:09,185 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:09,254 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:12:11,166 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:12:11,347 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:12,925 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:12:13,616 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:15,313 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:12:15,899 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:17,049 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:12:18,259 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:18,946 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:12:20,512 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:20,554 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:12:22,680 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:12:22,818 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:24,350 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:12:25,129 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:27,070 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:12:27,374 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:29,191 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:12:29,678 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:31,044 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:12:31,986 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:32,834 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:12:34,252 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:36,593 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:38,837 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:41,150 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:43,452 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:46,524 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:48,771 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:51,127 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:53,381 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:55,651 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:12:57,886 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:00,244 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:02,507 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:04,855 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:07,101 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:09,356 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:11,715 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:13,922 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:16,227 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:18,575 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:20,823 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:23,179 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:25,432 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:27,683 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:29,977 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:32,295 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:34,546 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:36,807 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:39,159 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:41,407 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:43,671 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:45,970 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:48,276 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:50,623 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:52,875 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:55,241 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:57,483 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:13:59,843 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:14:02,091 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:14:04,450 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:14:06,723 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:14:09,054 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:14:11,415 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:14:13,678 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:14:15,959 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:14:18,370 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:14:20,572 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:14:22,884 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:14:25,231 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:14:27,489 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:14:29,753 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:14:32,099 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:14:34,449 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:14:36,644 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:14:38,954 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:22:56,391 - INFO - orders - Application starting up - Orders logging initialized
2025-07-07 03:22:56,391 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-07 03:23:01,298 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:23:01,316 - INFO - orders - [CACHE HIT] Group-symbol settings for group 'Standard', symbol 'USDNOK' found in Redis cache.
2025-07-07 03:23:03,270 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:23:03,289 - INFO - orders - [CACHE HIT] Group-symbol settings for group 'Standard', symbol 'USDNOK' found in Redis cache.
2025-07-07 03:23:03,362 - INFO - orders - Starting the pending order checker background task.
2025-07-07 03:23:03,364 - INFO - orders - Starting the SL/TP checker task (triggered by market updates).
2025-07-07 03:23:04,992 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:23:05,041 - INFO - orders - [CACHE HIT] Group-symbol settings for group 'Standard', symbol 'USDNOK' found in Redis cache.
2025-07-07 03:23:05,044 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:23:07,363 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:23:09,656 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:23:11,988 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:23:14,846 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:23:16,098 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:23:16,110 - INFO - orders - [CACHE HIT] Group-symbol settings for group 'Standard', symbol 'USDNOK' found in Redis cache.
2025-07-07 03:23:17,110 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:23:18,398 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:23:18,407 - INFO - orders - [CACHE HIT] Group-symbol settings for group 'Standard', symbol 'USDNOK' found in Redis cache.
2025-07-07 03:23:19,424 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:23:21,703 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:23:23,982 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:23:26,003 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:23:26,014 - INFO - orders - [CACHE HIT] Group-symbol settings for group 'Standard', symbol 'USDNOK' found in Redis cache.
2025-07-07 03:23:26,315 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:23:27,518 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:23:27,529 - INFO - orders - [CACHE HIT] Group-symbol settings for group 'Standard', symbol 'USDNOK' found in Redis cache.
2025-07-07 03:23:28,586 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:23:29,091 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:23:29,115 - INFO - orders - [CACHE HIT] Group-symbol settings for group 'Standard', symbol 'USDNOK' found in Redis cache.
2025-07-07 03:23:30,392 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:23:30,402 - INFO - orders - [CACHE HIT] Group-symbol settings for group 'Standard', symbol 'USDNOK' found in Redis cache.
2025-07-07 03:23:31,010 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:23:33,298 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:23:35,611 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:30:25,270 - INFO - orders - Application starting up - Orders logging initialized
2025-07-07 03:30:25,271 - INFO - orders - SL/TP Epsilon accuracy configured: 0.00001
2025-07-07 03:30:30,574 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:30:30,593 - INFO - orders - [CACHE HIT] Group-symbol settings for group 'Standard', symbol 'USDNOK' found in Redis cache.
2025-07-07 03:30:32,082 - INFO - orders - Starting the pending order checker background task.
2025-07-07 03:30:32,083 - INFO - orders - Starting the SL/TP checker task (triggered by market updates).
2025-07-07 03:30:32,333 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:30:32,386 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:30:32,477 - INFO - orders - [CACHE HIT] Group-symbol settings for group 'Standard', symbol 'USDNOK' found in Redis cache.
2025-07-07 03:30:34,274 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:30:34,282 - INFO - orders - [CACHE HIT] Group-symbol settings for group 'Standard', symbol 'USDNOK' found in Redis cache.
2025-07-07 03:30:34,651 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:30:35,901 - INFO - orders - Service provider order info request for order_id: 7270472652, symbol: USDNOK
2025-07-07 03:30:35,909 - INFO - orders - [CACHE HIT] Group-symbol settings for group 'Standard', symbol 'USDNOK' found in Redis cache.
2025-07-07 03:30:36,915 - INFO - orders - Market data update received, triggering SL/TP check
2025-07-07 03:30:39,164 - INFO - orders - Market data update received, triggering SL/TP check
