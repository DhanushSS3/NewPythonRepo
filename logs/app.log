2025-07-15 21:46:08,204 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 21:46:08,230 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 21:46:08,248 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 21:46:08,249 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 21:46:08,511 - INFO - app - Application starting up - Trading system initialized
2025-07-15 21:46:08,511 - INFO - app - SL/TP Epsilon accuracy configured: 0.00001
2025-07-15 21:46:08,511 - INFO - app - Environment: DEVELOPMENT
2025-07-15 21:46:08,559 - INFO - app - Application startup initiated
2025-07-15 21:46:08,559 - INFO - app - Initializing core services...
2025-07-15 21:46:08,600 - INFO - app - Firebase initialized
2025-07-15 21:46:08,600 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-07-15 21:46:10,620 - INFO - app - Redis initialized
2025-07-15 21:46:10,622 - INFO - app - [SWAP] daily_swap_charge_job triggered
2025-07-15 21:46:10,623 - INFO - app - Scheduler initialized
2025-07-15 21:46:10,624 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-15 21:46:10,624 - DEBUG - app.firebase_stream - Successfully got running event loop in process_firebase_events task.
2025-07-15 21:46:10,625 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-07-15 21:46:11,845 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-15 21:46:11,855 - DEBUG - app.firebase_stream - Firebase listener triggered (1). Event Type: put, Path: /. Timestamp: 1752641171.855937
2025-07-15 21:46:11,857 - DEBUG - app.firebase_stream - Prepared batch update for 48 symbols from root path for queue. Preview: {'AUDCAD': {'b': '0.8947400000', 'o': '0.8947000000'}, 'AUDCHF': {'b': '0.5227900000', 'o': '0.5227300000'}, 'AUDJPY': {'b': '97.1930000000', 'o': '97.1860000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'
2025-07-15 21:46:11,858 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'AUDCAD': {'b': '0.8947400000', 'o': '0.8947000000'}, 'AUDCHF': {'b': '0.5227900000', 'o': '0.5227300000'}, 'AUDJPY': {'b': '97.1930000000', 'o': '97.1860000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'...
2025-07-15 21:46:11,858 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type put at path /.
2025-07-15 21:46:11,859 - INFO - app - Starting stale cache cleanup task
2025-07-15 21:46:12,049 - DEBUG - app.firebase_stream - Firebase listener triggered (2). Event Type: patch, Path: /. Timestamp: 1752641172.0498445
2025-07-15 21:46:12,050 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0059000000'}, 'XAGUSD': {'b': '37.8370000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6070000000'}, 'GBPAUD': {'b': '2.0532900000',
2025-07-15 21:46:12,050 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0059000000'}, 'XAGUSD': {'b': '37.8370000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6070000000'}, 'GBPAUD': {'b': '2.0532900000',...
2025-07-15 21:46:12,050 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:46:14,404 - DEBUG - app.firebase_stream - Firebase listener triggered (3). Event Type: patch, Path: /. Timestamp: 1752641174.4046257
2025-07-15 21:46:14,404 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0061000000'}, 'NZDJPY': {'b': '88.6190000000', 'o': '88.6100000000'}, 'USDJPY': {'b': '149.0270000000', 'o': '149.0230000000'}, 'CADCHF': {'b': '0.5843400000
2025-07-15 21:46:14,405 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0061000000'}, 'NZDJPY': {'b': '88.6190000000', 'o': '88.6100000000'}, 'USDJPY': {'b': '149.0270000000', 'o': '149.0230000000'}, 'CADCHF': {'b': '0.5843400000...
2025-07-15 21:46:14,405 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:46:15,935 - INFO - app - Cleaned up pending order stream for new trigger price format
2025-07-15 21:46:15,936 - INFO - app - Background tasks initialized
2025-07-15 21:46:17,007 - INFO - app - Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-07-15 21:46:17,017 - DEBUG - app.firebase_stream - Firebase listener triggered (4). Event Type: patch, Path: /. Timestamp: 1752641177.017598
2025-07-15 21:46:17,017 - INFO - app - Application startup completed successfully
2025-07-15 21:46:17,019 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0059000000'}, 'GBPAUD': {'b': '2.0532900000', 'o': '2.0531400000'}, 'CADCHF': {'b': '0.5843500000', 'o': '0.5842900000'}, 'EURNZD': {'b': '1.9534000000', 'o'
2025-07-15 21:46:17,019 - INFO - app - Starting cache validation task
2025-07-15 21:46:17,020 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 2. Data preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0059000000'}, 'GBPAUD': {'b': '2.0532900000', 'o': '2.0531400000'}, 'CADCHF': {'b': '0.5843500000', 'o': '0.5842900000'}, 'EURNZD': {'b': '1.9534000000', 'o'...
2025-07-15 21:46:17,021 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:46:17,022 - INFO - app - Starting Barclays pending order margin checker task.
2025-07-15 21:46:17,022 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:17,024 - INFO - app - Starting auto-cutoff order monitoring task.
2025-07-15 21:46:17,077 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:46:17,077 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:46:17,085 - INFO - app - Validating cache for 31 users
2025-07-15 21:46:19,074 - INFO - app - Found 9 static orders cache entries to check
2025-07-15 21:46:19,316 - DEBUG - app.firebase_stream - Firebase listener triggered (5). Event Type: patch, Path: /. Timestamp: 1752641179.316896
2025-07-15 21:46:19,317 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0057000000'}, 'XAGUSD': {'b': '37.8330000000', 'o': '37.8250000000'}, 'BTCUSD': {'b': '117578.0000000000', 'o': '117577.9000000000'}, 'CADCHF': {'b': '0.5843
2025-07-15 21:46:19,317 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 3. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0057000000'}, 'XAGUSD': {'b': '37.8330000000', 'o': '37.8250000000'}, 'BTCUSD': {'b': '117578.0000000000', 'o': '117577.9000000000'}, 'CADCHF': {'b': '0.5843...
2025-07-15 21:46:19,317 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:46:21,105 - WARNING - app - User 4: Missing balance/margin cache, refreshing...
2025-07-15 21:46:21,672 - DEBUG - app.firebase_stream - Firebase listener triggered (6). Event Type: patch, Path: /. Timestamp: 1752641181.6724708
2025-07-15 21:46:21,672 - DEBUG - app.firebase_stream - Prepared batch update for 21 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.8330000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6190000000', 'o': '88.6120000000'}, 'GBPAUD': {'b': '2.0532900000', 'o': '2.0531300000'}, 'EURNZD': {'b': '1.9534000000', '
2025-07-15 21:46:21,673 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 3. Data preview: {'XAGUSD': {'b': '37.8330000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6190000000', 'o': '88.6120000000'}, 'GBPAUD': {'b': '2.0532900000', 'o': '2.0531300000'}, 'EURNZD': {'b': '1.9534000000', '...
2025-07-15 21:46:21,673 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:46:23,927 - DEBUG - app.firebase_stream - Firebase listener triggered (7). Event Type: patch, Path: /. Timestamp: 1752641183.9274075
2025-07-15 21:46:23,927 - DEBUG - app.firebase_stream - Prepared batch update for 17 symbols from root path for queue. Preview: {'GBPAUD': {'b': '2.0532900000', 'o': '2.0531500000'}, 'EURZAR': {'b': '20.7711000000', 'o': '20.7652200000'}, 'AUDJPY': {'b': '97.1950000000', 'o': '97.1890000000'}, 'EURSEK': {'b': '11.2850800000', 
2025-07-15 21:46:23,928 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 4. Data preview: {'GBPAUD': {'b': '2.0532900000', 'o': '2.0531500000'}, 'EURZAR': {'b': '20.7711000000', 'o': '20.7652200000'}, 'AUDJPY': {'b': '97.1950000000', 'o': '97.1890000000'}, 'EURSEK': {'b': '11.2850800000', ...
2025-07-15 21:46:23,928 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:46:25,170 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:46:25,184 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:46:25,206 - WARNING - app - Found stale cache entry for user 13, will be refreshed on next access
2025-07-15 21:46:25,227 - WARNING - app - Found stale cache entry for user 12, will be refreshed on next access
2025-07-15 21:46:25,250 - WARNING - app - User 5: Missing balance/margin cache, refreshing...
2025-07-15 21:46:25,264 - INFO - app - Completed stale cache cleanup task
2025-07-15 21:46:25,274 - WARNING - app - User 8: Missing balance/margin cache, refreshing...
2025-07-15 21:46:26,203 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:26,206 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:46:26,206 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:46:26,276 - DEBUG - app.firebase_stream - Firebase listener triggered (8). Event Type: patch, Path: /. Timestamp: 1752641186.2768402
2025-07-15 21:46:26,277 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0058000000'}, 'NZDJPY': {'b': '88.6190000000', 'o': '88.6110000000'}, 'GBPAUD': {'b': '2.0533500000', 'o': '2.0531800000'}, 'USDJPY': {'b': '149.0290000000',
2025-07-15 21:46:26,277 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0058000000'}, 'NZDJPY': {'b': '88.6190000000', 'o': '88.6110000000'}, 'GBPAUD': {'b': '2.0533500000', 'o': '2.0531800000'}, 'USDJPY': {'b': '149.0290000000',...
2025-07-15 21:46:26,277 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:46:27,331 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:46:27,339 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:46:27,347 - WARNING - app - User 9: Missing balance/margin cache, refreshing...
2025-07-15 21:46:27,382 - WARNING - app - User 10: Missing balance/margin cache, refreshing...
2025-07-15 21:46:27,422 - WARNING - app - User 11: Missing balance/margin cache, refreshing...
2025-07-15 21:46:28,345 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:28,352 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:46:28,352 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:46:28,550 - DEBUG - app.firebase_stream - Firebase listener triggered (9). Event Type: patch, Path: /. Timestamp: 1752641188.5500457
2025-07-15 21:46:28,550 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.8340000000', 'o': '37.8250000000'}, 'NZDJPY': {'b': '88.6200000000', 'o': '88.6120000000'}, 'GBPAUD': {'b': '2.0533400000', 'o': '2.0531600000'}, 'USDJPY': {'b': '149.0280000000',
2025-07-15 21:46:28,550 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '37.8340000000', 'o': '37.8250000000'}, 'NZDJPY': {'b': '88.6200000000', 'o': '88.6120000000'}, 'GBPAUD': {'b': '2.0533400000', 'o': '2.0531600000'}, 'USDJPY': {'b': '149.0280000000',...
2025-07-15 21:46:28,551 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:46:29,501 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:46:29,506 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:46:29,507 - WARNING - app - User 12: Missing balance/margin cache, refreshing...
2025-07-15 21:46:29,536 - WARNING - app - User 13: Missing balance/margin cache, refreshing...
2025-07-15 21:46:30,522 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:30,527 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:46:30,528 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:46:30,895 - DEBUG - app.firebase_stream - Firebase listener triggered (10). Event Type: patch, Path: /. Timestamp: 1752641190.8954332
2025-07-15 21:46:30,895 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0056000000'}, 'XAGUSD': {'b': '37.8340000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6210000000', 'o': '88.6110000000'}, 'GBPAUD': {'b': '2.0532700000',
2025-07-15 21:46:30,896 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0056000000'}, 'XAGUSD': {'b': '37.8340000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6210000000', 'o': '88.6110000000'}, 'GBPAUD': {'b': '2.0532700000',...
2025-07-15 21:46:30,896 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:46:31,584 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:46:31,590 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:46:31,608 - WARNING - app - User 16: Missing balance/margin cache, refreshing...
2025-07-15 21:46:32,032 - INFO - app - Starting stale cache cleanup task
2025-07-15 21:46:32,599 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:32,606 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:46:32,606 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:46:33,248 - DEBUG - app.firebase_stream - Firebase listener triggered (11). Event Type: patch, Path: /. Timestamp: 1752641193.2484727
2025-07-15 21:46:33,249 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.6190000000', 'o': '88.6100000000'}, 'GBPAUD': {'b': '2.0533000000', 'o': '2.0531300000'}, 'CADCHF': {'b': '0.5843700000', 'o': '0.5843000000'}, 'EURNZD': {'b': '1.9534000000', 'o'
2025-07-15 21:46:33,249 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.6190000000', 'o': '88.6100000000'}, 'GBPAUD': {'b': '2.0533000000', 'o': '2.0531300000'}, 'CADCHF': {'b': '0.5843700000', 'o': '0.5843000000'}, 'EURNZD': {'b': '1.9534000000', 'o'...
2025-07-15 21:46:33,249 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:46:33,672 - INFO - app - Found 9 static orders cache entries to check
2025-07-15 21:46:33,683 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:46:33,688 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:46:33,693 - WARNING - app - User 17: Missing balance/margin cache, refreshing...
2025-07-15 21:46:33,699 - WARNING - app - Found stale cache entry for user 13, will be refreshed on next access
2025-07-15 21:46:33,701 - WARNING - app - Found stale cache entry for user 12, will be refreshed on next access
2025-07-15 21:46:34,702 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:34,709 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:46:34,709 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:46:35,614 - DEBUG - app.firebase_stream - Firebase listener triggered (12). Event Type: patch, Path: /. Timestamp: 1752641195.6143367
2025-07-15 21:46:35,614 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0059000000'}, 'NZDJPY': {'b': '88.6210000000', 'o': '88.6130000000'}, 'GBPAUD': {'b': '2.0533000000', 'o': '2.0531100000'}, 'USDJPY': {'b': '149.0280000000',
2025-07-15 21:46:35,614 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0059000000'}, 'NZDJPY': {'b': '88.6210000000', 'o': '88.6130000000'}, 'GBPAUD': {'b': '2.0533000000', 'o': '2.0531100000'}, 'USDJPY': {'b': '149.0280000000',...
2025-07-15 21:46:35,614 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:46:35,739 - INFO - app - Completed stale cache cleanup task
2025-07-15 21:46:35,765 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:46:35,775 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:46:35,784 - WARNING - app - User 18: Missing balance/margin cache, refreshing...
2025-07-15 21:46:35,822 - WARNING - app - User 19: Missing balance/margin cache, refreshing...
2025-07-15 21:46:35,855 - WARNING - app - User 20: Missing balance/margin cache, refreshing...
2025-07-15 21:46:35,889 - WARNING - app - User 21: Missing balance/margin cache, refreshing...
2025-07-15 21:46:35,920 - WARNING - app - User 22: Missing balance/margin cache, refreshing...
2025-07-15 21:46:35,947 - WARNING - app - User 23: Missing balance/margin cache, refreshing...
2025-07-15 21:46:35,978 - WARNING - app - User 24: Missing balance/margin cache, refreshing...
2025-07-15 21:46:36,048 - WARNING - app - User 25: Missing balance/margin cache, refreshing...
2025-07-15 21:46:36,102 - WARNING - app - User 26: Missing balance/margin cache, refreshing...
2025-07-15 21:46:36,179 - WARNING - app - User 1: Missing balance/margin cache, refreshing...
2025-07-15 21:46:36,283 - WARNING - app - User 2: Missing balance/margin cache, refreshing...
2025-07-15 21:46:36,329 - WARNING - app - User 3: Missing balance/margin cache, refreshing...
2025-07-15 21:46:36,383 - WARNING - app - User 5: Missing balance/margin cache, refreshing...
2025-07-15 21:46:36,432 - WARNING - app - User 6: Missing balance/margin cache, refreshing...
2025-07-15 21:46:36,488 - INFO - app - Cache validation completed
2025-07-15 21:46:36,791 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:36,796 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:46:36,796 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:46:36,797 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:46:36,798 - DEBUG - app - User 14 free_margin: 9902.02, margin: 0.0
2025-07-15 21:46:36,801 - DEBUG - app - User 14 has 1 pending orders before filtering.
2025-07-15 21:46:36,801 - DEBUG - app - User 14 has 1 active pending orders after filtering.
2025-07-15 21:46:36,801 - INFO - app - [BarclaysMarginChecker] User 14: free_margin=9902.02, total_pending_margin=23524.29, num_pending_orders=1
2025-07-15 21:46:36,801 - DEBUG - app - User 14 total_pending_margin: 23524.29
2025-07-15 21:46:36,801 - INFO - app - [BarclaysMarginChecker] Considering cancellation: user 14, order 1000297-001, order_margin=23524.29, free_margin=9902.02, total_pending_margin=23524.29
2025-07-15 21:46:36,805 - WARNING - app - [BarclaysMarginChecker] Cancelling order 1000297-001 for user 14 (order_margin=23524.29) due to insufficient margin.
2025-07-15 21:46:36,868 - INFO - app.core.firebase - [FIREBASE] Payload being pushed to Firebase (all stringified): {'order_id': '1000297-001', 'cancel_id': '1000300-002', 'user_id': '14', 'order_type': 'BUY_LIMIT', 'timestamp': '2025-07-16T04:46:36.868313', 'status': 'CANCELLED', 'order_quantity': '1.00000000', 'order_status': 'CANCELLED-PROCESSING', 'contract_value': '1.00000000', 'cancel_message': 'Auto-cancelled due to insufficient margin', 'account_type': 'live'}
2025-07-15 21:46:37,178 - INFO - app.core.firebase - Order data (ID: 1000297-001) sent to Firebase successfully.
2025-07-15 21:46:37,194 - INFO - app - [BarclaysMarginChecker] Successfully cancelled order 1000297-001 for user 14
2025-07-15 21:46:37,196 - DEBUG - app - After cancellation, user 14 free_margin: 9902.02, total_pending_margin: 0
2025-07-15 21:46:37,596 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 21:46:37,602 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 21:46:37,641 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 21:46:37,677 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 21:46:37,692 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 21:46:37,703 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 21:46:37,728 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 21:46:37,851 - DEBUG - app.firebase_stream - Firebase listener triggered (13). Event Type: patch, Path: /. Timestamp: 1752641197.8518429
2025-07-15 21:46:37,852 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0109000000', 'o': '13.0054000000'}, 'XAGUSD': {'b': '37.8370000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6220000000', 'o': '88.6140000000'}, 'USDJPY': {'b': '149.0290000000
2025-07-15 21:46:37,852 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0109000000', 'o': '13.0054000000'}, 'XAGUSD': {'b': '37.8370000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6220000000', 'o': '88.6140000000'}, 'USDJPY': {'b': '149.0290000000...
2025-07-15 21:46:37,852 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:46:37,921 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 21:46:37,937 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 21:46:37,948 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 21:46:37,949 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 21:46:37,961 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 21:46:37,962 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 21:46:37,975 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 21:46:37,994 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 21:46:37,995 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 21:46:38,000 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 21:46:38,000 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 21:46:38,016 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 21:46:38,016 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 21:46:38,016 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 21:46:38,016 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 21:46:38,017 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 21:46:38,027 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 21:46:38,042 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 21:46:38,042 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 21:46:38,049 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 21:46:38,049 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 21:46:38,201 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:38,204 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:46:39,206 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:39,208 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:46:40,103 - DEBUG - app.firebase_stream - Firebase listener triggered (14). Event Type: patch, Path: /. Timestamp: 1752641200.1033533
2025-07-15 21:46:40,103 - DEBUG - app.firebase_stream - Prepared batch update for 17 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0055000000'}, 'NZDJPY': {'b': '88.6230000000', 'o': '88.6130000000'}, 'GBPAUD': {'b': '2.0532900000', 'o': '2.0531100000'}, 'EURZAR': {'b': '20.7720800000', 
2025-07-15 21:46:40,104 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0055000000'}, 'NZDJPY': {'b': '88.6230000000', 'o': '88.6130000000'}, 'GBPAUD': {'b': '2.0532900000', 'o': '2.0531100000'}, 'EURZAR': {'b': '20.7720800000', ...
2025-07-15 21:46:40,104 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:46:40,208 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:40,212 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:46:41,215 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:41,218 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:46:42,224 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:42,228 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:46:42,417 - DEBUG - app.firebase_stream - Firebase listener triggered (15). Event Type: patch, Path: /. Timestamp: 1752641202.4169903
2025-07-15 21:46:42,417 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0061000000'}, 'XAGUSD': {'b': '37.8330000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6190000000', 'o': '88.6120000000'}, 'GBPAUD': {'b': '2.0533000000',
2025-07-15 21:46:42,417 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0061000000'}, 'XAGUSD': {'b': '37.8330000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6190000000', 'o': '88.6120000000'}, 'GBPAUD': {'b': '2.0533000000',...
2025-07-15 21:46:42,417 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:46:43,242 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:43,244 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:46:44,247 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:44,250 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:46:44,709 - DEBUG - app.firebase_stream - Firebase listener triggered (16). Event Type: patch, Path: /. Timestamp: 1752641204.7099266
2025-07-15 21:46:44,710 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0055000000'}, 'XAGUSD': {'b': '37.8400000000', 'o': '37.8290000000'}, 'NZDJPY': {'b': '88.6220000000', 'o': '88.6140000000'}, 'GBPAUD': {'b': '2.0533000000',
2025-07-15 21:46:44,710 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0055000000'}, 'XAGUSD': {'b': '37.8400000000', 'o': '37.8290000000'}, 'NZDJPY': {'b': '88.6220000000', 'o': '88.6140000000'}, 'GBPAUD': {'b': '2.0533000000',...
2025-07-15 21:46:44,711 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:46:45,265 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:45,268 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:46:46,273 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:46,276 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:46:47,063 - DEBUG - app.firebase_stream - Firebase listener triggered (17). Event Type: patch, Path: /. Timestamp: 1752641207.0633137
2025-07-15 21:46:47,063 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0057000000'}, 'NZDJPY': {'b': '88.6220000000', 'o': '88.6130000000'}, 'GBPAUD': {'b': '2.0532900000', 'o': '2.0531000000'}, 'USDJPY': {'b': '149.0280000000',
2025-07-15 21:46:47,063 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0057000000'}, 'NZDJPY': {'b': '88.6220000000', 'o': '88.6130000000'}, 'GBPAUD': {'b': '2.0532900000', 'o': '2.0531000000'}, 'USDJPY': {'b': '149.0280000000',...
2025-07-15 21:46:47,063 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:46:47,279 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:47,283 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:46:48,294 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:48,298 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:46:49,316 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:49,320 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:46:49,420 - DEBUG - app.firebase_stream - Firebase listener triggered (18). Event Type: patch, Path: /. Timestamp: 1752641209.4206445
2025-07-15 21:46:49,420 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0056000000'}, 'XAGUSD': {'b': '37.8390000000', 'o': '37.8290000000'}, 'NZDJPY': {'b': '88.6240000000', 'o': '88.6150000000'}, 'GBPAUD': {'b': '2.0532800000',
2025-07-15 21:46:49,421 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0056000000'}, 'XAGUSD': {'b': '37.8390000000', 'o': '37.8290000000'}, 'NZDJPY': {'b': '88.6240000000', 'o': '88.6150000000'}, 'GBPAUD': {'b': '2.0532800000',...
2025-07-15 21:46:49,421 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:46:50,326 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:50,330 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:46:51,346 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:51,350 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:46:51,678 - DEBUG - app.firebase_stream - Firebase listener triggered (19). Event Type: patch, Path: /. Timestamp: 1752641211.67813
2025-07-15 21:46:51,678 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0109000000', 'o': '13.0054000000'}, 'NZDJPY': {'b': '88.6240000000', 'o': '88.6140000000'}, 'GBPAUD': {'b': '2.0533000000', 'o': '2.0531100000'}, 'USDJPY': {'b': '149.0310000000',
2025-07-15 21:46:51,678 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0109000000', 'o': '13.0054000000'}, 'NZDJPY': {'b': '88.6240000000', 'o': '88.6140000000'}, 'GBPAUD': {'b': '2.0533000000', 'o': '2.0531100000'}, 'USDJPY': {'b': '149.0310000000',...
2025-07-15 21:46:51,679 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:46:52,357 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:52,361 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:46:53,366 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:53,371 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:46:54,035 - DEBUG - app.firebase_stream - Firebase listener triggered (20). Event Type: patch, Path: /. Timestamp: 1752641214.0359383
2025-07-15 21:46:54,036 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0107000000', 'o': '13.0055000000'}, 'XAGUSD': {'b': '37.8410000000', 'o': '37.8290000000'}, 'NZDJPY': {'b': '88.6230000000', 'o': '88.6160000000'}, 'GBPAUD': {'b': '2.0532900000',
2025-07-15 21:46:54,036 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0107000000', 'o': '13.0055000000'}, 'XAGUSD': {'b': '37.8410000000', 'o': '37.8290000000'}, 'NZDJPY': {'b': '88.6230000000', 'o': '88.6160000000'}, 'GBPAUD': {'b': '2.0532900000',...
2025-07-15 21:46:54,036 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:46:54,386 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:54,390 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:46:55,396 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:55,398 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:46:56,282 - DEBUG - app.firebase_stream - Firebase listener triggered (21). Event Type: patch, Path: /. Timestamp: 1752641216.2827885
2025-07-15 21:46:56,283 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0106000000', 'o': '13.0055000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8290000000'}, 'NZDJPY': {'b': '88.6220000000', 'o': '88.6140000000'}, 'GBPAUD': {'b': '2.0532900000',
2025-07-15 21:46:56,283 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0106000000', 'o': '13.0055000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8290000000'}, 'NZDJPY': {'b': '88.6220000000', 'o': '88.6140000000'}, 'GBPAUD': {'b': '2.0532900000',...
2025-07-15 21:46:56,283 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:46:56,409 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:56,414 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:46:57,419 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:57,421 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:46:58,434 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:58,437 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:46:58,630 - DEBUG - app.firebase_stream - Firebase listener triggered (22). Event Type: patch, Path: /. Timestamp: 1752641218.6302567
2025-07-15 21:46:58,630 - DEBUG - app.firebase_stream - Prepared batch update for 21 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0107000000', 'o': '13.0052000000'}, 'NZDJPY': {'b': '88.6230000000', 'o': '88.6130000000'}, 'GBPAUD': {'b': '2.0532900000', 'o': '2.0531100000'}, 'USDJPY': {'b': '149.0290000000',
2025-07-15 21:46:58,630 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0107000000', 'o': '13.0052000000'}, 'NZDJPY': {'b': '88.6230000000', 'o': '88.6130000000'}, 'GBPAUD': {'b': '2.0532900000', 'o': '2.0531100000'}, 'USDJPY': {'b': '149.0290000000',...
2025-07-15 21:46:58,631 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:46:59,453 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:46:59,489 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:00,499 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:00,502 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:00,967 - DEBUG - app.firebase_stream - Firebase listener triggered (23). Event Type: patch, Path: /. Timestamp: 1752641220.9674375
2025-07-15 21:47:00,967 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0108000000', 'o': '13.0053000000'}, 'NZDJPY': {'b': '88.6220000000', 'o': '88.6140000000'}, 'GBPAUD': {'b': '2.0530900000', 'o': '2.0530900000'}, 'BTCUSD': {'b': '117627.080000000
2025-07-15 21:47:00,968 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0108000000', 'o': '13.0053000000'}, 'NZDJPY': {'b': '88.6220000000', 'o': '88.6140000000'}, 'GBPAUD': {'b': '2.0530900000', 'o': '2.0530900000'}, 'BTCUSD': {'b': '117627.080000000...
2025-07-15 21:47:00,968 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:01,512 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:01,516 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:02,530 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:02,534 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:03,249 - DEBUG - app.firebase_stream - Firebase listener triggered (24). Event Type: patch, Path: /. Timestamp: 1752641223.249489
2025-07-15 21:47:03,249 - DEBUG - app.firebase_stream - Prepared batch update for 35 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0107000000', 'o': '13.0053000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0530300000', 'o': '2.0528600000'}, 'BTCUSD': {'b': '117632.000000000
2025-07-15 21:47:03,249 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0107000000', 'o': '13.0053000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0530300000', 'o': '2.0528600000'}, 'BTCUSD': {'b': '117632.000000000...
2025-07-15 21:47:03,250 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:03,543 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:03,545 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:04,590 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:04,594 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:05,605 - DEBUG - app.firebase_stream - Firebase listener triggered (25). Event Type: patch, Path: /. Timestamp: 1752641225.6059058
2025-07-15 21:47:05,606 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0057000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0530300000', 'o': '2.0528800000'}, 'USDJPY': {'b': '149.0300000000',
2025-07-15 21:47:05,606 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0057000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0530300000', 'o': '2.0528800000'}, 'USDJPY': {'b': '149.0300000000',...
2025-07-15 21:47:05,606 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:05,607 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:05,626 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:06,643 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:06,648 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:07,664 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:07,668 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:07,955 - DEBUG - app.firebase_stream - Firebase listener triggered (26). Event Type: patch, Path: /. Timestamp: 1752641227.9556012
2025-07-15 21:47:07,955 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0100000000', 'o': '13.0046000000'}, 'NZDJPY': {'b': '88.6230000000', 'o': '88.6160000000'}, 'GBPAUD': {'b': '2.0530200000', 'o': '2.0528600000'}, 'BTCUSD': {'b': '117633.330000000
2025-07-15 21:47:07,955 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0100000000', 'o': '13.0046000000'}, 'NZDJPY': {'b': '88.6230000000', 'o': '88.6160000000'}, 'GBPAUD': {'b': '2.0530200000', 'o': '2.0528600000'}, 'BTCUSD': {'b': '117633.330000000...
2025-07-15 21:47:07,956 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:08,680 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:08,684 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:09,699 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:09,703 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:10,209 - DEBUG - app.firebase_stream - Firebase listener triggered (27). Event Type: patch, Path: /. Timestamp: 1752641230.209453
2025-07-15 21:47:10,209 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0107000000', 'o': '13.0051000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0532900000', 'o': '2.0531100000'}, 'BTCUSD': {'b': '117637.300000000
2025-07-15 21:47:10,209 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0107000000', 'o': '13.0051000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0532900000', 'o': '2.0531100000'}, 'BTCUSD': {'b': '117637.300000000...
2025-07-15 21:47:10,210 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:10,660 - WARNING - app - No user data found for user 5 (live). Skipping portfolio update.
2025-07-15 21:47:10,666 - WARNING - app - No group settings found for group string. Skipping portfolio update for user 8.
2025-07-15 21:47:10,705 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:10,707 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:11,226 - DEBUG - app.services.portfolio_calculator - Position calculation for XAGUSD: Type=BUY, Entry=41.09800000, Current=37.8165, Quantity=0.01000000, Contract Size=5000.00000000, PnL=-164.075000000000000000000000, PnL USD=-164.075000000000000000000000, Commission=0.10000000, Final PnL=-164.175000000000000000000000
2025-07-15 21:47:11,227 - DEBUG - app.services.portfolio_calculator - Position calculation for BTCUSD: Type=BUY, Entry=132091.90000000, Current=117587.2, Quantity=6.00000000, Contract Size=1.00000000, PnL=-87028.20000000000000000000000, PnL USD=-87028.20000000000000000000000, Commission=3661.62000000, Final PnL=-90689.82000000000000000000000
2025-07-15 21:47:11,227 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 63.82370431486696166494646156% which is below threshold 100.0%
2025-07-15 21:47:11,634 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=96.66800000, Current=97.153, Quantity=0.01000000, Contract Size=100000.00000000, PnL=485.000000000000000000000000, PnL USD=3.254443825615492494648620720, Commission=0.10000000, Final PnL=3.154443825615492494648620720
2025-07-15 21:47:11,635 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=SELL, Entry=96.56000000, Current=97.259, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-699.000000000000000000000000, PnL USD=-4.690425224959235574761620378, Commission=0.10000000, Final PnL=-4.790425224959235574761620378
2025-07-15 21:47:11,637 - WARNING - app - User 2 has no group_name set. Skipping portfolio update.
2025-07-15 21:47:11,647 - WARNING - app - No group settings found for group string. Skipping portfolio update for user 3.
2025-07-15 21:47:11,675 - WARNING - app - User 5 has no group_name set. Skipping portfolio update.
2025-07-15 21:47:11,676 - WARNING - app - User 6 has no group_name set. Skipping portfolio update.
2025-07-15 21:47:11,708 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:11,710 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:12,086 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDUSD: Type=BUY, Entry=0.64743000, Current=0.65212, Quantity=0.10000000, Contract Size=100000.00000000, PnL=46.900000000000000000000000, PnL USD=46.900000000000000000000000, Commission=1.00000000, Final PnL=45.900000000000000000000000
2025-07-15 21:47:12,086 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDUSD: Type=SELL, Entry=0.64707000, Current=0.65243, Quantity=0.22000000, Contract Size=100000.00000000, PnL=-117.920000000000000000000000, PnL USD=-117.920000000000000000000000, Commission=2.20000000, Final PnL=-120.120000000000000000000000
2025-07-15 21:47:12,087 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFSGD: Type=BUY, Entry=1.57561500, Current=1.603015, Quantity=0.10000000, Contract Size=100000.00000000, PnL=274.000000000000000000000000, PnL USD=213.1963896669779022720199191, Commission=1.00000000, Final PnL=212.1963896669779022720199191
2025-07-15 21:47:12,088 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFSGD: Type=SELL, Entry=1.57505500, Current=1.603465, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-284.100000000000000000000000, PnL USD=-221.0550887021475256769374416, Commission=1.00000000, Final PnL=-222.0550887021475256769374416
2025-07-15 21:47:12,088 - DEBUG - app.services.portfolio_calculator - Position calculation for CADJPY: Type=SELL, Entry=106.24150000, Current=108.6495, Quantity=0.15000000, Contract Size=100000.00000000, PnL=-36120.00000000000000000000000, PnL USD=-242.3721875901682245499137740, Commission=0E-8, Final PnL=-242.3721875901682245499137740
2025-07-15 21:47:12,089 - DEBUG - app.services.portfolio_calculator - Position calculation for CADJPY: Type=BUY, Entry=106.27050000, Current=108.6195, Quantity=0.15000000, Contract Size=100000.00000000, PnL=35235.00000000000000000000000, PnL USD=236.4336663826018104101941259, Commission=0E-8, Final PnL=236.4336663826018104101941259
2025-07-15 21:47:12,089 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=BUY, Entry=1.77481000, Current=1.78054, Quantity=0.22000000, Contract Size=100000.00000000, PnL=126.060000000000000000000000, PnL USD=82.22641680000000000000000000, Commission=2.20000000, Final PnL=80.02641680000000000000000000
2025-07-15 21:47:12,089 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=SELL, Entry=1.77439000, Current=1.7809300000000001, Quantity=0.21000000, Contract Size=100000.00000000, PnL=-137.3400000000021000000000000, PnL USD=-89.58413520000136978800000000, Commission=2.10000000, Final PnL=-91.68413520000136978800000000
2025-07-15 21:47:12,090 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFJPY: Type=BUY, Entry=178.15500000, Current=185.88500000000002, Quantity=0.10000000, Contract Size=100000.00000000, PnL=77300.00000000020000000000000, PnL USD=518.6979540620169499486670201, Commission=1.00000000, Final PnL=517.6979540620169499486670201
2025-07-15 21:47:12,091 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFJPY: Type=SELL, Entry=178.09500000, Current=185.93499999999997, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-78399.99999999970000000000000, PnL USD=-526.0791668623786293758849068, Commission=1.00000000, Final PnL=-527.0791668623786293758849068
2025-07-15 21:47:12,091 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=BUY, Entry=1.77480000, Current=1.78054, Quantity=0.05000000, Contract Size=100000.00000000, PnL=28.700000000000000000000000, PnL USD=18.72043600000000000000000000, Commission=0.50000000, Final PnL=18.22043600000000000000000000
2025-07-15 21:47:12,091 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=SELL, Entry=1.77442000, Current=1.7809300000000001, Quantity=0.05000000, Contract Size=100000.00000000, PnL=-32.55000000000050000000000000, PnL USD=-21.23171400000032614000000000, Commission=0.50000000, Final PnL=-21.73171400000032614000000000
2025-07-15 21:47:12,091 - DEBUG - app.services.portfolio_calculator - Position calculation for EURGBP: Type=SELL, Entry=0.85403000, Current=0.86754, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-135.100000000000000000000000, PnL USD=-180.9110590000000000000000000, Commission=1.00000000, Final PnL=-181.9110590000000000000000000
2025-07-15 21:47:12,092 - DEBUG - app.services.portfolio_calculator - Position calculation for EURJPY: Type=BUY, Entry=167.26050000, Current=173.0805, Quantity=0.10000000, Contract Size=100000.00000000, PnL=58200.00000000000000000000000, PnL USD=390.5332590738590993578344864, Commission=1.00000000, Final PnL=389.5332590738590993578344864
2025-07-15 21:47:12,092 - DEBUG - app.services.portfolio_calculator - Position calculation for EURJPY: Type=SELL, Entry=167.23150000, Current=173.1135, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-58820.00000000000000000000000, PnL USD=-394.6935790158830279076945788, Commission=1.00000000, Final PnL=-395.6935790158830279076945788
2025-07-15 21:47:12,092 - DEBUG - app.services.portfolio_calculator - Position calculation for EURNZD: Type=SELL, Entry=1.91952500, Current=1.9533449999999999, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-338.1999999999990000000000000, PnL USD=-201.1309219999994052900000000, Commission=1.00000000, Final PnL=-202.1309219999994052900000000
2025-07-15 21:47:12,092 - DEBUG - app.services.portfolio_calculator - Position calculation for EURNZD: Type=BUY, Entry=1.92063500, Current=1.952895, Quantity=0.10000000, Contract Size=100000.00000000, PnL=322.600000000000000000000000, PnL USD=191.8534460000000000000000000, Commission=1.00000000, Final PnL=190.8534460000000000000000000
2025-07-15 21:47:12,092 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=SELL, Entry=1.34376000, Current=1.3391899999999999, Quantity=0.25000000, Contract Size=0E-8, PnL=0E-32, PnL USD=0E-32, Commission=2.50000000, Final PnL=-2.500000000000000000000000000
2025-07-15 21:47:12,092 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=SELL, Entry=1.34361000, Current=1.3391899999999999, Quantity=0.25000000, Contract Size=0E-8, PnL=0E-32, PnL USD=0E-32, Commission=2.50000000, Final PnL=-2.500000000000000000000000000
2025-07-15 21:47:12,093 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=BUY, Entry=1.34379000, Current=1.33898, Quantity=0.25000000, Contract Size=0E-8, PnL=-0E-24, PnL USD=-0E-24, Commission=2.50000000, Final PnL=-2.500000000000000000000000
2025-07-15 21:47:12,093 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=BUY, Entry=1.34378000, Current=1.33898, Quantity=0.25000000, Contract Size=0E-8, PnL=-0E-24, PnL USD=-0E-24, Commission=2.50000000, Final PnL=-2.500000000000000000000000
2025-07-15 21:47:12,093 - DEBUG - app.services.portfolio_calculator - Position calculation for NZDJPY: Type=BUY, Entry=87.10150000, Current=88.60849999999999, Quantity=0.01000000, Contract Size=100000.00000000, PnL=1506.999999999990000000000000, PnL USD=10.11226153650003019587054695, Commission=0.10000000, Final PnL=10.01226153650003019587054695
2025-07-15 21:47:12,094 - DEBUG - app.services.portfolio_calculator - Position calculation for USDCHF: Type=SELL, Entry=0.81771000, Current=0.80176, Quantity=0.15000000, Contract Size=100000.00000000, PnL=239.250000000000000000000000, PnL USD=298.4618455358590835942665386, Commission=1.50000000, Final PnL=296.9618455358590835942665386
2025-07-15 21:47:12,094 - DEBUG - app.services.portfolio_calculator - Position calculation for USDCHF: Type=BUY, Entry=0.81805000, Current=0.80144, Quantity=0.15000000, Contract Size=100000.00000000, PnL=-249.150000000000000000000000, PnL USD=-310.8119908683773905016154988, Commission=1.50000000, Final PnL=-312.3119908683773905016154988
2025-07-15 21:47:12,095 - DEBUG - app.services.portfolio_calculator - Position calculation for USDNOK: Type=BUY, Entry=10.04973000, Current=10.241670000000001, Quantity=0.10000000, Contract Size=100000.00000000, PnL=1919.400000000010000000000000, PnL USD=187.3572418640073794974913613, Commission=1.00000000, Final PnL=186.3572418640073794974913613
2025-07-15 21:47:12,095 - DEBUG - app.services.portfolio_calculator - Position calculation for USDNOK: Type=BUY, Entry=10.05023000, Current=10.241670000000001, Quantity=0.10000000, Contract Size=100000.00000000, PnL=1914.400000000010000000000000, PnL USD=186.8691798606104679538488570, Commission=1.00000000, Final PnL=185.8691798606104679538488570
2025-07-15 21:47:12,096 - DEBUG - app.services.portfolio_calculator - Position calculation for USDSGD: Type=SELL, Entry=1.28795000, Current=1.28535, Quantity=0.31000000, Contract Size=100000.00000000, PnL=80.600000000000000000000000, PnL USD=62.71397447868036103330220977, Commission=3.10000000, Final PnL=59.61397447868036103330220977
2025-07-15 21:47:12,096 - DEBUG - app.services.portfolio_calculator - Position calculation for USDTRY: Type=SELL, Entry=39.56087000, Current=40.2610000000, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-7001.300000000000000000000000, PnL USD=-173.8978167457340850947567125, Commission=1.00000000, Final PnL=-174.8978167457340850947567125
2025-07-15 21:47:12,574 - DEBUG - app.firebase_stream - Firebase listener triggered (28). Event Type: patch, Path: /. Timestamp: 1752641232.5740554
2025-07-15 21:47:12,574 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0099000000', 'o': '13.0044000000'}, 'GBPAUD': {'b': '2.0531100000', 'o': '2.0529400000'}, 'EURNZD': {'b': '1.9532400000', 'o': '1.9530500000'}, 'USDSGD': {'b': '1.2851900000', 'o'
2025-07-15 21:47:12,576 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0099000000', 'o': '13.0044000000'}, 'GBPAUD': {'b': '2.0531100000', 'o': '2.0529400000'}, 'EURNZD': {'b': '1.9532400000', 'o': '1.9530500000'}, 'USDSGD': {'b': '1.2851900000', 'o'...
2025-07-15 21:47:12,576 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:12,578 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89752000, Current=0.89478, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-2.740000000000000000000000, PnL USD=-1.997186445372577318084741933, Commission=0.10000000, Final PnL=-2.097186445372577318084741933
2025-07-15 21:47:12,715 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:12,718 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:13,787 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:13,789 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:13,921 - INFO - app.core.firebase - [FIREBASE] Payload being pushed to Firebase (all stringified): {'order_id': '1000301-001', 'order_company_name': 'BTCUSD', 'order_price': '109.0', 'contract_value': '1.0', 'order_quantity': '1.0', 'order_type': 'BUY_LIMIT', 'order_status': 'PENDING-PROCESSING', 'status': 'PENDING', 'action': 'place_pending_order', 'account_type': 'live', 'timestamp': '2025-07-16T04:47:13.921528'}
2025-07-15 21:47:14,250 - INFO - app.core.firebase - Order data (ID: 1000301-001) sent to Firebase successfully.
2025-07-15 21:47:14,792 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:14,796 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:14,817 - DEBUG - app.firebase_stream - Firebase listener triggered (29). Event Type: patch, Path: /. Timestamp: 1752641234.8175926
2025-07-15 21:47:14,818 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0106000000', 'o': '13.0052000000'}, 'GBPAUD': {'b': '2.0531100000', 'o': '2.0529300000'}, 'USDJPY': {'b': '149.0280000000', 'o': '149.0230000000'}, 'USDCNH': {'b': '7.1841200000',
2025-07-15 21:47:14,818 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0106000000', 'o': '13.0052000000'}, 'GBPAUD': {'b': '2.0531100000', 'o': '2.0529300000'}, 'USDJPY': {'b': '149.0280000000', 'o': '149.0230000000'}, 'USDCNH': {'b': '7.1841200000',...
2025-07-15 21:47:14,818 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:15,814 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:15,847 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:16,853 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:16,856 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:17,087 - DEBUG - app.firebase_stream - Firebase listener triggered (30). Event Type: patch, Path: /. Timestamp: 1752641237.08783
2025-07-15 21:47:17,088 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0055000000'}, 'GBPAUD': {'b': '2.0532900000', 'o': '2.0531100000'}, 'BTCUSD': {'b': '117630.7000000000', 'o': '117630.6000000000'}, 'CADCHF': {'b': '0.584380
2025-07-15 21:47:17,088 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0055000000'}, 'GBPAUD': {'b': '2.0532900000', 'o': '2.0531100000'}, 'BTCUSD': {'b': '117630.7000000000', 'o': '117630.6000000000'}, 'CADCHF': {'b': '0.584380...
2025-07-15 21:47:17,088 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:17,873 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:17,877 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:18,886 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:18,890 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:19,430 - DEBUG - app.firebase_stream - Firebase listener triggered (31). Event Type: patch, Path: /. Timestamp: 1752641239.430517
2025-07-15 21:47:19,430 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0107000000', 'o': '13.0052000000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6230000000'}, 'GBPAUD': {'b': '2.0530300000', 'o': '2.0528700000'}, 'USDJPY': {'b': '149.0290000000',
2025-07-15 21:47:19,431 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0107000000', 'o': '13.0052000000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6230000000'}, 'GBPAUD': {'b': '2.0530300000', 'o': '2.0528700000'}, 'USDJPY': {'b': '149.0290000000',...
2025-07-15 21:47:19,431 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:19,900 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:19,910 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:20,927 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:20,933 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:21,786 - DEBUG - app.firebase_stream - Firebase listener triggered (32). Event Type: patch, Path: /. Timestamp: 1752641241.7860363
2025-07-15 21:47:21,786 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0107000000', 'o': '13.0050000000'}, 'GBPAUD': {'b': '2.0530600000', 'o': '2.0528900000'}, 'USDJPY': {'b': '149.0280000000', 'o': '149.0230000000'}, 'USDSGD': {'b': '1.2851700000',
2025-07-15 21:47:21,787 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0107000000', 'o': '13.0050000000'}, 'GBPAUD': {'b': '2.0530600000', 'o': '2.0528900000'}, 'USDJPY': {'b': '149.0280000000', 'o': '149.0230000000'}, 'USDSGD': {'b': '1.2851700000',...
2025-07-15 21:47:21,796 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:21,935 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:21,940 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:22,951 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:22,954 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:23,957 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:23,962 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:24,043 - DEBUG - app.firebase_stream - Firebase listener triggered (33). Event Type: patch, Path: /. Timestamp: 1752641244.0431159
2025-07-15 21:47:24,043 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0107000000', 'o': '13.0052000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8280000000'}, 'GBPAUD': {'b': '2.0530500000', 'o': '2.0528900000'}, 'USDCNH': {'b': '7.1841500000', '
2025-07-15 21:47:24,049 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0107000000', 'o': '13.0052000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8280000000'}, 'GBPAUD': {'b': '2.0530500000', 'o': '2.0528900000'}, 'USDCNH': {'b': '7.1841500000', '...
2025-07-15 21:47:24,049 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:24,969 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:24,973 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:25,983 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:25,985 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:26,395 - DEBUG - app.firebase_stream - Firebase listener triggered (34). Event Type: patch, Path: /. Timestamp: 1752641246.395262
2025-07-15 21:47:26,395 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0050000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8290000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0530200000',
2025-07-15 21:47:26,396 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0050000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8290000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0530200000',...
2025-07-15 21:47:26,396 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:26,998 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:27,004 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:28,013 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:28,016 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:28,657 - DEBUG - app.firebase_stream - Firebase listener triggered (35). Event Type: patch, Path: /. Timestamp: 1752641248.6569426
2025-07-15 21:47:28,657 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0106000000', 'o': '13.0052000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8280000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6230000000'}, 'GBPAUD': {'b': '2.0530200000',
2025-07-15 21:47:28,658 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0106000000', 'o': '13.0052000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8280000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6230000000'}, 'GBPAUD': {'b': '2.0530200000',...
2025-07-15 21:47:28,660 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:29,021 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:29,027 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:30,041 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:30,045 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:31,007 - DEBUG - app.firebase_stream - Firebase listener triggered (36). Event Type: patch, Path: /. Timestamp: 1752641251.0072863
2025-07-15 21:47:31,007 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0105000000', 'o': '13.0051000000'}, 'NZDJPY': {'b': '88.6350000000', 'o': '88.6260000000'}, 'GBPAUD': {'b': '2.0530300000', 'o': '2.0528900000'}, 'BTCUSD': {'b': '117617.500000000
2025-07-15 21:47:31,009 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0105000000', 'o': '13.0051000000'}, 'NZDJPY': {'b': '88.6350000000', 'o': '88.6260000000'}, 'GBPAUD': {'b': '2.0530300000', 'o': '2.0528900000'}, 'BTCUSD': {'b': '117617.500000000...
2025-07-15 21:47:31,011 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:31,059 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:31,069 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:32,081 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:32,087 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:33,093 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:33,097 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:33,249 - DEBUG - app.firebase_stream - Firebase listener triggered (37). Event Type: patch, Path: /. Timestamp: 1752641253.2490146
2025-07-15 21:47:33,249 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0049000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8290000000'}, 'USDJPY': {'b': '149.0270000000', 'o': '149.0230000000'}, 'CADCHF': {'b': '0.5843700000
2025-07-15 21:47:33,250 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0049000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8290000000'}, 'USDJPY': {'b': '149.0270000000', 'o': '149.0230000000'}, 'CADCHF': {'b': '0.5843700000...
2025-07-15 21:47:33,250 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:34,103 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:34,106 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:35,108 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:35,112 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:35,557 - DEBUG - app.firebase_stream - Firebase listener triggered (38). Event Type: patch, Path: /. Timestamp: 1752641255.5573275
2025-07-15 21:47:35,557 - DEBUG - app.firebase_stream - Prepared batch update for 21 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0050000000'}, 'NZDJPY': {'b': '88.6350000000', 'o': '88.6270000000'}, 'GBPAUD': {'b': '2.0530300000', 'o': '2.0528800000'}, 'BTCUSD': {'b': '117617.400000000
2025-07-15 21:47:35,558 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0050000000'}, 'NZDJPY': {'b': '88.6350000000', 'o': '88.6270000000'}, 'GBPAUD': {'b': '2.0530300000', 'o': '2.0528800000'}, 'BTCUSD': {'b': '117617.400000000...
2025-07-15 21:47:35,559 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:36,121 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:36,126 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:37,136 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:37,139 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:37,903 - DEBUG - app.firebase_stream - Firebase listener triggered (39). Event Type: patch, Path: /. Timestamp: 1752641257.90312
2025-07-15 21:47:37,905 - DEBUG - app.firebase_stream - Prepared batch update for 35 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0105000000', 'o': '13.0055000000'}, 'GBPAUD': {'b': '2.0530600000', 'o': '2.0528800000'}, 'USDJPY': {'b': '149.0220000000', 'o': '149.0210000000'}, 'USDCNH': {'b': '7.1841400000',
2025-07-15 21:47:37,907 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0105000000', 'o': '13.0055000000'}, 'GBPAUD': {'b': '2.0530600000', 'o': '2.0528800000'}, 'USDJPY': {'b': '149.0220000000', 'o': '149.0210000000'}, 'USDCNH': {'b': '7.1841400000',...
2025-07-15 21:47:37,908 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:38,149 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:38,177 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:39,206 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:39,210 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:40,220 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:40,236 - DEBUG - app.firebase_stream - Firebase listener triggered (40). Event Type: patch, Path: /. Timestamp: 1752641260.236575
2025-07-15 21:47:40,237 - DEBUG - app.firebase_stream - Prepared batch update for 35 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0106000000', 'o': '13.0052000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6290000000', 'o': '88.6270000000'}, 'GBPAUD': {'b': '2.0529800000',
2025-07-15 21:47:40,238 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0106000000', 'o': '13.0052000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6290000000', 'o': '88.6270000000'}, 'GBPAUD': {'b': '2.0529800000',...
2025-07-15 21:47:40,238 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:40,239 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:41,284 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:41,289 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:42,298 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:42,303 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:42,510 - DEBUG - app.firebase_stream - Firebase listener triggered (41). Event Type: patch, Path: /. Timestamp: 1752641262.510117
2025-07-15 21:47:42,510 - DEBUG - app.firebase_stream - Prepared batch update for 36 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0105000000', 'o': '13.0057000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8280000000'}, 'NZDJPY': {'b': '88.6360000000', 'o': '88.6270000000'}, 'GBPAUD': {'b': '2.0529800000',
2025-07-15 21:47:42,511 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0105000000', 'o': '13.0057000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8280000000'}, 'NZDJPY': {'b': '88.6360000000', 'o': '88.6270000000'}, 'GBPAUD': {'b': '2.0529800000',...
2025-07-15 21:47:42,511 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:43,310 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:43,315 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:44,321 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:44,324 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:44,833 - DEBUG - app.firebase_stream - Firebase listener triggered (42). Event Type: patch, Path: /. Timestamp: 1752641264.8337772
2025-07-15 21:47:44,834 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0104000000', 'o': '13.0057000000'}, 'NZDJPY': {'b': '88.6290000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0530000000', 'o': '2.0528200000'}, 'BTCUSD': {'b': '117617.400000000
2025-07-15 21:47:44,835 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0104000000', 'o': '13.0057000000'}, 'NZDJPY': {'b': '88.6290000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0530000000', 'o': '2.0528200000'}, 'BTCUSD': {'b': '117617.400000000...
2025-07-15 21:47:44,836 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:45,332 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:45,337 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:46,362 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:46,367 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:47,099 - DEBUG - app.firebase_stream - Firebase listener triggered (43). Event Type: patch, Path: /. Timestamp: 1752641267.0998905
2025-07-15 21:47:47,100 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0107000000', 'o': '13.0050000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6350000000', 'o': '88.6260000000'}, 'GBPAUD': {'b': '2.0530600000',
2025-07-15 21:47:47,101 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0107000000', 'o': '13.0050000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6350000000', 'o': '88.6260000000'}, 'GBPAUD': {'b': '2.0530600000',...
2025-07-15 21:47:47,102 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:47,369 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:47,373 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:48,376 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:48,378 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:49,409 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:49,415 - DEBUG - app.firebase_stream - Firebase listener triggered (44). Event Type: patch, Path: /. Timestamp: 1752641269.415908
2025-07-15 21:47:49,416 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:49,417 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0104000000', 'o': '13.0057000000'}, 'NZDJPY': {'b': '88.6290000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0530000000', 'o': '2.0528300000'}, 'CADCHF': {'b': '0.5844100000', '
2025-07-15 21:47:49,419 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0104000000', 'o': '13.0057000000'}, 'NZDJPY': {'b': '88.6290000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0530000000', 'o': '2.0528300000'}, 'CADCHF': {'b': '0.5844100000', '...
2025-07-15 21:47:49,425 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:50,451 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:50,455 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:51,466 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:51,469 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:51,801 - DEBUG - app.firebase_stream - Firebase listener triggered (45). Event Type: patch, Path: /. Timestamp: 1752641271.801726
2025-07-15 21:47:51,802 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0050000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6350000000', 'o': '88.6270000000'}, 'GBPAUD': {'b': '2.0529700000',
2025-07-15 21:47:51,803 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0050000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6350000000', 'o': '88.6270000000'}, 'GBPAUD': {'b': '2.0529700000',...
2025-07-15 21:47:51,805 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:52,478 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:52,481 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:47:53,489 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:53,497 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:47:53,497 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:47:53,499 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:47:53,500 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:47:54,157 - DEBUG - app.firebase_stream - Firebase listener triggered (46). Event Type: patch, Path: /. Timestamp: 1752641274.157226
2025-07-15 21:47:54,158 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0104000000', 'o': '13.0057000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8290000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0530000000',
2025-07-15 21:47:54,158 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0104000000', 'o': '13.0057000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8290000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0530000000',...
2025-07-15 21:47:54,159 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:54,506 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:54,513 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:47:54,513 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:47:54,518 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:47:54,519 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:47:55,531 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:55,541 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:47:55,542 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:47:55,546 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:47:55,547 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:47:56,399 - DEBUG - app.firebase_stream - Firebase listener triggered (47). Event Type: patch, Path: /. Timestamp: 1752641276.3998654
2025-07-15 21:47:56,400 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0105000000', 'o': '13.0057000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6290000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0530000000',
2025-07-15 21:47:56,401 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0105000000', 'o': '13.0057000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6290000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0530000000',...
2025-07-15 21:47:56,406 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:56,553 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:56,562 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:47:56,562 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:47:56,564 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:47:56,565 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:47:57,588 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:57,595 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:47:57,596 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:47:57,597 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:47:57,598 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:47:58,610 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:58,617 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:47:58,617 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:47:58,618 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:47:58,619 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:47:58,786 - DEBUG - app.firebase_stream - Firebase listener triggered (48). Event Type: patch, Path: /. Timestamp: 1752641278.7865126
2025-07-15 21:47:58,787 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0104000000', 'o': '13.0057000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0529900000', 'o': '2.0528400000'}, 'USDCNH': {'b': '7.1840800000', '
2025-07-15 21:47:58,787 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0104000000', 'o': '13.0057000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0529900000', 'o': '2.0528400000'}, 'USDCNH': {'b': '7.1840800000', '...
2025-07-15 21:47:58,787 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:47:59,629 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:47:59,639 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:47:59,640 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:47:59,642 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:47:59,643 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:00,660 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:00,663 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:00,664 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:00,665 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:00,666 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:01,001 - DEBUG - app.firebase_stream - Firebase listener triggered (49). Event Type: patch, Path: /. Timestamp: 1752641281.0016441
2025-07-15 21:48:01,002 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0103000000', 'o': '13.0057000000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8270000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0529900000',
2025-07-15 21:48:01,002 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0103000000', 'o': '13.0057000000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8270000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0529900000',...
2025-07-15 21:48:01,003 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:01,676 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:01,682 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:01,683 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:01,684 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:01,684 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:02,686 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:02,690 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:02,691 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:02,691 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:02,692 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:03,357 - DEBUG - app.firebase_stream - Firebase listener triggered (50). Event Type: patch, Path: /. Timestamp: 1752641283.3574185
2025-07-15 21:48:03,358 - DEBUG - app.firebase_stream - Prepared batch update for 33 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0104000000', 'o': '13.0058000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6300000000'}, 'GBPAUD': {'b': '2.0529800000', 'o': '2.0528500000'}, 'USDJPY': {'b': '149.0210000000',
2025-07-15 21:48:03,358 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0104000000', 'o': '13.0058000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6300000000'}, 'GBPAUD': {'b': '2.0529800000', 'o': '2.0528500000'}, 'USDJPY': {'b': '149.0210000000',...
2025-07-15 21:48:03,358 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:03,702 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:03,707 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:03,708 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:03,709 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:03,710 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:04,723 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:04,730 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:04,730 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:04,731 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:04,732 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:05,621 - DEBUG - app.firebase_stream - Firebase listener triggered (51). Event Type: patch, Path: /. Timestamp: 1752641285.6214204
2025-07-15 21:48:05,621 - DEBUG - app.firebase_stream - Prepared batch update for 37 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0064000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6390000000', 'o': '88.6310000000'}, 'GBPAUD': {'b': '2.0530100000',
2025-07-15 21:48:05,621 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0064000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6390000000', 'o': '88.6310000000'}, 'GBPAUD': {'b': '2.0530100000',...
2025-07-15 21:48:05,621 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:05,734 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:05,738 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:05,739 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:05,739 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:05,740 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:06,750 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:06,756 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:06,756 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:06,757 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:06,757 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:07,769 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:07,773 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:07,773 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:07,773 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:07,774 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:07,965 - DEBUG - app.firebase_stream - Firebase listener triggered (52). Event Type: patch, Path: /. Timestamp: 1752641287.9654443
2025-07-15 21:48:07,966 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0109000000', 'o': '13.0064000000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8270000000'}, 'GBPAUD': {'b': '2.0530700000', 'o': '2.0529000000'}, 'USDJPY': {'b': '149.0200000000',
2025-07-15 21:48:07,966 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0109000000', 'o': '13.0064000000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8270000000'}, 'GBPAUD': {'b': '2.0530700000', 'o': '2.0529000000'}, 'USDJPY': {'b': '149.0200000000',...
2025-07-15 21:48:07,966 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:08,781 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:08,784 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:08,785 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:08,786 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:08,786 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:09,801 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:09,807 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:09,808 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:09,809 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:09,810 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:10,314 - DEBUG - app.firebase_stream - Firebase listener triggered (53). Event Type: patch, Path: /. Timestamp: 1752641290.314133
2025-07-15 21:48:10,314 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0064000000'}, 'NZDJPY': {'b': '88.6380000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0530700000', 'o': '2.0528900000'}, 'USDJPY': {'b': '149.0190000000',
2025-07-15 21:48:10,314 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0064000000'}, 'NZDJPY': {'b': '88.6380000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0530700000', 'o': '2.0528900000'}, 'USDJPY': {'b': '149.0190000000',...
2025-07-15 21:48:10,314 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:10,653 - WARNING - app - No user data found for user 5 (live). Skipping portfolio update.
2025-07-15 21:48:10,658 - WARNING - app - No group settings found for group string. Skipping portfolio update for user 8.
2025-07-15 21:48:10,812 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:10,815 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:10,815 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:10,816 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:10,816 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:11,330 - DEBUG - app.services.portfolio_calculator - Position calculation for XAGUSD: Type=BUY, Entry=41.09800000, Current=37.814499999999995, Quantity=0.01000000, Contract Size=5000.00000000, PnL=-164.1750000000002500000000000, PnL USD=-164.1750000000002500000000000, Commission=0.10000000, Final PnL=-164.2750000000002500000000000
2025-07-15 21:48:11,330 - DEBUG - app.services.portfolio_calculator - Position calculation for BTCUSD: Type=BUY, Entry=132091.90000000, Current=117530.1, Quantity=6.00000000, Contract Size=1.00000000, PnL=-87370.80000000000000000000000, PnL USD=-87370.80000000000000000000000, Commission=3661.62000000, Final PnL=-91032.42000000000000000000000
2025-07-15 21:48:11,331 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 63.58975459992448329164176926% which is below threshold 100.0%
2025-07-15 21:48:11,742 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=96.66800000, Current=97.158, Quantity=0.01000000, Contract Size=100000.00000000, PnL=490.000000000000000000000000, PnL USD=3.288171307014541769841429616, Commission=0.10000000, Final PnL=3.188171307014541769841429616
2025-07-15 21:48:11,743 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=SELL, Entry=96.56000000, Current=97.264, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-704.000000000000000000000000, PnL USD=-4.724229796200484501976258061, Commission=0.10000000, Final PnL=-4.824229796200484501976258061
2025-07-15 21:48:11,746 - WARNING - app - User 2 has no group_name set. Skipping portfolio update.
2025-07-15 21:48:11,754 - WARNING - app - No group settings found for group string. Skipping portfolio update for user 3.
2025-07-15 21:48:11,772 - WARNING - app - User 5 has no group_name set. Skipping portfolio update.
2025-07-15 21:48:11,773 - WARNING - app - User 6 has no group_name set. Skipping portfolio update.
2025-07-15 21:48:12,150 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDUSD: Type=BUY, Entry=0.64743000, Current=0.6522, Quantity=0.10000000, Contract Size=100000.00000000, PnL=47.700000000000000000000000, PnL USD=47.700000000000000000000000, Commission=1.00000000, Final PnL=46.700000000000000000000000
2025-07-15 21:48:12,150 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDUSD: Type=SELL, Entry=0.64707000, Current=0.6525, Quantity=0.22000000, Contract Size=100000.00000000, PnL=-119.460000000000000000000000, PnL USD=-119.460000000000000000000000, Commission=2.20000000, Final PnL=-121.660000000000000000000000
2025-07-15 21:48:12,151 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:12,152 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFSGD: Type=BUY, Entry=1.57561500, Current=1.603085, Quantity=0.10000000, Contract Size=100000.00000000, PnL=274.700000000000000000000000, PnL USD=213.7510310160760695332804208, Commission=1.00000000, Final PnL=212.7510310160760695332804208
2025-07-15 21:48:12,153 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFSGD: Type=SELL, Entry=1.57505500, Current=1.603535, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-284.800000000000000000000000, PnL USD=-221.6100969544174175576201815, Commission=1.00000000, Final PnL=-222.6100969544174175576201815
2025-07-15 21:48:12,155 - DEBUG - app.services.portfolio_calculator - Position calculation for CADJPY: Type=SELL, Entry=106.24150000, Current=108.65350000000001, Quantity=0.15000000, Contract Size=100000.00000000, PnL=-36180.00000000015000000000000, PnL USD=-242.7878324240543152215489300, Commission=0E-8, Final PnL=-242.7878324240543152215489300
2025-07-15 21:48:12,156 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:12,156 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:12,157 - DEBUG - app.services.portfolio_calculator - Position calculation for CADJPY: Type=BUY, Entry=106.27050000, Current=108.62049999999999, Quantity=0.15000000, Contract Size=100000.00000000, PnL=35249.99999999985000000000000, PnL USD=236.5470174944124574718660037, Commission=0E-8, Final PnL=236.5470174944124574718660037
2025-07-15 21:48:12,157 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=BUY, Entry=1.77481000, Current=1.78043, Quantity=0.22000000, Contract Size=100000.00000000, PnL=123.640000000000000000000000, PnL USD=80.65655400000000000000000000, Commission=2.20000000, Final PnL=78.45655400000000000000000000
2025-07-15 21:48:12,157 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=SELL, Entry=1.77439000, Current=1.7808300000000001, Quantity=0.21000000, Contract Size=100000.00000000, PnL=-135.2400000000021000000000000, PnL USD=-88.22381400000136993500000000, Commission=2.10000000, Final PnL=-90.32381400000136993500000000
2025-07-15 21:48:12,158 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFJPY: Type=BUY, Entry=178.15500000, Current=185.875, Quantity=0.10000000, Contract Size=100000.00000000, PnL=77200.00000000000000000000000, PnL USD=518.0547446969849482280782987, Commission=1.00000000, Final PnL=517.0547446969849482280782987
2025-07-15 21:48:12,158 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:12,159 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFJPY: Type=SELL, Entry=178.09500000, Current=185.92499999999998, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-78299.99999999980000000000000, PnL USD=-525.4363537535468631516786450, Commission=1.00000000, Final PnL=-526.4363537535468631516786450
2025-07-15 21:48:12,159 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=BUY, Entry=1.77480000, Current=1.78043, Quantity=0.05000000, Contract Size=100000.00000000, PnL=28.150000000000000000000000, PnL USD=18.36365250000000000000000000, Commission=0.50000000, Final PnL=17.86365250000000000000000000
2025-07-15 21:48:12,159 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=SELL, Entry=1.77442000, Current=1.7808300000000001, Quantity=0.05000000, Contract Size=100000.00000000, PnL=-32.05000000000050000000000000, PnL USD=-20.90781750000032617500000000, Commission=0.50000000, Final PnL=-21.40781750000032617500000000
2025-07-15 21:48:12,159 - DEBUG - app.services.portfolio_calculator - Position calculation for EURGBP: Type=SELL, Entry=0.85403000, Current=0.86751, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-134.800000000000000000000000, PnL USD=-180.5322480000000000000000000, Commission=1.00000000, Final PnL=-181.5322480000000000000000000
2025-07-15 21:48:12,159 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:12,160 - DEBUG - app.services.portfolio_calculator - Position calculation for EURJPY: Type=BUY, Entry=167.26050000, Current=173.08350000000002, Quantity=0.10000000, Contract Size=100000.00000000, PnL=58230.00000000020000000000000, PnL USD=390.7555412397090303920976520, Commission=1.00000000, Final PnL=389.7555412397090303920976520
2025-07-15 21:48:12,161 - DEBUG - app.services.portfolio_calculator - Position calculation for EURJPY: Type=SELL, Entry=167.23150000, Current=173.11249999999998, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-58809.99999999980000000000000, PnL USD=-394.6476623786215180614552507, Commission=1.00000000, Final PnL=-395.6476623786215180614552507
2025-07-15 21:48:12,161 - DEBUG - app.services.portfolio_calculator - Position calculation for EURNZD: Type=SELL, Entry=1.91952500, Current=1.9531749999999999, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-336.4999999999990000000000000, PnL USD=-200.1333749999994052500000000, Commission=1.00000000, Final PnL=-201.1333749999994052500000000
2025-07-15 21:48:12,161 - DEBUG - app.services.portfolio_calculator - Position calculation for EURNZD: Type=BUY, Entry=1.92063500, Current=1.952735, Quantity=0.10000000, Contract Size=100000.00000000, PnL=321.000000000000000000000000, PnL USD=190.9147500000000000000000000, Commission=1.00000000, Final PnL=189.9147500000000000000000000
2025-07-15 21:48:12,161 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=SELL, Entry=1.34376000, Current=1.3393599999999999, Quantity=0.25000000, Contract Size=0E-8, PnL=0E-32, PnL USD=0E-32, Commission=2.50000000, Final PnL=-2.500000000000000000000000000
2025-07-15 21:48:12,161 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=SELL, Entry=1.34361000, Current=1.3393599999999999, Quantity=0.25000000, Contract Size=0E-8, PnL=0E-32, PnL USD=0E-32, Commission=2.50000000, Final PnL=-2.500000000000000000000000000
2025-07-15 21:48:12,161 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=BUY, Entry=1.34379000, Current=1.33915, Quantity=0.25000000, Contract Size=0E-8, PnL=-0E-24, PnL USD=-0E-24, Commission=2.50000000, Final PnL=-2.500000000000000000000000
2025-07-15 21:48:12,161 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=BUY, Entry=1.34378000, Current=1.33915, Quantity=0.25000000, Contract Size=0E-8, PnL=-0E-24, PnL USD=-0E-24, Commission=2.50000000, Final PnL=-2.500000000000000000000000
2025-07-15 21:48:12,162 - DEBUG - app.services.portfolio_calculator - Position calculation for NZDJPY: Type=BUY, Entry=87.10150000, Current=88.6165, Quantity=0.01000000, Contract Size=100000.00000000, PnL=1515.000000000000000000000000, PnL USD=10.16648883699394037001993034, Commission=0.10000000, Final PnL=10.06648883699394037001993034
2025-07-15 21:48:12,162 - DEBUG - app.services.portfolio_calculator - Position calculation for USDCHF: Type=SELL, Entry=0.81771000, Current=0.80172, Quantity=0.15000000, Contract Size=100000.00000000, PnL=239.850000000000000000000000, PnL USD=299.2252704068266027920206595, Commission=1.50000000, Final PnL=297.7252704068266027920206595
2025-07-15 21:48:12,163 - DEBUG - app.services.portfolio_calculator - Position calculation for USDCHF: Type=BUY, Entry=0.81805000, Current=0.80139, Quantity=0.15000000, Contract Size=100000.00000000, PnL=-249.900000000000000000000000, PnL USD=-311.7631647891013885250196489, Commission=1.50000000, Final PnL=-313.2631647891013885250196489
2025-07-15 21:48:12,164 - DEBUG - app.services.portfolio_calculator - Position calculation for USDNOK: Type=BUY, Entry=10.04973000, Current=10.24032, Quantity=0.10000000, Contract Size=100000.00000000, PnL=1905.900000000000000000000000, PnL USD=186.0707144865506576275422537, Commission=1.00000000, Final PnL=185.0707144865506576275422537
2025-07-15 21:48:12,164 - DEBUG - app.services.portfolio_calculator - Position calculation for USDNOK: Type=BUY, Entry=10.05023000, Current=10.24032, Quantity=0.10000000, Contract Size=100000.00000000, PnL=1900.900000000000000000000000, PnL USD=185.5825705270392702052547721, Commission=1.00000000, Final PnL=184.5825705270392702052547721
2025-07-15 21:48:12,165 - DEBUG - app.services.portfolio_calculator - Position calculation for USDSGD: Type=SELL, Entry=1.28795000, Current=1.28529, Quantity=0.31000000, Contract Size=100000.00000000, PnL=82.460000000000000000000000, PnL USD=64.16421557184431268188679833, Commission=3.10000000, Final PnL=61.06421557184431268188679833
2025-07-15 21:48:12,166 - DEBUG - app.services.portfolio_calculator - Position calculation for USDTRY: Type=SELL, Entry=39.56087000, Current=40.2610000000, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-7001.300000000000000000000000, PnL USD=-173.8978167457340850947567125, Commission=1.00000000, Final PnL=-174.8978167457340850947567125
2025-07-15 21:48:12,520 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89752000, Current=0.89479, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-2.730000000000000000000000, PnL USD=-1.990115033022787910597909286, Commission=0.10000000, Final PnL=-2.090115033022787910597909286
2025-07-15 21:48:12,557 - DEBUG - app.firebase_stream - Firebase listener triggered (54). Event Type: patch, Path: /. Timestamp: 1752641292.557135
2025-07-15 21:48:12,557 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.8350000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6290000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0529900000', 'o': '2.0528100000'}, 'USDCNH': {'b': '7.1841100000', '
2025-07-15 21:48:12,557 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '37.8350000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6290000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0529900000', 'o': '2.0528100000'}, 'USDCNH': {'b': '7.1841100000', '...
2025-07-15 21:48:12,557 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:13,168 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:13,175 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:13,175 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:14,611 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:14,616 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:14,888 - DEBUG - app.firebase_stream - Firebase listener triggered (55). Event Type: patch, Path: /. Timestamp: 1752641294.8880417
2025-07-15 21:48:14,888 - DEBUG - app.firebase_stream - Prepared batch update for 33 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0066000000'}, 'NZDJPY': {'b': '88.6380000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0530400000', 'o': '2.0528600000'}, 'USDCNH': {'b': '7.1840800000', '
2025-07-15 21:48:14,888 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0066000000'}, 'NZDJPY': {'b': '88.6380000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0530400000', 'o': '2.0528600000'}, 'USDCNH': {'b': '7.1840800000', '...
2025-07-15 21:48:14,888 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:15,624 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:15,632 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:15,632 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:15,634 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:15,635 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:16,647 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:16,654 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:16,654 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:16,656 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:16,657 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:17,276 - DEBUG - app.firebase_stream - Firebase listener triggered (56). Event Type: patch, Path: /. Timestamp: 1752641297.2765605
2025-07-15 21:48:17,277 - DEBUG - app.firebase_stream - Prepared batch update for 21 symbols from root path for queue. Preview: {'GBPAUD': {'b': '2.0530400000', 'o': '2.0528700000'}, 'CADCHF': {'b': '0.5843900000', 'o': '0.5843300000'}, 'EURZAR': {'b': '20.7733100000', 'o': '20.7670300000'}, 'AUDJPY': {'b': '97.2160000000', 'o
2025-07-15 21:48:17,277 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPAUD': {'b': '2.0530400000', 'o': '2.0528700000'}, 'CADCHF': {'b': '0.5843900000', 'o': '0.5843300000'}, 'EURZAR': {'b': '20.7733100000', 'o': '20.7670300000'}, 'AUDJPY': {'b': '97.2160000000', 'o...
2025-07-15 21:48:17,277 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:17,663 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:17,669 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:17,669 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:17,670 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:17,671 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:18,677 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:18,684 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:18,684 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:18,686 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:18,687 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:19,536 - DEBUG - app.firebase_stream - Firebase listener triggered (57). Event Type: patch, Path: /. Timestamp: 1752641299.5369167
2025-07-15 21:48:19,537 - DEBUG - app.firebase_stream - Prepared batch update for 33 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0054000000'}, 'XAGUSD': {'b': '37.8340000000', 'o': '37.8270000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0532500000',
2025-07-15 21:48:19,537 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0054000000'}, 'XAGUSD': {'b': '37.8340000000', 'o': '37.8270000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0532500000',...
2025-07-15 21:48:19,537 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:19,689 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:19,694 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:19,694 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:19,695 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:19,695 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:20,711 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:20,716 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:20,716 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:20,717 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:20,717 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:21,719 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:21,726 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:21,727 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:21,728 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:21,729 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:21,894 - DEBUG - app.firebase_stream - Firebase listener triggered (58). Event Type: patch, Path: /. Timestamp: 1752641301.8944063
2025-07-15 21:48:21,894 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0064000000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6240000000'}, 'GBPAUD': {'b': '2.0532600000',
2025-07-15 21:48:21,895 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0064000000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6240000000'}, 'GBPAUD': {'b': '2.0532600000',...
2025-07-15 21:48:21,895 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:22,746 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:22,752 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:22,753 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:22,754 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:22,755 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:23,766 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:23,773 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:23,773 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:23,775 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:23,776 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:24,242 - DEBUG - app.firebase_stream - Firebase listener triggered (59). Event Type: patch, Path: /. Timestamp: 1752641304.2428222
2025-07-15 21:48:24,243 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0055000000'}, 'XAGUSD': {'b': '37.8340000000', 'o': '37.8260000000'}, 'GBPAUD': {'b': '2.0532600000', 'o': '2.0531100000'}, 'EURNZD': {'b': '1.9532200000', '
2025-07-15 21:48:24,243 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0055000000'}, 'XAGUSD': {'b': '37.8340000000', 'o': '37.8260000000'}, 'GBPAUD': {'b': '2.0532600000', 'o': '2.0531100000'}, 'EURNZD': {'b': '1.9532200000', '...
2025-07-15 21:48:24,243 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:24,786 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:24,793 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:24,793 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:24,795 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:24,796 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:25,807 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:25,814 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:25,814 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:25,815 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:25,816 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:26,498 - DEBUG - app.firebase_stream - Firebase listener triggered (60). Event Type: patch, Path: /. Timestamp: 1752641306.4984162
2025-07-15 21:48:26,498 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0109000000', 'o': '13.0064000000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8270000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0532600000',
2025-07-15 21:48:26,498 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0109000000', 'o': '13.0064000000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8270000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0532600000',...
2025-07-15 21:48:26,499 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:26,828 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:26,832 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:26,832 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:26,832 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:26,833 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:27,837 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:27,843 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:27,843 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:27,845 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:27,846 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:28,789 - DEBUG - app.firebase_stream - Firebase listener triggered (61). Event Type: patch, Path: /. Timestamp: 1752641308.7899122
2025-07-15 21:48:28,790 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0107000000', 'o': '13.0065000000'}, 'NZDJPY': {'b': '88.6390000000', 'o': '88.6310000000'}, 'GBPAUD': {'b': '2.0532800000', 'o': '2.0531100000'}, 'USDJPY': {'b': '149.0170000000',
2025-07-15 21:48:28,790 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0107000000', 'o': '13.0065000000'}, 'NZDJPY': {'b': '88.6390000000', 'o': '88.6310000000'}, 'GBPAUD': {'b': '2.0532800000', 'o': '2.0531100000'}, 'USDJPY': {'b': '149.0170000000',...
2025-07-15 21:48:28,790 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:28,848 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:28,851 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:28,851 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:28,852 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:28,852 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:29,859 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:29,865 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:29,866 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:29,867 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:29,868 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:30,883 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:30,890 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:30,891 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:30,892 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:30,893 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:31,103 - DEBUG - app.firebase_stream - Firebase listener triggered (62). Event Type: patch, Path: /. Timestamp: 1752641311.1037416
2025-07-15 21:48:31,104 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0108000000', 'o': '13.0065000000'}, 'NZDJPY': {'b': '88.6380000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0532500000', 'o': '2.0530900000'}, 'BTCUSD': {'b': '117560.800000000
2025-07-15 21:48:31,104 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0108000000', 'o': '13.0065000000'}, 'NZDJPY': {'b': '88.6380000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0532500000', 'o': '2.0530900000'}, 'BTCUSD': {'b': '117560.800000000...
2025-07-15 21:48:31,104 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:31,901 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:31,908 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:31,908 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:31,910 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:31,910 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:32,917 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:32,923 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:32,923 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:32,924 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:32,925 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:33,415 - DEBUG - app.firebase_stream - Firebase listener triggered (63). Event Type: patch, Path: /. Timestamp: 1752641313.4152188
2025-07-15 21:48:33,415 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0050400000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6310000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0530300000',
2025-07-15 21:48:33,415 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0050400000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6310000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0530300000',...
2025-07-15 21:48:33,415 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:33,928 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:33,934 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:33,934 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:33,935 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:33,936 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:34,947 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:34,953 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:34,953 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:34,955 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:34,955 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:35,779 - DEBUG - app.firebase_stream - Firebase listener triggered (64). Event Type: patch, Path: /. Timestamp: 1752641315.779452
2025-07-15 21:48:35,779 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0054000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0532300000', 'o': '2.0530700000'}, 'USDJPY': {'b': '149.0160000000',
2025-07-15 21:48:35,779 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0054000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0532300000', 'o': '2.0530700000'}, 'USDJPY': {'b': '149.0160000000',...
2025-07-15 21:48:35,780 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:35,960 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:35,966 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:35,966 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:35,968 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:35,969 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:36,972 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:36,977 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:36,978 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:36,979 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:36,980 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:37,995 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:38,003 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:38,003 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:38,005 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:38,006 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:38,070 - DEBUG - app.firebase_stream - Firebase listener triggered (65). Event Type: patch, Path: /. Timestamp: 1752641318.0708606
2025-07-15 21:48:38,071 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.8330000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6230000000', 'o': '88.6170000000'}, 'GBPAUD': {'b': '2.0532300000', 'o': '2.0530400000'}, 'USDJPY': {'b': '149.0060000000',
2025-07-15 21:48:38,072 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '37.8330000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6230000000', 'o': '88.6170000000'}, 'GBPAUD': {'b': '2.0532300000', 'o': '2.0530400000'}, 'USDJPY': {'b': '149.0060000000',...
2025-07-15 21:48:38,072 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:39,023 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:39,029 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:39,029 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:39,030 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:39,031 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:40,045 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:40,052 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:40,053 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:40,055 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:40,056 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:40,419 - DEBUG - app.firebase_stream - Firebase listener triggered (66). Event Type: patch, Path: /. Timestamp: 1752641320.419157
2025-07-15 21:48:40,419 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0055000000'}, 'NZDJPY': {'b': '88.6250000000', 'o': '88.6170000000'}, 'GBPAUD': {'b': '2.0532300000', 'o': '2.0530600000'}, 'USDJPY': {'b': '149.0090000000',
2025-07-15 21:48:40,420 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0055000000'}, 'NZDJPY': {'b': '88.6250000000', 'o': '88.6170000000'}, 'GBPAUD': {'b': '2.0532300000', 'o': '2.0530600000'}, 'USDJPY': {'b': '149.0090000000',...
2025-07-15 21:48:40,420 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:41,070 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:41,074 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:41,074 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:41,075 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:41,076 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:42,083 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:42,094 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:42,094 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:42,095 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:42,096 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:42,977 - DEBUG - app.firebase_stream - Firebase listener triggered (67). Event Type: patch, Path: /. Timestamp: 1752641322.9777148
2025-07-15 21:48:42,977 - DEBUG - app.firebase_stream - Prepared batch update for 35 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0108000000', 'o': '13.0049000000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8270000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'BTCUSD': {'b': '117559.9000000
2025-07-15 21:48:42,978 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0108000000', 'o': '13.0049000000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8270000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'BTCUSD': {'b': '117559.9000000...
2025-07-15 21:48:42,978 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:43,098 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:43,106 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:43,106 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:43,108 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:43,108 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:44,116 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:44,122 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:44,122 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:44,124 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:44,125 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:45,137 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:45,141 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:45,141 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:45,142 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:45,142 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:45,235 - DEBUG - app.firebase_stream - Firebase listener triggered (68). Event Type: patch, Path: /. Timestamp: 1752641325.2356157
2025-07-15 21:48:45,235 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0052000000'}, 'NZDJPY': {'b': '88.6310000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0531900000', 'o': '2.0530600000'}, 'BTCUSD': {'b': '117560.000000000
2025-07-15 21:48:45,236 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0052000000'}, 'NZDJPY': {'b': '88.6310000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0531900000', 'o': '2.0530600000'}, 'BTCUSD': {'b': '117560.000000000...
2025-07-15 21:48:45,236 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:46,157 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:46,161 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:46,161 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:46,163 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:46,163 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:47,167 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:47,184 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:47,184 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:47,185 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:47,185 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:47,587 - DEBUG - app.firebase_stream - Firebase listener triggered (69). Event Type: patch, Path: /. Timestamp: 1752641327.5871081
2025-07-15 21:48:47,587 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0106000000', 'o': '13.0047700000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6240000000'}, 'GBPAUD': {'b': '2.0531400000', 'o': '2.0529600000'}, 'USDCNH': {'b': '7.1841000000', '
2025-07-15 21:48:47,587 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0106000000', 'o': '13.0047700000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6240000000'}, 'GBPAUD': {'b': '2.0531400000', 'o': '2.0529600000'}, 'USDCNH': {'b': '7.1841000000', '...
2025-07-15 21:48:47,587 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:48,195 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:48,200 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:48,200 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:48,201 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:48,202 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:49,215 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:49,222 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:49,222 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:49,224 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:49,225 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:49,838 - DEBUG - app.firebase_stream - Firebase listener triggered (70). Event Type: patch, Path: /. Timestamp: 1752641329.8382459
2025-07-15 21:48:49,838 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111100000', 'o': '13.0053000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6230000000'}, 'GBPAUD': {'b': '2.0531300000', 'o': '2.0529800000'}, 'USDJPY': {'b': '149.0070000000',
2025-07-15 21:48:49,838 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111100000', 'o': '13.0053000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6230000000'}, 'GBPAUD': {'b': '2.0531300000', 'o': '2.0529800000'}, 'USDJPY': {'b': '149.0070000000',...
2025-07-15 21:48:49,838 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:50,230 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:50,234 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:50,234 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:50,235 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:50,235 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:51,242 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:51,248 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:51,249 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:51,250 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:51,251 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:52,199 - DEBUG - app.firebase_stream - Firebase listener triggered (71). Event Type: patch, Path: /. Timestamp: 1752641332.1995327
2025-07-15 21:48:52,199 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0110700000', 'o': '13.0052000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6340000000', 'o': '88.6240000000'}, 'GBPAUD': {'b': '2.0531400000',
2025-07-15 21:48:52,199 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0110700000', 'o': '13.0052000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6340000000', 'o': '88.6240000000'}, 'GBPAUD': {'b': '2.0531400000',...
2025-07-15 21:48:52,200 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:52,253 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:52,257 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:52,257 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:52,258 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:52,258 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:53,269 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:53,275 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:53,275 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:53,277 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:53,278 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:54,283 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:54,287 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:54,287 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:54,288 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:54,288 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:54,453 - DEBUG - app.firebase_stream - Firebase listener triggered (72). Event Type: patch, Path: /. Timestamp: 1752641334.4531586
2025-07-15 21:48:54,453 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0110700000', 'o': '13.0050400000'}, 'XAGUSD': {'b': '37.8400000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0531200000',
2025-07-15 21:48:54,454 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0110700000', 'o': '13.0050400000'}, 'XAGUSD': {'b': '37.8400000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0531200000',...
2025-07-15 21:48:54,454 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:55,293 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:55,299 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:55,299 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:55,300 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:55,301 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:56,313 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:56,317 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:56,317 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:56,318 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:56,318 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:56,801 - DEBUG - app.firebase_stream - Firebase listener triggered (73). Event Type: patch, Path: /. Timestamp: 1752641336.801227
2025-07-15 21:48:56,801 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0073000000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6260000000'}, 'GBPAUD': {'b': '2.0532900000', 'o': '2.0531000000'}, 'USDJPY': {'b': '149.0100000000',
2025-07-15 21:48:56,801 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0073000000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6260000000'}, 'GBPAUD': {'b': '2.0532900000', 'o': '2.0531000000'}, 'USDJPY': {'b': '149.0100000000',...
2025-07-15 21:48:56,801 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:57,322 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:57,327 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:57,327 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:57,328 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:57,328 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:58,341 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:58,348 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:58,348 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:58,350 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:58,351 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:48:59,165 - DEBUG - app.firebase_stream - Firebase listener triggered (74). Event Type: patch, Path: /. Timestamp: 1752641339.1657043
2025-07-15 21:48:59,166 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0073000000'}, 'NZDJPY': {'b': '88.6340000000', 'o': '88.6260000000'}, 'GBPAUD': {'b': '2.0532300000', 'o': '2.0530600000'}, 'USDJPY': {'b': '149.0100000000',
2025-07-15 21:48:59,166 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0073000000'}, 'NZDJPY': {'b': '88.6340000000', 'o': '88.6260000000'}, 'GBPAUD': {'b': '2.0532300000', 'o': '2.0530600000'}, 'USDJPY': {'b': '149.0100000000',...
2025-07-15 21:48:59,166 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:48:59,360 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:48:59,366 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:48:59,366 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:48:59,368 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:48:59,368 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:00,372 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:00,379 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:00,379 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:00,380 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:00,381 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:01,395 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:01,401 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:01,401 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:01,403 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:01,404 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:01,418 - DEBUG - app.firebase_stream - Firebase listener triggered (75). Event Type: patch, Path: /. Timestamp: 1752641341.4185288
2025-07-15 21:49:01,419 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0074000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0532100000',
2025-07-15 21:49:01,419 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0074000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0532100000',...
2025-07-15 21:49:01,419 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:02,441 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:02,448 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:02,448 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:02,449 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:02,450 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:03,462 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:03,468 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:03,468 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:03,470 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:03,471 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:03,768 - DEBUG - app.firebase_stream - Firebase listener triggered (76). Event Type: patch, Path: /. Timestamp: 1752641343.7686818
2025-07-15 21:49:03,769 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0072000000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6270000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530600000'}, 'BTCUSD': {'b': '117559.900000000
2025-07-15 21:49:03,769 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0072000000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6270000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530600000'}, 'BTCUSD': {'b': '117559.900000000...
2025-07-15 21:49:03,770 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:04,477 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:04,483 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:04,484 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:04,485 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:04,486 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:05,492 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:05,498 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:05,498 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:05,500 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:05,501 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:06,129 - DEBUG - app.firebase_stream - Firebase listener triggered (77). Event Type: patch, Path: /. Timestamp: 1752641346.129697
2025-07-15 21:49:06,130 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.8380000000', 'o': '37.8290000000'}, 'NZDJPY': {'b': '88.6350000000', 'o': '88.6270000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530400000'}, 'BTCUSD': {'b': '117560.000000000
2025-07-15 21:49:06,130 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '37.8380000000', 'o': '37.8290000000'}, 'NZDJPY': {'b': '88.6350000000', 'o': '88.6270000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530400000'}, 'BTCUSD': {'b': '117560.000000000...
2025-07-15 21:49:06,130 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:06,510 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:06,517 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:06,517 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:06,519 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:06,519 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:07,524 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:07,530 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:07,530 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:07,532 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:07,533 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:08,483 - DEBUG - app.firebase_stream - Firebase listener triggered (78). Event Type: patch, Path: /. Timestamp: 1752641348.4834254
2025-07-15 21:49:08,483 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0106000000', 'o': '13.0047700000'}, 'XAGUSD': {'b': '37.8390000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6370000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0532100000',
2025-07-15 21:49:08,484 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0106000000', 'o': '13.0047700000'}, 'XAGUSD': {'b': '37.8390000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6370000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0532100000',...
2025-07-15 21:49:08,484 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:08,534 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:08,537 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:08,538 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:08,538 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:08,538 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:09,555 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:09,561 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:09,561 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:09,563 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:09,563 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:10,579 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:10,586 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:10,586 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:10,588 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:10,589 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:10,664 - WARNING - app - No user data found for user 5 (live). Skipping portfolio update.
2025-07-15 21:49:10,670 - WARNING - app - No group settings found for group string. Skipping portfolio update for user 8.
2025-07-15 21:49:10,683 - DEBUG - app.firebase_stream - Firebase listener triggered (79). Event Type: patch, Path: /. Timestamp: 1752641350.6838071
2025-07-15 21:49:10,684 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111100000', 'o': '13.0052000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530400000'}, 'USDJPY': {'b': '149.0070000000',
2025-07-15 21:49:10,685 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0111100000', 'o': '13.0052000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530400000'}, 'USDJPY': {'b': '149.0070000000',...
2025-07-15 21:49:10,685 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:11,413 - DEBUG - app.services.portfolio_calculator - Position calculation for XAGUSD: Type=BUY, Entry=41.09800000, Current=37.8185, Quantity=0.01000000, Contract Size=5000.00000000, PnL=-163.975000000000000000000000, PnL USD=-163.975000000000000000000000, Commission=0.10000000, Final PnL=-164.075000000000000000000000
2025-07-15 21:49:11,414 - DEBUG - app.services.portfolio_calculator - Position calculation for BTCUSD: Type=BUY, Entry=132091.90000000, Current=117509.9, Quantity=6.00000000, Contract Size=1.00000000, PnL=-87492.00000000000000000000000, PnL USD=-87492.00000000000000000000000, Commission=3661.62000000, Final PnL=-91153.62000000000000000000000
2025-07-15 21:49:11,414 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 63.50715198682836480891114259% which is below threshold 100.0%
2025-07-15 21:49:11,849 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:11,851 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=96.66800000, Current=97.156, Quantity=0.01000000, Contract Size=100000.00000000, PnL=488.000000000000000000000000, PnL USD=3.275013925520277570852376063, Commission=0.10000000, Final PnL=3.175013925520277570852376063
2025-07-15 21:49:11,853 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=SELL, Entry=96.56000000, Current=97.26299999999999, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-702.9999999999900000000000000, PnL USD=-4.717899159099840947069600757, Commission=0.10000000, Final PnL=-4.817899159099840947069600757
2025-07-15 21:49:11,854 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:11,854 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:11,855 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:11,855 - WARNING - app - User 2 has no group_name set. Skipping portfolio update.
2025-07-15 21:49:11,855 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:11,862 - WARNING - app - No group settings found for group string. Skipping portfolio update for user 3.
2025-07-15 21:49:11,881 - WARNING - app - User 5 has no group_name set. Skipping portfolio update.
2025-07-15 21:49:11,882 - WARNING - app - User 6 has no group_name set. Skipping portfolio update.
2025-07-15 21:49:12,258 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDUSD: Type=BUY, Entry=0.64743000, Current=0.65219, Quantity=0.10000000, Contract Size=100000.00000000, PnL=47.600000000000000000000000, PnL USD=47.600000000000000000000000, Commission=1.00000000, Final PnL=46.600000000000000000000000
2025-07-15 21:49:12,258 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDUSD: Type=SELL, Entry=0.64707000, Current=0.65249, Quantity=0.22000000, Contract Size=100000.00000000, PnL=-119.240000000000000000000000, PnL USD=-119.240000000000000000000000, Commission=2.20000000, Final PnL=-121.440000000000000000000000
2025-07-15 21:49:12,260 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFSGD: Type=BUY, Entry=1.57561500, Current=1.603005, Quantity=0.10000000, Contract Size=100000.00000000, PnL=273.900000000000000000000000, PnL USD=213.1417988265139370924314818, Commission=1.00000000, Final PnL=212.1417988265139370924314818
2025-07-15 21:49:12,260 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFSGD: Type=SELL, Entry=1.57505500, Current=1.603435, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-283.800000000000000000000000, PnL USD=-220.8457192660264890355314149, Commission=1.00000000, Final PnL=-221.8457192660264890355314149
2025-07-15 21:49:12,261 - DEBUG - app.services.portfolio_calculator - Position calculation for CADJPY: Type=SELL, Entry=106.24150000, Current=108.6575, Quantity=0.15000000, Contract Size=100000.00000000, PnL=-36240.00000000000000000000000, PnL USD=-243.2100505345386458354305502, Commission=0E-8, Final PnL=-243.2100505345386458354305502
2025-07-15 21:49:12,262 - DEBUG - app.services.portfolio_calculator - Position calculation for CADJPY: Type=BUY, Entry=106.27050000, Current=108.62349999999999, Quantity=0.15000000, Contract Size=100000.00000000, PnL=35294.99999999985000000000000, PnL USD=236.8680666008969377277577563, Commission=0E-8, Final PnL=236.8680666008969377277577563
2025-07-15 21:49:12,263 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=BUY, Entry=1.77481000, Current=1.78059, Quantity=0.22000000, Contract Size=100000.00000000, PnL=127.160000000000000000000000, PnL USD=82.95155440000000000000000000, Commission=2.20000000, Final PnL=80.75155440000000000000000000
2025-07-15 21:49:12,263 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=SELL, Entry=1.77439000, Current=1.7810000000000001, Quantity=0.21000000, Contract Size=100000.00000000, PnL=-138.8100000000021000000000000, PnL USD=-90.55131540000136991400000000, Commission=2.10000000, Final PnL=-92.65131540000136991400000000
2025-07-15 21:49:12,264 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFJPY: Type=BUY, Entry=178.15500000, Current=185.895, Quantity=0.10000000, Contract Size=100000.00000000, PnL=77400.00000000000000000000000, PnL USD=519.4386840886669753769957116, Commission=1.00000000, Final PnL=518.4386840886669753769957116
2025-07-15 21:49:12,264 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFJPY: Type=SELL, Entry=178.09500000, Current=185.93499999999997, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-78399.99999999970000000000000, PnL USD=-526.1497781983376619890340722, Commission=1.00000000, Final PnL=-527.1497781983376619890340722
2025-07-15 21:49:12,265 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=BUY, Entry=1.77480000, Current=1.78059, Quantity=0.05000000, Contract Size=100000.00000000, PnL=28.950000000000000000000000, PnL USD=18.88524300000000000000000000, Commission=0.50000000, Final PnL=18.38524300000000000000000000
2025-07-15 21:49:12,265 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=SELL, Entry=1.77442000, Current=1.7810000000000001, Quantity=0.05000000, Contract Size=100000.00000000, PnL=-32.90000000000050000000000000, PnL USD=-21.46198600000032617000000000, Commission=0.50000000, Final PnL=-21.96198600000032617000000000
2025-07-15 21:49:12,265 - DEBUG - app.services.portfolio_calculator - Position calculation for EURGBP: Type=SELL, Entry=0.85403000, Current=0.86752, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-134.900000000000000000000000, PnL USD=-180.6810130000000000000000000, Commission=1.00000000, Final PnL=-181.6810130000000000000000000
2025-07-15 21:49:12,266 - DEBUG - app.services.portfolio_calculator - Position calculation for EURJPY: Type=BUY, Entry=167.26050000, Current=173.0935, Quantity=0.10000000, Contract Size=100000.00000000, PnL=58330.00000000000000000000000, PnL USD=391.4581194172085875160227372, Commission=1.00000000, Final PnL=390.4581194172085875160227372
2025-07-15 21:49:12,266 - DEBUG - app.services.portfolio_calculator - Position calculation for EURJPY: Type=SELL, Entry=167.23150000, Current=173.12449999999998, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-58929.99999999980000000000000, PnL USD=-395.4847758830108652613635601, Commission=1.00000000, Final PnL=-396.4847758830108652613635601
2025-07-15 21:49:12,267 - DEBUG - app.services.portfolio_calculator - Position calculation for EURNZD: Type=SELL, Entry=1.91952500, Current=1.953325, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-338.000000000000000000000000, PnL USD=-201.0424000000000000000000000, Commission=1.00000000, Final PnL=-202.0424000000000000000000000
2025-07-15 21:49:12,267 - DEBUG - app.services.portfolio_calculator - Position calculation for EURNZD: Type=BUY, Entry=1.92063500, Current=1.952865, Quantity=0.10000000, Contract Size=100000.00000000, PnL=322.300000000000000000000000, PnL USD=191.7040400000000000000000000, Commission=1.00000000, Final PnL=190.7040400000000000000000000
2025-07-15 21:49:12,267 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=SELL, Entry=1.34376000, Current=1.33947, Quantity=0.25000000, Contract Size=0E-8, PnL=0E-24, PnL USD=0E-24, Commission=2.50000000, Final PnL=-2.500000000000000000000000
2025-07-15 21:49:12,267 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=SELL, Entry=1.34361000, Current=1.33947, Quantity=0.25000000, Contract Size=0E-8, PnL=0E-24, PnL USD=0E-24, Commission=2.50000000, Final PnL=-2.500000000000000000000000
2025-07-15 21:49:12,267 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=BUY, Entry=1.34379000, Current=1.3392600000000001, Quantity=0.25000000, Contract Size=0E-8, PnL=-0E-32, PnL USD=-0E-32, Commission=2.50000000, Final PnL=-2.500000000000000000000000000
2025-07-15 21:49:12,267 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=BUY, Entry=1.34378000, Current=1.3392600000000001, Quantity=0.25000000, Contract Size=0E-8, PnL=-0E-32, PnL USD=-0E-32, Commission=2.50000000, Final PnL=-2.500000000000000000000000000
2025-07-15 21:49:12,268 - DEBUG - app.services.portfolio_calculator - Position calculation for NZDJPY: Type=BUY, Entry=87.10150000, Current=88.6165, Quantity=0.01000000, Contract Size=100000.00000000, PnL=1515.000000000000000000000000, PnL USD=10.16730757615414040951096257, Commission=0.10000000, Final PnL=10.06730757615414040951096257
2025-07-15 21:49:12,268 - DEBUG - app.services.portfolio_calculator - Position calculation for USDCHF: Type=SELL, Entry=0.81771000, Current=0.80168, Quantity=0.15000000, Contract Size=100000.00000000, PnL=240.450000000000000000000000, PnL USD=299.9887714745549137274961636, Commission=1.50000000, Final PnL=298.4887714745549137274961636
2025-07-15 21:49:12,269 - DEBUG - app.services.portfolio_calculator - Position calculation for USDCHF: Type=BUY, Entry=0.81805000, Current=0.80136, Quantity=0.15000000, Contract Size=100000.00000000, PnL=-250.350000000000000000000000, PnL USD=-312.3401494641498134817162177, Commission=1.50000000, Final PnL=-313.8401494641498134817162177
2025-07-15 21:49:12,270 - DEBUG - app.services.portfolio_calculator - Position calculation for USDNOK: Type=BUY, Entry=10.04973000, Current=10.23902, Quantity=0.10000000, Contract Size=100000.00000000, PnL=1892.900000000000000000000000, PnL USD=184.7982926976899481209716628, Commission=1.00000000, Final PnL=183.7982926976899481209716628
2025-07-15 21:49:12,271 - DEBUG - app.services.portfolio_calculator - Position calculation for USDNOK: Type=BUY, Entry=10.05023000, Current=10.23902, Quantity=0.10000000, Contract Size=100000.00000000, PnL=1887.900000000000000000000000, PnL USD=184.3101573162707237876181532, Commission=1.00000000, Final PnL=183.3101573162707237876181532
2025-07-15 21:49:12,271 - DEBUG - app.services.portfolio_calculator - Position calculation for USDSGD: Type=SELL, Entry=1.28795000, Current=1.2852100000000002, Quantity=0.31000000, Contract Size=100000.00000000, PnL=84.93999999999380000000000000, PnL USD=66.09808102344933310506902401, Commission=3.10000000, Final PnL=62.99808102344933310506902401
2025-07-15 21:49:12,272 - DEBUG - app.services.portfolio_calculator - Position calculation for USDTRY: Type=SELL, Entry=39.56087000, Current=40.2610000000, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-7001.300000000000000000000000, PnL USD=-173.8978167457340850947567125, Commission=1.00000000, Final PnL=-174.8978167457340850947567125
2025-07-15 21:49:12,668 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89752000, Current=0.89477, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-2.750000000000000000000000, PnL USD=-2.004782317090951506138278949, Commission=0.10000000, Final PnL=-2.104782317090951506138278949
2025-07-15 21:49:12,856 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:12,863 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:12,863 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:12,865 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:12,865 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:13,085 - DEBUG - app.firebase_stream - Firebase listener triggered (80). Event Type: patch, Path: /. Timestamp: 1752641353.0855765
2025-07-15 21:49:13,085 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0110700000', 'o': '13.0052000000'}, 'NZDJPY': {'b': '88.6380000000', 'o': '88.6280000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530500000'}, 'USDJPY': {'b': '149.0170000000',
2025-07-15 21:49:13,085 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0110700000', 'o': '13.0052000000'}, 'NZDJPY': {'b': '88.6380000000', 'o': '88.6280000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530500000'}, 'USDJPY': {'b': '149.0170000000',...
2025-07-15 21:49:13,086 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:13,872 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:13,879 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:13,879 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:13,881 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:13,881 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:14,885 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:14,889 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:14,889 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:14,891 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:14,891 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:15,340 - DEBUG - app.firebase_stream - Firebase listener triggered (81). Event Type: patch, Path: /. Timestamp: 1752641355.340322
2025-07-15 21:49:15,340 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0072000000'}, 'NZDJPY': {'b': '88.6390000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0531400000', 'o': '2.0530000000'}, 'USDCNH': {'b': '7.1839400000', '
2025-07-15 21:49:15,340 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0072000000'}, 'NZDJPY': {'b': '88.6390000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0531400000', 'o': '2.0530000000'}, 'USDCNH': {'b': '7.1839400000', '...
2025-07-15 21:49:15,341 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:15,895 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:15,901 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:15,902 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:15,903 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:15,904 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:16,913 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:16,918 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:16,918 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:16,920 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:16,921 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:17,593 - DEBUG - app.firebase_stream - Firebase listener triggered (82). Event Type: patch, Path: /. Timestamp: 1752641357.5933433
2025-07-15 21:49:17,593 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.6370000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530400000'}, 'USDJPY': {'b': '149.0160000000', 'o': '149.0120000000'}, 'USDCNH': {'b': '7.1839100000',
2025-07-15 21:49:17,594 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.6370000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530400000'}, 'USDJPY': {'b': '149.0160000000', 'o': '149.0120000000'}, 'USDCNH': {'b': '7.1839100000',...
2025-07-15 21:49:17,594 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:17,933 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:17,939 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:17,939 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:17,941 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:17,941 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:18,952 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:18,959 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:18,959 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:18,961 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:18,961 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:19,901 - DEBUG - app.firebase_stream - Firebase listener triggered (83). Event Type: patch, Path: /. Timestamp: 1752641359.901377
2025-07-15 21:49:19,901 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0073000000'}, 'NZDJPY': {'b': '88.6380000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0532300000', 'o': '2.0530600000'}, 'USDJPY': {'b': '149.0170000000',
2025-07-15 21:49:19,902 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0073000000'}, 'NZDJPY': {'b': '88.6380000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0532300000', 'o': '2.0530600000'}, 'USDJPY': {'b': '149.0170000000',...
2025-07-15 21:49:19,902 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:19,963 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:19,966 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:19,966 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:19,967 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:19,967 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:20,983 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:20,989 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:20,989 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:20,991 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:20,992 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:22,001 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:22,005 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:22,005 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:22,006 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:22,007 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:22,301 - DEBUG - app.firebase_stream - Firebase listener triggered (84). Event Type: patch, Path: /. Timestamp: 1752641362.3011148
2025-07-15 21:49:22,301 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0072000000'}, 'NZDJPY': {'b': '88.6370000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530700000'}, 'CADCHF': {'b': '0.5843800000', '
2025-07-15 21:49:22,301 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0072000000'}, 'NZDJPY': {'b': '88.6370000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530700000'}, 'CADCHF': {'b': '0.5843800000', '...
2025-07-15 21:49:22,301 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:23,012 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:23,017 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:23,018 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:23,019 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:23,019 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:24,032 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:24,035 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:24,035 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:24,036 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:24,037 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:24,550 - DEBUG - app.firebase_stream - Firebase listener triggered (85). Event Type: patch, Path: /. Timestamp: 1752641364.550973
2025-07-15 21:49:24,551 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0058000000'}, 'NZDJPY': {'b': '88.6370000000', 'o': '88.6280000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530600000'}, 'USDJPY': {'b': '149.0120000000',
2025-07-15 21:49:24,551 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0058000000'}, 'NZDJPY': {'b': '88.6370000000', 'o': '88.6280000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530600000'}, 'USDJPY': {'b': '149.0120000000',...
2025-07-15 21:49:24,551 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:25,046 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:25,052 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:25,052 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:25,053 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:25,054 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:26,063 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:26,067 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:26,067 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:26,068 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:26,069 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:26,913 - DEBUG - app.firebase_stream - Firebase listener triggered (86). Event Type: patch, Path: /. Timestamp: 1752641366.9132788
2025-07-15 21:49:26,913 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0057000000'}, 'XAGUSD': {'b': '37.8390000000', 'o': '37.8310000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0530100000'}, 'USDJPY': {'b': '149.0160000000',
2025-07-15 21:49:26,913 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0057000000'}, 'XAGUSD': {'b': '37.8390000000', 'o': '37.8310000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0530100000'}, 'USDJPY': {'b': '149.0160000000',...
2025-07-15 21:49:26,913 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:27,080 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:27,086 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:27,087 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:27,088 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:27,089 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:28,097 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:28,104 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:28,104 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:28,105 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:28,106 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:29,108 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:29,115 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:29,115 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:29,117 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:29,117 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:29,161 - DEBUG - app.firebase_stream - Firebase listener triggered (87). Event Type: patch, Path: /. Timestamp: 1752641369.1617768
2025-07-15 21:49:29,162 - DEBUG - app.firebase_stream - Prepared batch update for 18 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.6370000000', 'o': '88.6270000000'}, 'GBPAUD': {'b': '2.0531600000', 'o': '2.0530200000'}, 'USDJPY': {'b': '149.0170000000', 'o': '149.0120000000'}, 'CADCHF': {'b': '0.5843800000',
2025-07-15 21:49:29,162 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.6370000000', 'o': '88.6270000000'}, 'GBPAUD': {'b': '2.0531600000', 'o': '2.0530200000'}, 'USDJPY': {'b': '149.0170000000', 'o': '149.0120000000'}, 'CADCHF': {'b': '0.5843800000',...
2025-07-15 21:49:29,162 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:30,129 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:30,135 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:30,135 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:30,137 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:30,137 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:31,143 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:31,149 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:31,150 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:31,151 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:31,152 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:31,421 - DEBUG - app.firebase_stream - Firebase listener triggered (88). Event Type: patch, Path: /. Timestamp: 1752641371.4213448
2025-07-15 21:49:31,421 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0072000000'}, 'NZDJPY': {'b': '88.6370000000', 'o': '88.6280000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530200000'}, 'USDJPY': {'b': '149.0170000000',
2025-07-15 21:49:31,421 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0072000000'}, 'NZDJPY': {'b': '88.6370000000', 'o': '88.6280000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530200000'}, 'USDJPY': {'b': '149.0170000000',...
2025-07-15 21:49:31,421 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:32,160 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:32,168 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:32,168 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:32,170 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:32,171 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:33,182 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:33,188 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:33,188 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:33,189 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:33,190 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:33,772 - DEBUG - app.firebase_stream - Firebase listener triggered (89). Event Type: patch, Path: /. Timestamp: 1752641373.7727246
2025-07-15 21:49:33,773 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0060000000'}, 'NZDJPY': {'b': '88.6380000000', 'o': '88.6280000000'}, 'GBPAUD': {'b': '2.0532300000', 'o': '2.0530400000'}, 'USDCNH': {'b': '7.1839400000', '
2025-07-15 21:49:33,773 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0060000000'}, 'NZDJPY': {'b': '88.6380000000', 'o': '88.6280000000'}, 'GBPAUD': {'b': '2.0532300000', 'o': '2.0530400000'}, 'USDCNH': {'b': '7.1839400000', '...
2025-07-15 21:49:33,773 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:34,193 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:34,197 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:34,198 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:34,199 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:34,200 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:35,209 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:35,214 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:35,214 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:35,215 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:35,215 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:36,123 - DEBUG - app.firebase_stream - Firebase listener triggered (90). Event Type: patch, Path: /. Timestamp: 1752641376.1230166
2025-07-15 21:49:36,123 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.6370000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0532300000', 'o': '2.0530500000'}, 'USDCNH': {'b': '7.1839500000', 'o': '7.1839200000'}, 'EURNZD': {'b': '1.9532400000', 'o'
2025-07-15 21:49:36,123 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.6370000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0532300000', 'o': '2.0530500000'}, 'USDCNH': {'b': '7.1839500000', 'o': '7.1839200000'}, 'EURNZD': {'b': '1.9532400000', 'o'...
2025-07-15 21:49:36,123 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:36,219 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:36,224 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:36,224 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:36,225 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:36,225 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:37,228 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:37,236 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:37,236 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:37,238 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:37,239 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:38,249 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:38,255 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:38,256 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:38,257 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:38,258 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:38,379 - DEBUG - app.firebase_stream - Firebase listener triggered (91). Event Type: patch, Path: /. Timestamp: 1752641378.3797898
2025-07-15 21:49:38,380 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0072000000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6280000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530400000'}, 'USDJPY': {'b': '149.0100000000',
2025-07-15 21:49:38,380 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0072000000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6280000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530400000'}, 'USDJPY': {'b': '149.0100000000',...
2025-07-15 21:49:38,380 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:39,273 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:39,276 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:39,276 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:39,277 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:39,278 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:40,285 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:40,289 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:40,289 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:40,290 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:40,290 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:40,738 - DEBUG - app.firebase_stream - Firebase listener triggered (92). Event Type: patch, Path: /. Timestamp: 1752641380.738878
2025-07-15 21:49:40,739 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0072000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0532400000',
2025-07-15 21:49:40,739 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0072000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0532400000',...
2025-07-15 21:49:40,739 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:41,295 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:41,302 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:41,303 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:41,304 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:41,305 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:42,310 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:42,317 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:42,317 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:42,319 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:42,320 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:42,987 - DEBUG - app.firebase_stream - Firebase listener triggered (93). Event Type: patch, Path: /. Timestamp: 1752641382.9870243
2025-07-15 21:49:42,987 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0072000000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6240000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530600000'}, 'USDJPY': {'b': '149.0170000000',
2025-07-15 21:49:42,987 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0072000000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6240000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530600000'}, 'USDJPY': {'b': '149.0170000000',...
2025-07-15 21:49:42,987 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:43,331 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:43,337 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:43,337 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:43,339 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:43,339 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:44,357 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:44,364 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:44,364 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:44,366 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:44,366 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:45,350 - DEBUG - app.firebase_stream - Firebase listener triggered (94). Event Type: patch, Path: /. Timestamp: 1752641385.3499928
2025-07-15 21:49:45,350 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.6390000000', 'o': '88.6300000000'}, 'GBPAUD': {'b': '2.0532400000', 'o': '2.0530500000'}, 'USDJPY': {'b': '149.0090000000', 'o': '149.0040000000'}, 'USDCNH': {'b': '7.1839600000',
2025-07-15 21:49:45,350 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.6390000000', 'o': '88.6300000000'}, 'GBPAUD': {'b': '2.0532400000', 'o': '2.0530500000'}, 'USDJPY': {'b': '149.0090000000', 'o': '149.0040000000'}, 'USDCNH': {'b': '7.1839600000',...
2025-07-15 21:49:45,351 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:45,376 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:45,384 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:45,384 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:45,388 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:45,389 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:46,393 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:46,401 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:46,402 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:46,403 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:46,404 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:47,417 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:47,425 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:47,425 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:47,426 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:47,427 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:47,600 - DEBUG - app.firebase_stream - Firebase listener triggered (95). Event Type: patch, Path: /. Timestamp: 1752641387.600875
2025-07-15 21:49:47,601 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0072000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6240000000'}, 'GBPAUD': {'b': '2.0532500000',
2025-07-15 21:49:47,601 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0072000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6240000000'}, 'GBPAUD': {'b': '2.0532500000',...
2025-07-15 21:49:47,601 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:48,432 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:48,438 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:48,438 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:48,439 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:48,440 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:49,444 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:49,450 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:49,451 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:49,452 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:49,453 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:49,966 - DEBUG - app.firebase_stream - Firebase listener triggered (96). Event Type: patch, Path: /. Timestamp: 1752641389.9664924
2025-07-15 21:49:49,966 - DEBUG - app.firebase_stream - Prepared batch update for 36 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0057000000'}, 'XAGUSD': {'b': '37.8390000000', 'o': '37.8320000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0531500000',
2025-07-15 21:49:49,966 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0057000000'}, 'XAGUSD': {'b': '37.8390000000', 'o': '37.8320000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0531500000',...
2025-07-15 21:49:49,967 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:50,455 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:50,460 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:50,460 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:50,461 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:50,462 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:51,471 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:51,476 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:51,477 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:51,478 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:51,478 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:52,201 - DEBUG - app.firebase_stream - Firebase listener triggered (97). Event Type: patch, Path: /. Timestamp: 1752641392.2016191
2025-07-15 21:49:52,201 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0117000000', 'o': '13.0060000000'}, 'NZDJPY': {'b': '88.6360000000', 'o': '88.6260000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0530500000'}, 'USDJPY': {'b': '149.0170000000',
2025-07-15 21:49:52,202 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0117000000', 'o': '13.0060000000'}, 'NZDJPY': {'b': '88.6360000000', 'o': '88.6260000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0530500000'}, 'USDJPY': {'b': '149.0170000000',...
2025-07-15 21:49:52,202 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:52,489 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:52,493 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:52,494 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:52,495 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:52,495 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:53,498 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:53,502 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:53,503 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:53,504 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:53,504 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:54,517 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:54,526 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:54,526 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:54,528 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:54,529 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:54,567 - DEBUG - app.firebase_stream - Firebase listener triggered (98). Event Type: patch, Path: /. Timestamp: 1752641394.5678155
2025-07-15 21:49:54,568 - DEBUG - app.firebase_stream - Prepared batch update for 36 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0072000000'}, 'NZDJPY': {'b': '88.6370000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530600000'}, 'BTCUSD': {'b': '117560.000000000
2025-07-15 21:49:54,568 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0072000000'}, 'NZDJPY': {'b': '88.6370000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0532100000', 'o': '2.0530600000'}, 'BTCUSD': {'b': '117560.000000000...
2025-07-15 21:49:54,568 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:55,543 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:55,549 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:55,549 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:55,550 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:55,551 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:56,556 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:56,561 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:56,561 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:56,562 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:56,563 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:56,914 - DEBUG - app.firebase_stream - Firebase listener triggered (99). Event Type: patch, Path: /. Timestamp: 1752641396.9145043
2025-07-15 21:49:56,914 - DEBUG - app.firebase_stream - Prepared batch update for 33 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0060000000'}, 'NZDJPY': {'b': '88.6350000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0531800000', 'o': '2.0530300000'}, 'BTCUSD': {'b': '117555.900000000
2025-07-15 21:49:56,914 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0060000000'}, 'NZDJPY': {'b': '88.6350000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0531800000', 'o': '2.0530300000'}, 'BTCUSD': {'b': '117555.900000000...
2025-07-15 21:49:56,914 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:57,567 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:57,574 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:57,574 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:57,576 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:57,577 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:58,594 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:58,600 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:58,600 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:58,602 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:58,603 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:49:59,172 - DEBUG - app.firebase_stream - Firebase listener triggered (100). Event Type: patch, Path: /. Timestamp: 1752641399.1726434
2025-07-15 21:49:59,173 - DEBUG - app.firebase_stream - Prepared batch update for 33 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0075000000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6240000000'}, 'GBPAUD': {'b': '2.0532300000', 'o': '2.0530400000'}, 'BTCUSD': {'b': '117553.600000000
2025-07-15 21:49:59,173 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0075000000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6240000000'}, 'GBPAUD': {'b': '2.0532300000', 'o': '2.0530400000'}, 'BTCUSD': {'b': '117553.600000000...
2025-07-15 21:49:59,173 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:49:59,617 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:49:59,623 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:49:59,624 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:49:59,625 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:49:59,626 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:00,632 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:00,638 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:00,639 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:00,640 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:00,640 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:01,522 - DEBUG - app.firebase_stream - Firebase listener triggered (101). Event Type: patch, Path: /. Timestamp: 1752641401.5227876
2025-07-15 21:50:01,523 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.8420000000', 'o': '37.8320000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6260000000'}, 'GBPAUD': {'b': '2.0531900000', 'o': '2.0530400000'}, 'BTCUSD': {'b': '117550.100000000
2025-07-15 21:50:01,523 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '37.8420000000', 'o': '37.8320000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6260000000'}, 'GBPAUD': {'b': '2.0531900000', 'o': '2.0530400000'}, 'BTCUSD': {'b': '117550.100000000...
2025-07-15 21:50:01,523 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:01,657 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:01,662 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:01,662 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:01,663 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:01,664 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:02,667 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:02,674 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:02,675 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:02,676 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:02,677 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:03,685 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:03,691 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:03,691 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:03,693 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:03,694 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:03,779 - DEBUG - app.firebase_stream - Firebase listener triggered (102). Event Type: patch, Path: /. Timestamp: 1752641403.779807
2025-07-15 21:50:03,780 - DEBUG - app.firebase_stream - Prepared batch update for 35 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0072000000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6260000000'}, 'GBPAUD': {'b': '2.0531300000', 'o': '2.0530000000'}, 'BTCUSD': {'b': '117555.900000000
2025-07-15 21:50:03,780 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0072000000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6260000000'}, 'GBPAUD': {'b': '2.0531300000', 'o': '2.0530000000'}, 'BTCUSD': {'b': '117555.900000000...
2025-07-15 21:50:03,780 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:04,708 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:04,714 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:04,715 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:04,716 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:04,717 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:05,725 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:05,731 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:05,732 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:05,733 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:05,734 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:06,129 - DEBUG - app.firebase_stream - Firebase listener triggered (103). Event Type: patch, Path: /. Timestamp: 1752641406.1290047
2025-07-15 21:50:06,129 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0063700000'}, 'NZDJPY': {'b': '88.6360000000', 'o': '88.6290000000'}, 'BTCUSD': {'b': '117541.1000000000', 'o': '117541.0000000000'}, 'USDJPY': {'b': '149.01
2025-07-15 21:50:06,130 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0063700000'}, 'NZDJPY': {'b': '88.6360000000', 'o': '88.6290000000'}, 'BTCUSD': {'b': '117541.1000000000', 'o': '117541.0000000000'}, 'USDJPY': {'b': '149.01...
2025-07-15 21:50:06,130 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:06,742 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:06,748 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:06,748 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:06,750 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:06,751 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:07,756 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:07,762 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:07,763 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:07,764 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:07,765 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:08,390 - DEBUG - app.firebase_stream - Firebase listener triggered (104). Event Type: patch, Path: /. Timestamp: 1752641408.3907442
2025-07-15 21:50:08,391 - DEBUG - app.firebase_stream - Prepared batch update for 37 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0072000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8300000000'}, 'GBPAUD': {'b': '2.0532400000', 'o': '2.0530700000'}, 'BTCUSD': {'b': '117555.900000000
2025-07-15 21:50:08,391 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0072000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8300000000'}, 'GBPAUD': {'b': '2.0532400000', 'o': '2.0530700000'}, 'BTCUSD': {'b': '117555.900000000...
2025-07-15 21:50:08,391 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:08,768 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:08,775 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:08,775 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:08,777 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:08,778 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:09,795 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:09,802 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:09,802 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:09,804 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:09,805 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:10,668 - WARNING - app - No user data found for user 5 (live). Skipping portfolio update.
2025-07-15 21:50:10,673 - WARNING - app - No group settings found for group string. Skipping portfolio update for user 8.
2025-07-15 21:50:10,733 - DEBUG - app.firebase_stream - Firebase listener triggered (105). Event Type: patch, Path: /. Timestamp: 1752641410.7334244
2025-07-15 21:50:10,733 - DEBUG - app.firebase_stream - Prepared batch update for 33 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0072000000'}, 'XAGUSD': {'b': '37.8430000000', 'o': '37.8360000000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6240000000'}, 'GBPAUD': {'b': '2.0531100000',
2025-07-15 21:50:10,734 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0072000000'}, 'XAGUSD': {'b': '37.8430000000', 'o': '37.8360000000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6240000000'}, 'GBPAUD': {'b': '2.0531100000',...
2025-07-15 21:50:10,734 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:10,807 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:10,810 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:10,810 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:10,812 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:10,812 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:11,238 - DEBUG - app.services.portfolio_calculator - Position calculation for XAGUSD: Type=BUY, Entry=41.09800000, Current=37.823499999999996, Quantity=0.01000000, Contract Size=5000.00000000, PnL=-163.7250000000002000000000000, PnL USD=-163.7250000000002000000000000, Commission=0.10000000, Final PnL=-163.8250000000002000000000000
2025-07-15 21:50:11,238 - DEBUG - app.services.portfolio_calculator - Position calculation for BTCUSD: Type=BUY, Entry=132091.90000000, Current=117491.0, Quantity=6.00000000, Contract Size=1.00000000, PnL=-87605.40000000000000000000000, PnL USD=-87605.40000000000000000000000, Commission=3661.62000000, Final PnL=-91267.02000000000000000000000
2025-07-15 21:50:11,238 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 63.42990830359013470847797040% which is below threshold 100.0%
2025-07-15 21:50:11,648 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=96.66800000, Current=97.164, Quantity=0.01000000, Contract Size=100000.00000000, PnL=496.000000000000000000000000, PnL USD=3.328479301019346785937174953, Commission=0.10000000, Final PnL=3.228479301019346785937174953
2025-07-15 21:50:11,649 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=SELL, Entry=96.56000000, Current=97.271, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-711.000000000000000000000000, PnL USD=-4.771267707711200735486555225, Commission=0.10000000, Final PnL=-4.871267707711200735486555225
2025-07-15 21:50:11,649 - WARNING - app - User 2 has no group_name set. Skipping portfolio update.
2025-07-15 21:50:11,651 - WARNING - app - No group settings found for group string. Skipping portfolio update for user 3.
2025-07-15 21:50:11,665 - WARNING - app - User 5 has no group_name set. Skipping portfolio update.
2025-07-15 21:50:11,666 - WARNING - app - User 6 has no group_name set. Skipping portfolio update.
2025-07-15 21:50:12,058 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDUSD: Type=BUY, Entry=0.64743000, Current=0.65225, Quantity=0.10000000, Contract Size=100000.00000000, PnL=48.200000000000000000000000, PnL USD=48.200000000000000000000000, Commission=1.00000000, Final PnL=47.200000000000000000000000
2025-07-15 21:50:12,058 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDUSD: Type=SELL, Entry=0.64707000, Current=0.65255, Quantity=0.22000000, Contract Size=100000.00000000, PnL=-120.560000000000000000000000, PnL USD=-120.560000000000000000000000, Commission=2.20000000, Final PnL=-122.760000000000000000000000
2025-07-15 21:50:12,059 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:12,060 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFSGD: Type=BUY, Entry=1.57561500, Current=1.602945, Quantity=0.10000000, Contract Size=100000.00000000, PnL=273.300000000000000000000000, PnL USD=212.6765495506011439243609198, Commission=1.00000000, Final PnL=211.6765495506011439243609198
2025-07-15 21:50:12,061 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFSGD: Type=SELL, Entry=1.57505500, Current=1.603375, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-283.200000000000000000000000, PnL USD=-220.3805299404692424419283296, Commission=1.00000000, Final PnL=-221.3805299404692424419283296
2025-07-15 21:50:12,062 - DEBUG - app.services.portfolio_calculator - Position calculation for CADJPY: Type=SELL, Entry=106.24150000, Current=108.6585, Quantity=0.15000000, Contract Size=100000.00000000, PnL=-36255.00000000000000000000000, PnL USD=-243.2943892307589067019199152, Commission=0E-8, Final PnL=-243.2943892307589067019199152
2025-07-15 21:50:12,063 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:12,063 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:12,063 - DEBUG - app.services.portfolio_calculator - Position calculation for CADJPY: Type=BUY, Entry=106.27050000, Current=108.6245, Quantity=0.15000000, Contract Size=100000.00000000, PnL=35310.00000000000000000000000, PnL USD=236.9528308850668044585517089, Commission=0E-8, Final PnL=236.9528308850668044585517089
2025-07-15 21:50:12,063 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=BUY, Entry=1.77481000, Current=1.78054, Quantity=0.22000000, Contract Size=100000.00000000, PnL=126.060000000000000000000000, PnL USD=82.24154400000000000000000000, Commission=2.20000000, Final PnL=80.04154400000000000000000000
2025-07-15 21:50:12,063 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=SELL, Entry=1.77439000, Current=1.78095, Quantity=0.21000000, Contract Size=100000.00000000, PnL=-137.760000000000000000000000, PnL USD=-89.87462400000000000000000000, Commission=2.10000000, Final PnL=-91.97462400000000000000000000
2025-07-15 21:50:12,064 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFJPY: Type=BUY, Entry=178.15500000, Current=185.88500000000002, Quantity=0.10000000, Contract Size=100000.00000000, PnL=77300.00000000020000000000000, PnL USD=518.7327620338632505016206205, Commission=1.00000000, Final PnL=517.7327620338632505016206205
2025-07-15 21:50:12,064 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:12,064 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFJPY: Type=SELL, Entry=178.09500000, Current=185.93499999999997, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-78399.99999999970000000000000, PnL USD=-526.1144701611205432937181664, Commission=1.00000000, Final PnL=-527.1144701611205432937181664
2025-07-15 21:50:12,064 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=BUY, Entry=1.77480000, Current=1.78054, Quantity=0.05000000, Contract Size=100000.00000000, PnL=28.700000000000000000000000, PnL USD=18.72388000000000000000000000, Commission=0.50000000, Final PnL=18.22388000000000000000000000
2025-07-15 21:50:12,064 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=SELL, Entry=1.77442000, Current=1.78095, Quantity=0.05000000, Contract Size=100000.00000000, PnL=-32.650000000000000000000000, PnL USD=-21.30086000000000000000000000, Commission=0.50000000, Final PnL=-21.80086000000000000000000000
2025-07-15 21:50:12,064 - DEBUG - app.services.portfolio_calculator - Position calculation for EURGBP: Type=SELL, Entry=0.85403000, Current=0.86754, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-135.100000000000000000000000, PnL USD=-180.9529400000000000000000000, Commission=1.00000000, Final PnL=-181.9529400000000000000000000
2025-07-15 21:50:12,064 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:12,065 - DEBUG - app.services.portfolio_calculator - Position calculation for EURJPY: Type=BUY, Entry=167.26050000, Current=173.0995, Quantity=0.10000000, Contract Size=100000.00000000, PnL=58390.00000000000000000000000, PnL USD=391.8344886824993121590154143, Commission=1.00000000, Final PnL=390.8344886824993121590154143
2025-07-15 21:50:12,065 - DEBUG - app.services.portfolio_calculator - Position calculation for EURJPY: Type=SELL, Entry=167.23150000, Current=173.1345, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-59030.00000000000000000000000, PnL USD=-396.1293006838145983344182207, Commission=1.00000000, Final PnL=-397.1293006838145983344182207
2025-07-15 21:50:12,065 - DEBUG - app.services.portfolio_calculator - Position calculation for EURNZD: Type=SELL, Entry=1.91952500, Current=1.953325, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-338.000000000000000000000000, PnL USD=-201.0559200000000000000000000, Commission=1.00000000, Final PnL=-202.0559200000000000000000000
2025-07-15 21:50:12,065 - DEBUG - app.services.portfolio_calculator - Position calculation for EURNZD: Type=BUY, Entry=1.92063500, Current=1.952895, Quantity=0.10000000, Contract Size=100000.00000000, PnL=322.600000000000000000000000, PnL USD=191.8953840000000000000000000, Commission=1.00000000, Final PnL=190.8953840000000000000000000
2025-07-15 21:50:12,065 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=SELL, Entry=1.34376000, Current=1.3395, Quantity=0.25000000, Contract Size=0E-8, PnL=0E-24, PnL USD=0E-24, Commission=2.50000000, Final PnL=-2.500000000000000000000000
2025-07-15 21:50:12,065 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=SELL, Entry=1.34361000, Current=1.3395, Quantity=0.25000000, Contract Size=0E-8, PnL=0E-24, PnL USD=0E-24, Commission=2.50000000, Final PnL=-2.500000000000000000000000
2025-07-15 21:50:12,065 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=BUY, Entry=1.34379000, Current=1.33929, Quantity=0.25000000, Contract Size=0E-8, PnL=-0E-24, PnL USD=-0E-24, Commission=2.50000000, Final PnL=-2.500000000000000000000000
2025-07-15 21:50:12,065 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=BUY, Entry=1.34378000, Current=1.33929, Quantity=0.25000000, Contract Size=0E-8, PnL=-0E-24, PnL USD=-0E-24, Commission=2.50000000, Final PnL=-2.500000000000000000000000
2025-07-15 21:50:12,066 - DEBUG - app.services.portfolio_calculator - Position calculation for NZDJPY: Type=BUY, Entry=87.10150000, Current=88.61149999999999, Quantity=0.01000000, Contract Size=100000.00000000, PnL=1509.999999999990000000000000, PnL USD=10.13307206560318621365347578, Commission=0.10000000, Final PnL=10.03307206560318621365347578
2025-07-15 21:50:12,066 - DEBUG - app.services.portfolio_calculator - Position calculation for USDCHF: Type=SELL, Entry=0.81771000, Current=0.80167, Quantity=0.15000000, Contract Size=100000.00000000, PnL=240.600000000000000000000000, PnL USD=300.1796586485677213294739994, Commission=1.50000000, Final PnL=298.6796586485677213294739994
2025-07-15 21:50:12,066 - DEBUG - app.services.portfolio_calculator - Position calculation for USDCHF: Type=BUY, Entry=0.81805000, Current=0.80136, Quantity=0.15000000, Contract Size=100000.00000000, PnL=-250.350000000000000000000000, PnL USD=-312.3440463120071863459427089, Commission=1.50000000, Final PnL=-313.8440463120071863459427089
2025-07-15 21:50:12,067 - DEBUG - app.services.portfolio_calculator - Position calculation for USDNOK: Type=BUY, Entry=10.04973000, Current=10.23964, Quantity=0.10000000, Contract Size=100000.00000000, PnL=1899.100000000000000000000000, PnL USD=185.4274761905691806275105597, Commission=1.00000000, Final PnL=184.4274761905691806275105597
2025-07-15 21:50:12,067 - DEBUG - app.services.portfolio_calculator - Position calculation for USDNOK: Type=BUY, Entry=10.05023000, Current=10.23964, Quantity=0.10000000, Contract Size=100000.00000000, PnL=1894.100000000000000000000000, PnL USD=184.9392778961387420496907752, Commission=1.00000000, Final PnL=183.9392778961387420496907752
2025-07-15 21:50:12,067 - DEBUG - app.services.portfolio_calculator - Position calculation for USDSGD: Type=SELL, Entry=1.28795000, Current=1.2852000000000001, Quantity=0.31000000, Contract Size=100000.00000000, PnL=85.24999999999690000000000000, PnL USD=66.33983113497288043266798957, Commission=3.10000000, Final PnL=63.23983113497288043266798957
2025-07-15 21:50:12,068 - DEBUG - app.services.portfolio_calculator - Position calculation for USDTRY: Type=SELL, Entry=39.56087000, Current=40.26134, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-7004.700000000000000000000000, PnL USD=-173.9814446617201329617927339, Commission=1.00000000, Final PnL=-174.9814446617201329617927339
2025-07-15 21:50:12,429 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89752000, Current=0.89477, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-2.750000000000000000000000, PnL USD=-2.004811547714514835605453087, Commission=0.10000000, Final PnL=-2.104811547714514835605453087
2025-07-15 21:50:12,985 - DEBUG - app.firebase_stream - Firebase listener triggered (106). Event Type: patch, Path: /. Timestamp: 1752641412.9856153
2025-07-15 21:50:12,985 - DEBUG - app.firebase_stream - Prepared batch update for 21 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0067700000'}, 'NZDJPY': {'b': '88.6360000000', 'o': '88.6260000000'}, 'GBPAUD': {'b': '2.0531000000', 'o': '2.0529600000'}, 'USDJPY': {'b': '149.0170000000',
2025-07-15 21:50:12,986 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0067700000'}, 'NZDJPY': {'b': '88.6360000000', 'o': '88.6260000000'}, 'GBPAUD': {'b': '2.0531000000', 'o': '2.0529600000'}, 'USDJPY': {'b': '149.0170000000',...
2025-07-15 21:50:12,986 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:13,067 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:13,071 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:13,071 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:13,071 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:13,072 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:14,087 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:14,090 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:14,090 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:14,091 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:14,092 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:15,106 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:15,109 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:15,109 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:15,110 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:15,110 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:15,348 - DEBUG - app.firebase_stream - Firebase listener triggered (107). Event Type: patch, Path: /. Timestamp: 1752641415.3488865
2025-07-15 21:50:15,349 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0117000000', 'o': '13.0067700000'}, 'XAGUSD': {'b': '37.8400000000', 'o': '37.8320000000'}, 'NZDJPY': {'b': '88.6380000000', 'o': '88.6270000000'}, 'GBPAUD': {'b': '2.0531200000',
2025-07-15 21:50:15,349 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0117000000', 'o': '13.0067700000'}, 'XAGUSD': {'b': '37.8400000000', 'o': '37.8320000000'}, 'NZDJPY': {'b': '88.6380000000', 'o': '88.6270000000'}, 'GBPAUD': {'b': '2.0531200000',...
2025-07-15 21:50:15,349 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:16,125 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:16,133 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:16,133 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:16,134 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:16,135 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:17,148 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:17,156 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:17,156 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:17,158 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:17,158 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:17,595 - DEBUG - app.firebase_stream - Firebase listener triggered (108). Event Type: patch, Path: /. Timestamp: 1752641417.5958192
2025-07-15 21:50:17,596 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0060000000'}, 'XAGUSD': {'b': '37.8390000000', 'o': '37.8320000000'}, 'NZDJPY': {'b': '88.6380000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0531800000',
2025-07-15 21:50:17,596 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0060000000'}, 'XAGUSD': {'b': '37.8390000000', 'o': '37.8320000000'}, 'NZDJPY': {'b': '88.6380000000', 'o': '88.6290000000'}, 'GBPAUD': {'b': '2.0531800000',...
2025-07-15 21:50:17,596 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:18,171 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:18,175 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:18,175 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:18,176 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:18,177 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:19,187 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:19,191 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:19,191 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:19,192 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:19,193 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:19,949 - DEBUG - app.firebase_stream - Firebase listener triggered (109). Event Type: patch, Path: /. Timestamp: 1752641419.9492373
2025-07-15 21:50:19,949 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0066500000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8320000000'}, 'NZDJPY': {'b': '88.6340000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0531300000',
2025-07-15 21:50:19,950 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0066500000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8320000000'}, 'NZDJPY': {'b': '88.6340000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0531300000',...
2025-07-15 21:50:19,950 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:20,202 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:20,205 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:20,205 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:20,206 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:20,207 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:21,223 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:21,229 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:21,230 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:21,231 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:21,232 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:22,240 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:22,245 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:22,246 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:22,247 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:22,247 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:22,305 - DEBUG - app.firebase_stream - Firebase listener triggered (110). Event Type: patch, Path: /. Timestamp: 1752641422.3051775
2025-07-15 21:50:22,305 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0065800000'}, 'NZDJPY': {'b': '88.6340000000', 'o': '88.6260000000'}, 'GBPAUD': {'b': '2.0531400000', 'o': '2.0530000000'}, 'BTCUSD': {'b': '117541.100000000
2025-07-15 21:50:22,305 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0065800000'}, 'NZDJPY': {'b': '88.6340000000', 'o': '88.6260000000'}, 'GBPAUD': {'b': '2.0531400000', 'o': '2.0530000000'}, 'BTCUSD': {'b': '117541.100000000...
2025-07-15 21:50:22,305 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:23,252 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:23,255 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:23,255 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:23,256 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:23,256 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:24,268 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:24,274 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:24,274 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:24,276 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:24,277 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:24,560 - DEBUG - app.firebase_stream - Firebase listener triggered (111). Event Type: patch, Path: /. Timestamp: 1752641424.5601583
2025-07-15 21:50:24,560 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0066000000'}, 'XAGUSD': {'b': '37.8420000000', 'o': '37.8320000000'}, 'NZDJPY': {'b': '88.6340000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0531300000',
2025-07-15 21:50:24,560 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0066000000'}, 'XAGUSD': {'b': '37.8420000000', 'o': '37.8320000000'}, 'NZDJPY': {'b': '88.6340000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0531300000',...
2025-07-15 21:50:24,560 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:25,284 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:25,290 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:25,291 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:25,293 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:25,294 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:26,302 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:26,309 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:26,309 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:26,311 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:26,312 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:26,919 - DEBUG - app.firebase_stream - Firebase listener triggered (112). Event Type: patch, Path: /. Timestamp: 1752641426.9194322
2025-07-15 21:50:26,919 - DEBUG - app.firebase_stream - Prepared batch update for 38 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0066200000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6240000000'}, 'GBPAUD': {'b': '2.0530900000', 'o': '2.0529600000'}, 'BTCUSD': {'b': '117517.700000000
2025-07-15 21:50:26,919 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0066200000'}, 'NZDJPY': {'b': '88.6330000000', 'o': '88.6240000000'}, 'GBPAUD': {'b': '2.0530900000', 'o': '2.0529600000'}, 'BTCUSD': {'b': '117517.700000000...
2025-07-15 21:50:26,919 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:27,320 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:27,326 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:27,326 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:27,327 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:27,328 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:28,338 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:28,341 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:28,341 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:28,342 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:28,343 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:29,270 - DEBUG - app.firebase_stream - Firebase listener triggered (113). Event Type: patch, Path: /. Timestamp: 1752641429.2707355
2025-07-15 21:50:29,271 - DEBUG - app.firebase_stream - Prepared batch update for 37 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0063800000'}, 'XAGUSD': {'b': '37.8390000000', 'o': '37.8320000000'}, 'NZDJPY': {'b': '88.6340000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0530100000',
2025-07-15 21:50:29,272 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0063800000'}, 'XAGUSD': {'b': '37.8390000000', 'o': '37.8320000000'}, 'NZDJPY': {'b': '88.6340000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0530100000',...
2025-07-15 21:50:29,272 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:29,344 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:29,347 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:29,347 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:29,348 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:29,348 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:30,349 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:30,354 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:30,354 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:30,355 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:30,355 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:31,362 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:31,370 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:31,371 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:31,374 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:31,375 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:31,524 - DEBUG - app.firebase_stream - Firebase listener triggered (114). Event Type: patch, Path: /. Timestamp: 1752641431.52469
2025-07-15 21:50:31,525 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0063800000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8270000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6240000000'}, 'GBPAUD': {'b': '2.0531200000',
2025-07-15 21:50:31,525 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0063800000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8270000000'}, 'NZDJPY': {'b': '88.6320000000', 'o': '88.6240000000'}, 'GBPAUD': {'b': '2.0531200000',...
2025-07-15 21:50:31,525 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:32,381 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:32,390 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:32,390 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:32,393 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:32,394 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:33,403 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:33,409 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:33,409 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:33,411 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:33,411 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:33,830 - DEBUG - app.firebase_stream - Firebase listener triggered (115). Event Type: patch, Path: /. Timestamp: 1752641433.8303707
2025-07-15 21:50:33,830 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0062800000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8320000000'}, 'NZDJPY': {'b': '88.6290000000', 'o': '88.6200000000'}, 'GBPAUD': {'b': '2.0530700000',
2025-07-15 21:50:33,831 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0062800000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8320000000'}, 'NZDJPY': {'b': '88.6290000000', 'o': '88.6200000000'}, 'GBPAUD': {'b': '2.0530700000',...
2025-07-15 21:50:33,831 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:34,417 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:34,425 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:34,425 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:34,426 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:34,426 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:35,441 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:35,446 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:35,446 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:35,448 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:35,448 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:36,235 - DEBUG - app.firebase_stream - Firebase listener triggered (116). Event Type: patch, Path: /. Timestamp: 1752641436.2350955
2025-07-15 21:50:36,235 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0108000000', 'o': '13.0059400000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8270000000'}, 'NZDJPY': {'b': '88.6350000000', 'o': '88.6280000000'}, 'GBPAUD': {'b': '2.0531500000',
2025-07-15 21:50:36,235 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0108000000', 'o': '13.0059400000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8270000000'}, 'NZDJPY': {'b': '88.6350000000', 'o': '88.6280000000'}, 'GBPAUD': {'b': '2.0531500000',...
2025-07-15 21:50:36,235 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:36,451 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:36,455 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:36,455 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:36,456 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:36,457 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:37,462 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:37,470 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:37,470 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:37,471 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:37,472 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:38,488 - DEBUG - app.firebase_stream - Firebase listener triggered (117). Event Type: patch, Path: /. Timestamp: 1752641438.4889078
2025-07-15 21:50:38,489 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0061300000'}, 'XAGUSD': {'b': '37.8330000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6200000000'}, 'GBPAUD': {'b': '2.0531400000',
2025-07-15 21:50:38,489 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:38,490 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0061300000'}, 'XAGUSD': {'b': '37.8330000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6200000000'}, 'GBPAUD': {'b': '2.0531400000',...
2025-07-15 21:50:38,491 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:38,500 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:38,501 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:38,516 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:38,518 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:39,531 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:39,538 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:39,539 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:39,541 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:39,541 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:40,548 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:40,554 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:40,555 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:40,557 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:40,558 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:40,837 - DEBUG - app.firebase_stream - Firebase listener triggered (118). Event Type: patch, Path: /. Timestamp: 1752641440.8379443
2025-07-15 21:50:40,838 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0065800000'}, 'NZDJPY': {'b': '88.6340000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0530100000'}, 'USDJPY': {'b': '149.0180000000',
2025-07-15 21:50:40,838 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0065800000'}, 'NZDJPY': {'b': '88.6340000000', 'o': '88.6250000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0530100000'}, 'USDJPY': {'b': '149.0180000000',...
2025-07-15 21:50:40,838 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:41,561 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:41,570 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:41,570 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:41,572 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:41,572 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:42,588 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:42,594 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:42,594 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:42,595 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:42,596 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:43,101 - DEBUG - app.firebase_stream - Firebase listener triggered (119). Event Type: patch, Path: /. Timestamp: 1752641443.1009417
2025-07-15 21:50:43,101 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0060400000'}, 'XAGUSD': {'b': '37.8320000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0531500000',
2025-07-15 21:50:43,101 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0060400000'}, 'XAGUSD': {'b': '37.8320000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0531500000',...
2025-07-15 21:50:43,101 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:43,600 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:43,607 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:43,607 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:43,608 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:43,608 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:44,614 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:44,618 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:44,619 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:44,619 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:44,620 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:45,452 - DEBUG - app.firebase_stream - Firebase listener triggered (120). Event Type: patch, Path: /. Timestamp: 1752641445.4529347
2025-07-15 21:50:45,453 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0062600000'}, 'NZDJPY': {'b': '88.6310000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0529800000'}, 'USDJPY': {'b': '149.0190000000',
2025-07-15 21:50:45,453 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0062600000'}, 'NZDJPY': {'b': '88.6310000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0529800000'}, 'USDJPY': {'b': '149.0190000000',...
2025-07-15 21:50:45,453 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:45,621 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:45,624 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:45,624 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:45,625 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:45,625 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:46,630 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:46,636 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:46,636 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:46,638 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:46,639 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:47,642 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:47,645 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:47,645 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:47,646 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:47,646 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:47,704 - DEBUG - app.firebase_stream - Firebase listener triggered (121). Event Type: patch, Path: /. Timestamp: 1752641447.7042801
2025-07-15 21:50:47,704 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0062700000'}, 'XAGUSD': {'b': '37.8330000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6310000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0531500000',
2025-07-15 21:50:47,704 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0062700000'}, 'XAGUSD': {'b': '37.8330000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6310000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0531500000',...
2025-07-15 21:50:47,704 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:48,655 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:48,661 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:48,661 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:48,663 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:48,664 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:49,673 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:49,678 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:49,679 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:49,680 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:49,681 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:50,056 - DEBUG - app.firebase_stream - Firebase listener triggered (122). Event Type: patch, Path: /. Timestamp: 1752641450.0561574
2025-07-15 21:50:50,056 - DEBUG - app.firebase_stream - Prepared batch update for 21 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0063900000'}, 'XAGUSD': {'b': '37.8360000000', 'o': '37.8280000000'}, 'NZDJPY': {'b': '88.6290000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0531500000',
2025-07-15 21:50:50,056 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0063900000'}, 'XAGUSD': {'b': '37.8360000000', 'o': '37.8280000000'}, 'NZDJPY': {'b': '88.6290000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0531500000',...
2025-07-15 21:50:50,057 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:50,696 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:50,701 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:50,701 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:50,703 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:50,704 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:51,717 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:51,721 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:51,721 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:51,722 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:51,723 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:52,310 - DEBUG - app.firebase_stream - Firebase listener triggered (123). Event Type: patch, Path: /. Timestamp: 1752641452.3104615
2025-07-15 21:50:52,311 - DEBUG - app.firebase_stream - Prepared batch update for 15 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0064700000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6200000000'}, 'GBPAUD': {'b': '2.0531400000', 'o': '2.0530200000'}, 'USDJPY': {'b': '149.0180000000',
2025-07-15 21:50:52,311 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0064700000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6200000000'}, 'GBPAUD': {'b': '2.0531400000', 'o': '2.0530200000'}, 'USDJPY': {'b': '149.0180000000',...
2025-07-15 21:50:52,311 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:52,739 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:52,744 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:52,744 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:52,746 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:52,747 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:53,759 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:53,767 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:53,767 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:53,769 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:53,770 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:54,659 - DEBUG - app.firebase_stream - Firebase listener triggered (124). Event Type: patch, Path: /. Timestamp: 1752641454.659798
2025-07-15 21:50:54,660 - DEBUG - app.firebase_stream - Prepared batch update for 16 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0063900000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0530000000'}, 'USDCNH': {'b': '7.1839700000', '
2025-07-15 21:50:54,660 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0063900000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0530000000'}, 'USDCNH': {'b': '7.1839700000', '...
2025-07-15 21:50:54,660 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:54,773 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:54,776 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:54,776 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:54,777 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:54,777 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:55,787 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:55,790 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:55,790 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:55,792 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:55,792 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:56,802 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:56,808 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:56,809 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:56,809 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:56,810 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:56,916 - DEBUG - app.firebase_stream - Firebase listener triggered (125). Event Type: patch, Path: /. Timestamp: 1752641456.9168487
2025-07-15 21:50:56,917 - DEBUG - app.firebase_stream - Prepared batch update for 19 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0057000000'}, 'XAGUSD': {'b': '37.8320000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0531500000',
2025-07-15 21:50:56,917 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0057000000'}, 'XAGUSD': {'b': '37.8320000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0531500000',...
2025-07-15 21:50:56,918 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:57,813 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:57,817 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:57,817 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:57,819 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:57,820 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:58,828 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:58,834 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:58,834 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:58,836 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:58,836 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:50:59,272 - DEBUG - app.firebase_stream - Firebase listener triggered (126). Event Type: patch, Path: /. Timestamp: 1752641459.2725782
2025-07-15 21:50:59,273 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0068000000'}, 'XAGUSD': {'b': '37.8360000000', 'o': '37.8280000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6200000000'}, 'GBPAUD': {'b': '2.0531400000',
2025-07-15 21:50:59,273 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0068000000'}, 'XAGUSD': {'b': '37.8360000000', 'o': '37.8280000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6200000000'}, 'GBPAUD': {'b': '2.0531400000',...
2025-07-15 21:50:59,274 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:50:59,851 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:50:59,855 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:50:59,855 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:50:59,856 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:50:59,856 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:00,861 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:00,865 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:00,865 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:00,867 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:00,868 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:01,523 - DEBUG - app.firebase_stream - Firebase listener triggered (127). Event Type: patch, Path: /. Timestamp: 1752641461.523377
2025-07-15 21:51:01,523 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.6290000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0529900000'}, 'BTCUSD': {'b': '117507.4000000000', 'o': '117507.3000000000'}, 'USDJPY': {'b': '149.0180
2025-07-15 21:51:01,523 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.6290000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0529900000'}, 'BTCUSD': {'b': '117507.4000000000', 'o': '117507.3000000000'}, 'USDJPY': {'b': '149.0180...
2025-07-15 21:51:01,524 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:01,876 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:01,880 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:01,880 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:01,882 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:01,883 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:02,898 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:02,903 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:02,903 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:02,905 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:02,906 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:03,880 - DEBUG - app.firebase_stream - Firebase listener triggered (128). Event Type: patch, Path: /. Timestamp: 1752641463.8802917
2025-07-15 21:51:03,880 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0063900000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0531400000', 'o': '2.0529800000'}, 'BTCUSD': {'b': '117515.200000000
2025-07-15 21:51:03,880 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0063900000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0531400000', 'o': '2.0529800000'}, 'BTCUSD': {'b': '117515.200000000...
2025-07-15 21:51:03,881 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:03,909 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:03,914 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:03,914 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:03,918 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:03,920 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:04,924 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:04,930 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:04,930 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:04,932 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:04,933 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:05,940 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:05,945 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:05,945 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:05,947 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:05,947 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:06,135 - DEBUG - app.firebase_stream - Firebase listener triggered (129). Event Type: patch, Path: /. Timestamp: 1752641466.135578
2025-07-15 21:51:06,135 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0063700000'}, 'NZDJPY': {'b': '88.6290000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0531900000', 'o': '2.0530200000'}, 'USDJPY': {'b': '149.0090000000',
2025-07-15 21:51:06,136 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0063700000'}, 'NZDJPY': {'b': '88.6290000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0531900000', 'o': '2.0530200000'}, 'USDJPY': {'b': '149.0090000000',...
2025-07-15 21:51:06,136 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:06,961 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:06,967 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:06,967 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:06,969 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:06,970 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:07,978 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:07,983 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:07,983 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:07,985 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:07,985 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:08,491 - DEBUG - app.firebase_stream - Firebase listener triggered (130). Event Type: patch, Path: /. Timestamp: 1752641468.4914665
2025-07-15 21:51:08,491 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0066800000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0529900000'}, 'USDJPY': {'b': '149.0180000000',
2025-07-15 21:51:08,492 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0066800000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0529900000'}, 'USDJPY': {'b': '149.0180000000',...
2025-07-15 21:51:08,493 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:08,992 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:08,996 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:08,996 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:08,997 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:08,997 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:10,002 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:10,006 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:10,006 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:10,007 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:10,007 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:10,665 - WARNING - app - No user data found for user 5 (live). Skipping portfolio update.
2025-07-15 21:51:10,670 - WARNING - app - No group settings found for group string. Skipping portfolio update for user 8.
2025-07-15 21:51:10,836 - DEBUG - app.firebase_stream - Firebase listener triggered (131). Event Type: patch, Path: /. Timestamp: 1752641470.8368485
2025-07-15 21:51:10,837 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.6290000000', 'o': '88.6190000000'}, 'GBPAUD': {'b': '2.0531800000', 'o': '2.0530100000'}, 'BTCUSD': {'b': '117517.6000000000', 'o': '117517.5000000000'}, 'USDJPY': {'b': '149.0140
2025-07-15 21:51:10,837 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'NZDJPY': {'b': '88.6290000000', 'o': '88.6190000000'}, 'GBPAUD': {'b': '2.0531800000', 'o': '2.0530100000'}, 'BTCUSD': {'b': '117517.6000000000', 'o': '117517.5000000000'}, 'USDJPY': {'b': '149.0140...
2025-07-15 21:51:10,837 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:11,346 - DEBUG - app.services.portfolio_calculator - Position calculation for XAGUSD: Type=BUY, Entry=41.09800000, Current=37.8155, Quantity=0.01000000, Contract Size=5000.00000000, PnL=-164.125000000000000000000000, PnL USD=-164.125000000000000000000000, Commission=0.10000000, Final PnL=-164.225000000000000000000000
2025-07-15 21:51:11,346 - DEBUG - app.services.portfolio_calculator - Position calculation for BTCUSD: Type=BUY, Entry=132091.90000000, Current=117465.1, Quantity=6.00000000, Contract Size=1.00000000, PnL=-87760.80000000000000000000000, PnL USD=-87760.80000000000000000000000, Commission=3661.62000000, Final PnL=-91422.42000000000000000000000
2025-07-15 21:51:11,346 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 63.32354890590108289295104116% which is below threshold 100.0%
2025-07-15 21:51:11,347 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:11,350 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:11,350 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:11,352 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:11,352 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:11,757 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=96.66800000, Current=97.154, Quantity=0.01000000, Contract Size=100000.00000000, PnL=486.000000000000000000000000, PnL USD=3.261438522554927724911753258, Commission=0.10000000, Final PnL=3.161438522554927724911753258
2025-07-15 21:51:11,758 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=SELL, Entry=96.56000000, Current=97.261, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-701.000000000000000000000000, PnL USD=-4.704255975948568590870656448, Commission=0.10000000, Final PnL=-4.804255975948568590870656448
2025-07-15 21:51:11,760 - WARNING - app - User 2 has no group_name set. Skipping portfolio update.
2025-07-15 21:51:11,767 - WARNING - app - No group settings found for group string. Skipping portfolio update for user 3.
2025-07-15 21:51:11,788 - WARNING - app - User 5 has no group_name set. Skipping portfolio update.
2025-07-15 21:51:11,789 - WARNING - app - User 6 has no group_name set. Skipping portfolio update.
2025-07-15 21:51:12,165 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDUSD: Type=BUY, Entry=0.64743000, Current=0.6522, Quantity=0.10000000, Contract Size=100000.00000000, PnL=47.700000000000000000000000, PnL USD=47.700000000000000000000000, Commission=1.00000000, Final PnL=46.700000000000000000000000
2025-07-15 21:51:12,166 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDUSD: Type=SELL, Entry=0.64707000, Current=0.6525, Quantity=0.22000000, Contract Size=100000.00000000, PnL=-119.460000000000000000000000, PnL USD=-119.460000000000000000000000, Commission=2.20000000, Final PnL=-121.660000000000000000000000
2025-07-15 21:51:12,167 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFSGD: Type=BUY, Entry=1.57561500, Current=1.602875, Quantity=0.10000000, Contract Size=100000.00000000, PnL=272.600000000000000000000000, PnL USD=212.1285221816710373753958928, Commission=1.00000000, Final PnL=211.1285221816710373753958928
2025-07-15 21:51:12,168 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFSGD: Type=SELL, Entry=1.57505500, Current=1.603325, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-282.700000000000000000000000, PnL USD=-219.9880162170154155026574428, Commission=1.00000000, Final PnL=-220.9880162170154155026574428
2025-07-15 21:51:12,169 - DEBUG - app.services.portfolio_calculator - Position calculation for CADJPY: Type=SELL, Entry=106.24150000, Current=108.6525, Quantity=0.15000000, Contract Size=100000.00000000, PnL=-36165.00000000000000000000000, PnL USD=-242.6953172185163810111801576, Commission=0E-8, Final PnL=-242.6953172185163810111801576
2025-07-15 21:51:12,170 - DEBUG - app.services.portfolio_calculator - Position calculation for CADJPY: Type=BUY, Entry=106.27050000, Current=108.61749999999999, Quantity=0.15000000, Contract Size=100000.00000000, PnL=35204.99999999985000000000000, PnL USD=236.2529695196414430858845478, Commission=0E-8, Final PnL=236.2529695196414430858845478
2025-07-15 21:51:12,170 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=BUY, Entry=1.77481000, Current=1.7806, Quantity=0.22000000, Contract Size=100000.00000000, PnL=127.380000000000000000000000, PnL USD=83.09634300000000000000000000, Commission=2.20000000, Final PnL=80.89634300000000000000000000
2025-07-15 21:51:12,170 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=SELL, Entry=1.77439000, Current=1.7810000000000001, Quantity=0.21000000, Contract Size=100000.00000000, PnL=-138.8100000000021000000000000, PnL USD=-90.55270350000136993500000000, Commission=2.10000000, Final PnL=-92.65270350000136993500000000
2025-07-15 21:51:12,171 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFJPY: Type=BUY, Entry=178.15500000, Current=185.875, Quantity=0.10000000, Contract Size=100000.00000000, PnL=77200.00000000000000000000000, PnL USD=518.0721274511119760559410525, Commission=1.00000000, Final PnL=517.0721274511119760559410525
2025-07-15 21:51:12,172 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFJPY: Type=SELL, Entry=178.09500000, Current=185.915, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-78200.00000000000000000000000, PnL USD=-524.7829063041056545022615325, Commission=1.00000000, Final PnL=-525.7829063041056545022615325
2025-07-15 21:51:12,172 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=BUY, Entry=1.77480000, Current=1.7806, Quantity=0.05000000, Contract Size=100000.00000000, PnL=29.000000000000000000000000, PnL USD=18.91815000000000000000000000, Commission=0.50000000, Final PnL=18.41815000000000000000000000
2025-07-15 21:51:12,172 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=SELL, Entry=1.77442000, Current=1.7810000000000001, Quantity=0.05000000, Contract Size=100000.00000000, PnL=-32.90000000000050000000000000, PnL USD=-21.46231500000032617500000000, Commission=0.50000000, Final PnL=-21.96231500000032617500000000
2025-07-15 21:51:12,172 - DEBUG - app.services.portfolio_calculator - Position calculation for EURGBP: Type=SELL, Entry=0.85403000, Current=0.86754, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-135.100000000000000000000000, PnL USD=-180.9461850000000000000000000, Commission=1.00000000, Final PnL=-181.9461850000000000000000000
2025-07-15 21:51:12,173 - DEBUG - app.services.portfolio_calculator - Position calculation for EURJPY: Type=BUY, Entry=167.26050000, Current=173.09050000000002, Quantity=0.10000000, Contract Size=100000.00000000, PnL=58300.00000000020000000000000, PnL USD=391.2384071295327955762545801, Commission=1.00000000, Final PnL=390.2384071295327955762545801
2025-07-15 21:51:12,174 - DEBUG - app.services.portfolio_calculator - Position calculation for EURJPY: Type=SELL, Entry=167.23150000, Current=173.1225, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-58910.00000000000000000000000, PnL USD=-395.3319822298575972727394741, Commission=1.00000000, Final PnL=-396.3319822298575972727394741
2025-07-15 21:51:12,174 - DEBUG - app.services.portfolio_calculator - Position calculation for EURNZD: Type=SELL, Entry=1.91952500, Current=1.953515, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-339.900000000000000000000000, PnL USD=-202.1589240000000000000000000, Commission=1.00000000, Final PnL=-203.1589240000000000000000000
2025-07-15 21:51:12,174 - DEBUG - app.services.portfolio_calculator - Position calculation for EURNZD: Type=BUY, Entry=1.92063500, Current=1.953065, Quantity=0.10000000, Contract Size=100000.00000000, PnL=324.300000000000000000000000, PnL USD=192.8806680000000000000000000, Commission=1.00000000, Final PnL=191.8806680000000000000000000
2025-07-15 21:51:12,175 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=SELL, Entry=1.34376000, Current=1.33945, Quantity=0.25000000, Contract Size=0E-8, PnL=0E-24, PnL USD=0E-24, Commission=2.50000000, Final PnL=-2.500000000000000000000000
2025-07-15 21:51:12,175 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=SELL, Entry=1.34361000, Current=1.33945, Quantity=0.25000000, Contract Size=0E-8, PnL=0E-24, PnL USD=0E-24, Commission=2.50000000, Final PnL=-2.500000000000000000000000
2025-07-15 21:51:12,175 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=BUY, Entry=1.34379000, Current=1.33924, Quantity=0.25000000, Contract Size=0E-8, PnL=-0E-24, PnL USD=-0E-24, Commission=2.50000000, Final PnL=-2.500000000000000000000000
2025-07-15 21:51:12,175 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=BUY, Entry=1.34378000, Current=1.33924, Quantity=0.25000000, Contract Size=0E-8, PnL=-0E-24, PnL USD=-0E-24, Commission=2.50000000, Final PnL=-2.500000000000000000000000
2025-07-15 21:51:12,176 - DEBUG - app.services.portfolio_calculator - Position calculation for NZDJPY: Type=BUY, Entry=87.10150000, Current=88.6065, Quantity=0.01000000, Contract Size=100000.00000000, PnL=1505.000000000000000000000000, PnL USD=10.09972217375548606171232233, Commission=0.10000000, Final PnL=9.99972217375548606171232233
2025-07-15 21:51:12,176 - DEBUG - app.services.portfolio_calculator - Position calculation for USDCHF: Type=SELL, Entry=0.81771000, Current=0.80176, Quantity=0.15000000, Contract Size=100000.00000000, PnL=239.250000000000000000000000, PnL USD=298.4618455358590835942665386, Commission=1.50000000, Final PnL=296.9618455358590835942665386
2025-07-15 21:51:12,177 - DEBUG - app.services.portfolio_calculator - Position calculation for USDCHF: Type=BUY, Entry=0.81805000, Current=0.80144, Quantity=0.15000000, Contract Size=100000.00000000, PnL=-249.150000000000000000000000, PnL USD=-310.8119908683773905016154988, Commission=1.50000000, Final PnL=-312.3119908683773905016154988
2025-07-15 21:51:12,177 - DEBUG - app.services.portfolio_calculator - Position calculation for USDNOK: Type=BUY, Entry=10.04973000, Current=10.239690000000001, Quantity=0.10000000, Contract Size=100000.00000000, PnL=1899.600000000010000000000000, PnL USD=185.4605417955003656294635840, Commission=1.00000000, Final PnL=184.4605417955003656294635840
2025-07-15 21:51:12,178 - DEBUG - app.services.portfolio_calculator - Position calculation for USDNOK: Type=BUY, Entry=10.05023000, Current=10.239690000000001, Quantity=0.10000000, Contract Size=100000.00000000, PnL=1894.600000000010000000000000, PnL USD=184.9723849682854272494998833, Commission=1.00000000, Final PnL=183.9723849682854272494998833
2025-07-15 21:51:12,178 - DEBUG - app.services.portfolio_calculator - Position calculation for USDSGD: Type=SELL, Entry=1.28795000, Current=1.28522, Quantity=0.31000000, Contract Size=100000.00000000, PnL=84.630000000000000000000000, PnL USD=65.85633467437571494159851214, Commission=3.10000000, Final PnL=62.75633467437571494159851214
2025-07-15 21:51:12,179 - DEBUG - app.services.portfolio_calculator - Position calculation for USDTRY: Type=SELL, Entry=39.56087000, Current=40.2611900000, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-7003.200000000000000000000000, PnL USD=-173.9441879388065777489438340, Commission=1.00000000, Final PnL=-174.9441879388065777489438340
2025-07-15 21:51:12,574 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:12,575 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89752000, Current=0.89479, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-2.730000000000000000000000, PnL USD=-1.990129540666438251310350861, Commission=0.10000000, Final PnL=-2.090129540666438251310350861
2025-07-15 21:51:12,579 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:12,579 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:12,580 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:12,580 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:13,096 - DEBUG - app.firebase_stream - Firebase listener triggered (132). Event Type: patch, Path: /. Timestamp: 1752641473.0969508
2025-07-15 21:51:13,097 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0069000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0529700000'}, 'USDJPY': {'b': '149.0180000000',
2025-07-15 21:51:13,097 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0069000000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0529700000'}, 'USDJPY': {'b': '149.0180000000',...
2025-07-15 21:51:13,097 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:13,593 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:13,597 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:13,597 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:13,598 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:13,599 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:14,607 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:14,612 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:14,612 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:14,613 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:14,613 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:15,426 - DEBUG - app.firebase_stream - Firebase listener triggered (133). Event Type: patch, Path: /. Timestamp: 1752641475.425929
2025-07-15 21:51:15,426 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0063900000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6230000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0530100000'}, 'BTCUSD': {'b': '117532.700000000
2025-07-15 21:51:15,426 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0063900000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6230000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0530100000'}, 'BTCUSD': {'b': '117532.700000000...
2025-07-15 21:51:15,427 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:15,627 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:15,632 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:15,632 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:15,633 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:15,634 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:16,639 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:16,644 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:16,644 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:16,646 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:16,647 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:17,656 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:17,661 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:17,661 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:17,662 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:17,663 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:17,705 - DEBUG - app.firebase_stream - Firebase listener triggered (134). Event Type: patch, Path: /. Timestamp: 1752641477.7058275
2025-07-15 21:51:17,706 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0068200000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0531400000', 'o': '2.0530100000'}, 'BTCUSD': {'b': '117542.100000000
2025-07-15 21:51:17,706 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0068200000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0531400000', 'o': '2.0530100000'}, 'BTCUSD': {'b': '117542.100000000...
2025-07-15 21:51:17,706 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:18,666 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:18,671 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:18,671 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:18,673 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:18,674 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:19,681 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:19,686 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:19,686 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:19,687 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:19,687 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:19,972 - DEBUG - app.firebase_stream - Firebase listener triggered (135). Event Type: patch, Path: /. Timestamp: 1752641479.972849
2025-07-15 21:51:19,973 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0105000000', 'o': '13.0063400000'}, 'NZDJPY': {'b': '88.6290000000', 'o': '88.6230000000'}, 'GBPAUD': {'b': '2.0531200000', 'o': '2.0529600000'}, 'USDJPY': {'b': '149.0180000000',
2025-07-15 21:51:19,973 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0105000000', 'o': '13.0063400000'}, 'NZDJPY': {'b': '88.6290000000', 'o': '88.6230000000'}, 'GBPAUD': {'b': '2.0531200000', 'o': '2.0529600000'}, 'USDJPY': {'b': '149.0180000000',...
2025-07-15 21:51:19,973 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:20,696 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:20,702 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:20,703 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:20,704 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:20,705 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:21,721 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:21,725 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:21,726 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:21,727 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:21,728 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:22,342 - DEBUG - app.firebase_stream - Firebase listener triggered (136). Event Type: patch, Path: /. Timestamp: 1752641482.3422706
2025-07-15 21:51:22,342 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0064400000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0531200000', 'o': '2.0529300000'}, 'USDJPY': {'b': '149.0150000000',
2025-07-15 21:51:22,342 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0064400000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6210000000'}, 'GBPAUD': {'b': '2.0531200000', 'o': '2.0529300000'}, 'USDJPY': {'b': '149.0150000000',...
2025-07-15 21:51:22,343 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:22,733 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:22,736 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:22,736 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:22,737 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:22,737 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:23,743 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:23,748 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:23,748 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:23,750 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:23,751 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:24,615 - DEBUG - app.firebase_stream - Firebase listener triggered (137). Event Type: patch, Path: /. Timestamp: 1752641484.6155128
2025-07-15 21:51:24,615 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0067700000'}, 'NZDJPY': {'b': '88.6290000000', 'o': '88.6210000000'}, 'BTCUSD': {'b': '117548.1000000000', 'o': '117548.0000000000'}, 'USDJPY': {'b': '149.01
2025-07-15 21:51:24,616 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0067700000'}, 'NZDJPY': {'b': '88.6290000000', 'o': '88.6210000000'}, 'BTCUSD': {'b': '117548.1000000000', 'o': '117548.0000000000'}, 'USDJPY': {'b': '149.01...
2025-07-15 21:51:24,616 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:24,752 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:24,755 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:24,755 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:24,756 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:24,756 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:25,768 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:25,773 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:25,773 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:25,774 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:25,775 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:26,777 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:26,787 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:26,787 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:26,789 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:26,791 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:26,884 - DEBUG - app.firebase_stream - Firebase listener triggered (138). Event Type: patch, Path: /. Timestamp: 1752641486.8849237
2025-07-15 21:51:26,885 - DEBUG - app.firebase_stream - Prepared batch update for 16 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0066800000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0531200000', 'o': '2.0529400000'}, 'USDJPY': {'b': '149.0170000000',
2025-07-15 21:51:26,886 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0066800000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6220000000'}, 'GBPAUD': {'b': '2.0531200000', 'o': '2.0529400000'}, 'USDJPY': {'b': '149.0170000000',...
2025-07-15 21:51:26,887 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:27,794 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:27,799 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:27,800 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:27,802 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:27,803 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:28,809 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:28,818 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:28,818 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:28,820 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:28,820 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:29,275 - DEBUG - app.firebase_stream - Firebase listener triggered (139). Event Type: patch, Path: /. Timestamp: 1752641489.2752135
2025-07-15 21:51:29,275 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0108000000', 'o': '13.0062200000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8250000000'}, 'NZDJPY': {'b': '88.6280000000', 'o': '88.6200000000'}, 'GBPAUD': {'b': '2.0531200000',
2025-07-15 21:51:29,276 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0108000000', 'o': '13.0062200000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8250000000'}, 'NZDJPY': {'b': '88.6280000000', 'o': '88.6200000000'}, 'GBPAUD': {'b': '2.0531200000',...
2025-07-15 21:51:29,276 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:29,833 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:29,837 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:29,837 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:29,839 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:29,840 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:30,848 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:30,854 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:30,854 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:30,855 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:30,856 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:31,532 - DEBUG - app.firebase_stream - Firebase listener triggered (140). Event Type: patch, Path: /. Timestamp: 1752641491.532882
2025-07-15 21:51:31,533 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0069200000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6230000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0529600000'}, 'BTCUSD': {'b': '117548.200000000
2025-07-15 21:51:31,533 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0069200000'}, 'NZDJPY': {'b': '88.6300000000', 'o': '88.6230000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0529600000'}, 'BTCUSD': {'b': '117548.200000000...
2025-07-15 21:51:31,533 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:31,866 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:31,870 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:31,870 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:31,871 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:31,871 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:32,888 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:32,893 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:32,893 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:32,895 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:32,896 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:33,886 - DEBUG - app.firebase_stream - Firebase listener triggered (141). Event Type: patch, Path: /. Timestamp: 1752641493.8865192
2025-07-15 21:51:33,887 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0066700000'}, 'XAGUSD': {'b': '37.8300000000', 'o': '37.8230000000'}, 'NZDJPY': {'b': '88.6260000000', 'o': '88.6190000000'}, 'GBPAUD': {'b': '2.0531800000',
2025-07-15 21:51:33,887 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0066700000'}, 'XAGUSD': {'b': '37.8300000000', 'o': '37.8230000000'}, 'NZDJPY': {'b': '88.6260000000', 'o': '88.6190000000'}, 'GBPAUD': {'b': '2.0531800000',...
2025-07-15 21:51:33,887 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:33,902 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:33,917 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:33,917 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:33,920 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:33,922 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:34,936 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:34,942 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:34,942 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:34,944 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:34,945 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:35,948 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:35,953 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:35,954 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:35,955 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:35,956 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:36,139 - DEBUG - app.firebase_stream - Firebase listener triggered (142). Event Type: patch, Path: /. Timestamp: 1752641496.1391194
2025-07-15 21:51:36,139 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0108000000', 'o': '13.0060600000'}, 'NZDJPY': {'b': '88.6240000000', 'o': '88.6170000000'}, 'GBPAUD': {'b': '2.0531200000', 'o': '2.0529500000'}, 'BTCUSD': {'b': '117548.300000000
2025-07-15 21:51:36,139 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0108000000', 'o': '13.0060600000'}, 'NZDJPY': {'b': '88.6240000000', 'o': '88.6170000000'}, 'GBPAUD': {'b': '2.0531200000', 'o': '2.0529500000'}, 'BTCUSD': {'b': '117548.300000000...
2025-07-15 21:51:36,139 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:36,503 - INFO - app - Starting cache validation task
2025-07-15 21:51:36,508 - INFO - app - Validating cache for 31 users
2025-07-15 21:51:36,509 - WARNING - app - User 4: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,518 - WARNING - app - User 5: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,521 - WARNING - app - User 8: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,526 - WARNING - app - User 9: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,531 - WARNING - app - User 10: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,536 - WARNING - app - User 11: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,541 - WARNING - app - User 12: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,546 - WARNING - app - User 13: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,551 - WARNING - app - User 16: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,556 - WARNING - app - User 17: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,561 - WARNING - app - User 18: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,565 - WARNING - app - User 19: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,570 - WARNING - app - User 20: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,575 - WARNING - app - User 21: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,580 - WARNING - app - User 22: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,584 - WARNING - app - User 23: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,589 - WARNING - app - User 24: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,594 - WARNING - app - User 25: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,600 - WARNING - app - User 26: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,605 - WARNING - app - User 1: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,611 - WARNING - app - User 2: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,615 - WARNING - app - User 3: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,621 - WARNING - app - User 5: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,626 - WARNING - app - User 6: Missing balance/margin cache, refreshing...
2025-07-15 21:51:36,637 - INFO - app - Cache validation completed
2025-07-15 21:51:36,972 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:36,976 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:36,976 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:36,977 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:36,978 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:37,980 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:37,985 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:37,985 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:37,987 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:37,988 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:38,480 - DEBUG - app.firebase_stream - Firebase listener triggered (143). Event Type: patch, Path: /. Timestamp: 1752641498.4804764
2025-07-15 21:51:38,481 - DEBUG - app.firebase_stream - Prepared batch update for 21 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.6230000000', 'o': '88.6160000000'}, 'BTCUSD': {'b': '117549.3000000000', 'o': '117549.2000000000'}, 'CADCHF': {'b': '0.5844200000', 'o': '0.5843500000'}, 'EURNZD': {'b': '1.953370
2025-07-15 21:51:38,481 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.6230000000', 'o': '88.6160000000'}, 'BTCUSD': {'b': '117549.3000000000', 'o': '117549.2000000000'}, 'CADCHF': {'b': '0.5844200000', 'o': '0.5843500000'}, 'EURNZD': {'b': '1.953370...
2025-07-15 21:51:38,482 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:39,003 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:39,009 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:39,009 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:39,010 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:39,011 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:40,019 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:40,024 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:40,024 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:40,026 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:40,027 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:40,740 - DEBUG - app.firebase_stream - Firebase listener triggered (144). Event Type: patch, Path: /. Timestamp: 1752641500.7401066
2025-07-15 21:51:40,740 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.6310000000', 'o': '88.6210000000'}, 'BTCUSD': {'b': '117552.8000000000', 'o': '117552.7000000000'}, 'USDJPY': {'b': '149.0170000000', 'o': '149.0120000000'}, 'USDCNH': {'b': '7.18
2025-07-15 21:51:40,740 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.6310000000', 'o': '88.6210000000'}, 'BTCUSD': {'b': '117552.8000000000', 'o': '117552.7000000000'}, 'USDJPY': {'b': '149.0170000000', 'o': '149.0120000000'}, 'USDCNH': {'b': '7.18...
2025-07-15 21:51:40,741 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:41,030 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:41,033 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:41,033 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:41,034 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:41,035 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:42,038 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:42,041 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:42,041 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:42,042 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:42,042 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:43,051 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:43,054 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:43,055 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:43,055 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:43,056 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:43,102 - DEBUG - app.firebase_stream - Firebase listener triggered (145). Event Type: patch, Path: /. Timestamp: 1752641503.1023777
2025-07-15 21:51:43,103 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0108000000', 'o': '13.0060400000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8280000000'}, 'NZDJPY': {'b': '88.6240000000', 'o': '88.6150000000'}, 'GBPAUD': {'b': '2.0531200000',
2025-07-15 21:51:43,103 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0108000000', 'o': '13.0060400000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8280000000'}, 'NZDJPY': {'b': '88.6240000000', 'o': '88.6150000000'}, 'GBPAUD': {'b': '2.0531200000',...
2025-07-15 21:51:43,103 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:44,063 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:44,066 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:44,066 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:44,068 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:44,069 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:45,074 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:45,079 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:45,079 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:45,081 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:45,082 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:45,351 - DEBUG - app.firebase_stream - Firebase listener triggered (146). Event Type: patch, Path: /. Timestamp: 1752641505.3517568
2025-07-15 21:51:45,352 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.6280000000', 'o': '88.6200000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0529800000'}, 'BTCUSD': {'b': '117548.2000000000', 'o': '117548.1000000000'}, 'USDCNH': {'b': '7.183970
2025-07-15 21:51:45,352 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.6280000000', 'o': '88.6200000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0529800000'}, 'BTCUSD': {'b': '117548.2000000000', 'o': '117548.1000000000'}, 'USDCNH': {'b': '7.183970...
2025-07-15 21:51:45,352 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:46,084 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:46,093 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:46,093 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:46,095 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:46,097 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:47,107 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:47,114 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:47,115 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:47,117 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:47,117 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:47,673 - DEBUG - app.firebase_stream - Firebase listener triggered (147). Event Type: patch, Path: /. Timestamp: 1752641507.673391
2025-07-15 21:51:47,673 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0060400000'}, 'NZDJPY': {'b': '88.6240000000', 'o': '88.6170000000'}, 'GBPAUD': {'b': '2.0531200000', 'o': '2.0529400000'}, 'BTCUSD': {'b': '117557.600000000
2025-07-15 21:51:47,674 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0060400000'}, 'NZDJPY': {'b': '88.6240000000', 'o': '88.6170000000'}, 'GBPAUD': {'b': '2.0531200000', 'o': '2.0529400000'}, 'BTCUSD': {'b': '117557.600000000...
2025-07-15 21:51:47,675 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:48,132 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:48,137 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:48,137 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:48,138 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:48,138 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:49,144 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:49,149 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:49,149 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:49,151 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:49,151 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:49,943 - DEBUG - app.firebase_stream - Firebase listener triggered (148). Event Type: patch, Path: /. Timestamp: 1752641509.9431746
2025-07-15 21:51:49,943 - DEBUG - app.firebase_stream - Prepared batch update for 17 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0059400000'}, 'GBPAUD': {'b': '2.0531200000', 'o': '2.0529700000'}, 'USDSGD': {'b': '1.2850600000', 'o': '1.2850400000'}, 'EURSEK': {'b': '11.2846800000', 'o
2025-07-15 21:51:49,943 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0059400000'}, 'GBPAUD': {'b': '2.0531200000', 'o': '2.0529700000'}, 'USDSGD': {'b': '1.2850600000', 'o': '1.2850400000'}, 'EURSEK': {'b': '11.2846800000', 'o...
2025-07-15 21:51:49,943 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:50,154 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:50,159 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:50,159 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:50,161 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:50,162 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:51,167 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:51,171 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:51,171 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:51,173 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:51,174 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:52,183 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:52,186 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:52,186 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:52,187 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:52,187 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:52,274 - DEBUG - app.firebase_stream - Firebase listener triggered (149). Event Type: patch, Path: /. Timestamp: 1752641512.2743423
2025-07-15 21:51:52,274 - DEBUG - app.firebase_stream - Prepared batch update for 21 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0108000000', 'o': '13.0060600000'}, 'XAGUSD': {'b': '37.8300000000', 'o': '37.8230000000'}, 'NZDJPY': {'b': '88.6230000000', 'o': '88.6150000000'}, 'GBPAUD': {'b': '2.0531400000',
2025-07-15 21:51:52,275 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0108000000', 'o': '13.0060600000'}, 'XAGUSD': {'b': '37.8300000000', 'o': '37.8230000000'}, 'NZDJPY': {'b': '88.6230000000', 'o': '88.6150000000'}, 'GBPAUD': {'b': '2.0531400000',...
2025-07-15 21:51:52,275 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:53,195 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:53,200 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:53,200 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:53,201 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:53,202 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:54,208 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:54,214 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:54,214 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:54,216 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:54,216 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:54,578 - DEBUG - app.firebase_stream - Firebase listener triggered (150). Event Type: patch, Path: /. Timestamp: 1752641514.5781205
2025-07-15 21:51:54,578 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0107000000', 'o': '13.0060400000'}, 'NZDJPY': {'b': '88.6230000000', 'o': '88.6170000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0529800000'}, 'USDJPY': {'b': '149.0080000000',
2025-07-15 21:51:54,578 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0107000000', 'o': '13.0060400000'}, 'NZDJPY': {'b': '88.6230000000', 'o': '88.6170000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0529800000'}, 'USDJPY': {'b': '149.0080000000',...
2025-07-15 21:51:54,578 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:55,220 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:55,225 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:55,225 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:55,226 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:55,227 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:56,238 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:56,242 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:56,242 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:56,244 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:56,244 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:56,931 - DEBUG - app.firebase_stream - Firebase listener triggered (151). Event Type: patch, Path: /. Timestamp: 1752641516.9314504
2025-07-15 21:51:56,932 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0106000000', 'o': '13.0064300000'}, 'NZDJPY': {'b': '88.6230000000', 'o': '88.6160000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0529700000'}, 'BTCUSD': {'b': '117557.600000000
2025-07-15 21:51:56,933 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0106000000', 'o': '13.0064300000'}, 'NZDJPY': {'b': '88.6230000000', 'o': '88.6160000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0529700000'}, 'BTCUSD': {'b': '117557.600000000...
2025-07-15 21:51:56,933 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:57,248 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:57,252 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:57,252 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:57,253 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:57,254 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:58,256 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:58,263 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:58,263 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:58,265 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:58,265 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:51:59,189 - DEBUG - app.firebase_stream - Firebase listener triggered (152). Event Type: patch, Path: /. Timestamp: 1752641519.1897955
2025-07-15 21:51:59,190 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0060400000'}, 'XAGUSD': {'b': '37.8310000000', 'o': '37.8230000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0529800000'}, 'USDJPY': {'b': '149.0080000000',
2025-07-15 21:51:59,190 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0060400000'}, 'XAGUSD': {'b': '37.8310000000', 'o': '37.8230000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0529800000'}, 'USDJPY': {'b': '149.0080000000',...
2025-07-15 21:51:59,190 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:51:59,267 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:51:59,271 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:51:59,271 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:51:59,272 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:51:59,272 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:00,274 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:00,281 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:00,281 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:00,282 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:00,282 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:01,298 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:01,304 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:01,304 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:01,306 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:01,307 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:01,529 - DEBUG - app.firebase_stream - Firebase listener triggered (153). Event Type: patch, Path: /. Timestamp: 1752641521.5291374
2025-07-15 21:52:01,529 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0060500000'}, 'GBPAUD': {'b': '2.0531800000', 'o': '2.0529900000'}, 'USDJPY': {'b': '149.0120000000', 'o': '149.0100000000'}, 'EURNZD': {'b': '1.9533900000',
2025-07-15 21:52:01,529 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0060500000'}, 'GBPAUD': {'b': '2.0531800000', 'o': '2.0529900000'}, 'USDJPY': {'b': '149.0120000000', 'o': '149.0100000000'}, 'EURNZD': {'b': '1.9533900000',...
2025-07-15 21:52:01,529 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:02,321 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:02,325 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:02,325 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:02,326 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:02,327 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:03,337 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:03,341 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:03,341 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:03,342 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:03,343 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:03,890 - DEBUG - app.firebase_stream - Firebase listener triggered (154). Event Type: patch, Path: /. Timestamp: 1752641523.8902225
2025-07-15 21:52:03,890 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0070500000'}, 'XAGUSD': {'b': '37.8300000000', 'o': '37.8230000000'}, 'GBPAUD': {'b': '2.0531200000', 'o': '2.0529500000'}, 'USDJPY': {'b': '149.0070000000',
2025-07-15 21:52:03,891 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0070500000'}, 'XAGUSD': {'b': '37.8300000000', 'o': '37.8230000000'}, 'GBPAUD': {'b': '2.0531200000', 'o': '2.0529500000'}, 'USDJPY': {'b': '149.0070000000',...
2025-07-15 21:52:03,892 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:04,358 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:04,362 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:04,362 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:04,364 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:04,364 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:05,374 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:05,378 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:05,378 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:05,379 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:05,380 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:06,144 - DEBUG - app.firebase_stream - Firebase listener triggered (155). Event Type: patch, Path: /. Timestamp: 1752641526.144783
2025-07-15 21:52:06,145 - DEBUG - app.firebase_stream - Prepared batch update for 36 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0071000000'}, 'XAGUSD': {'b': '37.8280000000', 'o': '37.8220000000'}, 'NZDJPY': {'b': '88.6250000000', 'o': '88.6180000000'}, 'GBPAUD': {'b': '2.0531800000',
2025-07-15 21:52:06,145 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0112000000', 'o': '13.0071000000'}, 'XAGUSD': {'b': '37.8280000000', 'o': '37.8220000000'}, 'NZDJPY': {'b': '88.6250000000', 'o': '88.6180000000'}, 'GBPAUD': {'b': '2.0531800000',...
2025-07-15 21:52:06,145 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:06,389 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:06,395 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:06,395 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:06,396 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:06,396 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:07,400 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:07,405 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:07,406 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:07,407 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:07,408 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:08,413 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:08,417 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:08,418 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:08,419 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:08,419 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:08,500 - DEBUG - app.firebase_stream - Firebase listener triggered (156). Event Type: patch, Path: /. Timestamp: 1752641528.500903
2025-07-15 21:52:08,501 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0059000000'}, 'XAGUSD': {'b': '37.8300000000', 'o': '37.8230000000'}, 'NZDJPY': {'b': '88.6240000000', 'o': '88.6150000000'}, 'GBPAUD': {'b': '2.0531700000',
2025-07-15 21:52:08,501 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0059000000'}, 'XAGUSD': {'b': '37.8300000000', 'o': '37.8230000000'}, 'NZDJPY': {'b': '88.6240000000', 'o': '88.6150000000'}, 'GBPAUD': {'b': '2.0531700000',...
2025-07-15 21:52:08,501 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:09,429 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:09,433 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:09,433 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:09,435 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:09,436 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:10,460 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:10,466 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:10,467 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:10,468 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:10,469 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:10,663 - WARNING - app - No user data found for user 5 (live). Skipping portfolio update.
2025-07-15 21:52:10,668 - WARNING - app - No group settings found for group string. Skipping portfolio update for user 8.
2025-07-15 21:52:10,743 - DEBUG - app.firebase_stream - Firebase listener triggered (157). Event Type: patch, Path: /. Timestamp: 1752641530.7437363
2025-07-15 21:52:10,744 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0061000000'}, 'XAGUSD': {'b': '37.8280000000', 'o': '37.8220000000'}, 'NZDJPY': {'b': '88.6270000000', 'o': '88.6180000000'}, 'GBPAUD': {'b': '2.0531900000',
2025-07-15 21:52:10,744 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0061000000'}, 'XAGUSD': {'b': '37.8280000000', 'o': '37.8220000000'}, 'NZDJPY': {'b': '88.6270000000', 'o': '88.6180000000'}, 'GBPAUD': {'b': '2.0531900000',...
2025-07-15 21:52:10,744 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:11,242 - DEBUG - app.services.portfolio_calculator - Position calculation for XAGUSD: Type=BUY, Entry=41.09800000, Current=37.8095, Quantity=0.01000000, Contract Size=5000.00000000, PnL=-164.425000000000000000000000, PnL USD=-164.425000000000000000000000, Commission=0.10000000, Final PnL=-164.525000000000000000000000
2025-07-15 21:52:11,242 - DEBUG - app.services.portfolio_calculator - Position calculation for BTCUSD: Type=BUY, Entry=132091.90000000, Current=117484.5, Quantity=6.00000000, Contract Size=1.00000000, PnL=-87644.40000000000000000000000, PnL USD=-87644.40000000000000000000000, Commission=3661.62000000, Final PnL=-91306.02000000000000000000000
2025-07-15 21:52:11,242 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 63.40280645449992070831808997% which is below threshold 100.0%
2025-07-15 21:52:11,659 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:11,660 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=96.66800000, Current=97.155, Quantity=0.01000000, Contract Size=100000.00000000, PnL=487.000000000000000000000000, PnL USD=3.268193165651088502939360588, Commission=0.10000000, Final PnL=3.168193165651088502939360588
2025-07-15 21:52:11,662 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=SELL, Entry=96.56000000, Current=97.25999999999999, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-699.9999999999900000000000000, PnL USD=-4.697608246315665852414570639, Commission=0.10000000, Final PnL=-4.797608246315665852414570639
2025-07-15 21:52:11,665 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:11,665 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:11,665 - WARNING - app - User 2 has no group_name set. Skipping portfolio update.
2025-07-15 21:52:11,666 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:11,666 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:11,670 - WARNING - app - No group settings found for group string. Skipping portfolio update for user 3.
2025-07-15 21:52:11,687 - WARNING - app - User 5 has no group_name set. Skipping portfolio update.
2025-07-15 21:52:11,687 - WARNING - app - User 6 has no group_name set. Skipping portfolio update.
2025-07-15 21:52:12,069 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDUSD: Type=BUY, Entry=0.64743000, Current=0.6522, Quantity=0.10000000, Contract Size=100000.00000000, PnL=47.700000000000000000000000, PnL USD=47.700000000000000000000000, Commission=1.00000000, Final PnL=46.700000000000000000000000
2025-07-15 21:52:12,069 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDUSD: Type=SELL, Entry=0.64707000, Current=0.6525, Quantity=0.22000000, Contract Size=100000.00000000, PnL=-119.460000000000000000000000, PnL USD=-119.460000000000000000000000, Commission=2.20000000, Final PnL=-121.660000000000000000000000
2025-07-15 21:52:12,070 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFSGD: Type=BUY, Entry=1.57561500, Current=1.6028850000000001, Quantity=0.10000000, Contract Size=100000.00000000, PnL=272.7000000000010000000000000, PnL USD=212.2063389542989876037881205, Commission=1.00000000, Final PnL=211.2063389542989876037881205
2025-07-15 21:52:12,072 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFSGD: Type=SELL, Entry=1.57505500, Current=1.603365, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-283.100000000000000000000000, PnL USD=-220.2992833075241037453212665, Commission=1.00000000, Final PnL=-221.2992833075241037453212665
2025-07-15 21:52:12,072 - DEBUG - app.services.portfolio_calculator - Position calculation for CADJPY: Type=SELL, Entry=106.24150000, Current=108.64750000000001, Quantity=0.15000000, Contract Size=100000.00000000, PnL=-36090.00000000015000000000000, PnL USD=-242.1952594421935817249617480, Commission=0E-8, Final PnL=-242.1952594421935817249617480
2025-07-15 21:52:12,073 - DEBUG - app.services.portfolio_calculator - Position calculation for CADJPY: Type=BUY, Entry=106.27050000, Current=108.6165, Quantity=0.15000000, Contract Size=100000.00000000, PnL=35190.00000000000000000000000, PnL USD=236.1554774112152041446326470, Commission=0E-8, Final PnL=236.1554774112152041446326470
2025-07-15 21:52:12,073 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=BUY, Entry=1.77481000, Current=1.78063, Quantity=0.22000000, Contract Size=100000.00000000, PnL=128.040000000000000000000000, PnL USD=83.52689400000000000000000000, Commission=2.20000000, Final PnL=81.32689400000000000000000000
2025-07-15 21:52:12,073 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=SELL, Entry=1.77439000, Current=1.78102, Quantity=0.21000000, Contract Size=100000.00000000, PnL=-139.230000000000000000000000, PnL USD=-90.82669050000000000000000000, Commission=2.10000000, Final PnL=-92.92669050000000000000000000
2025-07-15 21:52:12,074 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFJPY: Type=BUY, Entry=178.15500000, Current=185.875, Quantity=0.10000000, Contract Size=100000.00000000, PnL=77200.00000000000000000000000, PnL USD=518.0790808793922637103052103, Commission=1.00000000, Final PnL=517.0790808793922637103052103
2025-07-15 21:52:12,075 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFJPY: Type=SELL, Entry=178.09500000, Current=185.92499999999998, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-78299.99999999980000000000000, PnL USD=-525.4610366950299304753979545, Commission=1.00000000, Final PnL=-526.4610366950299304753979545
2025-07-15 21:52:12,075 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=BUY, Entry=1.77480000, Current=1.78063, Quantity=0.05000000, Contract Size=100000.00000000, PnL=29.150000000000000000000000, PnL USD=19.01600250000000000000000000, Commission=0.50000000, Final PnL=18.51600250000000000000000000
2025-07-15 21:52:12,075 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=SELL, Entry=1.77442000, Current=1.78102, Quantity=0.05000000, Contract Size=100000.00000000, PnL=-33.000000000000000000000000, PnL USD=-21.52755000000000000000000000, Commission=0.50000000, Final PnL=-22.02755000000000000000000000
2025-07-15 21:52:12,075 - DEBUG - app.services.portfolio_calculator - Position calculation for EURGBP: Type=SELL, Entry=0.85403000, Current=0.8675499999999999, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-135.1999999999990000000000000, PnL USD=-181.0828239999986606300000000, Commission=1.00000000, Final PnL=-182.0828239999986606300000000
2025-07-15 21:52:12,076 - DEBUG - app.services.portfolio_calculator - Position calculation for EURJPY: Type=BUY, Entry=167.26050000, Current=173.09550000000002, Quantity=0.10000000, Contract Size=100000.00000000, PnL=58350.00000000020000000000000, PnL USD=391.5792016750342254315088718, Commission=1.00000000, Final PnL=390.5792016750342254315088718
2025-07-15 21:52:12,077 - DEBUG - app.services.portfolio_calculator - Position calculation for EURJPY: Type=SELL, Entry=167.23150000, Current=173.1255, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-58940.00000000000000000000000, PnL USD=-395.5386143397847153249402733, Commission=1.00000000, Final PnL=-396.5386143397847153249402733
2025-07-15 21:52:12,077 - DEBUG - app.services.portfolio_calculator - Position calculation for EURNZD: Type=SELL, Entry=1.91952500, Current=1.953565, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-340.400000000000000000000000, PnL USD=-202.4529000000000000000000000, Commission=1.00000000, Final PnL=-203.4529000000000000000000000
2025-07-15 21:52:12,077 - DEBUG - app.services.portfolio_calculator - Position calculation for EURNZD: Type=BUY, Entry=1.92063500, Current=1.953135, Quantity=0.10000000, Contract Size=100000.00000000, PnL=325.000000000000000000000000, PnL USD=193.2937500000000000000000000, Commission=1.00000000, Final PnL=192.2937500000000000000000000
2025-07-15 21:52:12,077 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=SELL, Entry=1.34376000, Current=1.33947, Quantity=0.25000000, Contract Size=0E-8, PnL=0E-24, PnL USD=0E-24, Commission=2.50000000, Final PnL=-2.500000000000000000000000
2025-07-15 21:52:12,077 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=SELL, Entry=1.34361000, Current=1.33947, Quantity=0.25000000, Contract Size=0E-8, PnL=0E-24, PnL USD=0E-24, Commission=2.50000000, Final PnL=-2.500000000000000000000000
2025-07-15 21:52:12,077 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=BUY, Entry=1.34379000, Current=1.3392600000000001, Quantity=0.25000000, Contract Size=0E-8, PnL=-0E-32, PnL USD=-0E-32, Commission=2.50000000, Final PnL=-2.500000000000000000000000000
2025-07-15 21:52:12,077 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=BUY, Entry=1.34378000, Current=1.3392600000000001, Quantity=0.25000000, Contract Size=0E-8, PnL=-0E-32, PnL USD=-0E-32, Commission=2.50000000, Final PnL=-2.500000000000000000000000000
2025-07-15 21:52:12,078 - DEBUG - app.services.portfolio_calculator - Position calculation for NZDJPY: Type=BUY, Entry=87.10150000, Current=88.60549999999999, Quantity=0.01000000, Contract Size=100000.00000000, PnL=1503.999999999990000000000000, PnL USD=10.09314686065545056773951091, Commission=0.10000000, Final PnL=9.99314686065545056773951091
2025-07-15 21:52:12,078 - DEBUG - app.services.portfolio_calculator - Position calculation for USDCHF: Type=SELL, Entry=0.81771000, Current=0.80175, Quantity=0.15000000, Contract Size=100000.00000000, PnL=239.400000000000000000000000, PnL USD=298.6526946107784431137724551, Commission=1.50000000, Final PnL=297.1526946107784431137724551
2025-07-15 21:52:12,079 - DEBUG - app.services.portfolio_calculator - Position calculation for USDCHF: Type=BUY, Entry=0.81805000, Current=0.80142, Quantity=0.15000000, Contract Size=100000.00000000, PnL=-249.450000000000000000000000, PnL USD=-311.1901197604790419161676647, Commission=1.50000000, Final PnL=-312.6901197604790419161676647
2025-07-15 21:52:12,080 - DEBUG - app.services.portfolio_calculator - Position calculation for USDNOK: Type=BUY, Entry=10.04973000, Current=10.23956, Quantity=0.10000000, Contract Size=100000.00000000, PnL=1898.300000000000000000000000, PnL USD=185.3499073885122699236748551, Commission=1.00000000, Final PnL=184.3499073885122699236748551
2025-07-15 21:52:12,081 - DEBUG - app.services.portfolio_calculator - Position calculation for USDNOK: Type=BUY, Entry=10.05023000, Current=10.23956, Quantity=0.10000000, Contract Size=100000.00000000, PnL=1893.300000000000000000000000, PnL USD=184.8617076640521944089414756, Commission=1.00000000, Final PnL=183.8617076640521944089414756
2025-07-15 21:52:12,082 - DEBUG - app.services.portfolio_calculator - Position calculation for USDSGD: Type=SELL, Entry=1.28795000, Current=1.28522, Quantity=0.31000000, Contract Size=100000.00000000, PnL=84.630000000000000000000000, PnL USD=65.85633467437571494159851214, Commission=3.10000000, Final PnL=62.75633467437571494159851214
2025-07-15 21:52:12,083 - DEBUG - app.services.portfolio_calculator - Position calculation for USDTRY: Type=SELL, Entry=39.56087000, Current=40.2611900000, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-7003.200000000000000000000000, PnL USD=-173.9441879388065777489438340, Commission=1.00000000, Final PnL=-174.9441879388065777489438340
2025-07-15 21:52:12,456 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89752000, Current=0.89482, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-2.700000000000000000000000, PnL USD=-1.968245637055504526964965228, Commission=0.10000000, Final PnL=-2.068245637055504526964965228
2025-07-15 21:52:12,671 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:12,678 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:12,679 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:12,681 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:12,682 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:13,104 - DEBUG - app.firebase_stream - Firebase listener triggered (158). Event Type: patch, Path: /. Timestamp: 1752641533.1041846
2025-07-15 21:52:13,105 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0060600000'}, 'NZDJPY': {'b': '88.6240000000', 'o': '88.6150000000'}, 'GBPAUD': {'b': '2.0532000000', 'o': '2.0530400000'}, 'BTCUSD': {'b': '117539.500000000
2025-07-15 21:52:13,105 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0060600000'}, 'NZDJPY': {'b': '88.6240000000', 'o': '88.6150000000'}, 'GBPAUD': {'b': '2.0532000000', 'o': '2.0530400000'}, 'BTCUSD': {'b': '117539.500000000...
2025-07-15 21:52:13,105 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:13,696 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:13,701 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:13,701 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:13,703 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:13,703 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:14,719 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:14,724 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:14,725 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:14,726 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:14,727 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:15,358 - DEBUG - app.firebase_stream - Firebase listener triggered (159). Event Type: patch, Path: /. Timestamp: 1752641535.3588855
2025-07-15 21:52:15,359 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0108000000', 'o': '13.0055200000'}, 'NZDJPY': {'b': '88.6250000000', 'o': '88.6180000000'}, 'GBPAUD': {'b': '2.0531200000', 'o': '2.0529700000'}, 'USDJPY': {'b': '149.0060000000',
2025-07-15 21:52:15,359 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0108000000', 'o': '13.0055200000'}, 'NZDJPY': {'b': '88.6250000000', 'o': '88.6180000000'}, 'GBPAUD': {'b': '2.0531200000', 'o': '2.0529700000'}, 'USDJPY': {'b': '149.0060000000',...
2025-07-15 21:52:15,359 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:15,740 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:15,746 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:15,746 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:15,747 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:15,748 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:16,755 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:16,758 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:16,758 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:16,759 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:16,759 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:17,710 - DEBUG - app.firebase_stream - Firebase listener triggered (160). Event Type: patch, Path: /. Timestamp: 1752641537.710345
2025-07-15 21:52:17,710 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0060400000'}, 'XAGUSD': {'b': '37.8270000000', 'o': '37.8210000000'}, 'NZDJPY': {'b': '88.6250000000', 'o': '88.6160000000'}, 'GBPAUD': {'b': '2.0531400000',
2025-07-15 21:52:17,710 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0060400000'}, 'XAGUSD': {'b': '37.8270000000', 'o': '37.8210000000'}, 'NZDJPY': {'b': '88.6250000000', 'o': '88.6160000000'}, 'GBPAUD': {'b': '2.0531400000',...
2025-07-15 21:52:17,711 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:17,760 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:17,765 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:17,765 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:17,766 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:17,766 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:18,780 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:18,783 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:18,783 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:18,784 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:18,785 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:19,792 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:19,798 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:19,798 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:19,800 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:19,800 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:19,982 - DEBUG - app.firebase_stream - Firebase listener triggered (161). Event Type: patch, Path: /. Timestamp: 1752641539.9820101
2025-07-15 21:52:19,982 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0072000000'}, 'XAGUSD': {'b': '37.8280000000', 'o': '37.8220000000'}, 'NZDJPY': {'b': '88.6230000000', 'o': '88.6140000000'}, 'GBPAUD': {'b': '2.0531700000',
2025-07-15 21:52:19,982 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0072000000'}, 'XAGUSD': {'b': '37.8280000000', 'o': '37.8220000000'}, 'NZDJPY': {'b': '88.6230000000', 'o': '88.6140000000'}, 'GBPAUD': {'b': '2.0531700000',...
2025-07-15 21:52:19,982 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:20,815 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:20,819 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:20,820 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:20,821 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:20,821 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:21,824 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:21,829 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:21,830 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:21,831 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:21,832 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:22,321 - DEBUG - app.firebase_stream - Firebase listener triggered (162). Event Type: patch, Path: /. Timestamp: 1752641542.3216956
2025-07-15 21:52:22,322 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.8310000000', 'o': '37.8230000000'}, 'NZDJPY': {'b': '88.6220000000', 'o': '88.6150000000'}, 'GBPAUD': {'b': '2.0531400000', 'o': '2.0530000000'}, 'BTCUSD': {'b': '117554.300000000
2025-07-15 21:52:22,322 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '37.8310000000', 'o': '37.8230000000'}, 'NZDJPY': {'b': '88.6220000000', 'o': '88.6150000000'}, 'GBPAUD': {'b': '2.0531400000', 'o': '2.0530000000'}, 'BTCUSD': {'b': '117554.300000000...
2025-07-15 21:52:22,322 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:22,842 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:22,848 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:22,848 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:22,850 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:22,850 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:23,853 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:23,858 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:23,859 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:23,860 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:23,861 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:24,674 - DEBUG - app.firebase_stream - Firebase listener triggered (163). Event Type: patch, Path: /. Timestamp: 1752641544.6747105
2025-07-15 21:52:24,675 - DEBUG - app.firebase_stream - Prepared batch update for 33 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0063700000'}, 'NZDJPY': {'b': '88.6180000000', 'o': '88.6120000000'}, 'GBPAUD': {'b': '2.0531600000', 'o': '2.0530100000'}, 'BTCUSD': {'b': '117548.100000000
2025-07-15 21:52:24,675 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0063700000'}, 'NZDJPY': {'b': '88.6180000000', 'o': '88.6120000000'}, 'GBPAUD': {'b': '2.0531600000', 'o': '2.0530100000'}, 'BTCUSD': {'b': '117548.100000000...
2025-07-15 21:52:24,675 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:24,863 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:24,869 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:24,869 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:24,870 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:24,871 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:25,879 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:25,885 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:25,886 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:25,887 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:25,888 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:26,896 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:26,901 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:26,901 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:26,902 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:26,903 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:26,929 - DEBUG - app.firebase_stream - Firebase listener triggered (164). Event Type: patch, Path: /. Timestamp: 1752641546.92929
2025-07-15 21:52:26,929 - DEBUG - app.firebase_stream - Prepared batch update for 38 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0119000000', 'o': '13.0084000000'}, 'XAGUSD': {'b': '37.8280000000', 'o': '37.8220000000'}, 'NZDJPY': {'b': '88.6160000000', 'o': '88.6100000000'}, 'USDJPY': {'b': '149.0120000000
2025-07-15 21:52:26,930 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0119000000', 'o': '13.0084000000'}, 'XAGUSD': {'b': '37.8280000000', 'o': '37.8220000000'}, 'NZDJPY': {'b': '88.6160000000', 'o': '88.6100000000'}, 'USDJPY': {'b': '149.0120000000...
2025-07-15 21:52:26,930 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:27,916 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:27,922 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:27,922 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:27,924 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:27,925 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:28,936 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:28,941 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:28,941 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:28,943 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:28,944 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:29,235 - DEBUG - app.firebase_stream - Firebase listener triggered (165). Event Type: patch, Path: /. Timestamp: 1752641549.235082
2025-07-15 21:52:29,235 - DEBUG - app.firebase_stream - Prepared batch update for 35 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0123000000', 'o': '13.0067700000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6250000000', 'o': '88.6180000000'}, 'GBPAUD': {'b': '2.0532400000',
2025-07-15 21:52:29,235 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0123000000', 'o': '13.0067700000'}, 'XAGUSD': {'b': '37.8350000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6250000000', 'o': '88.6180000000'}, 'GBPAUD': {'b': '2.0532400000',...
2025-07-15 21:52:29,236 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:29,959 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:29,964 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:29,964 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:29,966 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:29,966 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:30,976 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:30,980 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:30,980 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:30,982 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:30,982 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:31,547 - DEBUG - app.firebase_stream - Firebase listener triggered (166). Event Type: patch, Path: /. Timestamp: 1752641551.5474448
2025-07-15 21:52:31,547 - DEBUG - app.firebase_stream - Prepared batch update for 35 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0121000000', 'o': '13.0067700000'}, 'XAGUSD': {'b': '37.8360000000', 'o': '37.8250000000'}, 'NZDJPY': {'b': '88.6260000000', 'o': '88.6180000000'}, 'GBPAUD': {'b': '2.0532000000',
2025-07-15 21:52:31,547 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0121000000', 'o': '13.0067700000'}, 'XAGUSD': {'b': '37.8360000000', 'o': '37.8250000000'}, 'NZDJPY': {'b': '88.6260000000', 'o': '88.6180000000'}, 'GBPAUD': {'b': '2.0532000000',...
2025-07-15 21:52:31,548 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:31,989 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:31,995 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:31,995 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:31,996 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:31,997 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:33,008 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:33,011 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:33,012 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:33,013 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:33,013 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:33,897 - DEBUG - app.firebase_stream - Firebase listener triggered (167). Event Type: patch, Path: /. Timestamp: 1752641553.8970509
2025-07-15 21:52:33,897 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0060000000'}, 'NZDJPY': {'b': '88.6100000000', 'o': '88.6020000000'}, 'GBPAUD': {'b': '2.0532900000', 'o': '2.0531200000'}, 'BTCUSD': {'b': '117539.500000000
2025-07-15 21:52:33,898 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0060000000'}, 'NZDJPY': {'b': '88.6100000000', 'o': '88.6020000000'}, 'GBPAUD': {'b': '2.0532900000', 'o': '2.0531200000'}, 'BTCUSD': {'b': '117539.500000000...
2025-07-15 21:52:33,898 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:34,015 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:34,020 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:34,020 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:34,021 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:34,021 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:35,025 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:35,029 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:35,029 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:35,030 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:35,031 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:36,040 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:36,045 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:36,045 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:36,047 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:36,048 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:36,243 - DEBUG - app.firebase_stream - Firebase listener triggered (168). Event Type: patch, Path: /. Timestamp: 1752641556.2436185
2025-07-15 21:52:36,243 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0061000000'}, 'NZDJPY': {'b': '88.6110000000', 'o': '88.6020000000'}, 'USDJPY': {'b': '148.9830000000', 'o': '148.9810000000'}, 'USDCNH': {'b': '7.1839600000
2025-07-15 21:52:36,243 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0061000000'}, 'NZDJPY': {'b': '88.6110000000', 'o': '88.6020000000'}, 'USDJPY': {'b': '148.9830000000', 'o': '148.9810000000'}, 'USDCNH': {'b': '7.1839600000...
2025-07-15 21:52:36,244 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:37,061 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:37,066 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:37,066 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:37,068 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:37,068 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:38,079 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:38,084 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:38,084 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:38,086 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:38,086 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:38,498 - DEBUG - app.firebase_stream - Firebase listener triggered (169). Event Type: patch, Path: /. Timestamp: 1752641558.498486
2025-07-15 21:52:38,499 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0120000000', 'o': '13.0081000000'}, 'GBPAUD': {'b': '2.0533000000', 'o': '2.0531100000'}, 'USDCNH': {'b': '7.1838300000', 'o': '7.1838300000'}, 'EURNZD': {'b': '1.9535300000', 'o'
2025-07-15 21:52:38,499 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0120000000', 'o': '13.0081000000'}, 'GBPAUD': {'b': '2.0533000000', 'o': '2.0531100000'}, 'USDCNH': {'b': '7.1838300000', 'o': '7.1838300000'}, 'EURNZD': {'b': '1.9535300000', 'o'...
2025-07-15 21:52:38,500 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:39,097 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:39,101 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:39,101 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:39,102 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:39,103 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:40,106 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:40,113 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:40,113 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:40,115 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:40,116 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:40,856 - DEBUG - app.firebase_stream - Firebase listener triggered (170). Event Type: patch, Path: /. Timestamp: 1752641560.856947
2025-07-15 21:52:40,857 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.8370000000', 'o': '37.8250000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6040000000'}, 'GBPAUD': {'b': '2.0532400000', 'o': '2.0530700000'}, 'BTCUSD': {'b': '117548.100000000
2025-07-15 21:52:40,857 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '37.8370000000', 'o': '37.8250000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6040000000'}, 'GBPAUD': {'b': '2.0532400000', 'o': '2.0530700000'}, 'BTCUSD': {'b': '117548.100000000...
2025-07-15 21:52:40,857 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:41,122 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:41,126 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:41,126 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:41,127 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:41,127 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:42,145 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:42,150 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:42,150 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:42,152 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:42,153 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:43,170 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:43,175 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:43,175 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:43,177 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:43,178 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:43,208 - DEBUG - app.firebase_stream - Firebase listener triggered (171). Event Type: patch, Path: /. Timestamp: 1752641563.2081351
2025-07-15 21:52:43,208 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0122000000', 'o': '13.0067700000'}, 'XAGUSD': {'b': '37.8300000000', 'o': '37.8230000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6030000000'}, 'BTCUSD': {'b': '117539.5000000
2025-07-15 21:52:43,208 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0122000000', 'o': '13.0067700000'}, 'XAGUSD': {'b': '37.8300000000', 'o': '37.8230000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6030000000'}, 'BTCUSD': {'b': '117539.5000000...
2025-07-15 21:52:43,208 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:44,188 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:44,194 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:44,194 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:44,196 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:44,197 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:45,208 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:45,212 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:45,212 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:45,213 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:45,214 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:45,463 - DEBUG - app.firebase_stream - Firebase listener triggered (172). Event Type: patch, Path: /. Timestamp: 1752641565.4629803
2025-07-15 21:52:45,463 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0121000000', 'o': '13.0067700000'}, 'NZDJPY': {'b': '88.6120000000', 'o': '88.6040000000'}, 'GBPAUD': {'b': '2.0532500000', 'o': '2.0531000000'}, 'USDJPY': {'b': '148.9760000000',
2025-07-15 21:52:45,463 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0121000000', 'o': '13.0067700000'}, 'NZDJPY': {'b': '88.6120000000', 'o': '88.6040000000'}, 'GBPAUD': {'b': '2.0532500000', 'o': '2.0531000000'}, 'USDJPY': {'b': '148.9760000000',...
2025-07-15 21:52:45,464 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:46,219 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:46,224 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:46,224 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:46,224 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:46,225 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:47,240 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:47,244 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:47,244 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:47,245 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:47,245 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:47,798 - DEBUG - app.firebase_stream - Firebase listener triggered (173). Event Type: patch, Path: /. Timestamp: 1752641567.79895
2025-07-15 21:52:47,799 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0065100000'}, 'XAGUSD': {'b': '37.8310000000', 'o': '37.8230000000'}, 'NZDJPY': {'b': '88.6120000000', 'o': '88.6030000000'}, 'GBPAUD': {'b': '2.0532800000',
2025-07-15 21:52:47,799 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0116000000', 'o': '13.0065100000'}, 'XAGUSD': {'b': '37.8310000000', 'o': '37.8230000000'}, 'NZDJPY': {'b': '88.6120000000', 'o': '88.6030000000'}, 'GBPAUD': {'b': '2.0532800000',...
2025-07-15 21:52:47,799 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:48,250 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:48,254 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:48,254 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:48,255 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:48,255 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:49,271 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:49,275 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:49,275 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:49,276 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:49,277 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:50,066 - DEBUG - app.firebase_stream - Firebase listener triggered (174). Event Type: patch, Path: /. Timestamp: 1752641570.0664692
2025-07-15 21:52:50,066 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0121000000', 'o': '13.0066000000'}, 'XAGUSD': {'b': '37.8320000000', 'o': '37.8240000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6030000000'}, 'GBPAUD': {'b': '2.0531300000',
2025-07-15 21:52:50,066 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0121000000', 'o': '13.0066000000'}, 'XAGUSD': {'b': '37.8320000000', 'o': '37.8240000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6030000000'}, 'GBPAUD': {'b': '2.0531300000',...
2025-07-15 21:52:50,067 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:50,288 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:50,294 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:50,295 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:50,296 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:50,297 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:51,301 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:51,305 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:51,305 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:51,306 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:51,306 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:52,318 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:52,322 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:52,322 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:52,323 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:52,323 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:52,363 - DEBUG - app.firebase_stream - Firebase listener triggered (175). Event Type: patch, Path: /. Timestamp: 1752641572.3638837
2025-07-15 21:52:52,364 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0124000000', 'o': '13.0071700000'}, 'XAGUSD': {'b': '37.8330000000', 'o': '37.8240000000'}, 'NZDJPY': {'b': '88.6140000000', 'o': '88.6050000000'}, 'GBPAUD': {'b': '2.0531300000',
2025-07-15 21:52:52,364 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0124000000', 'o': '13.0071700000'}, 'XAGUSD': {'b': '37.8330000000', 'o': '37.8240000000'}, 'NZDJPY': {'b': '88.6140000000', 'o': '88.6050000000'}, 'GBPAUD': {'b': '2.0531300000',...
2025-07-15 21:52:52,365 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:53,341 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:53,347 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:53,347 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:53,349 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:53,350 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:54,368 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:54,373 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:52:54,374 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:52:54,375 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:52:54,375 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:52:54,780 - DEBUG - app.firebase_stream - Firebase listener triggered (176). Event Type: patch, Path: /. Timestamp: 1752641574.7805655
2025-07-15 21:52:54,780 - DEBUG - app.firebase_stream - Prepared batch update for 33 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0127000000', 'o': '13.0079400000'}, 'XAGUSD': {'b': '37.8340000000', 'o': '37.8240000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6040000000'}, 'GBPAUD': {'b': '2.0531600000',
2025-07-15 21:52:54,781 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0127000000', 'o': '13.0079400000'}, 'XAGUSD': {'b': '37.8340000000', 'o': '37.8240000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6040000000'}, 'GBPAUD': {'b': '2.0531600000',...
2025-07-15 21:52:54,781 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:52:55,284 - INFO - app - Application shutdown initiated
2025-07-15 21:52:55,285 - INFO - app - Scheduler shutdown completed
2025-07-15 21:52:55,286 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-07-15 21:52:57,028 - INFO - app.firebase_stream - Firebase listener closed.
2025-07-15 21:52:57,028 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-07-15 21:52:57,028 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:52:57,034 - INFO - app - Redis connection closed
2025-07-15 21:52:57,035 - INFO - app - Application shutdown completed
2025-07-15 21:55:48,828 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 21:55:48,856 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 21:55:48,874 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 21:55:48,874 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 21:55:49,181 - INFO - app - Application starting up - Trading system initialized
2025-07-15 21:55:49,181 - INFO - app - SL/TP Epsilon accuracy configured: 0.00001
2025-07-15 21:55:49,181 - INFO - app - Environment: DEVELOPMENT
2025-07-15 21:55:49,250 - INFO - app - Application startup initiated
2025-07-15 21:55:49,251 - INFO - app - Initializing core services...
2025-07-15 21:55:49,288 - INFO - app - Firebase initialized
2025-07-15 21:55:49,288 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-07-15 21:55:51,316 - INFO - app - Redis initialized
2025-07-15 21:55:51,319 - INFO - app - [SWAP] daily_swap_charge_job triggered
2025-07-15 21:55:51,320 - INFO - app - Scheduler initialized
2025-07-15 21:55:51,322 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-15 21:55:51,322 - DEBUG - app.firebase_stream - Successfully got running event loop in process_firebase_events task.
2025-07-15 21:55:51,322 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-07-15 21:55:52,492 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-15 21:55:52,513 - DEBUG - app.firebase_stream - Firebase listener triggered (1). Event Type: put, Path: /. Timestamp: 1752641752.5135105
2025-07-15 21:55:52,514 - DEBUG - app.firebase_stream - Prepared batch update for 48 symbols from root path for queue. Preview: {'AUDCAD': {'b': '0.8949600000', 'o': '0.8949200000'}, 'AUDCHF': {'b': '0.5229400000', 'o': '0.5228800000'}, 'AUDJPY': {'b': '97.1810000000', 'o': '97.1740000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'
2025-07-15 21:55:52,515 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'AUDCAD': {'b': '0.8949600000', 'o': '0.8949200000'}, 'AUDCHF': {'b': '0.5229400000', 'o': '0.5228800000'}, 'AUDJPY': {'b': '97.1810000000', 'o': '97.1740000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'...
2025-07-15 21:55:52,515 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type put at path /.
2025-07-15 21:55:52,515 - INFO - app - Starting stale cache cleanup task
2025-07-15 21:55:52,918 - DEBUG - app.firebase_stream - Firebase listener triggered (2). Event Type: patch, Path: /. Timestamp: 1752641752.9183724
2025-07-15 21:55:52,918 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0131000000', 'o': '13.0079700000'}, 'NZDJPY': {'b': '88.6010000000', 'o': '88.5920000000'}, 'GBPAUD': {'b': '2.0529600000', 'o': '2.0527800000'}, 'USDJPY': {'b': '148.9330000000',
2025-07-15 21:55:52,918 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0131000000', 'o': '13.0079700000'}, 'NZDJPY': {'b': '88.6010000000', 'o': '88.5920000000'}, 'GBPAUD': {'b': '2.0529600000', 'o': '2.0527800000'}, 'USDJPY': {'b': '148.9330000000',...
2025-07-15 21:55:52,918 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:55:55,199 - DEBUG - app.firebase_stream - Firebase listener triggered (3). Event Type: patch, Path: /. Timestamp: 1752641755.1996596
2025-07-15 21:55:55,199 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0132000000', 'o': '13.0079700000'}, 'NZDJPY': {'b': '88.6020000000', 'o': '88.5960000000'}, 'GBPAUD': {'b': '2.0530600000', 'o': '2.0529200000'}, 'USDJPY': {'b': '148.9330000000',
2025-07-15 21:55:55,200 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0132000000', 'o': '13.0079700000'}, 'NZDJPY': {'b': '88.6020000000', 'o': '88.5960000000'}, 'GBPAUD': {'b': '2.0530600000', 'o': '2.0529200000'}, 'USDJPY': {'b': '148.9330000000',...
2025-07-15 21:55:55,200 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:55:56,577 - INFO - app - Cleaned up pending order stream for new trigger price format
2025-07-15 21:55:56,577 - INFO - app - Background tasks initialized
2025-07-15 21:55:57,346 - INFO - app - Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-07-15 21:55:57,346 - INFO - app - Application startup completed successfully
2025-07-15 21:55:57,346 - INFO - app - Starting cache validation task
2025-07-15 21:55:57,350 - INFO - app - Starting Barclays pending order margin checker task.
2025-07-15 21:55:57,350 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:55:57,352 - INFO - app - Starting auto-cutoff order monitoring task.
2025-07-15 21:55:57,382 - INFO - app - Validating cache for 31 users
2025-07-15 21:55:57,411 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:55:57,412 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:55:57,554 - DEBUG - app.firebase_stream - Firebase listener triggered (4). Event Type: patch, Path: /. Timestamp: 1752641757.5539844
2025-07-15 21:55:57,554 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.8280000000', 'o': '37.8210000000'}, 'NZDJPY': {'b': '88.6060000000', 'o': '88.5950000000'}, 'USDJPY': {'b': '148.9390000000', 'o': '148.9330000000'}, 'CADCHF': {'b': '0.5843200000
2025-07-15 21:55:57,554 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 3. Data preview: {'XAGUSD': {'b': '37.8280000000', 'o': '37.8210000000'}, 'NZDJPY': {'b': '88.6060000000', 'o': '88.5950000000'}, 'USDJPY': {'b': '148.9390000000', 'o': '148.9330000000'}, 'CADCHF': {'b': '0.5843200000...
2025-07-15 21:55:57,554 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:55:59,416 - INFO - app - Found 9 static orders cache entries to check
2025-07-15 21:55:59,825 - DEBUG - app.firebase_stream - Firebase listener triggered (5). Event Type: patch, Path: /. Timestamp: 1752641759.8252025
2025-07-15 21:55:59,825 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0129000000', 'o': '13.0079700000'}, 'GBPAUD': {'b': '2.0529700000', 'o': '2.0528100000'}, 'USDJPY': {'b': '148.9160000000', 'o': '148.9140000000'}, 'EURZAR': {'b': '20.7736900000'
2025-07-15 21:55:59,825 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 2. Data preview: {'GBPSEK': {'b': '13.0129000000', 'o': '13.0079700000'}, 'GBPAUD': {'b': '2.0529700000', 'o': '2.0528100000'}, 'USDJPY': {'b': '148.9160000000', 'o': '148.9140000000'}, 'EURZAR': {'b': '20.7736900000'...
2025-07-15 21:55:59,825 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:02,162 - DEBUG - app.firebase_stream - Firebase listener triggered (6). Event Type: patch, Path: /. Timestamp: 1752641762.162181
2025-07-15 21:56:02,162 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0134000000', 'o': '13.0078000000'}, 'NZDJPY': {'b': '88.6040000000', 'o': '88.5950000000'}, 'GBPAUD': {'b': '2.0530600000', 'o': '2.0529200000'}, 'BTCUSD': {'b': '117586.900000000
2025-07-15 21:56:02,162 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 3. Data preview: {'GBPSEK': {'b': '13.0134000000', 'o': '13.0078000000'}, 'NZDJPY': {'b': '88.6040000000', 'o': '88.5950000000'}, 'GBPAUD': {'b': '2.0530600000', 'o': '2.0529200000'}, 'BTCUSD': {'b': '117586.900000000...
2025-07-15 21:56:02,162 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:04,526 - DEBUG - app.firebase_stream - Firebase listener triggered (7). Event Type: patch, Path: /. Timestamp: 1752641764.5268385
2025-07-15 21:56:04,527 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0133000000', 'o': '13.0079700000'}, 'NZDJPY': {'b': '88.6050000000', 'o': '88.5950000000'}, 'GBPAUD': {'b': '2.0530500000', 'o': '2.0529100000'}, 'USDJPY': {'b': '148.9170000000',
2025-07-15 21:56:04,528 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 5. Data preview: {'GBPSEK': {'b': '13.0133000000', 'o': '13.0079700000'}, 'NZDJPY': {'b': '88.6050000000', 'o': '88.5950000000'}, 'GBPAUD': {'b': '2.0530500000', 'o': '2.0529100000'}, 'USDJPY': {'b': '148.9170000000',...
2025-07-15 21:56:04,528 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:05,516 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:56:05,524 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:56:05,542 - WARNING - app - User 5: Missing static orders cache, refreshing...
2025-07-15 21:56:05,552 - WARNING - app - Found stale cache entry for user 13, will be refreshed on next access
2025-07-15 21:56:05,569 - WARNING - app - Found stale cache entry for user 12, will be refreshed on next access
2025-07-15 21:56:05,593 - INFO - app - Completed stale cache cleanup task
2025-07-15 21:56:05,598 - WARNING - app - User 8: Missing static orders cache, refreshing...
2025-07-15 21:56:06,536 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:06,539 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:56:06,539 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:56:06,796 - DEBUG - app.firebase_stream - Firebase listener triggered (8). Event Type: patch, Path: /. Timestamp: 1752641766.7963216
2025-07-15 21:56:06,796 - DEBUG - app.firebase_stream - Prepared batch update for 33 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0128900000', 'o': '13.0078500000'}, 'XAGUSD': {'b': '37.8320000000', 'o': '37.8230000000'}, 'NZDJPY': {'b': '88.6030000000', 'o': '88.5940000000'}, 'GBPAUD': {'b': '2.0530300000',
2025-07-15 21:56:06,796 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0128900000', 'o': '13.0078500000'}, 'XAGUSD': {'b': '37.8320000000', 'o': '37.8230000000'}, 'NZDJPY': {'b': '88.6030000000', 'o': '88.5940000000'}, 'GBPAUD': {'b': '2.0530300000',...
2025-07-15 21:56:06,797 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:07,678 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:56:07,690 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:56:08,706 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:08,710 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:56:08,710 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:56:09,128 - DEBUG - app.firebase_stream - Firebase listener triggered (9). Event Type: patch, Path: /. Timestamp: 1752641769.1279829
2025-07-15 21:56:09,128 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0128900000', 'o': '13.0079400000'}, 'NZDJPY': {'b': '88.6050000000', 'o': '88.5940000000'}, 'GBPAUD': {'b': '2.0530300000', 'o': '2.0529100000'}, 'USDJPY': {'b': '148.9290000000',
2025-07-15 21:56:09,128 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0128900000', 'o': '13.0079400000'}, 'NZDJPY': {'b': '88.6050000000', 'o': '88.5940000000'}, 'GBPAUD': {'b': '2.0530300000', 'o': '2.0529100000'}, 'USDJPY': {'b': '148.9290000000',...
2025-07-15 21:56:09,128 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:09,783 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:56:09,794 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:56:09,820 - WARNING - app - User 16: Missing static orders cache, refreshing...
2025-07-15 21:56:10,802 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:10,809 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:56:10,809 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:56:11,377 - DEBUG - app.firebase_stream - Firebase listener triggered (10). Event Type: patch, Path: /. Timestamp: 1752641771.3774078
2025-07-15 21:56:11,377 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0129800000', 'o': '13.0079700000'}, 'GBPAUD': {'b': '2.0529500000', 'o': '2.0528500000'}, 'USDJPY': {'b': '148.9360000000', 'o': '148.9300000000'}, 'USDCNH': {'b': '7.1835900000',
2025-07-15 21:56:11,377 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0129800000', 'o': '13.0079700000'}, 'GBPAUD': {'b': '2.0529500000', 'o': '2.0528500000'}, 'USDJPY': {'b': '148.9360000000', 'o': '148.9300000000'}, 'USDCNH': {'b': '7.1835900000',...
2025-07-15 21:56:11,378 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:11,886 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:56:11,891 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:56:11,896 - WARNING - app - User 17: Missing static orders cache, refreshing...
2025-07-15 21:56:11,916 - WARNING - app - User 18: Missing static orders cache, refreshing...
2025-07-15 21:56:12,355 - INFO - app - Starting stale cache cleanup task
2025-07-15 21:56:12,905 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:12,921 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:56:12,921 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:56:13,740 - DEBUG - app.firebase_stream - Firebase listener triggered (11). Event Type: patch, Path: /. Timestamp: 1752641773.7404573
2025-07-15 21:56:13,740 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.8330000000', 'o': '37.8240000000'}, 'NZDJPY': {'b': '88.6010000000', 'o': '88.5910000000'}, 'GBPAUD': {'b': '2.0530500000', 'o': '2.0529900000'}, 'USDJPY': {'b': '148.9350000000',
2025-07-15 21:56:13,741 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '37.8330000000', 'o': '37.8240000000'}, 'NZDJPY': {'b': '88.6010000000', 'o': '88.5910000000'}, 'GBPAUD': {'b': '2.0530500000', 'o': '2.0529900000'}, 'USDJPY': {'b': '148.9350000000',...
2025-07-15 21:56:13,741 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:13,957 - INFO - app - Found 14 static orders cache entries to check
2025-07-15 21:56:13,961 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:56:13,970 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:56:13,978 - WARNING - app - Found stale cache entry for user 17, will be refreshed on next access
2025-07-15 21:56:13,983 - WARNING - app - Found stale cache entry for user 18, will be refreshed on next access
2025-07-15 21:56:13,992 - WARNING - app - Found stale cache entry for user 8, will be refreshed on next access
2025-07-15 21:56:13,992 - WARNING - app - User 19: Missing static orders cache, refreshing...
2025-07-15 21:56:14,002 - WARNING - app - Found stale cache entry for user 5, will be refreshed on next access
2025-07-15 21:56:14,006 - WARNING - app - Found stale cache entry for user 13, will be refreshed on next access
2025-07-15 21:56:14,012 - WARNING - app - Found stale cache entry for user 16, will be refreshed on next access
2025-07-15 21:56:14,982 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:14,988 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:56:14,988 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:56:16,046 - WARNING - app - Found stale cache entry for user 12, will be refreshed on next access
2025-07-15 21:56:16,055 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:56:16,060 - DEBUG - app - No dynamic portfolio for user 14, skipping.
2025-07-15 21:56:16,061 - INFO - app - Completed stale cache cleanup task
2025-07-15 21:56:16,064 - WARNING - app - User 20: Missing static orders cache, refreshing...
2025-07-15 21:56:16,091 - DEBUG - app.firebase_stream - Firebase listener triggered (12). Event Type: patch, Path: /. Timestamp: 1752641776.0914526
2025-07-15 21:56:16,092 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0134000000', 'o': '13.0083700000'}, 'XAGUSD': {'b': '37.8320000000', 'o': '37.8230000000'}, 'NZDJPY': {'b': '88.6050000000', 'o': '88.5940000000'}, 'GBPAUD': {'b': '2.0531500000',
2025-07-15 21:56:16,092 - WARNING - app - User 21: Missing static orders cache, refreshing...
2025-07-15 21:56:16,092 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0134000000', 'o': '13.0083700000'}, 'XAGUSD': {'b': '37.8320000000', 'o': '37.8230000000'}, 'NZDJPY': {'b': '88.6050000000', 'o': '88.5940000000'}, 'GBPAUD': {'b': '2.0531500000',...
2025-07-15 21:56:16,092 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:16,122 - WARNING - app - User 22: Missing static orders cache, refreshing...
2025-07-15 21:56:16,148 - WARNING - app - User 23: Missing static orders cache, refreshing...
2025-07-15 21:56:16,170 - WARNING - app - User 24: Missing static orders cache, refreshing...
2025-07-15 21:56:16,195 - WARNING - app - User 25: Missing static orders cache, refreshing...
2025-07-15 21:56:16,261 - WARNING - app - User 2: Missing static orders cache, refreshing...
2025-07-15 21:56:16,297 - WARNING - app - User 3: Missing static orders cache, refreshing...
2025-07-15 21:56:16,355 - WARNING - app - User 6: Missing static orders cache, refreshing...
2025-07-15 21:56:16,413 - INFO - app - Cache validation completed
2025-07-15 21:56:17,067 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:17,071 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:56:17,072 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:56:17,073 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:56:17,073 - DEBUG - app - User 14 free_margin: 9902.02, margin: 0.0
2025-07-15 21:56:17,075 - DEBUG - app - User 14 has 1 pending orders before filtering.
2025-07-15 21:56:17,075 - DEBUG - app - User 14 has 1 active pending orders after filtering.
2025-07-15 21:56:17,075 - INFO - app - [BarclaysMarginChecker] User 14: free_margin=9902.02, total_pending_margin=23529.81, num_pending_orders=1
2025-07-15 21:56:17,075 - DEBUG - app - User 14 total_pending_margin: 23529.81
2025-07-15 21:56:17,075 - INFO - app - [BarclaysMarginChecker] Considering cancellation: user 14, order 1000301-001, order_margin=23529.81, free_margin=9902.02, total_pending_margin=23529.81
2025-07-15 21:56:17,078 - WARNING - app - [BarclaysMarginChecker] Cancelling order 1000301-001 for user 14 (order_margin=23529.81) due to insufficient margin.
2025-07-15 21:56:17,102 - INFO - app.core.firebase - [FIREBASE] Payload being pushed to Firebase (all stringified): {'order_id': '1000301-001', 'cancel_id': '1000304-002', 'user_id': '14', 'order_type': 'BUY_LIMIT', 'timestamp': '2025-07-16T04:56:17.102213', 'status': 'CANCELLED', 'order_quantity': '1.00000000', 'order_status': 'CANCELLED-PROCESSING', 'contract_value': '1.00000000', 'cancel_message': 'Auto-cancelled due to insufficient margin', 'account_type': 'live'}
2025-07-15 21:56:17,415 - INFO - app.core.firebase - Order data (ID: 1000301-001) sent to Firebase successfully.
2025-07-15 21:56:17,431 - INFO - app - [BarclaysMarginChecker] Successfully cancelled order 1000301-001 for user 14
2025-07-15 21:56:17,434 - DEBUG - app - After cancellation, user 14 free_margin: 9902.02, total_pending_margin: 0
2025-07-15 21:56:17,678 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 21:56:17,695 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 21:56:17,705 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 21:56:17,750 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 21:56:17,815 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 21:56:17,815 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 21:56:17,816 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 21:56:18,027 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 21:56:18,040 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 21:56:18,055 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 21:56:18,055 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 21:56:18,072 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 21:56:18,073 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 21:56:18,101 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 21:56:18,125 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 21:56:18,125 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 21:56:18,145 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 21:56:18,153 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 21:56:18,159 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 21:56:18,165 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 21:56:18,166 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 21:56:18,169 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 21:56:18,172 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 21:56:18,172 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 21:56:18,179 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 21:56:18,179 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 21:56:18,191 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 21:56:18,192 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 21:56:18,340 - DEBUG - app.firebase_stream - Firebase listener triggered (13). Event Type: patch, Path: /. Timestamp: 1752641778.3408587
2025-07-15 21:56:18,341 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.6060000000', 'o': '88.5960000000'}, 'GBPAUD': {'b': '2.0531400000', 'o': '2.0529900000'}, 'USDJPY': {'b': '148.9360000000', 'o': '148.9300000000'}, 'EURNZD': {'b': '1.9532400000',
2025-07-15 21:56:18,342 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'NZDJPY': {'b': '88.6060000000', 'o': '88.5960000000'}, 'GBPAUD': {'b': '2.0531400000', 'o': '2.0529900000'}, 'USDJPY': {'b': '148.9360000000', 'o': '148.9300000000'}, 'EURNZD': {'b': '1.9532400000',...
2025-07-15 21:56:18,342 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:18,445 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:18,447 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:19,451 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:19,452 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:20,454 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:20,458 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:20,701 - DEBUG - app.firebase_stream - Firebase listener triggered (14). Event Type: patch, Path: /. Timestamp: 1752641780.7013557
2025-07-15 21:56:20,701 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0137000000', 'o': '13.0087300000'}, 'NZDJPY': {'b': '88.6030000000', 'o': '88.5950000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0530100000'}, 'BTCUSD': {'b': '117576.100000000
2025-07-15 21:56:20,702 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0137000000', 'o': '13.0087300000'}, 'NZDJPY': {'b': '88.6030000000', 'o': '88.5950000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0530100000'}, 'BTCUSD': {'b': '117576.100000000...
2025-07-15 21:56:20,702 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:21,470 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:21,473 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:22,476 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:22,479 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:22,960 - DEBUG - app.firebase_stream - Firebase listener triggered (15). Event Type: patch, Path: /. Timestamp: 1752641782.960746
2025-07-15 21:56:22,961 - DEBUG - app.firebase_stream - Prepared batch update for 33 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0133000000', 'o': '13.0085000000'}, 'XAGUSD': {'b': '37.8280000000', 'o': '37.8210000000'}, 'NZDJPY': {'b': '88.6060000000', 'o': '88.5970000000'}, 'GBPAUD': {'b': '2.0531700000',
2025-07-15 21:56:22,961 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0133000000', 'o': '13.0085000000'}, 'XAGUSD': {'b': '37.8280000000', 'o': '37.8210000000'}, 'NZDJPY': {'b': '88.6060000000', 'o': '88.5970000000'}, 'GBPAUD': {'b': '2.0531700000',...
2025-07-15 21:56:22,961 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:23,486 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:23,488 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:24,503 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:24,506 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:25,304 - DEBUG - app.firebase_stream - Firebase listener triggered (16). Event Type: patch, Path: /. Timestamp: 1752641785.304203
2025-07-15 21:56:25,304 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0136500000', 'o': '13.0084000000'}, 'XAGUSD': {'b': '37.8340000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6040000000', 'o': '88.5950000000'}, 'GBPAUD': {'b': '2.0531500000',
2025-07-15 21:56:25,304 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0136500000', 'o': '13.0084000000'}, 'XAGUSD': {'b': '37.8340000000', 'o': '37.8260000000'}, 'NZDJPY': {'b': '88.6040000000', 'o': '88.5950000000'}, 'GBPAUD': {'b': '2.0531500000',...
2025-07-15 21:56:25,304 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:25,520 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:25,522 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:26,525 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:26,529 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:27,545 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:27,550 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:27,694 - DEBUG - app.firebase_stream - Firebase listener triggered (17). Event Type: patch, Path: /. Timestamp: 1752641787.6941912
2025-07-15 21:56:27,694 - DEBUG - app.firebase_stream - Prepared batch update for 33 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0136000000', 'o': '13.0081000000'}, 'XAGUSD': {'b': '37.8330000000', 'o': '37.8250000000'}, 'NZDJPY': {'b': '88.6060000000', 'o': '88.5970000000'}, 'GBPAUD': {'b': '2.0531300000',
2025-07-15 21:56:27,694 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0136000000', 'o': '13.0081000000'}, 'XAGUSD': {'b': '37.8330000000', 'o': '37.8250000000'}, 'NZDJPY': {'b': '88.6060000000', 'o': '88.5970000000'}, 'GBPAUD': {'b': '2.0531300000',...
2025-07-15 21:56:27,694 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:28,564 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:28,567 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:29,101 - INFO - app.core.firebase - [FIREBASE] Payload being pushed to Firebase (all stringified): {'order_id': '1000305-001', 'order_company_name': 'BTCUSD', 'order_price': '111.0', 'contract_value': '1.0', 'order_quantity': '1.0', 'order_type': 'BUY_LIMIT', 'order_status': 'PENDING-PROCESSING', 'status': 'PENDING', 'action': 'place_pending_order', 'account_type': 'live', 'timestamp': '2025-07-16T04:56:29.101416'}
2025-07-15 21:56:29,502 - INFO - app.core.firebase - Order data (ID: 1000305-001) sent to Firebase successfully.
2025-07-15 21:56:29,575 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:29,581 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:29,922 - DEBUG - app.firebase_stream - Firebase listener triggered (18). Event Type: patch, Path: /. Timestamp: 1752641789.9225175
2025-07-15 21:56:29,923 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0135000000', 'o': '13.0080700000'}, 'XAGUSD': {'b': '37.8320000000', 'o': '37.8250000000'}, 'NZDJPY': {'b': '88.6070000000', 'o': '88.5970000000'}, 'GBPAUD': {'b': '2.0531400000',
2025-07-15 21:56:29,923 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0135000000', 'o': '13.0080700000'}, 'XAGUSD': {'b': '37.8320000000', 'o': '37.8250000000'}, 'NZDJPY': {'b': '88.6070000000', 'o': '88.5970000000'}, 'GBPAUD': {'b': '2.0531400000',...
2025-07-15 21:56:29,924 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:30,587 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:30,589 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:31,604 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:31,608 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:32,276 - DEBUG - app.firebase_stream - Firebase listener triggered (19). Event Type: patch, Path: /. Timestamp: 1752641792.2764125
2025-07-15 21:56:32,276 - DEBUG - app.firebase_stream - Prepared batch update for 33 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0134000000', 'o': '13.0079000000'}, 'NZDJPY': {'b': '88.6100000000', 'o': '88.6000000000'}, 'GBPAUD': {'b': '2.0531100000', 'o': '2.0529600000'}, 'USDJPY': {'b': '148.9380000000',
2025-07-15 21:56:32,276 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0134000000', 'o': '13.0079000000'}, 'NZDJPY': {'b': '88.6100000000', 'o': '88.6000000000'}, 'GBPAUD': {'b': '2.0531100000', 'o': '2.0529600000'}, 'USDJPY': {'b': '148.9380000000',...
2025-07-15 21:56:32,277 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:32,620 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:32,622 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:33,639 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:33,642 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:34,627 - DEBUG - app.firebase_stream - Firebase listener triggered (20). Event Type: patch, Path: /. Timestamp: 1752641794.6273072
2025-07-15 21:56:34,627 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0126000000', 'o': '13.0079700000'}, 'XAGUSD': {'b': '37.8330000000', 'o': '37.8250000000'}, 'NZDJPY': {'b': '88.6100000000', 'o': '88.6020000000'}, 'GBPAUD': {'b': '2.0531200000',
2025-07-15 21:56:34,628 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0126000000', 'o': '13.0079700000'}, 'XAGUSD': {'b': '37.8330000000', 'o': '37.8250000000'}, 'NZDJPY': {'b': '88.6100000000', 'o': '88.6020000000'}, 'GBPAUD': {'b': '2.0531200000',...
2025-07-15 21:56:34,628 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:34,648 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:34,651 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:35,658 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:35,661 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:36,668 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:36,671 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:36,889 - DEBUG - app.firebase_stream - Firebase listener triggered (21). Event Type: patch, Path: /. Timestamp: 1752641796.8890722
2025-07-15 21:56:36,889 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0128000000', 'o': '13.0081100000'}, 'XAGUSD': {'b': '37.8320000000', 'o': '37.8250000000'}, 'NZDJPY': {'b': '88.6100000000', 'o': '88.6000000000'}, 'GBPAUD': {'b': '2.0531100000',
2025-07-15 21:56:36,890 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0128000000', 'o': '13.0081100000'}, 'XAGUSD': {'b': '37.8320000000', 'o': '37.8250000000'}, 'NZDJPY': {'b': '88.6100000000', 'o': '88.6000000000'}, 'GBPAUD': {'b': '2.0531100000',...
2025-07-15 21:56:36,890 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:37,685 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:37,687 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:38,701 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:38,704 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:39,250 - DEBUG - app.firebase_stream - Firebase listener triggered (22). Event Type: patch, Path: /. Timestamp: 1752641799.2500768
2025-07-15 21:56:39,250 - DEBUG - app.firebase_stream - Prepared batch update for 35 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0132000000', 'o': '13.0083700000'}, 'XAGUSD': {'b': '37.8330000000', 'o': '37.8250000000'}, 'NZDJPY': {'b': '88.6100000000', 'o': '88.6020000000'}, 'GBPAUD': {'b': '2.0531400000',
2025-07-15 21:56:39,250 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0132000000', 'o': '13.0083700000'}, 'XAGUSD': {'b': '37.8330000000', 'o': '37.8250000000'}, 'NZDJPY': {'b': '88.6100000000', 'o': '88.6020000000'}, 'GBPAUD': {'b': '2.0531400000',...
2025-07-15 21:56:39,251 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:39,711 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:39,715 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:40,725 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:40,730 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:41,493 - DEBUG - app.firebase_stream - Firebase listener triggered (23). Event Type: patch, Path: /. Timestamp: 1752641801.4938934
2025-07-15 21:56:41,494 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0135000000', 'o': '13.0082200000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8300000000'}, 'GBPAUD': {'b': '2.0530900000', 'o': '2.0529200000'}, 'USDJPY': {'b': '148.9460000000',
2025-07-15 21:56:41,495 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0135000000', 'o': '13.0082200000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8300000000'}, 'GBPAUD': {'b': '2.0530900000', 'o': '2.0529200000'}, 'USDJPY': {'b': '148.9460000000',...
2025-07-15 21:56:41,495 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:41,748 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:41,751 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:42,757 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:42,760 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:43,776 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:43,779 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:43,856 - DEBUG - app.firebase_stream - Firebase listener triggered (24). Event Type: patch, Path: /. Timestamp: 1752641803.8562214
2025-07-15 21:56:43,856 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0133000000', 'o': '13.0095000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6030000000'}, 'USDJPY': {'b': '148.9460000000', 'o': '148.9390000000'}, 'CADCHF': {'b': '0.5843700000
2025-07-15 21:56:43,863 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0133000000', 'o': '13.0095000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6030000000'}, 'USDJPY': {'b': '148.9460000000', 'o': '148.9390000000'}, 'CADCHF': {'b': '0.5843700000...
2025-07-15 21:56:43,864 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:44,785 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:44,790 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:56:44,790 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:56:44,791 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:56:44,792 - DEBUG - app - User 14 free_margin: 9902.02, margin: 0.0
2025-07-15 21:56:44,795 - DEBUG - app - User 14 has 1 pending orders before filtering.
2025-07-15 21:56:44,795 - DEBUG - app - User 14 has 1 active pending orders after filtering.
2025-07-15 21:56:44,795 - INFO - app - [BarclaysMarginChecker] User 14: free_margin=9902.02, total_pending_margin=23519.73, num_pending_orders=1
2025-07-15 21:56:44,795 - DEBUG - app - User 14 total_pending_margin: 23519.73
2025-07-15 21:56:44,796 - INFO - app - [BarclaysMarginChecker] Considering cancellation: user 14, order 1000305-001, order_margin=23519.73, free_margin=9902.02, total_pending_margin=23519.73
2025-07-15 21:56:44,798 - WARNING - app - [BarclaysMarginChecker] Cancelling order 1000305-001 for user 14 (order_margin=23519.73) due to insufficient margin.
2025-07-15 21:56:44,853 - INFO - app.core.firebase - [FIREBASE] Payload being pushed to Firebase (all stringified): {'order_id': '1000305-001', 'cancel_id': '1000308-002', 'user_id': '14', 'order_type': 'BUY_LIMIT', 'timestamp': '2025-07-16T04:56:44.853277', 'status': 'CANCELLED', 'order_quantity': '1.00000000', 'order_status': 'CANCELLED-PROCESSING', 'contract_value': '1.00000000', 'cancel_message': 'Auto-cancelled due to insufficient margin', 'account_type': 'live'}
2025-07-15 21:56:45,166 - INFO - app.core.firebase - Order data (ID: 1000305-001) sent to Firebase successfully.
2025-07-15 21:56:45,197 - INFO - app - [BarclaysMarginChecker] Successfully cancelled order 1000305-001 for user 14
2025-07-15 21:56:45,200 - DEBUG - app - After cancellation, user 14 free_margin: 9902.02, total_pending_margin: 0
2025-07-15 21:56:46,114 - DEBUG - app.firebase_stream - Firebase listener triggered (25). Event Type: patch, Path: /. Timestamp: 1752641806.1140356
2025-07-15 21:56:46,114 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0132000000', 'o': '13.0082200000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6040000000'}, 'USDJPY': {'b': '148.9480000000', 'o': '148.9420000000'}, 'CADCHF': {'b': '0.5843600000
2025-07-15 21:56:46,115 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0132000000', 'o': '13.0082200000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6040000000'}, 'USDJPY': {'b': '148.9480000000', 'o': '148.9420000000'}, 'CADCHF': {'b': '0.5843600000...
2025-07-15 21:56:46,121 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:46,213 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:46,218 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:47,227 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:47,231 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:48,241 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:48,243 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:48,467 - DEBUG - app.firebase_stream - Firebase listener triggered (26). Event Type: patch, Path: /. Timestamp: 1752641808.4677303
2025-07-15 21:56:48,468 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0137000000', 'o': '13.0082000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6050000000'}, 'GBPAUD': {'b': '2.0531400000', 'o': '2.0529500000'}, 'BTCUSD': {'b': '117559.000000000
2025-07-15 21:56:48,468 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0137000000', 'o': '13.0082000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6050000000'}, 'GBPAUD': {'b': '2.0531400000', 'o': '2.0529500000'}, 'BTCUSD': {'b': '117559.000000000...
2025-07-15 21:56:48,468 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:49,250 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:49,254 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:50,261 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:50,265 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:50,722 - DEBUG - app.firebase_stream - Firebase listener triggered (27). Event Type: patch, Path: /. Timestamp: 1752641810.7223804
2025-07-15 21:56:50,723 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0131000000', 'o': '13.0082700000'}, 'XAGUSD': {'b': '37.8320000000', 'o': '37.8250000000'}, 'NZDJPY': {'b': '88.6170000000', 'o': '88.6070000000'}, 'GBPAUD': {'b': '2.0530900000',
2025-07-15 21:56:50,724 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0131000000', 'o': '13.0082700000'}, 'XAGUSD': {'b': '37.8320000000', 'o': '37.8250000000'}, 'NZDJPY': {'b': '88.6170000000', 'o': '88.6070000000'}, 'GBPAUD': {'b': '2.0530900000',...
2025-07-15 21:56:50,726 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:51,269 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:51,272 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:51,383 - WARNING - app - No user data found for user 5 (live). Skipping portfolio update.
2025-07-15 21:56:51,392 - WARNING - app - No group settings found for group string. Skipping portfolio update for user 8.
2025-07-15 21:56:52,230 - DEBUG - app.services.portfolio_calculator - Position calculation for XAGUSD: Type=BUY, Entry=41.09800000, Current=37.8125, Quantity=0.01000000, Contract Size=5000.00000000, PnL=-164.275000000000000000000000, PnL USD=-164.275000000000000000000000, Commission=0.10000000, Final PnL=-164.375000000000000000000000
2025-07-15 21:56:52,230 - DEBUG - app.services.portfolio_calculator - Position calculation for BTCUSD: Type=BUY, Entry=132091.90000000, Current=117506.7, Quantity=6.00000000, Contract Size=1.00000000, PnL=-87511.20000000000000000000000, PnL USD=-87511.20000000000000000000000, Commission=3661.62000000, Final PnL=-91172.82000000000000000000000
2025-07-15 21:56:52,230 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 63.49383999546163494328101812% which is below threshold 100.0%
2025-07-15 21:56:52,642 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:52,645 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:53,078 - DEBUG - app.firebase_stream - Firebase listener triggered (28). Event Type: patch, Path: /. Timestamp: 1752641813.077972
2025-07-15 21:56:53,078 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0134000000', 'o': '13.0080700000'}, 'NZDJPY': {'b': '88.6170000000', 'o': '88.6080000000'}, 'CADCHF': {'b': '0.5843600000', 'o': '0.5843000000'}, 'EURNZD': {'b': '1.9531900000', '
2025-07-15 21:56:53,078 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0134000000', 'o': '13.0080700000'}, 'NZDJPY': {'b': '88.6170000000', 'o': '88.6080000000'}, 'CADCHF': {'b': '0.5843600000', 'o': '0.5843000000'}, 'EURNZD': {'b': '1.9531900000', '...
2025-07-15 21:56:53,080 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:53,080 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=96.66800000, Current=97.135, Quantity=0.01000000, Contract Size=100000.00000000, PnL=467.000000000000000000000000, PnL USD=3.135217149033587776009882312, Commission=0.10000000, Final PnL=3.035217149033587776009882312
2025-07-15 21:56:53,087 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=SELL, Entry=96.56000000, Current=97.243, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-683.000000000000000000000000, PnL USD=-4.585338999550193685256423167, Commission=0.10000000, Final PnL=-4.685338999550193685256423167
2025-07-15 21:56:53,111 - WARNING - app - User 2 has no group_name set. Skipping portfolio update.
2025-07-15 21:56:53,164 - WARNING - app - No group settings found for group string. Skipping portfolio update for user 3.
2025-07-15 21:56:53,269 - INFO - app.core.firebase - [FIREBASE] Payload being pushed to Firebase (all stringified): {'order_id': '1000309-001', 'order_company_name': 'BTCUSD', 'order_price': '133.0', 'contract_value': '1.0', 'order_quantity': '1.0', 'order_type': 'BUY_LIMIT', 'order_status': 'PENDING-PROCESSING', 'status': 'PENDING', 'action': 'place_pending_order', 'account_type': 'live', 'timestamp': '2025-07-16T04:56:53.269306'}
2025-07-15 21:56:53,574 - INFO - app.core.firebase - Order data (ID: 1000309-001) sent to Firebase successfully.
2025-07-15 21:56:53,590 - WARNING - app - User 5 has no group_name set. Skipping portfolio update.
2025-07-15 21:56:53,592 - WARNING - app - User 6 has no group_name set. Skipping portfolio update.
2025-07-15 21:56:53,653 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:53,660 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:54,077 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDUSD: Type=BUY, Entry=0.64743000, Current=0.65235, Quantity=0.10000000, Contract Size=100000.00000000, PnL=49.200000000000000000000000, PnL USD=49.200000000000000000000000, Commission=1.00000000, Final PnL=48.200000000000000000000000
2025-07-15 21:56:54,077 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDUSD: Type=SELL, Entry=0.64707000, Current=0.65265, Quantity=0.22000000, Contract Size=100000.00000000, PnL=-122.760000000000000000000000, PnL USD=-122.760000000000000000000000, Commission=2.20000000, Final PnL=-124.960000000000000000000000
2025-07-15 21:56:54,079 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFSGD: Type=BUY, Entry=1.57561500, Current=1.602975, Quantity=0.10000000, Contract Size=100000.00000000, PnL=273.600000000000000000000000, PnL USD=212.9464598429364196041499654, Commission=1.00000000, Final PnL=211.9464598429364196041499654
2025-07-15 21:56:54,080 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFSGD: Type=SELL, Entry=1.57505500, Current=1.603375, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-283.200000000000000000000000, PnL USD=-220.4182654514605045025411922, Commission=1.00000000, Final PnL=-221.4182654514605045025411922
2025-07-15 21:56:54,083 - DEBUG - app.services.portfolio_calculator - Position calculation for CADJPY: Type=SELL, Entry=106.24150000, Current=108.6155, Quantity=0.15000000, Contract Size=100000.00000000, PnL=-35610.00000000000000000000000, PnL USD=-239.0686995226682242049505549, Commission=0E-8, Final PnL=-239.0686995226682242049505549
2025-07-15 21:56:54,086 - DEBUG - app.services.portfolio_calculator - Position calculation for CADJPY: Type=BUY, Entry=106.27050000, Current=108.5835, Quantity=0.15000000, Contract Size=100000.00000000, PnL=34695.00000000000000000000000, PnL USD=232.9258222392298241727256249, Commission=0E-8, Final PnL=232.9258222392298241727256249
2025-07-15 21:56:54,086 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=BUY, Entry=1.77481000, Current=1.7804799999999998, Quantity=0.22000000, Contract Size=100000.00000000, PnL=124.7399999999956000000000000, PnL USD=81.39284999999712900000000000, Commission=2.20000000, Final PnL=79.19284999999712900000000000
2025-07-15 21:56:54,087 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=SELL, Entry=1.77439000, Current=1.78088, Quantity=0.21000000, Contract Size=100000.00000000, PnL=-136.290000000000000000000000, PnL USD=-88.92922500000000000000000000, Commission=2.10000000, Final PnL=-91.02922500000000000000000000
2025-07-15 21:56:54,089 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFJPY: Type=BUY, Entry=178.15500000, Current=185.82500000000002, Quantity=0.10000000, Contract Size=100000.00000000, PnL=76700.00000000020000000000000, PnL USD=514.9275274751109410350916061, Commission=1.00000000, Final PnL=513.9275274751109410350916061
2025-07-15 21:56:54,090 - DEBUG - app.services.portfolio_calculator - Position calculation for CHFJPY: Type=SELL, Entry=178.09500000, Current=185.86499999999998, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-77699.99999999980000000000000, PnL USD=-521.6410545608332829818801904, Commission=1.00000000, Final PnL=-522.6410545608332829818801904
2025-07-15 21:56:54,090 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=BUY, Entry=1.77480000, Current=1.7804799999999998, Quantity=0.05000000, Contract Size=100000.00000000, PnL=28.39999999999900000000000000, PnL USD=18.53099999999934750000000000, Commission=0.50000000, Final PnL=18.03099999999934750000000000
2025-07-15 21:56:54,091 - DEBUG - app.services.portfolio_calculator - Position calculation for EURAUD: Type=SELL, Entry=1.77442000, Current=1.78088, Quantity=0.05000000, Contract Size=100000.00000000, PnL=-32.300000000000000000000000, PnL USD=-21.07575000000000000000000000, Commission=0.50000000, Final PnL=-21.57575000000000000000000000
2025-07-15 21:56:54,091 - DEBUG - app.services.portfolio_calculator - Position calculation for EURGBP: Type=SELL, Entry=0.85403000, Current=0.86752, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-134.900000000000000000000000, PnL USD=-180.7106910000000000000000000, Commission=1.00000000, Final PnL=-181.7106910000000000000000000
2025-07-15 21:56:54,091 - DEBUG - app.services.portfolio_calculator - Position calculation for EURJPY: Type=BUY, Entry=167.26050000, Current=173.0445, Quantity=0.10000000, Contract Size=100000.00000000, PnL=57840.00000000000000000000000, PnL USD=388.3104066383355823649070512, Commission=1.00000000, Final PnL=387.3104066383355823649070512
2025-07-15 21:56:54,092 - DEBUG - app.services.portfolio_calculator - Position calculation for EURJPY: Type=SELL, Entry=167.23150000, Current=173.0775, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-58460.00000000000000000000000, PnL USD=-392.4727934314850993266332333, Commission=1.00000000, Final PnL=-393.4727934314850993266332333
2025-07-15 21:56:54,093 - DEBUG - app.services.portfolio_calculator - Position calculation for EURNZD: Type=SELL, Entry=1.91952500, Current=1.953315, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-337.900000000000000000000000, PnL USD=-201.0200890000000000000000000, Commission=1.00000000, Final PnL=-202.0200890000000000000000000
2025-07-15 21:56:54,093 - DEBUG - app.services.portfolio_calculator - Position calculation for EURNZD: Type=BUY, Entry=1.92063500, Current=1.952885, Quantity=0.10000000, Contract Size=100000.00000000, PnL=322.500000000000000000000000, PnL USD=191.8584750000000000000000000, Commission=1.00000000, Final PnL=190.8584750000000000000000000
2025-07-15 21:56:54,093 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=SELL, Entry=1.34376000, Current=1.3397, Quantity=0.25000000, Contract Size=0E-8, PnL=0E-24, PnL USD=0E-24, Commission=2.50000000, Final PnL=-2.500000000000000000000000
2025-07-15 21:56:54,093 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=SELL, Entry=1.34361000, Current=1.3397, Quantity=0.25000000, Contract Size=0E-8, PnL=0E-24, PnL USD=0E-24, Commission=2.50000000, Final PnL=-2.500000000000000000000000
2025-07-15 21:56:54,093 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=BUY, Entry=1.34379000, Current=1.33949, Quantity=0.25000000, Contract Size=0E-8, PnL=-0E-24, PnL USD=-0E-24, Commission=2.50000000, Final PnL=-2.500000000000000000000000
2025-07-15 21:56:54,093 - DEBUG - app.services.portfolio_calculator - Position calculation for GBPUSD: Type=BUY, Entry=1.34378000, Current=1.33949, Quantity=0.25000000, Contract Size=0E-8, PnL=-0E-24, PnL USD=-0E-24, Commission=2.50000000, Final PnL=-2.500000000000000000000000
2025-07-15 21:56:54,094 - DEBUG - app.services.portfolio_calculator - Position calculation for NZDJPY: Type=BUY, Entry=87.10150000, Current=88.5955, Quantity=0.01000000, Contract Size=100000.00000000, PnL=1494.000000000000000000000000, PnL USD=10.03000946607319087228857425, Commission=0.10000000, Final PnL=9.93000946607319087228857425
2025-07-15 21:56:54,095 - DEBUG - app.services.portfolio_calculator - Position calculation for USDCHF: Type=SELL, Entry=0.81771000, Current=0.8016099999999999, Quantity=0.15000000, Contract Size=100000.00000000, PnL=241.5000000000015000000000000, PnL USD=301.3288414748287478944413251, Commission=1.50000000, Final PnL=299.8288414748287478944413251
2025-07-15 21:56:54,098 - DEBUG - app.services.portfolio_calculator - Position calculation for USDCHF: Type=BUY, Entry=0.81805000, Current=0.8012900000000001, Quantity=0.15000000, Contract Size=100000.00000000, PnL=-251.3999999999985000000000000, PnL USD=-313.6814523675818828373572899, Commission=1.50000000, Final PnL=-315.1814523675818828373572899
2025-07-15 21:56:54,099 - DEBUG - app.services.portfolio_calculator - Position calculation for USDNOK: Type=BUY, Entry=10.04973000, Current=10.237960000000001, Quantity=0.10000000, Contract Size=100000.00000000, PnL=1882.300000000010000000000000, PnL USD=183.8004101162005663509422908, Commission=1.00000000, Final PnL=182.8004101162005663509422908
2025-07-15 21:56:54,101 - DEBUG - app.services.portfolio_calculator - Position calculation for USDNOK: Type=BUY, Entry=10.05023000, Current=10.237960000000001, Quantity=0.10000000, Contract Size=100000.00000000, PnL=1877.300000000010000000000000, PnL USD=183.3121765452602284933112001, Commission=1.00000000, Final PnL=182.3121765452602284933112001
2025-07-15 21:56:54,102 - DEBUG - app.services.portfolio_calculator - Position calculation for USDSGD: Type=SELL, Entry=1.28795000, Current=1.28498, Quantity=0.31000000, Contract Size=100000.00000000, PnL=92.070000000000000000000000, PnL USD=71.65928566425130172863336006, Commission=3.10000000, Final PnL=68.55928566425130172863336006
2025-07-15 21:56:54,104 - DEBUG - app.services.portfolio_calculator - Position calculation for USDTRY: Type=SELL, Entry=39.56087000, Current=40.2611900000, Quantity=0.10000000, Contract Size=100000.00000000, PnL=-7003.200000000000000000000000, PnL USD=-173.9441879388065777489438340, Commission=1.00000000, Final PnL=-174.9441879388065777489438340
2025-07-15 21:56:54,589 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89752000, Current=0.89493, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-2.590000000000000000000000, PnL USD=-1.888264327843514650452381473, Commission=0.10000000, Final PnL=-1.988264327843514650452381473
2025-07-15 21:56:54,670 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:54,673 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:55,418 - DEBUG - app.firebase_stream - Firebase listener triggered (29). Event Type: patch, Path: /. Timestamp: 1752641815.4182441
2025-07-15 21:56:55,418 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0133000000', 'o': '13.0085700000'}, 'XAGUSD': {'b': '37.8390000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6160000000', 'o': '88.6070000000'}, 'GBPAUD': {'b': '2.0530900000',
2025-07-15 21:56:55,419 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0133000000', 'o': '13.0085700000'}, 'XAGUSD': {'b': '37.8390000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6160000000', 'o': '88.6070000000'}, 'GBPAUD': {'b': '2.0530900000',...
2025-07-15 21:56:55,419 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:55,678 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:55,682 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:56,686 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:56,689 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:57,684 - DEBUG - app.firebase_stream - Firebase listener triggered (30). Event Type: patch, Path: /. Timestamp: 1752641817.683998
2025-07-15 21:56:57,684 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0132000000', 'o': '13.0081800000'}, 'NZDJPY': {'b': '88.6160000000', 'o': '88.6060000000'}, 'GBPAUD': {'b': '2.0530900000', 'o': '2.0529500000'}, 'USDJPY': {'b': '148.9500000000',
2025-07-15 21:56:57,685 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0132000000', 'o': '13.0081800000'}, 'NZDJPY': {'b': '88.6160000000', 'o': '88.6060000000'}, 'GBPAUD': {'b': '2.0530900000', 'o': '2.0529500000'}, 'USDJPY': {'b': '148.9500000000',...
2025-07-15 21:56:57,686 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:56:57,708 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:57,722 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:58,746 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:58,750 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:56:59,763 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:56:59,765 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:00,133 - DEBUG - app.firebase_stream - Firebase listener triggered (31). Event Type: patch, Path: /. Timestamp: 1752641820.1332347
2025-07-15 21:57:00,133 - DEBUG - app.firebase_stream - Prepared batch update for 27 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0135000000', 'o': '13.0080000000'}, 'NZDJPY': {'b': '88.6100000000', 'o': '88.6010000000'}, 'BTCUSD': {'b': '117556.7000000000', 'o': '117556.6000000000'}, 'USDJPY': {'b': '148.94
2025-07-15 21:57:00,133 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0135000000', 'o': '13.0080000000'}, 'NZDJPY': {'b': '88.6100000000', 'o': '88.6010000000'}, 'BTCUSD': {'b': '117556.7000000000', 'o': '117556.6000000000'}, 'USDJPY': {'b': '148.94...
2025-07-15 21:57:00,134 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:57:00,777 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:00,780 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:01,792 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:01,795 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:02,418 - DEBUG - app.firebase_stream - Firebase listener triggered (32). Event Type: patch, Path: /. Timestamp: 1752641822.4187467
2025-07-15 21:57:02,419 - DEBUG - app.firebase_stream - Prepared batch update for 36 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0129000000', 'o': '13.0085600000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6170000000', 'o': '88.6080000000'}, 'GBPAUD': {'b': '2.0530900000',
2025-07-15 21:57:02,419 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0129000000', 'o': '13.0085600000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6170000000', 'o': '88.6080000000'}, 'GBPAUD': {'b': '2.0530900000',...
2025-07-15 21:57:02,420 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:57:02,802 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:02,805 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:03,808 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:03,811 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:04,750 - DEBUG - app.firebase_stream - Firebase listener triggered (33). Event Type: patch, Path: /. Timestamp: 1752641824.7500803
2025-07-15 21:57:04,751 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0132000000', 'o': '13.0086800000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6040000000'}, 'GBPAUD': {'b': '2.0531100000',
2025-07-15 21:57:04,752 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0132000000', 'o': '13.0086800000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6040000000'}, 'GBPAUD': {'b': '2.0531100000',...
2025-07-15 21:57:04,753 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:57:04,818 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:04,838 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:05,870 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:05,874 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:06,885 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:06,888 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:07,105 - DEBUG - app.firebase_stream - Firebase listener triggered (34). Event Type: patch, Path: /. Timestamp: 1752641827.105445
2025-07-15 21:57:07,106 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0135000000', 'o': '13.0081400000'}, 'XAGUSD': {'b': '37.8370000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6170000000', 'o': '88.6100000000'}, 'GBPAUD': {'b': '2.0531200000',
2025-07-15 21:57:07,108 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0135000000', 'o': '13.0081400000'}, 'XAGUSD': {'b': '37.8370000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6170000000', 'o': '88.6100000000'}, 'GBPAUD': {'b': '2.0531200000',...
2025-07-15 21:57:07,108 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:57:07,891 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:07,895 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:08,904 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:08,909 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:09,387 - DEBUG - app.firebase_stream - Firebase listener triggered (35). Event Type: patch, Path: /. Timestamp: 1752641829.387264
2025-07-15 21:57:09,388 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0129000000', 'o': '13.0079400000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'GBPAUD': {'b': '2.0530900000', 'o': '2.0529100000'}, 'USDJPY': {'b': '148.9500000000',
2025-07-15 21:57:09,388 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0129000000', 'o': '13.0079400000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'GBPAUD': {'b': '2.0530900000', 'o': '2.0529100000'}, 'USDJPY': {'b': '148.9500000000',...
2025-07-15 21:57:09,389 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:57:09,920 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:09,923 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:10,933 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:10,936 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:11,701 - DEBUG - app.firebase_stream - Firebase listener triggered (36). Event Type: patch, Path: /. Timestamp: 1752641831.7010958
2025-07-15 21:57:11,701 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0134000000', 'o': '13.0088000000'}, 'XAGUSD': {'b': '37.8370000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6170000000', 'o': '88.6080000000'}, 'GBPAUD': {'b': '2.0530900000',
2025-07-15 21:57:11,701 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0134000000', 'o': '13.0088000000'}, 'XAGUSD': {'b': '37.8370000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6170000000', 'o': '88.6080000000'}, 'GBPAUD': {'b': '2.0530900000',...
2025-07-15 21:57:11,701 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:57:11,954 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:11,956 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:12,973 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:12,975 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:13,989 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:13,993 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:14,067 - DEBUG - app.firebase_stream - Firebase listener triggered (37). Event Type: patch, Path: /. Timestamp: 1752641834.0675566
2025-07-15 21:57:14,068 - DEBUG - app.firebase_stream - Prepared batch update for 23 symbols from root path for queue. Preview: {'GBPAUD': {'b': '2.0530900000', 'o': '2.0529100000'}, 'USDJPY': {'b': '148.9530000000', 'o': '148.9470000000'}, 'CADCHF': {'b': '0.5843500000', 'o': '0.5842800000'}, 'EURZAR': {'b': '20.7748500000', 
2025-07-15 21:57:14,069 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPAUD': {'b': '2.0530900000', 'o': '2.0529100000'}, 'USDJPY': {'b': '148.9530000000', 'o': '148.9470000000'}, 'CADCHF': {'b': '0.5843500000', 'o': '0.5842800000'}, 'EURZAR': {'b': '20.7748500000', ...
2025-07-15 21:57:14,070 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:57:15,009 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:15,013 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:16,026 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:16,030 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:16,431 - DEBUG - app.firebase_stream - Firebase listener triggered (38). Event Type: patch, Path: /. Timestamp: 1752641836.4312773
2025-07-15 21:57:16,431 - DEBUG - app.firebase_stream - Prepared batch update for 28 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0134000000', 'o': '13.0082600000'}, 'XAGUSD': {'b': '37.8390000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6160000000', 'o': '88.6060000000'}, 'GBPAUD': {'b': '2.0530900000',
2025-07-15 21:57:16,432 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0134000000', 'o': '13.0082600000'}, 'XAGUSD': {'b': '37.8390000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6160000000', 'o': '88.6060000000'}, 'GBPAUD': {'b': '2.0530900000',...
2025-07-15 21:57:16,433 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:57:17,043 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:17,048 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:18,060 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:18,062 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:18,619 - DEBUG - app.firebase_stream - Firebase listener triggered (39). Event Type: patch, Path: /. Timestamp: 1752641838.6192582
2025-07-15 21:57:18,619 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0134000000', 'o': '13.0083300000'}, 'XAGUSD': {'b': '37.8370000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6150000000', 'o': '88.6050000000'}, 'GBPAUD': {'b': '2.0530900000',
2025-07-15 21:57:18,620 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0134000000', 'o': '13.0083300000'}, 'XAGUSD': {'b': '37.8370000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6150000000', 'o': '88.6050000000'}, 'GBPAUD': {'b': '2.0530900000',...
2025-07-15 21:57:18,620 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:57:19,071 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:19,074 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:20,091 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:20,094 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:21,030 - DEBUG - app.firebase_stream - Firebase listener triggered (40). Event Type: patch, Path: /. Timestamp: 1752641841.0308585
2025-07-15 21:57:21,031 - DEBUG - app.firebase_stream - Prepared batch update for 26 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6180000000', 'o': '88.6110000000'}, 'GBPAUD': {'b': '2.0531000000', 'o': '2.0529300000'}, 'BTCUSD': {'b': '117582.500000000
2025-07-15 21:57:21,031 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6180000000', 'o': '88.6110000000'}, 'GBPAUD': {'b': '2.0531000000', 'o': '2.0529300000'}, 'BTCUSD': {'b': '117582.500000000...
2025-07-15 21:57:21,032 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:57:21,100 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:21,108 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:22,121 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:22,123 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:23,129 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:23,132 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:23,391 - DEBUG - app.firebase_stream - Firebase listener triggered (41). Event Type: patch, Path: /. Timestamp: 1752641843.391795
2025-07-15 21:57:23,392 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'NZDJPY': {'b': '88.6160000000', 'o': '88.6070000000'}, 'GBPAUD': {'b': '2.0531200000', 'o': '2.0529500000'}, 'USDJPY': {'b': '148.9420000000', 'o': '148.9380000000'}, 'CADCHF': {'b': '0.5843400000',
2025-07-15 21:57:23,393 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'NZDJPY': {'b': '88.6160000000', 'o': '88.6070000000'}, 'GBPAUD': {'b': '2.0531200000', 'o': '2.0529500000'}, 'USDJPY': {'b': '148.9420000000', 'o': '148.9380000000'}, 'CADCHF': {'b': '0.5843400000',...
2025-07-15 21:57:23,398 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:57:24,139 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:24,148 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:57:24,148 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:57:24,150 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:57:24,151 - DEBUG - app - User 14 free_margin: 9902.02, margin: 0.0
2025-07-15 21:57:24,155 - DEBUG - app - User 14 has 1 pending orders before filtering.
2025-07-15 21:57:24,155 - DEBUG - app - User 14 has 1 active pending orders after filtering.
2025-07-15 21:57:24,155 - INFO - app - [BarclaysMarginChecker] User 14: free_margin=9902.02, total_pending_margin=23513.71, num_pending_orders=1
2025-07-15 21:57:24,156 - DEBUG - app - User 14 total_pending_margin: 23513.71
2025-07-15 21:57:24,156 - INFO - app - [BarclaysMarginChecker] Considering cancellation: user 14, order 1000309-001, order_margin=23513.71, free_margin=9902.02, total_pending_margin=23513.71
2025-07-15 21:57:24,158 - WARNING - app - [BarclaysMarginChecker] Cancelling order 1000309-001 for user 14 (order_margin=23513.71) due to insufficient margin.
2025-07-15 21:57:24,180 - INFO - app.core.firebase - [FIREBASE] Payload being pushed to Firebase (all stringified): {'order_id': '1000309-001', 'cancel_id': '1000312-002', 'user_id': '14', 'order_type': 'BUY_LIMIT', 'timestamp': '2025-07-16T04:57:24.180130', 'status': 'CANCELLED', 'order_quantity': '1.00000000', 'order_status': 'CANCELLED-PROCESSING', 'contract_value': '1.00000000', 'cancel_message': 'Auto-cancelled due to insufficient margin', 'account_type': 'live'}
2025-07-15 21:57:24,487 - INFO - app.core.firebase - Order data (ID: 1000309-001) sent to Firebase successfully.
2025-07-15 21:57:24,511 - INFO - app - [BarclaysMarginChecker] Successfully cancelled order 1000309-001 for user 14
2025-07-15 21:57:24,514 - DEBUG - app - After cancellation, user 14 free_margin: 9902.02, total_pending_margin: 0
2025-07-15 21:57:25,524 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:25,527 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:25,627 - DEBUG - app.firebase_stream - Firebase listener triggered (42). Event Type: patch, Path: /. Timestamp: 1752641845.6277196
2025-07-15 21:57:25,628 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0135000000', 'o': '13.0082600000'}, 'NZDJPY': {'b': '88.6110000000', 'o': '88.6060000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0529600000'}, 'BTCUSD': {'b': '117586.900000000
2025-07-15 21:57:25,628 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0135000000', 'o': '13.0082600000'}, 'NZDJPY': {'b': '88.6110000000', 'o': '88.6060000000'}, 'GBPAUD': {'b': '2.0531500000', 'o': '2.0529600000'}, 'BTCUSD': {'b': '117586.900000000...
2025-07-15 21:57:25,628 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:57:26,536 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:26,541 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:27,550 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:27,553 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:27,987 - DEBUG - app.firebase_stream - Firebase listener triggered (43). Event Type: patch, Path: /. Timestamp: 1752641847.9872727
2025-07-15 21:57:27,987 - DEBUG - app.firebase_stream - Prepared batch update for 24 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0138000000', 'o': '13.0081900000'}, 'NZDJPY': {'b': '88.6140000000', 'o': '88.6060000000'}, 'GBPAUD': {'b': '2.0531800000', 'o': '2.0530000000'}, 'USDJPY': {'b': '148.9420000000',
2025-07-15 21:57:27,988 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0138000000', 'o': '13.0081900000'}, 'NZDJPY': {'b': '88.6140000000', 'o': '88.6060000000'}, 'GBPAUD': {'b': '2.0531800000', 'o': '2.0530000000'}, 'USDJPY': {'b': '148.9420000000',...
2025-07-15 21:57:27,989 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:57:28,568 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:28,571 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:29,578 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:29,582 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:30,242 - DEBUG - app.firebase_stream - Firebase listener triggered (44). Event Type: patch, Path: /. Timestamp: 1752641850.2424753
2025-07-15 21:57:30,243 - DEBUG - app.firebase_stream - Prepared batch update for 20 symbols from root path for queue. Preview: {'GBPAUD': {'b': '2.0530900000', 'o': '2.0529200000'}, 'USDJPY': {'b': '148.9420000000', 'o': '148.9360000000'}, 'EURZAR': {'b': '20.7748500000', 'o': '20.7687500000'}, 'AUDJPY': {'b': '97.1870000000'
2025-07-15 21:57:30,244 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPAUD': {'b': '2.0530900000', 'o': '2.0529200000'}, 'USDJPY': {'b': '148.9420000000', 'o': '148.9360000000'}, 'EURZAR': {'b': '20.7748500000', 'o': '20.7687500000'}, 'AUDJPY': {'b': '97.1870000000'...
2025-07-15 21:57:30,247 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:57:30,591 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:30,596 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:31,605 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:31,607 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:32,281 - INFO - app.core.firebase - [FIREBASE] Payload being pushed to Firebase (all stringified): {'order_id': '1000313-001', 'order_company_name': 'BTCUSD', 'order_price': '125.0', 'contract_value': '1.0', 'order_quantity': '1.0', 'order_type': 'BUY_LIMIT', 'order_status': 'PENDING-PROCESSING', 'status': 'PENDING', 'action': 'place_pending_order', 'account_type': 'live', 'timestamp': '2025-07-16T04:57:32.281849'}
2025-07-15 21:57:32,603 - DEBUG - app.firebase_stream - Firebase listener triggered (45). Event Type: patch, Path: /. Timestamp: 1752641852.6032043
2025-07-15 21:57:32,603 - INFO - app.core.firebase - Order data (ID: 1000313-001) sent to Firebase successfully.
2025-07-15 21:57:32,603 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.8370000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6180000000', 'o': '88.6090000000'}, 'GBPAUD': {'b': '2.0531000000', 'o': '2.0529300000'}, 'USDJPY': {'b': '148.9400000000',
2025-07-15 21:57:32,606 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '37.8370000000', 'o': '37.8300000000'}, 'NZDJPY': {'b': '88.6180000000', 'o': '88.6090000000'}, 'GBPAUD': {'b': '2.0531000000', 'o': '2.0529300000'}, 'USDJPY': {'b': '148.9400000000',...
2025-07-15 21:57:32,606 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:57:32,613 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:32,637 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:33,668 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:33,672 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:34,678 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:34,681 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:34,859 - DEBUG - app.firebase_stream - Firebase listener triggered (46). Event Type: patch, Path: /. Timestamp: 1752641854.8594072
2025-07-15 21:57:34,860 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0134000000', 'o': '13.0096000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6040000000'}, 'GBPAUD': {'b': '2.0530200000',
2025-07-15 21:57:34,861 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0134000000', 'o': '13.0096000000'}, 'XAGUSD': {'b': '37.8380000000', 'o': '37.8310000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6040000000'}, 'GBPAUD': {'b': '2.0530200000',...
2025-07-15 21:57:34,862 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:57:35,690 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:35,692 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:36,700 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:36,705 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:37,229 - DEBUG - app.firebase_stream - Firebase listener triggered (47). Event Type: patch, Path: /. Timestamp: 1752641857.2293448
2025-07-15 21:57:37,230 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0137000000', 'o': '13.0081000000'}, 'GBPAUD': {'b': '2.0530300000', 'o': '2.0528800000'}, 'EURNZD': {'b': '1.9531300000', 'o': '1.9529200000'}, 'USDSGD': {'b': '1.2848200000', 'o'
2025-07-15 21:57:37,230 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0137000000', 'o': '13.0081000000'}, 'GBPAUD': {'b': '2.0530300000', 'o': '2.0528800000'}, 'EURNZD': {'b': '1.9531300000', 'o': '1.9529200000'}, 'USDSGD': {'b': '1.2848200000', 'o'...
2025-07-15 21:57:37,231 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:57:37,710 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:37,716 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:38,726 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:38,730 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:39,557 - DEBUG - app.firebase_stream - Firebase listener triggered (48). Event Type: patch, Path: /. Timestamp: 1752641859.557372
2025-07-15 21:57:39,557 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0134000000', 'o': '13.0080400000'}, 'XAGUSD': {'b': '37.8390000000', 'o': '37.8310000000'}, 'GBPAUD': {'b': '2.0530400000', 'o': '2.0528700000'}, 'USDJPY': {'b': '148.9400000000',
2025-07-15 21:57:39,558 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0134000000', 'o': '13.0080400000'}, 'XAGUSD': {'b': '37.8390000000', 'o': '37.8310000000'}, 'GBPAUD': {'b': '2.0530400000', 'o': '2.0528700000'}, 'USDJPY': {'b': '148.9400000000',...
2025-07-15 21:57:39,558 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:57:39,732 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:39,747 - DEBUG - app - Fetched 1 live users for Barclays margin check.
2025-07-15 21:57:39,747 - DEBUG - app - Checking user 14 (live)...
2025-07-15 21:57:39,753 - DEBUG - app - User 14 group 'Standard' sending_orders: barclays
2025-07-15 21:57:39,754 - DEBUG - app - User 14 free_margin: 9902.02, margin: 0.0
2025-07-15 21:57:39,761 - DEBUG - app - User 14 has 1 pending orders before filtering.
2025-07-15 21:57:39,761 - DEBUG - app - User 14 has 1 active pending orders after filtering.
2025-07-15 21:57:39,761 - INFO - app - [BarclaysMarginChecker] User 14: free_margin=9902.02, total_pending_margin=23519.73, num_pending_orders=1
2025-07-15 21:57:39,761 - DEBUG - app - User 14 total_pending_margin: 23519.73
2025-07-15 21:57:39,762 - INFO - app - [BarclaysMarginChecker] Considering cancellation: user 14, order 1000313-001, order_margin=23519.73, free_margin=9902.02, total_pending_margin=23519.73
2025-07-15 21:57:39,766 - WARNING - app - [BarclaysMarginChecker] Cancelling order 1000313-001 for user 14 (order_margin=23519.73) due to insufficient margin.
2025-07-15 21:57:39,790 - INFO - app.core.firebase - [FIREBASE] Payload being pushed to Firebase (all stringified): {'order_id': '1000313-001', 'cancel_id': '1000316-002', 'user_id': '14', 'order_type': 'BUY_LIMIT', 'timestamp': '2025-07-16T04:57:39.790600', 'status': 'CANCELLED', 'order_quantity': '1.00000000', 'order_status': 'CANCELLED-PROCESSING', 'contract_value': '1.00000000', 'cancel_message': 'Auto-cancelled due to insufficient margin', 'account_type': 'live'}
2025-07-15 21:57:40,102 - INFO - app.core.firebase - Order data (ID: 1000313-001) sent to Firebase successfully.
2025-07-15 21:57:40,133 - INFO - app - [BarclaysMarginChecker] Successfully cancelled order 1000313-001 for user 14
2025-07-15 21:57:40,139 - DEBUG - app - After cancellation, user 14 free_margin: 9902.02, total_pending_margin: 0
2025-07-15 21:57:41,163 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:41,166 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:41,818 - DEBUG - app.firebase_stream - Firebase listener triggered (49). Event Type: patch, Path: /. Timestamp: 1752641861.8184416
2025-07-15 21:57:41,818 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0135000000', 'o': '13.0097000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6070000000'}, 'GBPAUD': {'b': '2.0528400000', 'o': '2.0528200000'}, 'USDJPY': {'b': '148.9410000000',
2025-07-15 21:57:41,820 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0135000000', 'o': '13.0097000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6070000000'}, 'GBPAUD': {'b': '2.0528400000', 'o': '2.0528200000'}, 'USDJPY': {'b': '148.9410000000',...
2025-07-15 21:57:41,822 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:57:42,169 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:42,173 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:43,185 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:43,188 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:44,196 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 21:57:44,227 - DEBUG - app.firebase_stream - Firebase listener triggered (50). Event Type: patch, Path: /. Timestamp: 1752641864.2270591
2025-07-15 21:57:44,232 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 21:57:44,236 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0136000000', 'o': '13.0097000000'}, 'XAGUSD': {'b': '37.8430000000', 'o': '37.8360000000'}, 'NZDJPY': {'b': '88.6220000000', 'o': '88.6130000000'}, 'GBPAUD': {'b': '2.0528600000',
2025-07-15 21:57:44,237 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0136000000', 'o': '13.0097000000'}, 'XAGUSD': {'b': '37.8430000000', 'o': '37.8360000000'}, 'NZDJPY': {'b': '88.6220000000', 'o': '88.6130000000'}, 'GBPAUD': {'b': '2.0528600000',...
2025-07-15 21:57:44,238 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 21:57:45,167 - INFO - app - Application shutdown initiated
2025-07-15 21:57:45,167 - INFO - app - Scheduler shutdown completed
2025-07-15 21:57:45,875 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-07-15 21:57:46,403 - INFO - app.firebase_stream - Firebase listener closed.
2025-07-15 21:57:46,403 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-07-15 21:57:46,406 - INFO - app - Redis connection closed
2025-07-15 21:57:46,406 - INFO - app - Application shutdown completed
2025-07-15 22:02:51,201 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 22:02:51,236 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 22:02:51,260 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 22:02:51,261 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 22:02:51,800 - INFO - app - Application starting up - Trading system initialized
2025-07-15 22:02:51,800 - INFO - app - SL/TP Epsilon accuracy configured: 0.00001
2025-07-15 22:02:51,800 - INFO - app - Environment: DEVELOPMENT
2025-07-15 22:02:51,902 - INFO - app - Application startup initiated
2025-07-15 22:02:51,902 - INFO - app - Initializing core services...
2025-07-15 22:02:51,984 - INFO - app - Firebase initialized
2025-07-15 22:02:51,984 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-07-15 22:02:54,033 - INFO - app - Redis initialized
2025-07-15 22:02:54,037 - INFO - app - [SWAP] daily_swap_charge_job triggered
2025-07-15 22:02:54,039 - INFO - app - Scheduler initialized
2025-07-15 22:02:54,043 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-15 22:02:54,043 - DEBUG - app.firebase_stream - Successfully got running event loop in process_firebase_events task.
2025-07-15 22:02:54,044 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-07-15 22:02:55,244 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-07-15 22:02:55,259 - DEBUG - app.firebase_stream - Firebase listener triggered (1). Event Type: put, Path: /. Timestamp: 1752642175.2589896
2025-07-15 22:02:55,260 - DEBUG - app.firebase_stream - Prepared batch update for 48 symbols from root path for queue. Preview: {'AUDCAD': {'b': '0.8950000000', 'o': '0.8949700000'}, 'AUDCHF': {'b': '0.5230100000', 'o': '0.5229600000'}, 'AUDJPY': {'b': '97.1780000000', 'o': '97.1710000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'
2025-07-15 22:02:55,260 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'AUDCAD': {'b': '0.8950000000', 'o': '0.8949700000'}, 'AUDCHF': {'b': '0.5230100000', 'o': '0.5229600000'}, 'AUDJPY': {'b': '97.1780000000', 'o': '97.1710000000'}, 'AUDNZD': {'b': '1.0000000000', 'o'...
2025-07-15 22:02:55,261 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type put at path /.
2025-07-15 22:02:55,262 - INFO - app - Starting stale cache cleanup task
2025-07-15 22:02:55,760 - DEBUG - app.firebase_stream - Firebase listener triggered (2). Event Type: patch, Path: /. Timestamp: 1752642175.760132
2025-07-15 22:02:55,760 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0059100000'}, 'XAGUSD': {'b': '37.8470000000', 'o': '37.8430000000'}, 'NZDJPY': {'b': '88.6150000000', 'o': '88.6070000000'}, 'GBPAUD': {'b': '2.0528100000',
2025-07-15 22:02:55,761 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0059100000'}, 'XAGUSD': {'b': '37.8470000000', 'o': '37.8430000000'}, 'NZDJPY': {'b': '88.6150000000', 'o': '88.6070000000'}, 'GBPAUD': {'b': '2.0528100000',...
2025-07-15 22:02:55,761 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:02:58,115 - DEBUG - app.firebase_stream - Firebase listener triggered (3). Event Type: patch, Path: /. Timestamp: 1752642178.1151624
2025-07-15 22:02:58,115 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0060000000'}, 'NZDJPY': {'b': '88.6120000000', 'o': '88.6030000000'}, 'BTCUSD': {'b': '117674.5000000000', 'o': '117674.4000000000'}, 'USDJPY': {'b': '148.89
2025-07-15 22:02:58,115 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0060000000'}, 'NZDJPY': {'b': '88.6120000000', 'o': '88.6030000000'}, 'BTCUSD': {'b': '117674.5000000000', 'o': '117674.4000000000'}, 'USDJPY': {'b': '148.89...
2025-07-15 22:02:58,116 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:02:59,350 - INFO - app - Cleaned up pending order stream for new trigger price format
2025-07-15 22:02:59,350 - INFO - app - Background tasks initialized
2025-07-15 22:03:00,146 - INFO - app - Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-07-15 22:03:00,146 - INFO - app - Application startup completed successfully
2025-07-15 22:03:00,146 - INFO - app - Starting cache validation task
2025-07-15 22:03:00,149 - INFO - app - Starting Barclays pending order margin checker task.
2025-07-15 22:03:00,150 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:00,153 - INFO - app - Starting auto-cutoff order monitoring task.
2025-07-15 22:03:00,204 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:00,230 - INFO - app - Validating cache for 31 users
2025-07-15 22:03:00,370 - DEBUG - app.firebase_stream - Firebase listener triggered (4). Event Type: patch, Path: /. Timestamp: 1752642180.3707905
2025-07-15 22:03:00,371 - DEBUG - app.firebase_stream - Prepared batch update for 35 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.8480000000', 'o': '37.8430000000'}, 'NZDJPY': {'b': '88.6070000000', 'o': '88.5970000000'}, 'GBPAUD': {'b': '2.0528100000', 'o': '2.0526600000'}, 'USDJPY': {'b': '148.8910000000',
2025-07-15 22:03:00,371 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'XAGUSD': {'b': '37.8480000000', 'o': '37.8430000000'}, 'NZDJPY': {'b': '88.6070000000', 'o': '88.5970000000'}, 'GBPAUD': {'b': '2.0528100000', 'o': '2.0526600000'}, 'USDJPY': {'b': '148.8910000000',...
2025-07-15 22:03:00,372 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:03:01,234 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:01,238 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:02,196 - INFO - app - Found 24 static orders cache entries to check
2025-07-15 22:03:02,254 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:02,258 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:02,723 - DEBUG - app.firebase_stream - Firebase listener triggered (5). Event Type: patch, Path: /. Timestamp: 1752642182.7236416
2025-07-15 22:03:02,724 - DEBUG - app.firebase_stream - Prepared batch update for 36 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0061000000'}, 'XAGUSD': {'b': '37.8470000000', 'o': '37.8430000000'}, 'NZDJPY': {'b': '88.6060000000', 'o': '88.5990000000'}, 'GBPAUD': {'b': '2.0528100000',
2025-07-15 22:03:02,724 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 2. Data preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0061000000'}, 'XAGUSD': {'b': '37.8470000000', 'o': '37.8430000000'}, 'NZDJPY': {'b': '88.6060000000', 'o': '88.5990000000'}, 'GBPAUD': {'b': '2.0528100000',...
2025-07-15 22:03:02,724 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:03:03,267 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:03,272 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:04,220 - WARNING - app - User 4: Missing balance/margin cache, refreshing...
2025-07-15 22:03:04,278 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:04,287 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:05,041 - DEBUG - app.firebase_stream - Firebase listener triggered (6). Event Type: patch, Path: /. Timestamp: 1752642185.0414016
2025-07-15 22:03:05,041 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0121000000', 'o': '13.0067000000'}, 'NZDJPY': {'b': '88.6100000000', 'o': '88.6050000000'}, 'GBPAUD': {'b': '2.0528000000', 'o': '2.0526400000'}, 'USDJPY': {'b': '148.8980000000',
2025-07-15 22:03:05,042 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 2. Data preview: {'GBPSEK': {'b': '13.0121000000', 'o': '13.0067000000'}, 'NZDJPY': {'b': '88.6100000000', 'o': '88.6050000000'}, 'GBPAUD': {'b': '2.0528000000', 'o': '2.0526400000'}, 'USDJPY': {'b': '148.8980000000',...
2025-07-15 22:03:05,042 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:03:05,291 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:05,301 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:06,270 - WARNING - app - Found stale cache entry for user 2, will be refreshed on next access
2025-07-15 22:03:06,275 - WARNING - app - Found stale cache entry for user 3, will be refreshed on next access
2025-07-15 22:03:06,304 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:06,308 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:07,317 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:07,332 - DEBUG - app.firebase_stream - Firebase listener triggered (7). Event Type: patch, Path: /. Timestamp: 1752642187.3328586
2025-07-15 22:03:07,333 - DEBUG - app.firebase_stream - Prepared batch update for 38 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0057000000'}, 'NZDJPY': {'b': '88.6280000000', 'o': '88.6200000000'}, 'GBPAUD': {'b': '2.0527800000', 'o': '2.0526200000'}, 'USDJPY': {'b': '148.9070000000',
2025-07-15 22:03:07,333 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0057000000'}, 'NZDJPY': {'b': '88.6280000000', 'o': '88.6200000000'}, 'GBPAUD': {'b': '2.0527800000', 'o': '2.0526200000'}, 'USDJPY': {'b': '148.9070000000',...
2025-07-15 22:03:07,333 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:03:07,335 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:08,324 - WARNING - app - Found stale cache entry for user 17, will be refreshed on next access
2025-07-15 22:03:08,342 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:08,355 - WARNING - app - Found stale cache entry for user 18, will be refreshed on next access
2025-07-15 22:03:08,379 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:08,379 - WARNING - app - User 5: Missing balance/margin cache, refreshing...
2025-07-15 22:03:08,388 - WARNING - app - Found stale cache entry for user 23, will be refreshed on next access
2025-07-15 22:03:08,400 - WARNING - app - Found stale cache entry for user 19, will be refreshed on next access
2025-07-15 22:03:08,406 - WARNING - app - User 8: Missing balance/margin cache, refreshing...
2025-07-15 22:03:08,411 - WARNING - app - Found stale cache entry for user 8, will be refreshed on next access
2025-07-15 22:03:08,439 - WARNING - app - Found stale cache entry for user 5, will be refreshed on next access
2025-07-15 22:03:08,462 - WARNING - app - Found stale cache entry for user 24, will be refreshed on next access
2025-07-15 22:03:08,477 - WARNING - app - Found stale cache entry for user 13, will be refreshed on next access
2025-07-15 22:03:08,483 - WARNING - app - Found stale cache entry for user 16, will be refreshed on next access
2025-07-15 22:03:08,489 - WARNING - app - User 9: Missing balance/margin cache, refreshing...
2025-07-15 22:03:08,494 - WARNING - app - Found stale cache entry for user 25, will be refreshed on next access
2025-07-15 22:03:08,510 - WARNING - app - Found stale cache entry for user 12, will be refreshed on next access
2025-07-15 22:03:08,536 - WARNING - app - Found stale cache entry for user 21, will be refreshed on next access
2025-07-15 22:03:08,543 - WARNING - app - Found stale cache entry for user 22, will be refreshed on next access
2025-07-15 22:03:08,556 - WARNING - app - User 10: Missing balance/margin cache, refreshing...
2025-07-15 22:03:08,558 - WARNING - app - Found stale cache entry for user 14, will be refreshed on next access
2025-07-15 22:03:08,575 - WARNING - app - Found stale cache entry for user 6, will be refreshed on next access
2025-07-15 22:03:08,598 - WARNING - app - Found stale cache entry for user 20, will be refreshed on next access
2025-07-15 22:03:08,598 - INFO - app - Completed stale cache cleanup task
2025-07-15 22:03:09,401 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:09,405 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:09,688 - DEBUG - app.firebase_stream - Firebase listener triggered (8). Event Type: patch, Path: /. Timestamp: 1752642189.6885097
2025-07-15 22:03:09,689 - DEBUG - app.firebase_stream - Prepared batch update for 33 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0057400000'}, 'XAGUSD': {'b': '37.8470000000', 'o': '37.8400000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6060000000'}, 'GBPAUD': {'b': '2.0527800000',
2025-07-15 22:03:09,689 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0111000000', 'o': '13.0057400000'}, 'XAGUSD': {'b': '37.8470000000', 'o': '37.8400000000'}, 'NZDJPY': {'b': '88.6130000000', 'o': '88.6060000000'}, 'GBPAUD': {'b': '2.0527800000',...
2025-07-15 22:03:09,690 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:03:10,409 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:10,413 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:10,677 - WARNING - app - User 11: Missing balance/margin cache, refreshing...
2025-07-15 22:03:10,740 - WARNING - app - User 12: Missing balance/margin cache, refreshing...
2025-07-15 22:03:11,428 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:11,446 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:11,939 - DEBUG - app.firebase_stream - Firebase listener triggered (9). Event Type: patch, Path: /. Timestamp: 1752642191.9399183
2025-07-15 22:03:11,940 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0118000000', 'o': '13.0066000000'}, 'XAGUSD': {'b': '37.8480000000', 'o': '37.8400000000'}, 'NZDJPY': {'b': '88.6110000000', 'o': '88.6030000000'}, 'GBPAUD': {'b': '2.0527600000',
2025-07-15 22:03:11,940 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0118000000', 'o': '13.0066000000'}, 'XAGUSD': {'b': '37.8480000000', 'o': '37.8400000000'}, 'NZDJPY': {'b': '88.6110000000', 'o': '88.6030000000'}, 'GBPAUD': {'b': '2.0527600000',...
2025-07-15 22:03:11,941 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:03:12,461 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:12,465 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:12,840 - WARNING - app - User 13: Missing balance/margin cache, refreshing...
2025-07-15 22:03:12,893 - WARNING - app - User 16: Missing balance/margin cache, refreshing...
2025-07-15 22:03:13,480 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:13,484 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:14,297 - DEBUG - app.firebase_stream - Firebase listener triggered (10). Event Type: patch, Path: /. Timestamp: 1752642194.2977195
2025-07-15 22:03:14,298 - DEBUG - app.firebase_stream - Prepared batch update for 35 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.8470000000', 'o': '37.8400000000'}, 'NZDJPY': {'b': '88.6110000000', 'o': '88.6060000000'}, 'GBPAUD': {'b': '2.0527500000', 'o': '2.0525900000'}, 'BTCUSD': {'b': '117666.820000000
2025-07-15 22:03:14,298 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'XAGUSD': {'b': '37.8470000000', 'o': '37.8400000000'}, 'NZDJPY': {'b': '88.6110000000', 'o': '88.6060000000'}, 'GBPAUD': {'b': '2.0527500000', 'o': '2.0525900000'}, 'BTCUSD': {'b': '117666.820000000...
2025-07-15 22:03:14,298 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:03:14,487 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:14,491 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:14,992 - WARNING - app - User 17: Missing balance/margin cache, refreshing...
2025-07-15 22:03:15,163 - INFO - app - Starting stale cache cleanup task
2025-07-15 22:03:15,505 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:15,524 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:16,559 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:16,561 - DEBUG - app.firebase_stream - Firebase listener triggered (11). Event Type: patch, Path: /. Timestamp: 1752642196.561606
2025-07-15 22:03:16,562 - DEBUG - app.firebase_stream - Prepared batch update for 33 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0056000000'}, 'XAGUSD': {'b': '37.8480000000', 'o': '37.8430000000'}, 'NZDJPY': {'b': '88.6080000000', 'o': '88.5990000000'}, 'GBPAUD': {'b': '2.0528600000',
2025-07-15 22:03:16,563 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0056000000'}, 'XAGUSD': {'b': '37.8480000000', 'o': '37.8430000000'}, 'NZDJPY': {'b': '88.6080000000', 'o': '88.5990000000'}, 'GBPAUD': {'b': '2.0528600000',...
2025-07-15 22:03:16,563 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:03:16,565 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:17,090 - INFO - app - Found 24 static orders cache entries to check
2025-07-15 22:03:17,096 - WARNING - app - User 18: Missing balance/margin cache, refreshing...
2025-07-15 22:03:17,110 - WARNING - app - Found stale cache entry for user 2, will be refreshed on next access
2025-07-15 22:03:17,114 - WARNING - app - Found stale cache entry for user 3, will be refreshed on next access
2025-07-15 22:03:17,567 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:17,571 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:18,585 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:18,589 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:18,921 - DEBUG - app.firebase_stream - Firebase listener triggered (12). Event Type: patch, Path: /. Timestamp: 1752642198.9215868
2025-07-15 22:03:18,922 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0055000000'}, 'XAGUSD': {'b': '37.8470000000', 'o': '37.8400000000'}, 'NZDJPY': {'b': '88.6070000000', 'o': '88.5980000000'}, 'GBPAUD': {'b': '2.0528100000',
2025-07-15 22:03:18,924 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0055000000'}, 'XAGUSD': {'b': '37.8470000000', 'o': '37.8400000000'}, 'NZDJPY': {'b': '88.6070000000', 'o': '88.5980000000'}, 'GBPAUD': {'b': '2.0528100000',...
2025-07-15 22:03:18,924 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:03:19,169 - WARNING - app - Found stale cache entry for user 17, will be refreshed on next access
2025-07-15 22:03:19,181 - WARNING - app - Found stale cache entry for user 18, will be refreshed on next access
2025-07-15 22:03:19,194 - WARNING - app - Found stale cache entry for user 23, will be refreshed on next access
2025-07-15 22:03:19,197 - WARNING - app - User 19: Missing balance/margin cache, refreshing...
2025-07-15 22:03:19,202 - WARNING - app - Found stale cache entry for user 19, will be refreshed on next access
2025-07-15 22:03:19,210 - WARNING - app - Found stale cache entry for user 8, will be refreshed on next access
2025-07-15 22:03:19,227 - WARNING - app - Found stale cache entry for user 5, will be refreshed on next access
2025-07-15 22:03:19,234 - WARNING - app - Found stale cache entry for user 24, will be refreshed on next access
2025-07-15 22:03:19,240 - WARNING - app - Found stale cache entry for user 13, will be refreshed on next access
2025-07-15 22:03:19,252 - WARNING - app - Found stale cache entry for user 16, will be refreshed on next access
2025-07-15 22:03:19,255 - WARNING - app - User 20: Missing balance/margin cache, refreshing...
2025-07-15 22:03:19,257 - WARNING - app - Found stale cache entry for user 25, will be refreshed on next access
2025-07-15 22:03:19,266 - WARNING - app - Found stale cache entry for user 12, will be refreshed on next access
2025-07-15 22:03:19,289 - WARNING - app - Found stale cache entry for user 21, will be refreshed on next access
2025-07-15 22:03:19,297 - WARNING - app - Found stale cache entry for user 22, will be refreshed on next access
2025-07-15 22:03:19,299 - WARNING - app - Found stale cache entry for user 14, will be refreshed on next access
2025-07-15 22:03:19,305 - WARNING - app - Found stale cache entry for user 6, will be refreshed on next access
2025-07-15 22:03:19,307 - WARNING - app - User 21: Missing balance/margin cache, refreshing...
2025-07-15 22:03:19,308 - WARNING - app - Found stale cache entry for user 20, will be refreshed on next access
2025-07-15 22:03:19,309 - INFO - app - Completed stale cache cleanup task
2025-07-15 22:03:19,343 - WARNING - app - User 22: Missing balance/margin cache, refreshing...
2025-07-15 22:03:19,388 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 14
2025-07-15 22:03:19,390 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 14
2025-07-15 22:03:19,395 - DEBUG - app.api.v1.endpoints.users - Comparing Redis user_id (type: <class 'int'>, value: 14) with decoded user_id (type: <class 'str'>, value: 14)
2025-07-15 22:03:19,395 - INFO - app.api.v1.endpoints.users - Refresh token validated successfully for user ID: 14
2025-07-15 22:03:19,397 - DEBUG - app.api.v1.endpoints.users - Comparing Redis user_id (type: <class 'int'>, value: 14) with decoded user_id (type: <class 'str'>, value: 14)
2025-07-15 22:03:19,397 - INFO - app.api.v1.endpoints.users - Refresh token validated successfully for user ID: 14
2025-07-15 22:03:19,400 - WARNING - app - User 23: Missing balance/margin cache, refreshing...
2025-07-15 22:03:19,445 - INFO - app.api.v1.endpoints.users - New access and refresh tokens generated for user ID 14 using refresh token.
2025-07-15 22:03:19,446 - INFO - app.api.v1.endpoints.users - New access and refresh tokens generated for user ID 14 using refresh token.
2025-07-15 22:03:19,488 - WARNING - app - User 24: Missing balance/margin cache, refreshing...
2025-07-15 22:03:19,600 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:19,618 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:19,619 - WARNING - app - User 25: Missing balance/margin cache, refreshing...
2025-07-15 22:03:19,671 - WARNING - app - User 26: Missing balance/margin cache, refreshing...
2025-07-15 22:03:19,718 - WARNING - app - User 1: Missing balance/margin cache, refreshing...
2025-07-15 22:03:19,769 - WARNING - app - User 2: Missing balance/margin cache, refreshing...
2025-07-15 22:03:19,817 - WARNING - app - User 3: Missing balance/margin cache, refreshing...
2025-07-15 22:03:19,873 - WARNING - app - User 5: Missing balance/margin cache, refreshing...
2025-07-15 22:03:19,909 - WARNING - app - User 6: Missing balance/margin cache, refreshing...
2025-07-15 22:03:19,997 - INFO - app - Cache validation completed
2025-07-15 22:03:20,659 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:20,662 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:21,254 - DEBUG - app.firebase_stream - Firebase listener triggered (13). Event Type: patch, Path: /. Timestamp: 1752642201.2541735
2025-07-15 22:03:21,254 - DEBUG - app.firebase_stream - Prepared batch update for 30 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0109000000', 'o': '13.0054000000'}, 'NZDJPY': {'b': '88.6050000000', 'o': '88.5960000000'}, 'GBPAUD': {'b': '2.0528900000', 'o': '2.0527100000'}, 'BTCUSD': {'b': '117647.300000000
2025-07-15 22:03:21,255 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0109000000', 'o': '13.0054000000'}, 'NZDJPY': {'b': '88.6050000000', 'o': '88.5960000000'}, 'GBPAUD': {'b': '2.0528900000', 'o': '2.0527100000'}, 'BTCUSD': {'b': '117647.300000000...
2025-07-15 22:03:21,256 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:03:21,666 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:21,668 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:21,724 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 22:03:21,724 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 22:03:21,763 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 22:03:21,768 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 22:03:21,785 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 22:03:21,812 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 22:03:21,840 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-07-15 22:03:22,063 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 22:03:22,076 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 22:03:22,104 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 22:03:22,104 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 22:03:22,106 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 22:03:22,108 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 22:03:22,109 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 22:03:22,114 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 22:03:22,114 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 22:03:22,124 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 22:03:22,124 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 22:03:22,132 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 22:03:22,133 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 22:03:22,134 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 22:03:22,135 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 22:03:22,140 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 22:03:22,142 - INFO - app.core.config - .env file loaded successfully.
2025-07-15 22:03:22,172 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 22:03:22,172 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 22:03:22,174 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-07-15 22:03:22,175 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-07-15 22:03:22,670 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:22,673 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:23,511 - DEBUG - app.firebase_stream - Firebase listener triggered (14). Event Type: patch, Path: /. Timestamp: 1752642203.5111332
2025-07-15 22:03:23,511 - DEBUG - app.firebase_stream - Prepared batch update for 34 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0060000000'}, 'NZDJPY': {'b': '88.6040000000', 'o': '88.5960000000'}, 'GBPAUD': {'b': '2.0529100000', 'o': '2.0527900000'}, 'USDJPY': {'b': '148.9030000000',
2025-07-15 22:03:23,512 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0060000000'}, 'NZDJPY': {'b': '88.6040000000', 'o': '88.5960000000'}, 'GBPAUD': {'b': '2.0529100000', 'o': '2.0527900000'}, 'USDJPY': {'b': '148.9030000000',...
2025-07-15 22:03:23,513 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:03:23,675 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:23,679 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:24,711 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:24,730 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:25,172 - INFO - app.core.firebase - [FIREBASE] Payload being pushed to Firebase (all stringified): {'order_id': '1000317-001', 'order_company_name': 'BTCUSD', 'order_price': '111.0', 'contract_value': '1.0', 'order_quantity': '1.0', 'order_type': 'BUY_LIMIT', 'order_status': 'PENDING-PROCESSING', 'status': 'PENDING', 'action': 'place_pending_order', 'account_type': 'live', 'timestamp': '2025-07-16T05:03:25.172748'}
2025-07-15 22:03:25,546 - INFO - app.core.firebase - Order data (ID: 1000317-001) sent to Firebase successfully.
2025-07-15 22:03:25,738 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:25,743 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:25,875 - DEBUG - app.firebase_stream - Firebase listener triggered (15). Event Type: patch, Path: /. Timestamp: 1752642205.875714
2025-07-15 22:03:25,877 - DEBUG - app.firebase_stream - Prepared batch update for 29 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0055000000'}, 'NZDJPY': {'b': '88.6050000000', 'o': '88.5960000000'}, 'GBPAUD': {'b': '2.0529700000', 'o': '2.0528100000'}, 'USDJPY': {'b': '148.8920000000',
2025-07-15 22:03:25,880 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0110000000', 'o': '13.0055000000'}, 'NZDJPY': {'b': '88.6050000000', 'o': '88.5960000000'}, 'GBPAUD': {'b': '2.0529700000', 'o': '2.0528100000'}, 'USDJPY': {'b': '148.8920000000',...
2025-07-15 22:03:25,881 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:03:26,748 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:26,754 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:27,759 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:27,768 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:28,157 - DEBUG - app.firebase_stream - Firebase listener triggered (16). Event Type: patch, Path: /. Timestamp: 1752642208.1574838
2025-07-15 22:03:28,158 - DEBUG - app.firebase_stream - Prepared batch update for 35 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0062000000'}, 'XAGUSD': {'b': '37.8480000000', 'o': '37.8430000000'}, 'NZDJPY': {'b': '88.5970000000', 'o': '88.5870000000'}, 'GBPAUD': {'b': '2.0529600000',
2025-07-15 22:03:28,158 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0062000000'}, 'XAGUSD': {'b': '37.8480000000', 'o': '37.8430000000'}, 'NZDJPY': {'b': '88.5970000000', 'o': '88.5870000000'}, 'GBPAUD': {'b': '2.0529600000',...
2025-07-15 22:03:28,159 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:03:28,776 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:28,781 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:29,792 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:29,796 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:30,793 - DEBUG - app.firebase_stream - Firebase listener triggered (17). Event Type: patch, Path: /. Timestamp: 1752642210.7933567
2025-07-15 22:03:30,793 - DEBUG - app.firebase_stream - Prepared batch update for 38 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0060000000'}, 'XAGUSD': {'b': '37.8470000000', 'o': '37.8420000000'}, 'NZDJPY': {'b': '88.5970000000', 'o': '88.5880000000'}, 'GBPAUD': {'b': '2.0529900000',
2025-07-15 22:03:30,794 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0113000000', 'o': '13.0060000000'}, 'XAGUSD': {'b': '37.8470000000', 'o': '37.8420000000'}, 'NZDJPY': {'b': '88.5970000000', 'o': '88.5880000000'}, 'GBPAUD': {'b': '2.0529900000',...
2025-07-15 22:03:30,794 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:03:30,816 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:30,853 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:31,870 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:31,875 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:32,883 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:32,894 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:33,038 - DEBUG - app.firebase_stream - Firebase listener triggered (18). Event Type: patch, Path: /. Timestamp: 1752642213.0384138
2025-07-15 22:03:33,039 - DEBUG - app.firebase_stream - Prepared batch update for 37 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0059000000'}, 'XAGUSD': {'b': '37.8430000000', 'o': '37.8330000000'}, 'NZDJPY': {'b': '88.5940000000', 'o': '88.5870000000'}, 'GBPAUD': {'b': '2.0527800000',
2025-07-15 22:03:33,040 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0114000000', 'o': '13.0059000000'}, 'XAGUSD': {'b': '37.8430000000', 'o': '37.8330000000'}, 'NZDJPY': {'b': '88.5940000000', 'o': '88.5870000000'}, 'GBPAUD': {'b': '2.0527800000',...
2025-07-15 22:03:33,040 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:03:33,912 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:33,917 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:34,930 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:34,936 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:35,466 - DEBUG - app.firebase_stream - Firebase listener triggered (19). Event Type: patch, Path: /. Timestamp: 1752642215.4661984
2025-07-15 22:03:35,468 - DEBUG - app.firebase_stream - Prepared batch update for 32 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0060000000'}, 'XAGUSD': {'b': '37.8420000000', 'o': '37.8380000000'}, 'NZDJPY': {'b': '88.5940000000', 'o': '88.5840000000'}, 'GBPAUD': {'b': '2.0529700000',
2025-07-15 22:03:35,471 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0115000000', 'o': '13.0060000000'}, 'XAGUSD': {'b': '37.8420000000', 'o': '37.8380000000'}, 'NZDJPY': {'b': '88.5940000000', 'o': '88.5840000000'}, 'GBPAUD': {'b': '2.0529700000',...
2025-07-15 22:03:35,472 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:03:35,941 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:35,975 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:36,982 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:36,988 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:37,705 - DEBUG - app.firebase_stream - Firebase listener triggered (20). Event Type: patch, Path: /. Timestamp: 1752642217.7058392
2025-07-15 22:03:37,713 - DEBUG - app.firebase_stream - Prepared batch update for 22 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0120000000', 'o': '13.0067000000'}, 'GBPAUD': {'b': '2.0529700000', 'o': '2.0528500000'}, 'USDCNH': {'b': '7.1838200000', 'o': '7.1837400000'}, 'CADCHF': {'b': '0.5843300000', 'o'
2025-07-15 22:03:37,714 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0120000000', 'o': '13.0067000000'}, 'GBPAUD': {'b': '2.0529700000', 'o': '2.0528500000'}, 'USDCNH': {'b': '7.1838200000', 'o': '7.1837400000'}, 'CADCHF': {'b': '0.5843300000', 'o'...
2025-07-15 22:03:37,715 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:03:37,998 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:38,010 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:38,039 - INFO - app.core.firebase - [FIREBASE] Payload being pushed to Firebase (all stringified): {'order_id': '1000320-001', 'user_id': '14', 'order_company_name': 'AUDJPY', 'order_type': 'SELL', 'order_quantity': '0.01', 'price': '97.14', 'status': 'OPEN', 'contract_value': '1000.0', 'account_type': 'live', 'timestamp': '2025-07-16T05:03:38.039122'}
2025-07-15 22:03:38,344 - INFO - app.core.firebase - Order data (ID: 1000320-001) sent to Firebase successfully.
2025-07-15 22:03:39,029 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:39,036 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:40,041 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:40,048 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:40,429 - DEBUG - app.firebase_stream - Firebase listener triggered (21). Event Type: patch, Path: /. Timestamp: 1752642220.4291832
2025-07-15 22:03:40,429 - DEBUG - app.firebase_stream - Prepared batch update for 35 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0117000000', 'o': '13.0061000000'}, 'XAGUSD': {'b': '37.8430000000', 'o': '37.8380000000'}, 'NZDJPY': {'b': '88.5930000000', 'o': '88.5860000000'}, 'GBPAUD': {'b': '2.0529600000',
2025-07-15 22:03:40,430 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0117000000', 'o': '13.0061000000'}, 'XAGUSD': {'b': '37.8430000000', 'o': '37.8380000000'}, 'NZDJPY': {'b': '88.5930000000', 'o': '88.5860000000'}, 'GBPAUD': {'b': '2.0529600000',...
2025-07-15 22:03:40,430 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:03:41,051 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:41,056 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:41,629 - INFO - app.core.firebase - [FIREBASE] Payload being pushed to Firebase (all stringified): {'order_id': '1000321-001', 'user_id': '14', 'order_company_name': 'AUDJPY', 'order_type': 'BUY', 'order_quantity': '0.01', 'price': '97.172', 'status': 'OPEN', 'contract_value': '1000.0', 'account_type': 'live', 'timestamp': '2025-07-16T05:03:41.629752'}
2025-07-15 22:03:41,956 - INFO - app.core.firebase - Order data (ID: 1000321-001) sent to Firebase successfully.
2025-07-15 22:03:42,071 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:42,085 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:42,295 - DEBUG - app.firebase_stream - Firebase listener triggered (22). Event Type: patch, Path: /. Timestamp: 1752642222.2950363
2025-07-15 22:03:42,296 - DEBUG - app.firebase_stream - Prepared batch update for 25 symbols from root path for queue. Preview: {'XAGUSD': {'b': '37.8420000000', 'o': '37.8380000000'}, 'NZDJPY': {'b': '88.5930000000', 'o': '88.5850000000'}, 'GBPAUD': {'b': '2.0529900000', 'o': '2.0528900000'}, 'BTCUSD': {'b': '117670.800000000
2025-07-15 22:03:42,297 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 1. Data preview: {'XAGUSD': {'b': '37.8420000000', 'o': '37.8380000000'}, 'NZDJPY': {'b': '88.5930000000', 'o': '88.5850000000'}, 'GBPAUD': {'b': '2.0529900000', 'o': '2.0528900000'}, 'BTCUSD': {'b': '117670.800000000...
2025-07-15 22:03:42,297 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:03:43,104 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:43,110 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:44,114 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:44,121 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:44,660 - DEBUG - app.firebase_stream - Firebase listener triggered (23). Event Type: patch, Path: /. Timestamp: 1752642224.6603026
2025-07-15 22:03:44,661 - DEBUG - app.firebase_stream - Prepared batch update for 31 symbols from root path for queue. Preview: {'GBPSEK': {'b': '13.0119000000', 'o': '13.0066000000'}, 'NZDJPY': {'b': '88.5940000000', 'o': '88.5860000000'}, 'GBPAUD': {'b': '2.0530800000', 'o': '2.0529300000'}, 'USDJPY': {'b': '148.8970000000',
2025-07-15 22:03:44,663 - DEBUG - app.firebase_stream - Successfully queued data for path '/'. Queue size (approx): 0. Data preview: {'GBPSEK': {'b': '13.0119000000', 'o': '13.0066000000'}, 'NZDJPY': {'b': '88.5940000000', 'o': '88.5860000000'}, 'GBPAUD': {'b': '2.0530800000', 'o': '2.0529300000'}, 'USDJPY': {'b': '148.8970000000',...
2025-07-15 22:03:44,666 - DEBUG - app.firebase_stream - Firebase listener callback finished for event type patch at path /.
2025-07-15 22:03:45,136 - DEBUG - app - BarclaysMarginChecker heartbeat: loop is alive
2025-07-15 22:03:45,162 - DEBUG - app - Fetched 0 live users for Barclays margin check.
2025-07-15 22:03:45,839 - INFO - app - Application shutdown initiated
2025-07-15 22:03:45,840 - INFO - app - Scheduler shutdown completed
2025-07-15 22:03:45,841 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-07-15 22:03:46,949 - INFO - app.firebase_stream - Firebase listener closed.
2025-07-15 22:03:46,949 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-07-15 22:03:46,969 - INFO - app - Redis connection closed
2025-07-15 22:03:46,970 - INFO - app - Application shutdown completed
